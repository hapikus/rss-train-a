import{a as Xe,b as Je}from"./chunk-EWQNCL4D.js";import{B as Ue,Da as Ge,Ea as Ke,Ha as Be,Ia as X,Qa as Ye,Va as J,Zb as it,b as We,bb as E,cb as Z,db as ee,eb as te,g as Ze,jb as Qe,k as Ve,kb as qe,sa as pe,u as W,ya as q,yb as et,zb as tt}from"./chunk-AJSIW5UZ.js";import{d as Ae,p as je,q as $e,s as Le,t as He}from"./chunk-PQGTFRF3.js";import{Cb as ne,Db as Ee,G as $,Gb as I,Ha as Se,Hb as be,Ia as C,Ib as m,Ja as S,Jb as N,K as L,Kb as D,M as ye,Oa as P,R as K,Ra as M,Rb as Q,Rc as _,Sa as Ie,Tb as oe,Ua as _e,Ub as se,Vb as re,Wb as p,Wc as Oe,Xb as f,Yb as d,Zb as ae,_b as ce,a as g,ac as R,b as ue,bc as ke,da as we,ea as v,f as G,fc as y,ga as Ce,gc as xe,hc as u,ic as Pe,jc as Me,kb as Te,la as k,lb as De,ma as B,mc as le,n as z,nc as he,o as ve,ob as c,oc as me,pb as h,qa as w,qc as Ne,ra as T,t as j,tc as Re,w as ze,wa as x,xa as Y,xc as Fe,ya as H,yc as F}from"./chunk-26O7SS3C.js";var yt=["*"],wt=["imgRef"],Ct=["imagePreviewWrapper"];function St(n,i){if(n&1){let s=R();p(0,"div",13),y("click",function(t){C(s);let o=u();return S(o.onSwitchLeft(t))}),d(1,"span",14),f(),p(2,"div",15),y("click",function(t){C(s);let o=u();return S(o.onSwitchRight(t))}),d(3,"span",16),f()}if(n&2){let s=u();D("ant-image-preview-switch-left-disabled",s.index<=0),c(2),D("ant-image-preview-switch-right-disabled",s.index>=s.images.length-1)}}function It(n,i){if(n&1&&(p(0,"li",5),Ne(1),f()),n&2){let s=u();c(),Re("",s.index+1," / ",s.images.length,"")}}function _t(n,i){if(n&1){let s=R();p(0,"li",17),y("click",function(){let t=C(s).$implicit;return S(t.onClick())}),d(1,"span",18),f()}if(n&2){let s,e=i.$implicit,t=u();D("ant-image-preview-operations-operation-disabled",t.zoomOutDisabled&&e.type==="zoomOut"),c(),m("nzType",e.icon)("nzRotate",(s=e.rotate)!==null&&s!==void 0?s:0)}}function Tt(n,i){if(n&1&&d(0,"img",20,1),n&2){let s=u().$implicit,e=u();N("width",s.width)("height",s.height)("transform",e.previewImageTransform),be("src",e.sanitizerResourceUrl(s.src),De)("srcset",s.srcset)("alt",s.alt)}}function Dt(n,i){if(n&1&&I(0,Tt,2,9,"img",19),n&2){let s=i.$index,e=u();Q(s===e.index?0:-1)}}var Et=(()=>{let i=class i{constructor(){this.nzScaleStep=null,this.images=[]}addImage(e){this.images.push(e)}};i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=x({type:i,selectors:[["nz-image-group"]],inputs:{nzScaleStep:"nzScaleStep"},exportAs:["nzImageGroup"],standalone:!0,features:[F],ngContentSelectors:yt,decls:1,vars:0,template:function(t,o){t&1&&(Pe(),Me(0))},encapsulation:2,changeDetection:0});let n=i;return n})();var lt="image";function bt(n){let i={};return n.width<=n.clientWidth&&n.height<=n.clientHeight&&(i={x:0,y:0}),(n.width>n.clientWidth||n.height>n.clientHeight)&&(i={x:rt(n.left,n.width,n.clientWidth),y:rt(n.top,n.height,n.clientHeight)}),i}function kt(n){let i=n.getBoundingClientRect(),s=document.documentElement;return{left:i.left+(window.pageXOffset||s.scrollLeft)-(s.clientLeft||document.body.clientLeft||0),top:i.top+(window.pageYOffset||s.scrollTop)-(s.clientTop||document.body.clientTop||0)}}function xt(){let n=document.documentElement.clientWidth,i=window.innerHeight||document.documentElement.clientHeight;return{width:n,height:i}}function rt(n,i,s){let e=n+i,t=(i-s)/2,o=null;return i>s?(n>0&&(o=t),n<0&&e<s&&(o=-t)):(n<0||e>s)&&(o=n<0?t:-t),o}var V=class{constructor(){this.nzKeyboard=!0,this.nzNoAnimation=!1,this.nzMaskClosable=!0,this.nzCloseOnNavigation=!0}},at={x:0,y:0},de=.5,Pt=1,Mt=0,ht=(()=>{let i=class i{get animationDisabled(){return this.config.nzNoAnimation??!1}get maskClosable(){let e=this.nzConfigService.getConfigForComponent(lt)||{};return this.config.nzMaskClosable??e.nzMaskClosable??!0}constructor(e,t,o,r,l,a){this.ngZone=e,this.cdr=t,this.nzConfigService=o,this.config=r,this.destroy$=l,this.sanitizer=a,this._defaultNzZoom=Pt,this._defaultNzScaleStep=de,this._defaultNzRotate=Mt,this.images=[],this.index=0,this.isDragging=!1,this.visible=!0,this.animationStateChanged=new M,this.scaleStepMap=new Map,this.previewImageTransform="",this.previewImageWrapperTransform="",this.operations=[{icon:"close",onClick:()=>{this.onClose()},type:"close"},{icon:"zoom-in",onClick:()=>{this.onZoomIn()},type:"zoomIn"},{icon:"zoom-out",onClick:()=>{this.onZoomOut()},type:"zoomOut"},{icon:"rotate-right",onClick:()=>{this.onRotateRight()},type:"rotateRight"},{icon:"rotate-left",onClick:()=>{this.onRotateLeft()},type:"rotateLeft"},{icon:"swap",onClick:()=>{this.onHorizontalFlip()},type:"flipHorizontally"},{icon:"swap",onClick:()=>{this.onVerticalFlip()},type:"flipVertically",rotate:90}],this.zoomOutDisabled=!1,this.position=g({},at),this.closeClick=new M,this.zoom=this.config.nzZoom??this._defaultNzZoom,this.scaleStep=this.config.nzScaleStep??this._defaultNzScaleStep,this.rotate=this.config.nzRotate??this._defaultNzRotate,this.flipHorizontally=this.config.nzFlipHorizontally??!1,this.flipVertically=this.config.nzFlipVertically??!1,this.updateZoomOutDisabled(),this.updatePreviewImageTransform(),this.updatePreviewImageWrapperTransform()}ngOnInit(){this.ngZone.runOutsideAngular(()=>{$(this.imagePreviewWrapper.nativeElement,"mousedown").pipe(v(this.destroy$)).subscribe(()=>{this.isDragging=!0}),$(this.imagePreviewWrapper.nativeElement,"wheel").pipe(v(this.destroy$)).subscribe(e=>{this.ngZone.run(()=>this.wheelZoomEventHandler(e))})})}setImages(e,t){t&&(this.scaleStepMap=t),this.images=e,this.markForCheck()}switchTo(e){this.index=e,this.markForCheck()}next(){this.index<this.images.length-1&&(this.reset(),this.index++,this.updatePreviewImageTransform(),this.updatePreviewImageWrapperTransform(),this.updateZoomOutDisabled(),this.markForCheck())}prev(){this.index>0&&(this.reset(),this.index--,this.updatePreviewImageTransform(),this.updatePreviewImageWrapperTransform(),this.updateZoomOutDisabled(),this.markForCheck())}markForCheck(){this.cdr.markForCheck()}onClose(){this.visible=!1,this.closeClick.emit()}onZoomIn(){let e=this.scaleStepMap.get(this.images[this.index].src??this.images[this.index].srcset)??this.scaleStep;this.zoom+=e,this.updatePreviewImageTransform(),this.updateZoomOutDisabled()}onZoomOut(){if(this.zoom>1){let e=this.scaleStepMap.get(this.images[this.index].src??this.images[this.index].srcset)??this.scaleStep;this.zoom-=e,this.updatePreviewImageTransform(),this.updateZoomOutDisabled(),this.zoom<=1&&this.reCenterImage()}}onRotateRight(){this.rotate+=90,this.updatePreviewImageTransform()}onRotateLeft(){this.rotate-=90,this.updatePreviewImageTransform()}onSwitchLeft(e){e.preventDefault(),e.stopPropagation(),this.prev()}onSwitchRight(e){e.preventDefault(),e.stopPropagation(),this.next()}onHorizontalFlip(){this.flipHorizontally=!this.flipHorizontally,this.updatePreviewImageTransform()}onVerticalFlip(){this.flipVertically=!this.flipVertically,this.updatePreviewImageTransform()}wheelZoomEventHandler(e){e.preventDefault(),e.stopPropagation(),this.handlerImageTransformationWhileZoomingWithMouse(e,e.deltaY),this.handleImageScaleWhileZoomingWithMouse(e.deltaY),this.updatePreviewImageWrapperTransform(),this.updatePreviewImageTransform(),this.markForCheck()}onAnimationStart(e){this.animationStateChanged.emit(e)}onAnimationDone(e){this.animationStateChanged.emit(e)}onDragEnd(e){this.isDragging=!1;let t=this.imageRef.nativeElement.offsetWidth*this.zoom,o=this.imageRef.nativeElement.offsetHeight*this.zoom,{left:r,top:l}=kt(this.imageRef.nativeElement),{width:a,height:b}=xt(),U=this.rotate%180!==0,A=bt({width:U?o:t,height:U?t:o,left:r,top:l,clientWidth:a,clientHeight:b});W(A.x)||W(A.y)?this.position=g(g({},this.position),A):!W(A.x)&&!W(A.y)&&(this.position={x:e.source.getFreeDragPosition().x,y:e.source.getFreeDragPosition().y})}sanitizerResourceUrl(e){return this.sanitizer.bypassSecurityTrustResourceUrl(e)}updatePreviewImageTransform(){this.previewImageTransform=`scale3d(${this.zoom*(this.flipHorizontally?-1:1)}, ${this.zoom*(this.flipVertically?-1:1)}, 1) rotate(${this.rotate}deg)`}updatePreviewImageWrapperTransform(){this.previewImageWrapperTransform=`translate3d(${this.position.x}px, ${this.position.y}px, 0)`}updateZoomOutDisabled(){this.zoomOutDisabled=this.zoom<=1}handlerImageTransformationWhileZoomingWithMouse(e,t){let o,r=this.imageRef.nativeElement,a=getComputedStyle(r).transform.match(/matrix.*\((.+)\)/);a?o=+a[1].split(", ")[0]:o=this.zoom;let b=(e.clientX-r.getBoundingClientRect().x)/o,U=(e.clientY-r.getBoundingClientRect().y)/o,O=t<0?this.scaleStep/2:-this.scaleStep/2;this.position.x+=-b*O*2+r.offsetWidth*O,this.position.y+=-U*O*2+r.offsetHeight*O}handleImageScaleWhileZoomingWithMouse(e){this.isZoomedInWithMouseWheel(e)?this.onZoomIn():this.onZoomOut(),this.zoom<=1&&this.reCenterImage()}isZoomedInWithMouseWheel(e){return e<0}reset(){this.zoom=this.config.nzZoom??this._defaultNzZoom,this.scaleStep=this.config.nzScaleStep??this._defaultNzScaleStep,this.rotate=this.config.nzRotate??this._defaultNzRotate,this.flipHorizontally=!1,this.flipVertically=!1,this.reCenterImage()}reCenterImage(){this.position=g({},at)}};i.\u0275fac=function(t){return new(t||i)(h(Ie),h(_),h(E),h(V),h(J),h(Ze))},i.\u0275cmp=x({type:i,selectors:[["nz-image-preview"]],viewQuery:function(t,o){if(t&1&&(le(wt,5),le(Ct,7)),t&2){let r;he(r=me())&&(o.imageRef=r.first),he(r=me())&&(o.imagePreviewWrapper=r.first)}},hostAttrs:[1,"ant-image-preview-root"],hostVars:6,hostBindings:function(t,o){t&1&&xe("@fadeMotion.start",function(l){return o.onAnimationStart(l)})("@fadeMotion.done",function(l){return o.onAnimationDone(l)}),t&2&&(ke("@.disabled",o.config.nzNoAnimation)("@fadeMotion",o.visible?"enter":"leave"),N("z-index",o.config.nzZIndex),D("ant-image-preview-moving",o.isDragging))},exportAs:["nzImagePreview"],standalone:!0,features:[Fe([J]),F],decls:17,vars:5,consts:[["imagePreviewWrapper",""],["imgRef",""],[1,"ant-image-preview-mask"],[1,"ant-image-preview-operations-wrapper"],[1,"ant-image-preview-operations"],[1,"ant-image-preview-operations-progress"],[1,"ant-image-preview-operations-operation",3,"ant-image-preview-operations-operation-disabled"],["tabindex","-1",1,"ant-image-preview-wrap",3,"click"],["role","dialog","aria-modal","true",1,"ant-image-preview"],["tabindex","0","aria-hidden","true",2,"width","0","height","0","overflow","hidden","outline","none"],[1,"ant-image-preview-content"],[1,"ant-image-preview-body"],["cdkDrag","",1,"ant-image-preview-img-wrapper",3,"cdkDragEnded","cdkDragFreeDragPosition"],[1,"ant-image-preview-switch-left",3,"click"],["nz-icon","","nzType","left","nzTheme","outline"],[1,"ant-image-preview-switch-right",3,"click"],["nz-icon","","nzType","right","nzTheme","outline"],[1,"ant-image-preview-operations-operation",3,"click"],["nz-icon","","nzTheme","outline",1,"ant-image-preview-operations-icon",3,"nzType","nzRotate"],["cdkDragHandle","",1,"ant-image-preview-img",3,"width","height","transform"],["cdkDragHandle","",1,"ant-image-preview-img"]],template:function(t,o){if(t&1){let r=R();d(0,"div",2),p(1,"div",3),I(2,St,4,4),p(3,"ul",4),I(4,It,2,2,"li",5),se(5,_t,2,4,"li",6,oe),f()(),p(7,"div",7),y("click",function(a){return C(r),S(o.maskClosable&&a.target===a.currentTarget&&o.onClose())}),p(8,"div",8),d(9,"div",9),p(10,"div",10)(11,"div",11)(12,"div",12,0),y("cdkDragEnded",function(a){return C(r),S(o.onDragEnd(a))}),se(14,Dt,1,1,null,null,oe),f()()(),d(16,"div",9),f()()}t&2&&(c(2),Q(o.images.length>1?2:-1),c(2),Q(o.images.length>1?4:-1),c(),re(o.operations),c(7),N("transform",o.previewImageWrapperTransform),m("cdkDragFreeDragPosition",o.position),c(2),re(o.images))},dependencies:[te,ee,Xe,Je],encapsulation:2,data:{animation:[et]},changeDetection:0});let n=i;return n})(),ge=class{constructor(i,s,e){this.previewInstance=i,this.config=s,this.overlayRef=e,this.destroy$=new z,e.keydownEvents().pipe(L(t=>this.config.nzKeyboard&&(t.keyCode===27||t.keyCode===37||t.keyCode===39)&&!Ge(t))).subscribe(t=>{t.preventDefault(),t.keyCode===27&&i.onClose(),t.keyCode===37&&this.prev(),t.keyCode===39&&this.next()}),e.detachments().subscribe(()=>{this.overlayRef.dispose()}),i.closeClick.pipe(K(1),we(()=>i.animationStateChanged),L(t=>t.phaseName==="done"),v(this.destroy$)).subscribe(()=>{this.close()})}switchTo(i){this.previewInstance.switchTo(i)}next(){this.previewInstance.next()}prev(){this.previewInstance.prev()}close(){this.destroy$.next(),this.overlayRef.dispose()}},mt=(()=>{let i=class i{constructor(e,t,o,r){this.overlay=e,this.injector=t,this.nzConfigService=o,this.directionality=r}preview(e,t,o){return this.display(e,t,o)}display(e,t,o){let r=g(g({},new V),t??{}),l=this.createOverlay(r),a=this.attachPreviewComponent(l,r);a.setImages(e,o);let b=new ge(a,r,l);return a.previewRef=b,b}attachPreviewComponent(e,t){let o=P.create({parent:this.injector,providers:[{provide:Be,useValue:e},{provide:V,useValue:t}]}),r=new q(ht,null,o);return e.attach(r).instance}createOverlay(e){let t=this.nzConfigService.getConfigForComponent(lt)||{},o=new Ke({scrollStrategy:this.overlay.scrollStrategies.block(),positionStrategy:this.overlay.position().global(),disposeOnNavigation:e.nzCloseOnNavigation??t.nzCloseOnNavigation??!0,direction:e.nzDirection||t.nzDirection||this.directionality.value});return this.overlay.create(o)}};i.\u0275fac=function(t){return new(t||i)(w(X),w(P),w(E),w(pe))},i.\u0275prov=k({token:i,factory:i.\u0275fac});let n=i;return n})(),Nt="image",fi=(()=>{let i=class i{get previewable(){return!this.nzDisablePreview&&this.status!=="error"}constructor(e,t,o,r,l){this.nzConfigService=e,this.elementRef=t,this.nzImageService=o,this.cdr=r,this.directionality=l,this._nzModuleName=Nt,this.nzSrc="",this.nzSrcset="",this.nzDisablePreview=!1,this.nzFallback=null,this.nzPlaceholder=null,this.nzScaleStep=null,this.status="normal",this.backLoadDestroy$=new z,this.destroy$=new z,this.document=T(Ae),this.parentGroup=T(Et,{optional:!0})}ngOnInit(){this.backLoad(),this.parentGroup&&this.parentGroup.addImage(this),this.directionality&&(this.directionality.change?.pipe(v(this.destroy$)).subscribe(e=>{this.dir=e,this.cdr.detectChanges()}),this.dir=this.directionality.value)}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}onPreview(){if(this.previewable)if(this.parentGroup){let e=this.parentGroup.images.filter(a=>a.previewable),t=e.map(a=>({src:a.nzSrc,srcset:a.nzSrcset})),o=e.findIndex(a=>this===a),r=new Map;e.forEach(a=>{r.set(a.nzSrc??a.nzSrcset,a.nzScaleStep??this.parentGroup.nzScaleStep??this.nzScaleStep??de)}),this.nzImageService.preview(t,{nzDirection:this.dir},r).switchTo(o)}else{let e=[{src:this.nzSrc,srcset:this.nzSrcset}];this.nzImageService.preview(e,{nzDirection:this.dir,nzScaleStep:this.nzScaleStep??de})}}getElement(){return this.elementRef}ngOnChanges(e){let{nzSrc:t}=e;t&&(this.getElement().nativeElement.src=t.currentValue,this.backLoad())}backLoad(){this.backLoadImage=this.document.createElement("img"),this.backLoadImage.src=this.nzSrc,this.backLoadImage.srcset=this.nzSrcset,this.status="loading",this.backLoadDestroy$.next(),this.backLoadDestroy$.complete(),this.backLoadDestroy$=new z,this.backLoadImage.complete?(this.status="normal",this.getElement().nativeElement.src=this.nzSrc,this.getElement().nativeElement.srcset=this.nzSrcset):(this.nzPlaceholder?(this.getElement().nativeElement.src=this.nzPlaceholder,this.getElement().nativeElement.srcset=""):(this.getElement().nativeElement.src=this.nzSrc,this.getElement().nativeElement.srcset=this.nzSrcset),$(this.backLoadImage,"load").pipe(v(this.backLoadDestroy$),v(this.destroy$)).subscribe(()=>{this.status="normal",this.getElement().nativeElement.src=this.nzSrc,this.getElement().nativeElement.srcset=this.nzSrcset}),$(this.backLoadImage,"error").pipe(v(this.backLoadDestroy$),v(this.destroy$)).subscribe(()=>{this.status="error",this.nzFallback&&(this.getElement().nativeElement.src=this.nzFallback,this.getElement().nativeElement.srcset="")}))}};i.\u0275fac=function(t){return new(t||i)(h(E),h(_e),h(mt),h(_),h(pe))},i.\u0275dir=H({type:i,selectors:[["img","nz-image",""]],hostBindings:function(t,o){t&1&&y("click",function(){return o.onPreview()})},inputs:{nzSrc:"nzSrc",nzSrcset:"nzSrcset",nzDisablePreview:[2,"nzDisablePreview","nzDisablePreview",Oe],nzFallback:"nzFallback",nzPlaceholder:"nzPlaceholder",nzScaleStep:"nzScaleStep"},exportAs:["nzImage"],standalone:!0,features:[Ee,Se]});let n=i;return j([Z()],n.prototype,"nzDisablePreview",void 0),j([Z()],n.prototype,"nzFallback",void 0),j([Z()],n.prototype,"nzPlaceholder",void 0),j([Z()],n.prototype,"nzScaleStep",void 0),n})(),ui=(()=>{let i=class i{};i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=Y({type:i}),i.\u0275inj=B({providers:[mt],imports:[ht]});let n=i;return n})();function Rt(n,i){n&1&&d(0,"span",10)}function Ft(n,i){n&1&&d(0,"span",11)}function Ot(n,i){n&1&&d(0,"span",12)}function At(n,i){n&1&&d(0,"span",13)}function jt(n,i){n&1&&d(0,"span",14)}function $t(n,i){if(n&1&&(ae(0),d(1,"span",15),ce()),n&2){let s=u();c(),m("innerHTML",s.instance.content,Te)}}function Lt(n,i){if(n&1){let s=R();p(0,"nz-message",2),y("destroyed",function(t){C(s);let o=u();return S(o.remove(t.id,t.userAction))}),f()}if(n&2){let s=i.$implicit;m("instance",s)}}var Ht=0,fe=class{constructor(i,s,e){this.nzSingletonService=i,this.overlay=s,this.injector=e}remove(i){this.container&&(i?this.container.remove(i):this.container.removeAll())}getInstanceId(){return`${this.componentPrefix}-${Ht++}`}withContainer(i){let s=this.nzSingletonService.getSingletonWithKey(this.componentPrefix);if(s)return s;let e=this.overlay.create({hasBackdrop:!1,scrollStrategy:this.overlay.scrollStrategies.noop(),positionStrategy:this.overlay.position().global()}),t=new q(i,null,this.injector),o=e.attach(t),r=e.hostElement;return r.style.zIndex="1010",s||(this.container=s=o.instance,this.nzSingletonService.registerSingletonWithKey(this.componentPrefix,s),this.container.afterAllInstancesRemoved.subscribe(()=>{this.container=void 0,this.nzSingletonService.unregisterSingletonWithKey(this.componentPrefix),e.dispose()})),s}},Wt=(()=>{let i=class i{constructor(e,t){this.cdr=e,this.nzConfigService=t,this.instances=[],this._afterAllInstancesRemoved=new z,this.afterAllInstancesRemoved=this._afterAllInstancesRemoved.asObservable(),this.destroy$=new z,this.updateConfig()}ngOnInit(){this.subscribeConfigChange()}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}create(e){let t=this.onCreate(e);return this.instances.length>=this.config.nzMaxStack&&(this.instances=this.instances.slice(1)),this.instances=[...this.instances,t],this.readyInstances(),t}remove(e,t=!1){this.instances.map((o,r)=>({index:r,instance:o})).filter(({instance:o})=>o.messageId===e).forEach(({index:o,instance:r})=>{this.instances.splice(o,1),this.instances=[...this.instances],this.onRemove(r,t),this.readyInstances()}),this.instances.length||this.onAllInstancesRemoved()}removeAll(){this.instances.forEach(e=>this.onRemove(e,!1)),this.instances=[],this.readyInstances(),this.onAllInstancesRemoved()}onCreate(e){return e.options=this.mergeOptions(e.options),e.onClose=new z,e}onRemove(e,t){e.onClose.next(t),e.onClose.complete()}onAllInstancesRemoved(){this._afterAllInstancesRemoved.next(),this._afterAllInstancesRemoved.complete()}readyInstances(){this.cdr.detectChanges()}mergeOptions(e){let{nzDuration:t,nzAnimate:o,nzPauseOnHover:r}=this.config;return g({nzDuration:t,nzAnimate:o,nzPauseOnHover:r},e)}};i.\u0275fac=function(t){return new(t||i)(h(_),h(E))},i.\u0275dir=H({type:i});let n=i;return n})(),Zt=(()=>{let i=class i{constructor(e){this.cdr=e,this.destroyed=new M,this.animationStateChanged=new z,this.userAction=!1}ngOnInit(){this.options=this.instance.options,this.options.nzAnimate&&(this.instance.state="enter",this.animationStateChanged.pipe(L(e=>e.phaseName==="done"&&e.toState==="leave"),K(1)).subscribe(()=>{clearTimeout(this.closeTimer),this.destroyed.next({id:this.instance.messageId,userAction:this.userAction})})),this.autoClose=this.options.nzDuration>0,this.autoClose&&(this.initErase(),this.startEraseTimeout())}ngOnDestroy(){this.autoClose&&this.clearEraseTimeout(),this.animationStateChanged.complete()}onEnter(){this.autoClose&&this.options.nzPauseOnHover&&(this.clearEraseTimeout(),this.updateTTL())}onLeave(){this.autoClose&&this.options.nzPauseOnHover&&this.startEraseTimeout()}destroy(e=!1){this.userAction=e,this.options.nzAnimate?(this.instance.state="leave",this.cdr.detectChanges(),this.closeTimer=setTimeout(()=>{this.closeTimer=void 0,this.destroyed.next({id:this.instance.messageId,userAction:e})},200)):this.destroyed.next({id:this.instance.messageId,userAction:e})}initErase(){this.eraseTTL=this.options.nzDuration,this.eraseTimingStart=Date.now()}updateTTL(){this.autoClose&&(this.eraseTTL-=Date.now()-this.eraseTimingStart)}startEraseTimeout(){this.eraseTTL>0?(this.clearEraseTimeout(),this.eraseTimer=setTimeout(()=>this.destroy(),this.eraseTTL),this.eraseTimingStart=Date.now()):this.destroy()}clearEraseTimeout(){this.eraseTimer!==null&&(clearTimeout(this.eraseTimer),this.eraseTimer=void 0)}};i.\u0275fac=function(t){return new(t||i)(h(_))},i.\u0275dir=H({type:i});let n=i;return n})(),pt=(()=>{let i=class i extends Zt{constructor(e){super(e),this.destroyed=new M}};i.\u0275fac=function(t){return new(t||i)(h(_))},i.\u0275cmp=x({type:i,selectors:[["nz-message"]],inputs:{instance:"instance"},outputs:{destroyed:"destroyed"},exportAs:["nzMessage"],standalone:!0,features:[ne,F],decls:10,vars:9,consts:[[1,"ant-message-notice",3,"mouseenter","mouseleave"],[1,"ant-message-notice-content"],[1,"ant-message-custom-content",3,"ngClass"],[3,"ngSwitch"],["nz-icon","","nzType","check-circle",4,"ngSwitchCase"],["nz-icon","","nzType","info-circle",4,"ngSwitchCase"],["nz-icon","","nzType","exclamation-circle",4,"ngSwitchCase"],["nz-icon","","nzType","close-circle",4,"ngSwitchCase"],["nz-icon","","nzType","loading",4,"ngSwitchCase"],[4,"nzStringTemplateOutlet"],["nz-icon","","nzType","check-circle"],["nz-icon","","nzType","info-circle"],["nz-icon","","nzType","exclamation-circle"],["nz-icon","","nzType","close-circle"],["nz-icon","","nzType","loading"],[3,"innerHTML"]],template:function(t,o){t&1&&(p(0,"div",0),y("@moveUpMotion.done",function(l){return o.animationStateChanged.next(l)})("mouseenter",function(){return o.onEnter()})("mouseleave",function(){return o.onLeave()}),p(1,"div",1)(2,"div",2),ae(3,3),I(4,Rt,1,0,"span",4)(5,Ft,1,0,"span",5)(6,Ot,1,0,"span",6)(7,At,1,0,"span",7)(8,jt,1,0,"span",8),ce(),I(9,$t,2,1,"ng-container",9),f()()()),t&2&&(m("@moveUpMotion",o.instance.state),c(2),m("ngClass","ant-message-"+o.instance.type),c(),m("ngSwitch",o.instance.type),c(),m("ngSwitchCase","success"),c(),m("ngSwitchCase","info"),c(),m("ngSwitchCase","warning"),c(),m("ngSwitchCase","error"),c(),m("ngSwitchCase","loading"),c(),m("nzStringTemplateOutlet",o.instance.content))},dependencies:[je,Le,He,te,ee,qe,Qe],encapsulation:2,data:{animation:[tt]},changeDetection:0});let n=i;return n})(),ie="message",Vt={nzAnimate:!0,nzDuration:3e3,nzMaxStack:7,nzPauseOnHover:!0,nzTop:24,nzDirection:"ltr"},dt=(()=>{let i=class i extends Wt{constructor(e,t){super(e,t),this.dir="ltr";let o=this.nzConfigService.getConfigForComponent(ie);this.dir=o?.nzDirection||"ltr"}subscribeConfigChange(){this.nzConfigService.getConfigChangeEventForComponent(ie).pipe(v(this.destroy$)).subscribe(()=>{this.updateConfig();let e=this.nzConfigService.getConfigForComponent(ie);if(e){let{nzDirection:t}=e;this.dir=t||this.dir}})}updateConfig(){this.config=g(g(g({},Vt),this.config),this.nzConfigService.getConfigForComponent(ie)),this.top=Ue(this.config.nzTop),this.cdr.markForCheck()}};i.\u0275fac=function(t){return new(t||i)(h(_),h(E))},i.\u0275cmp=x({type:i,selectors:[["nz-message-container"]],exportAs:["nzMessageContainer"],standalone:!0,features:[ne,F],decls:2,vars:5,consts:[[1,"ant-message"],[3,"instance","destroyed",4,"ngFor","ngForOf"],[3,"destroyed","instance"]],template:function(t,o){t&1&&(p(0,"div",0),I(1,Lt,1,1,"nz-message",1),f()),t&2&&(N("top",o.top),D("ant-message-rtl",o.dir==="rtl"),c(),m("ngForOf",o.instances))},dependencies:[pt,$e],encapsulation:2,changeDetection:0});let n=i;return n})(),Ai=(()=>{let i=class i{};i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=Y({type:i}),i.\u0275inj=B({imports:[dt,pt]});let n=i;return n})(),ji=(()=>{let i=class i extends fe{constructor(e,t,o){super(e,t,o),this.componentPrefix="message-"}success(e,t){return this.createInstance({type:"success",content:e},t)}error(e,t){return this.createInstance({type:"error",content:e},t)}info(e,t){return this.createInstance({type:"info",content:e},t)}warning(e,t){return this.createInstance({type:"warning",content:e},t)}loading(e,t){return this.createInstance({type:"loading",content:e},t)}create(e,t,o){return this.createInstance({type:e,content:t},o)}createInstance(e,t){return this.container=this.withContainer(dt),this.container.create(ue(g({},e),{createdAt:new Date,messageId:this.getInstanceId(),options:t}))}};i.\u0275fac=function(t){return new(t||i)(w(Ye),w(X),w(P))},i.\u0275prov=k({token:i,factory:i.\u0275fac,providedIn:"root"});let n=i;return n})();var gt=class{static emailValidation(){return i=>/^[\w\d_]+@[\w\d_]+\.\w{2,7}$/.test(i.value)?null:{invalidEmail:!0}}};var Yi=(()=>{let i=class i{constructor(){this.http=T(We),this.router=T(Ve),this.apiService=T(it),this.apiUrl="/api/signin",this.TOKEN_KEY="token",this.roleSubject=new ve("guest"),this.role$=this.roleSubject.asObservable(),this.isManager=!1}login(e,t){return this.http.post(this.apiUrl,{email:e,password:t}).pipe(Ce(o=>{localStorage.setItem(this.TOKEN_KEY,o.token),this.updateRole()}),ye(o=>{let r=this.getErrorMessage(o);return ze(()=>new Error(r))}))}logout(){return G(this,null,function*(){(yield this.apiService.logout())&&(localStorage.removeItem(this.TOKEN_KEY),this.roleSubject.next("guest"),this.router.navigate(["/"]))})}updateRole(){return G(this,null,function*(){let e=yield this.apiService.fetchProfile(),{role:t}=e;this.isManager=t==="manager",this.roleSubject.next(t)})}getProfile(){return G(this,null,function*(){let e=yield this.apiService.fetchProfile();return this.isManager=e.role==="manager",e})}isAuthenticated(){return!!localStorage.getItem(this.TOKEN_KEY)}getErrorMessage(e){if(e.status===400&&e.error?.reason)switch(e.error.reason){case"invalidFields":return"Fields are empty";case"invalidEmail":return"Email is wrong";case"userNotFound":return"Incorrect email or password";case"alreadyLoggedIn":return"Authorization error";default:return"Incorrect email or password"}return"An unknown error occurred!"}};i.\u0275fac=function(t){return new(t||i)},i.\u0275prov=k({token:i,factory:i.\u0275fac,providedIn:"root"});let n=i;return n})();export{fi as a,ui as b,Ai as c,ji as d,gt as e,Yi as f};
