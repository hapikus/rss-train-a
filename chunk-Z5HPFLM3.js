import{a as bt,b as _t,c as vt,d as xt,e as Mt,f as _e}from"./chunk-RYUHB3BB.js";import{a as Ft,b as Ot,c as Tt,d as Pt}from"./chunk-2POXYK6G.js";import{b as St,d as yt}from"./chunk-SUYZW3TD.js";import{a as Dt,b as ve}from"./chunk-NGRBF5RY.js";import{g as me}from"./chunk-EWQNCL4D.js";import{$ as G,Fb as je,Gb as fe,Hb as $e,Ib as Ge,M as Z,Ob as he,Pb as ze,Qb as ge,Rb as Ce,Sb as be,Va as de,X as ct,Xb as Nt,Yb as It,Z as ft,Zb as wt,_ as K,aa as ne,db as M,ea as ht,eb as F,fa as oe,fb as P,ga as re,gb as pe,hb as D,i as pt,ib as A,ja as se,jb as gt,k as mt,kb as Ct,l as ut,la as ae,ma as zt,na as le,qb as Be,sa as Ve,tb as ue,u as ie,ub as ce}from"./chunk-AJSIW5UZ.js";import{p as lt,w as dt}from"./chunk-PQGTFRF3.js";import{B as qe,Bb as it,Cc as ee,Db as Pe,G as k,Gb as z,Gc as Re,Ha as U,Hb as nt,Ia as C,Ib as m,J as we,Ja as b,Kb as R,Ra as Fe,Rb as h,Rc as Ee,Sa as tt,Sb as X,Tb as ot,U as Me,Ua as Oe,Ub as V,Vb as B,Wb as p,Wc as $,Xb as u,Xc as te,Yb as c,Yc as v,Zb as rt,_b as st,a as Ne,ac as N,ca as We,da as Ze,ea as w,f as y,fc as g,hc as l,ic as De,jc as Ae,ka as Ke,la as Je,lc as at,ma as Xe,mc as Y,n as Ie,nc as q,ob as d,oc as W,pb as f,pc as j,qa as Ye,qc as I,ra as Q,rc as O,vb as Te,wa as x,xa as et,xc as ke,yc as S,z as Ue}from"./chunk-26O7SS3C.js";var Ut=["upHandler"],qt=["downHandler"],Wt=["inputElement"];function Zt(n,o){if(n&1&&c(0,"nz-form-item-feedback-icon",10),n&2){let r=l();m("status",r.status)}}var Kt=["nz-input-number-group-slot",""],kt=["*"];function Jt(n,o){if(n&1&&c(0,"span",0),n&2){let r=l();m("nzType",r.icon)}}function Xt(n,o){if(n&1&&(rt(0),I(1),st()),n&2){let r=l();d(),O(r.template)}}function Yt(n,o){if(n&1&&c(0,"div",3),n&2){let r=l(2);m("icon",r.nzAddOnBeforeIcon)("template",r.nzAddOnBefore)}}function ei(n,o){}function ti(n,o){if(n&1&&(p(0,"div",6),z(1,ei,0,0,"ng-template",5),u()),n&2){let r=l(2),e=j(3);R("ant-input-number-affix-wrapper-disabled",r.disabled)("ant-input-number-affix-wrapper-sm",r.isSmall)("ant-input-number-affix-wrapper-lg",r.isLarge)("ant-input-number-affix-wrapper-focused",r.focused),m("ngClass",r.affixInGroupStatusCls),d(),m("ngTemplateOutlet",e)}}function ii(n,o){}function ni(n,o){if(n&1&&z(0,ii,0,0,"ng-template",5),n&2){l(2);let r=j(5);m("ngTemplateOutlet",r)}}function oi(n,o){if(n&1&&c(0,"span",3),n&2){let r=l(2);m("icon",r.nzAddOnAfterIcon)("template",r.nzAddOnAfter)}}function ri(n,o){if(n&1&&(p(0,"span",2),z(1,Yt,1,2,"div",3)(2,ti,2,10,"div",4)(3,ni,1,1,null,5)(4,oi,1,2,"span",3),u()),n&2){let r=l();d(),h(r.nzAddOnBefore||r.nzAddOnBeforeIcon?1:-1),d(),h(r.isAffix||r.hasFeedback?2:3),d(2),h(r.nzAddOnAfter||r.nzAddOnAfterIcon?4:-1)}}function si(n,o){}function ai(n,o){if(n&1&&z(0,si,0,0,"ng-template",5),n&2){l(2);let r=j(3);m("ngTemplateOutlet",r)}}function li(n,o){}function di(n,o){if(n&1&&z(0,li,0,0,"ng-template",5),n&2){l(2);let r=j(5);m("ngTemplateOutlet",r)}}function pi(n,o){if(n&1&&z(0,ai,1,1,null,5)(1,di,1,1,null,5),n&2){let r=l();h(r.isAffix?0:1)}}function mi(n,o){if(n&1&&c(0,"span",7),n&2){let r=l(2);m("icon",r.nzPrefixIcon)("template",r.nzPrefix)}}function ui(n,o){}function ci(n,o){if(n&1&&c(0,"nz-form-item-feedback-icon",9),n&2){let r=l(3);m("status",r.status)}}function fi(n,o){if(n&1&&(p(0,"span",8),z(1,ci,1,1,"nz-form-item-feedback-icon",9),u()),n&2){let r=l(2);m("icon",r.nzSuffixIcon)("template",r.nzSuffix),d(),h(r.isFeedback?1:-1)}}function hi(n,o){if(n&1&&z(0,mi,1,2,"span",7)(1,ui,0,0,"ng-template",5)(2,fi,2,3,"span",8),n&2){let r=l(),e=j(5);h(r.nzPrefix||r.nzPrefixIcon?0:-1),d(),m("ngTemplateOutlet",e),d(),h(r.nzSuffix||r.nzSuffixIcon||r.isFeedback?2:-1)}}function zi(n,o){if(n&1&&c(0,"nz-form-item-feedback-icon",9),n&2){let r=l(3);m("status",r.status)}}function gi(n,o){if(n&1&&(p(0,"span",10),z(1,zi,1,1,"nz-form-item-feedback-icon",9),u()),n&2){let r=l(2);d(),h(r.isFeedback?1:-1)}}function Ci(n,o){if(n&1&&(Ae(0),z(1,gi,2,1,"span",10)),n&2){let r=l();d(),h(!r.isAddOn&&!r.isAffix&&r.isFeedback?1:-1)}}var Se=(()=>{let o=class o{onModelChange(e){this.parsedValue=this.nzParser(e),this.inputElement.nativeElement.value=`${this.parsedValue}`;let t=this.getCurrentValidValue(this.parsedValue);this.setValue(t)}getCurrentValidValue(e){let t=e;return t===""?t="":this.isNotCompleteNumber(t)?t=this.value:t=`${this.getValidValue(t)}`,this.toNumber(t)}isNotCompleteNumber(e){return isNaN(e)||e===""||e===null||!!(e&&e.toString().indexOf(".")===e.toString().length-1)}getValidValue(e){let t=parseFloat(e);return isNaN(t)?e:(t<this.nzMin&&(t=this.nzMin),t>this.nzMax&&(t=this.nzMax),t)}toNumber(e){if(this.isNotCompleteNumber(e))return e;let t=String(e);if(t.indexOf(".")>=0&&ie(this.nzPrecision)){if(typeof this.nzPrecisionMode=="function")return this.nzPrecisionMode(e,this.nzPrecision);if(this.nzPrecisionMode==="cut"){let i=t.split(".");return i[1]=i[1].slice(0,this.nzPrecision),Number(i.join("."))}return Number(Number(e).toFixed(this.nzPrecision))}return Number(e)}getRatio(e){let t=1;return e.metaKey||e.ctrlKey?t=.1:e.shiftKey&&(t=10),t}down(e,t){this.isFocused||this.focus(),this.step("down",e,t)}up(e,t){this.isFocused||this.focus(),this.step("up",e,t)}getPrecision(e){let t=e.toString();if(t.indexOf("e-")>=0)return parseInt(t.slice(t.indexOf("e-")+2),10);let i=0;return t.indexOf(".")>=0&&(i=t.length-t.indexOf(".")-1),i}getMaxPrecision(e,t){if(ie(this.nzPrecision))return this.nzPrecision;let i=this.getPrecision(t),s=this.getPrecision(this.nzStep),a=this.getPrecision(e);return e?Math.max(a,i+s):i+s}getPrecisionFactor(e,t){let i=this.getMaxPrecision(e,t);return Math.pow(10,i)}upStep(e,t){let i=this.getPrecisionFactor(e,t),s=Math.abs(this.getMaxPrecision(e,t)),a;return typeof e=="number"?a=((i*e+i*this.nzStep*t)/i).toFixed(s):a=this.nzMin===-1/0?this.nzStep:this.nzMin,this.toNumber(a)}downStep(e,t){let i=this.getPrecisionFactor(e,t),s=Math.abs(this.getMaxPrecision(e,t)),a;return typeof e=="number"?a=((i*e-i*this.nzStep*t)/i).toFixed(s):a=this.nzMin===-1/0?-this.nzStep:this.nzMin,this.toNumber(a)}step(e,t,i=1){if(this.stop(),t.preventDefault(),this.nzDisabled)return;let s=this.getCurrentValidValue(this.parsedValue)||0,a=0;e==="up"?a=this.upStep(s,i):e==="down"&&(a=this.downStep(s,i));let _=a>this.nzMax||a<this.nzMin;a>this.nzMax?a=this.nzMax:a<this.nzMin&&(a=this.nzMin),this.setValue(a),this.updateDisplayValue(a),this.isFocused=!0,!_&&(this.autoStepTimer=setTimeout(()=>{this[e](t,i)},300))}stop(){this.autoStepTimer&&clearTimeout(this.autoStepTimer)}setValue(e){if(`${this.value}`!=`${e}`&&this.onChange(e),this.value=e,this.parsedValue=e,this.disabledUp=this.disabledDown=!1,e||e===0){let t=Number(e);t>=this.nzMax&&(this.disabledUp=!0),t<=this.nzMin&&(this.disabledDown=!0)}}updateDisplayValue(e){let t=ie(this.nzFormatter(e))?this.nzFormatter(e):"";this.displayValue=t,this.inputElement.nativeElement.value=`${t}`}writeValue(e){this.value=e,this.setValue(e),this.updateDisplayValue(e),this.cdr.markForCheck()}registerOnChange(e){this.onChange=e}registerOnTouched(e){this.onTouched=e}setDisabledState(e){this.nzDisabled=this.isNzDisableFirstChange&&this.nzDisabled||e,this.isNzDisableFirstChange=!1,this.disabled$.next(this.nzDisabled),this.cdr.markForCheck()}focus(){this.focusMonitor.focusVia(this.inputElement,"keyboard")}blur(){this.inputElement.nativeElement.blur()}constructor(e,t,i,s,a,_,L){this.ngZone=e,this.elementRef=t,this.cdr=i,this.focusMonitor=s,this.renderer=a,this.directionality=_,this.destroy$=L,this.isNzDisableFirstChange=!0,this.isFocused=!1,this.disabled$=new Ie,this.disabledUp=!1,this.disabledDown=!1,this.dir="ltr",this.prefixCls="ant-input-number",this.status="",this.statusCls={},this.hasFeedback=!1,this.onChange=()=>{},this.onTouched=()=>{},this.nzBlur=new Fe,this.nzFocus=new Fe,this.nzSize="default",this.nzMin=-1/0,this.nzMax=1/0,this.nzParser=E=>E.trim().replace(/ã€‚/g,".").replace(/[^\w\.-]+/g,""),this.nzPrecisionMode="toFixed",this.nzPlaceHolder="",this.nzStatus="",this.nzStep=1,this.nzInputMode="decimal",this.nzId=null,this.nzDisabled=!1,this.nzReadOnly=!1,this.nzAutoFocus=!1,this.nzBorderless=!1,this.nzFormatter=E=>E,this.nzFormStatusService=Q(je,{optional:!0}),this.nzFormNoStatusService=Q(fe,{optional:!0})}ngOnInit(){this.nzFormStatusService?.formStatusChanges.pipe(Me((e,t)=>e.status===t.status&&e.hasFeedback===t.hasFeedback),w(this.destroy$)).subscribe(({status:e,hasFeedback:t})=>{this.setStatusStyles(e,t)}),this.focusMonitor.monitor(this.elementRef,!0).pipe(w(this.destroy$)).subscribe(e=>{e?(this.isFocused=!0,this.nzFocus.emit()):(this.isFocused=!1,this.updateDisplayValue(this.value),this.nzBlur.emit(),Promise.resolve().then(()=>this.onTouched()))}),this.dir=this.directionality.value,this.directionality.change.pipe(w(this.destroy$)).subscribe(e=>{this.dir=e}),this.setupHandlersListeners(),this.ngZone.runOutsideAngular(()=>{k(this.inputElement.nativeElement,"keyup").pipe(w(this.destroy$)).subscribe(()=>this.stop()),k(this.inputElement.nativeElement,"keydown").pipe(w(this.destroy$)).subscribe(e=>{let{keyCode:t}=e;t!==38&&t!==40&&t!==13||this.ngZone.run(()=>{if(t===38){let i=this.getRatio(e);this.up(e,i),this.stop()}else if(t===40){let i=this.getRatio(e);this.down(e,i),this.stop()}else this.updateDisplayValue(this.value);this.cdr.markForCheck()})})})}ngOnChanges(e){let{nzStatus:t,nzDisabled:i}=e;if(e.nzFormatter&&!e.nzFormatter.isFirstChange()){let s=this.getCurrentValidValue(this.parsedValue);this.setValue(s),this.updateDisplayValue(s)}i&&this.disabled$.next(this.nzDisabled),t&&this.setStatusStyles(this.nzStatus,this.hasFeedback)}ngAfterViewInit(){this.nzAutoFocus&&this.focus()}ngOnDestroy(){this.focusMonitor.stopMonitoring(this.elementRef)}setupHandlersListeners(){this.ngZone.runOutsideAngular(()=>{we(k(this.upHandler.nativeElement,"mouseup"),k(this.upHandler.nativeElement,"mouseleave"),k(this.downHandler.nativeElement,"mouseup"),k(this.downHandler.nativeElement,"mouseleave")).pipe(w(this.destroy$)).subscribe(()=>this.stop())})}setStatusStyles(e,t){this.status=e,this.hasFeedback=t,this.cdr.markForCheck(),this.statusCls=Z(this.prefixCls,e,t),Object.keys(this.statusCls).forEach(i=>{this.statusCls[i]?this.renderer.addClass(this.elementRef.nativeElement,i):this.renderer.removeClass(this.elementRef.nativeElement,i)})}};o.\u0275fac=function(t){return new(t||o)(f(tt),f(Oe),f(Ee),f(Be),f(Te),f(Ve),f(de))},o.\u0275cmp=x({type:o,selectors:[["nz-input-number"]],viewQuery:function(t,i){if(t&1&&(Y(Ut,7),Y(qt,7),Y(Wt,7)),t&2){let s;q(s=W())&&(i.upHandler=s.first),q(s=W())&&(i.downHandler=s.first),q(s=W())&&(i.inputElement=s.first)}},hostAttrs:[1,"ant-input-number"],hostVars:16,hostBindings:function(t,i){t&2&&R("ant-input-number-in-form-item",!!i.nzFormStatusService)("ant-input-number-focused",i.isFocused)("ant-input-number-lg",i.nzSize==="large")("ant-input-number-sm",i.nzSize==="small")("ant-input-number-disabled",i.nzDisabled)("ant-input-number-readonly",i.nzReadOnly)("ant-input-number-rtl",i.dir==="rtl")("ant-input-number-borderless",i.nzBorderless)},inputs:{nzSize:"nzSize",nzMin:[2,"nzMin","nzMin",te],nzMax:[2,"nzMax","nzMax",te],nzParser:"nzParser",nzPrecision:"nzPrecision",nzPrecisionMode:"nzPrecisionMode",nzPlaceHolder:"nzPlaceHolder",nzStatus:"nzStatus",nzStep:[2,"nzStep","nzStep",te],nzInputMode:"nzInputMode",nzId:"nzId",nzDisabled:[2,"nzDisabled","nzDisabled",$],nzReadOnly:[2,"nzReadOnly","nzReadOnly",$],nzAutoFocus:[2,"nzAutoFocus","nzAutoFocus",$],nzBorderless:[2,"nzBorderless","nzBorderless",$],nzFormatter:"nzFormatter"},outputs:{nzBlur:"nzBlur",nzFocus:"nzFocus"},exportAs:["nzInputNumber"],standalone:!0,features:[ke([{provide:ct,useExisting:Ke(()=>o),multi:!0},de]),Pe,U,S],decls:11,vars:15,consts:[["upHandler",""],["downHandler",""],["inputElement",""],[1,"ant-input-number-handler-wrap"],["unselectable","unselectable",1,"ant-input-number-handler","ant-input-number-handler-up",3,"mousedown"],["nz-icon","","nzType","up",1,"ant-input-number-handler-up-inner"],["unselectable","unselectable",1,"ant-input-number-handler","ant-input-number-handler-down",3,"mousedown"],["nz-icon","","nzType","down",1,"ant-input-number-handler-down-inner"],[1,"ant-input-number-input-wrap"],["autocomplete","off",1,"ant-input-number-input",3,"ngModelChange","disabled","placeholder","readOnly","ngModel"],[1,"ant-input-number-suffix",3,"status"]],template:function(t,i){if(t&1){let s=N();p(0,"div",3)(1,"span",4,0),g("mousedown",function(_){return C(s),b(i.up(_))}),c(3,"span",5),u(),p(4,"span",6,1),g("mousedown",function(_){return C(s),b(i.down(_))}),c(6,"span",7),u()(),p(7,"div",8)(8,"input",9,2),g("ngModelChange",function(_){return C(s),b(i.onModelChange(_))}),u()(),z(10,Zt,1,1,"nz-form-item-feedback-icon",10)}t&2&&(d(),R("ant-input-number-handler-up-disabled",i.disabledUp),d(3),R("ant-input-number-handler-down-disabled",i.disabledDown),d(4),m("disabled",i.nzDisabled)("placeholder",i.nzPlaceHolder)("readOnly",i.nzReadOnly)("ngModel",i.displayValue),nt("id",i.nzId)("autofocus",i.nzAutoFocus?"autofocus":null)("min",i.nzMin)("max",i.nzMax)("step",i.nzStep)("inputmode",i.nzInputMode),d(2),h(i.hasFeedback&&i.status&&!i.nzFormNoStatusService?10:-1))},dependencies:[F,M,zt,ft,G,ht,Ge,$e],encapsulation:2,changeDetection:0});let n=o;return n})(),Rt=(()=>{let o=class o{constructor(){this.icon=null,this.type=null,this.template=null}};o.\u0275fac=function(t){return new(t||o)},o.\u0275cmp=x({type:o,selectors:[["","nz-input-number-group-slot",""]],hostVars:6,hostBindings:function(t,i){t&2&&R("ant-input-number-group-addon",i.type==="addon")("ant-input-number-prefix",i.type==="prefix")("ant-input-number-suffix",i.type==="suffix")},inputs:{icon:"icon",type:"type",template:"template"},standalone:!0,features:[S],attrs:Kt,ngContentSelectors:kt,decls:3,vars:2,consts:[["nz-icon","",3,"nzType"],[4,"nzStringTemplateOutlet"]],template:function(t,i){t&1&&(De(),z(0,Jt,1,1,"span",0)(1,Xt,2,1,"ng-container",1),Ae(2)),t&2&&(h(i.icon?0:-1),d(),m("nzStringTemplateOutlet",i.template))},dependencies:[F,M,Ct,gt],encapsulation:2,changeDetection:0});let n=o;return n})();var bi=(()=>{let o=class o{constructor(e,t,i,s,a){this.focusMonitor=e,this.elementRef=t,this.renderer=i,this.cdr=s,this.directionality=a,this.nzAddOnBeforeIcon=null,this.nzAddOnAfterIcon=null,this.nzPrefixIcon=null,this.nzSuffixIcon=null,this.nzStatus="",this.nzSize="default",this.nzCompact=!1,this.isLarge=!1,this.isSmall=!1,this.isAffix=!1,this.isAddOn=!1,this.isFeedback=!1,this.focused=!1,this.disabled=!1,this.dir="ltr",this.prefixCls="ant-input-number",this.affixStatusCls={},this.groupStatusCls={},this.affixInGroupStatusCls={},this.status="",this.hasFeedback=!1,this.destroy$=new Ie,this.nzFormStatusService=Q(je,{optional:!0}),this.nzFormNoStatusService=Q(fe,{optional:!0})}updateChildrenInputSize(){this.listOfNzInputNumberComponent&&this.listOfNzInputNumberComponent.forEach(e=>e.nzSize=this.nzSize)}ngOnInit(){this.nzFormStatusService?.formStatusChanges.pipe(Me((e,t)=>e.status===t.status&&e.hasFeedback===t.hasFeedback),w(this.destroy$)).subscribe(({status:e,hasFeedback:t})=>{this.setStatusStyles(e,t)}),this.focusMonitor.monitor(this.elementRef,!0).pipe(w(this.destroy$)).subscribe(e=>{this.focused=!!e,this.cdr.markForCheck()}),this.dir=this.directionality.value,this.directionality.change?.pipe(w(this.destroy$)).subscribe(e=>{this.dir=e})}ngAfterContentInit(){this.updateChildrenInputSize();let e=this.listOfNzInputNumberComponent.changes.pipe(We(this.listOfNzInputNumberComponent));e.pipe(Ze(t=>we(e,...t.map(i=>i.disabled$))),qe(()=>e),Ue(t=>t.some(i=>i.nzDisabled)),w(this.destroy$)).subscribe(t=>{this.disabled=t,this.cdr.markForCheck()})}ngOnChanges(e){let{nzSize:t,nzSuffix:i,nzPrefix:s,nzPrefixIcon:a,nzSuffixIcon:_,nzAddOnAfter:L,nzAddOnBefore:E,nzAddOnAfterIcon:ye,nzAddOnBeforeIcon:Gt,nzStatus:Ht}=e;t&&(this.updateChildrenInputSize(),this.isLarge=this.nzSize==="large",this.isSmall=this.nzSize==="small"),(i||s||a||_)&&(this.isAffix=!!(this.nzSuffix||this.nzPrefix||this.nzPrefixIcon||this.nzSuffixIcon)),(L||E||ye||Gt)&&(this.isAddOn=!!(this.nzAddOnAfter||this.nzAddOnBefore||this.nzAddOnAfterIcon||this.nzAddOnBeforeIcon),this.nzFormNoStatusService?.noFormStatus?.next(this.isAddOn)),Ht&&this.setStatusStyles(this.nzStatus,this.hasFeedback)}ngOnDestroy(){this.focusMonitor.stopMonitoring(this.elementRef),this.destroy$.next(),this.destroy$.complete()}setStatusStyles(e,t){this.status=e,this.hasFeedback=t,this.isFeedback=!!e&&t;let i=!!(this.nzSuffix||this.nzPrefix||this.nzPrefixIcon||this.nzSuffixIcon);this.isAffix=i||!this.isAddOn&&t,this.affixInGroupStatusCls=this.isAffix||this.isFeedback?this.affixStatusCls=Z(`${this.prefixCls}-affix-wrapper`,e,t):{},this.cdr.markForCheck(),this.affixStatusCls=Z(`${this.prefixCls}-affix-wrapper`,this.isAddOn?"":e,this.isAddOn?!1:t),this.groupStatusCls=Z(`${this.prefixCls}-group-wrapper`,this.isAddOn?e:"",this.isAddOn?t:!1);let s=Ne(Ne({},this.affixStatusCls),this.groupStatusCls);Object.keys(s).forEach(a=>{s[a]?this.renderer.addClass(this.elementRef.nativeElement,a):this.renderer.removeClass(this.elementRef.nativeElement,a)})}};o.\u0275fac=function(t){return new(t||o)(f(Be),f(Oe),f(Te),f(Ee),f(Ve))},o.\u0275cmp=x({type:o,selectors:[["nz-input-number-group"]],contentQueries:function(t,i,s){if(t&1&&at(s,Se,5),t&2){let a;q(a=W())&&(i.listOfNzInputNumberComponent=a)}},hostVars:24,hostBindings:function(t,i){t&2&&R("ant-input-number-group",i.nzCompact)("ant-input-number-group-compact",i.nzCompact)("ant-input-number-group-wrapper",i.isAddOn)("ant-input-number-group-wrapper-rtl",i.isAddOn&&i.dir==="rtl")("ant-input-number-group-wrapper-lg",i.isAddOn&&i.isLarge)("ant-input-number-group-wrapper-sm",i.isAddOn&&i.isSmall)("ant-input-number-affix-wrapper",!i.isAddOn&&i.isAffix)("ant-input-number-affix-wrapper-rtl",!i.isAddOn&&i.dir==="rtl")("ant-input-number-affix-wrapper-focused",!i.isAddOn&&i.isAffix&&i.focused)("ant-input-number-affix-wrapper-disabled",!i.isAddOn&&i.isAffix&&i.disabled)("ant-input-number-affix-wrapper-lg",!i.isAddOn&&i.isAffix&&i.isLarge)("ant-input-number-affix-wrapper-sm",!i.isAddOn&&i.isAffix&&i.isSmall)},inputs:{nzAddOnBeforeIcon:"nzAddOnBeforeIcon",nzAddOnAfterIcon:"nzAddOnAfterIcon",nzPrefixIcon:"nzPrefixIcon",nzSuffixIcon:"nzSuffixIcon",nzAddOnBefore:"nzAddOnBefore",nzAddOnAfter:"nzAddOnAfter",nzPrefix:"nzPrefix",nzStatus:"nzStatus",nzSuffix:"nzSuffix",nzSize:"nzSize",nzCompact:[2,"nzCompact","nzCompact",$]},exportAs:["nzInputNumberGroup"],standalone:!0,features:[ke([fe]),Pe,U,S],ngContentSelectors:kt,decls:6,vars:1,consts:[["affixTemplate",""],["contentTemplate",""],[1,"ant-input-number-wrapper","ant-input-number-group"],["nz-input-number-group-slot","","type","addon",3,"icon","template"],[1,"ant-input-number-affix-wrapper",3,"ant-input-number-affix-wrapper-disabled","ant-input-number-affix-wrapper-sm","ant-input-number-affix-wrapper-lg","ant-input-number-affix-wrapper-focused","ngClass"],[3,"ngTemplateOutlet"],[1,"ant-input-number-affix-wrapper",3,"ngClass"],["nz-input-number-group-slot","","type","prefix",3,"icon","template"],["nz-input-number-group-slot","","type","suffix",3,"icon","template"],[3,"status"],["nz-input-number-group-slot","","type","suffix"]],template:function(t,i){t&1&&(De(),z(0,ri,5,3,"span",2)(1,pi,2,1)(2,hi,3,3,"ng-template",null,0,Re)(4,Ci,2,1,"ng-template",null,1,Re)),t&2&&h(i.isAddOn?0:1)},dependencies:[Rt,lt,dt,Ge,$e],encapsulation:2,changeDetection:0});let n=o;return n})(),Et=(()=>{let o=class o{};o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=et({type:o}),o.\u0275inj=Xe({imports:[Se,bi,Rt]});let n=o;return n})();var T=(()=>{let o=class o{constructor(e){this.apiService=e,this.stations=[],this.ride=it(It),this.mode="edit",this.getStations()}getStations(){return y(this,null,function*(){let e=yield this.apiService.fetchStations();this.stations=e})}getStationNameById(e){return this.stations.find(t=>t.id===e)?.city||""}getRide(e){return y(this,null,function*(){let t=yield this.apiService.fetchRide(e);this.ride.set(t)})}updateRide(e,t,i){return y(this,null,function*(){return yield this.apiService.updateRide(e,t,i)})}deleteRide(e,t){return y(this,null,function*(){let i=yield this.apiService.deleteRide(e,t);return i&&this.getRide(e),i})}createRide(e,t){return y(this,null,function*(){return yield this.apiService.createRide(e,t)})}};o.\u0275fac=function(t){return new(t||o)(Ye(wt))},o.\u0275prov=Je({token:o,factory:o.\u0275fac,providedIn:"root"});let n=o;return n})();function Si(n,o){if(n&1){let r=N();p(0,"button",5),g("click",function(){C(r);let t=l();return b(t.enableInput())}),c(1,"span",6),u()}}function yi(n,o){if(n&1){let r=N();p(0,"button",5),g("click",function(){C(r);let t=l();return b(t.submit())}),c(1,"span",7),u()}}var Vt=(()=>{let o=class o{constructor(e,t){this.rideService=e,this.fb=t,this.value=0,this.label="",this.controlName="price",this.code={id:0,rideId:0,segment:0},this.segments=v(()=>this.rideService.ride().schedule.find(i=>i.rideId===this.code.rideId)?.segments||null),this.formatterDollar=i=>`$ ${i}`,this.parserDollar=i=>i.replace("$ ","")}enableInput(){this.form.controls[this.controlName].enable()}disableInput(){this.form.controls[this.controlName].disable()}submit(){return y(this,null,function*(){if(this.form.valid){let e=this.form.value[this.controlName],t=this.segments();t&&t[this.code.segment].price[this.label]!==e&&(t[this.code.segment].price[this.label]=e,(yield this.rideService.updateRide(this.code.id,this.code.rideId,t))&&this.disableInput())}})}ngOnInit(){this.form=this.fb.group({[this.controlName]:[{value:this.value,disabled:!0},[K.required]]})}};o.\u0275fac=function(t){return new(t||o)(f(T),f(ae))},o.\u0275cmp=x({type:o,selectors:[["app-price-form"]],inputs:{value:"value",label:"label",controlName:"controlName",code:"code"},standalone:!0,features:[S],decls:10,vars:8,consts:[["nz-form","",3,"ngSubmit","nzLayout","formGroup"],[1,"item"],[1,"label"],[1,"input",3,"nzBorderless","formControlName","nzFormatter","nzParser"],["nz-button","","nzType","text"],["nz-button","","nzType","text",3,"click"],["nz-icon","","nzType","edit"],["nz-icon","","nzType","enter"]],template:function(t,i){t&1&&(p(0,"form",0),g("ngSubmit",function(){return i.submit()}),p(1,"nz-form-item",1)(2,"nz-form-label",2),I(3),u(),p(4,"nz-form-control"),c(5,"nz-input-number",3),u()(),p(6,"nz-form-item")(7,"nz-form-control"),z(8,Si,2,0,"button",4)(9,yi,2,0,"button",4),u()()()),t&2&&(m("nzLayout","inline")("formGroup",i.form),d(3),O(i.label),d(2),m("nzBorderless",i.form.controls[i.controlName].disabled)("formControlName",i.controlName)("nzFormatter",i.formatterDollar)("nzParser",i.parserDollar),d(3),h(i.form.controls[i.controlName].disabled?8:9))},dependencies:[A,D,P,F,M,be,ce,ue,ze,he,Ce,ge,le,oe,G,ne,re,se,Et,Se],styles:[".item[_ngcontent-%COMP%]{width:146px}.input[_ngcontent-%COMP%]{background:transparent}"]});let n=o;return n})();function Ni(n,o){if(n&1){let r=N();p(0,"button",6),g("click",function(){C(r);let t=l();return b(t.enableInput())}),c(1,"span",7),u()}}function Ii(n,o){if(n&1){let r=N();p(0,"button",6),g("click",function(){C(r);let t=l();return b(t.submit())}),c(1,"span",8),u()}}var Bt=(()=>{let o=class o{enableInput(){this.form.controls[this.dateControl].enable(),this.form.controls[this.timeControl].enable()}disableInput(){this.form.controls[this.dateControl].disable(),this.form.controls[this.timeControl].disable()}constructor(e,t){this.fb=e,this.rideService=t,this.value="",this.label="",this.dateControl="date",this.timeControl="time",this.code={id:0,rideId:0,segment:0},this.segments=v(()=>this.rideService.ride().schedule.find(i=>i.rideId===this.code.rideId)?.segments||null)}submit(){return y(this,null,function*(){if(this.form.valid){let e=this.form.value[this.dateControl].toISOString().split("T")[0],t=this.form.value[this.timeControl].toISOString().split("T")[1],i=new Date(`${e}T${t}`).toISOString(),s=this.segments();s&&s[this.code.segment].time[this.label==="Arrival"?0:1]!==i&&(s[this.code.segment].time[this.label==="Arrival"?0:1]=i,(yield this.rideService.updateRide(this.code.id,this.code.rideId,s))&&this.disableInput())}})}ngOnInit(){this.form=this.fb.group({[this.dateControl]:[{value:this.getDate(this.value),disabled:!0},[K.required]],[this.timeControl]:[{value:this.getDate(this.value),disabled:!0},[K.required]]})}ngOnChanges(e){e.value&&!e.value.isFirstChange()&&this.updateForm(e.value.currentValue)}getDate(e){return new Date(e||0)}updateForm(e){this.form.patchValue({[this.dateControl]:this.getDate(e),[this.timeControl]:this.getDate(e)})}};o.\u0275fac=function(t){return new(t||o)(f(ae),f(T))},o.\u0275cmp=x({type:o,selectors:[["app-date-form"]],inputs:{value:"value",label:"label",dateControl:"dateControl",timeControl:"timeControl",code:"code"},standalone:!0,features:[U,S],decls:12,vars:8,consts:[["nz-form","",3,"ngSubmit","nzLayout","formGroup"],[1,"item"],[1,"label"],[3,"formControlName","nzBorderless"],["nzFormat","HH:mm",1,"time",3,"nzBorderless","formControlName"],["nz-button","","nzType","text"],["nz-button","","nzType","text",3,"click"],["nz-icon","","nzType","edit"],["nz-icon","","nzType","enter"]],template:function(t,i){t&1&&(p(0,"form",0),g("ngSubmit",function(){return i.submit()}),p(1,"nz-form-item",1)(2,"nz-form-label",2),I(3),u(),p(4,"nz-form-control"),c(5,"nz-date-picker",3),u(),p(6,"nz-form-control"),c(7,"nz-time-picker",4),u()(),p(8,"nz-form-item")(9,"nz-form-control"),z(10,Ni,2,0,"button",5)(11,Ii,2,0,"button",5),u()()()),t&2&&(m("nzLayout","inline")("formGroup",i.form),d(3),O(i.label),d(2),m("formControlName",i.dateControl)("nzBorderless",i.form.controls[i.dateControl].disabled),d(2),m("nzBorderless",i.form.controls[i.timeControl].disabled)("formControlName",i.timeControl),d(3),h(i.form.controls[i.dateControl].disabled?10:11))},dependencies:[A,D,P,F,M,be,ce,ue,ze,he,Ce,ge,le,oe,G,ne,re,se,Nt,xt,vt,_t,bt],styles:[".item[_ngcontent-%COMP%]{width:280px}.input[_ngcontent-%COMP%]{background:transparent}.time[_ngcontent-%COMP%]{width:80px}.label[_ngcontent-%COMP%]{width:76px}"]});let n=o;return n})();var Qe=(n,o,r)=>({id:n,rideId:o,segment:r});function wi(n,o){if(n&1&&c(0,"app-date-form",3),n&2){let r=l();m("label","Arrival")("code",ee(3,Qe,r.id,r.rideId,r.segment))("value",r.arrivalDate())}}function Mi(n,o){if(n&1&&c(0,"app-date-form",3),n&2){let r=l();m("label","Departure")("code",ee(3,Qe,r.id,r.rideId,r.segment))("value",r.departureDate())}}function Fi(n,o){if(n&1&&c(0,"app-price-form",5),n&2){let r=o.$implicit,e=l(2);m("label",r[0])("value",r[1])("code",ee(3,Qe,e.id,e.rideId,e.segment))}}function Oi(n,o){if(n&1&&V(0,Fi,1,7,"app-price-form",5,X),n&2){let r=l();B(r.prices())}}var jt=(()=>{let o=class o{getDate(e){return new Date(e||0)}constructor(e){this.rideService=e,this.id=0,this.rideId=0,this.segment=0,this.departure=!1,this.arrival=!1,this.isEnd=!1,this.schedule=v(()=>this.rideService.ride().schedule.find(t=>t.rideId===this.rideId)||null),this.arrivalDate=v(()=>this.schedule()?.segments[this.segment].time[0]||""),this.departureDate=v(()=>this.schedule()?.segments[this.segment].time[1]||""),this.prices=v(()=>Object.entries(this.schedule()?.segments[this.segment].price||{}))}};o.\u0275fac=function(t){return new(t||o)(f(T))},o.\u0275cmp=x({type:o,selectors:[["app-item"]],inputs:{id:"id",rideId:"rideId",segment:"segment",departure:"departure",arrival:"arrival",isEnd:"isEnd"},standalone:!0,features:[S],decls:8,vars:4,consts:[[1,"item"],[1,"city"],[1,"timeItem"],[3,"label","code","value"],[1,"pricesItem"],[3,"label","value","code"]],template:function(t,i){t&1&&(p(0,"div",0)(1,"p",1),I(2),u(),p(3,"div",2),z(4,wi,1,7,"app-date-form",3)(5,Mi,1,7,"app-date-form",3),u(),p(6,"div",4),z(7,Oi,2,0),u()()),t&2&&(d(2),O(i.rideService.getStationNameById(i.rideService.ride().path[i.segment])),d(2),h(i.arrival?4:-1),d(),h(i.departure?5:-1),d(2),h(i.isEnd?-1:7))},dependencies:[Vt,Bt],styles:[".city[_ngcontent-%COMP%]{font-weight:500;line-height:2rem;background-color:var(--form-background-color);width:64px;padding:.5rem;border:1px solid var(--form-background-color)}.item[_ngcontent-%COMP%]{display:flex;flex-flow:row wrap;margin-left:2rem;width:fit-content}.pricesItem[_ngcontent-%COMP%]{display:block;border:1px solid var(--form-background-color);padding:.5rem;margin:0;width:14.25rem}.timeItem[_ngcontent-%COMP%]{border:1px solid var(--form-background-color);padding:.5rem;margin:0}"]});let n=o;return n})();function Pi(n,o){if(n&1){let r=N();p(0,"button",4),g("nzOnConfirm",function(){C(r);let t=l();return b(t.delete())}),c(1,"span",5),u()}}function Di(n,o){if(n&1&&c(0,"app-item",3),n&2){let r=o.$index,e=l();m("id",e.id)("rideId",e.rideId)("segment",e.isEnd(r)?r-1:r)("departure",!e.isEnd(r))("arrival",r>0)("isEnd",e.isEnd(r))}}var $t=(()=>{let o=class o{constructor(e){this.rideService=e,this.id=0,this.rideId=0,this.routeId=null,this.routeName="",this.paths=v(()=>this.rideService.ride().path||null)}isEnd(e){return(this.paths()?.length??0)===e+1}delete(){this.rideService.deleteRide(this.id,this.rideId)}};o.\u0275fac=function(t){return new(t||o)(f(T))},o.\u0275cmp=x({type:o,selectors:[["app-ride"]],inputs:{id:"id",rideId:"rideId"},standalone:!0,features:[S],decls:5,vars:2,consts:[[1,"ride"],["nzOrientation","left",3,"nzText"],["nz-button","","nzType","default","nzShape","circle","nz-popconfirm","","nzPopconfirmTitle","Are you sure delete this ride?","nzPopconfirmPlacement","bottom",1,"delete"],[3,"id","rideId","segment","departure","arrival","isEnd"],["nz-button","","nzType","default","nzShape","circle","nz-popconfirm","","nzPopconfirmTitle","Are you sure delete this ride?","nzPopconfirmPlacement","bottom",1,"delete",3,"nzOnConfirm"],["nz-icon","","nzType","delete"]],template:function(t,i){t&1&&(p(0,"section",0),c(1,"nz-divider",1),z(2,Pi,2,0,"button",2),V(3,Di,1,6,"app-item",3,ot),u()),t&2&&(d(),m("nzText","Ride "+i.rideId),d(),h(i.rideService.mode==="edit"?2:-1),d(),B(i.paths()))},dependencies:[A,D,P,pe,ve,me,F,M,_e,Mt,jt,Pt,Tt],styles:[".ride[_ngcontent-%COMP%]{position:relative}.heading[_ngcontent-%COMP%]{text-align:center}.city[_ngcontent-%COMP%]{font-weight:500;line-height:2rem;background-color:var(--form-background-color);width:64px;padding:.5rem;border:1px solid var(--form-background-color)}.editable[_ngcontent-%COMP%]{width:192px;display:flex}.prices[_ngcontent-%COMP%]{display:flex}.price[_ngcontent-%COMP%]{width:64px}.priceControl[_ngcontent-%COMP%]{flex-direction:row}.item[_ngcontent-%COMP%]{display:flex;flex-flow:row wrap;margin-left:2rem}.pricesItem[_ngcontent-%COMP%]{display:block;border:1px solid var(--form-background-color);padding:.5rem;margin:0}.timeItem[_ngcontent-%COMP%]{border:1px solid var(--form-background-color);padding:.5rem;margin:0}.dateInput[_ngcontent-%COMP%]{width:128px}.label[_ngcontent-%COMP%]{height:28px}.delete[_ngcontent-%COMP%]{position:absolute;top:-3px;left:160px}"]});let n=o;return n})();function Ai(n,o){if(n&1){let r=N();p(0,"div",0)(1,"a",2),c(2,"span",3),u(),p(3,"h4",4),I(4),u(),p(5,"button",5),g("click",function(){C(r);let t=l();return b(t.create())}),c(6,"span",6),u()()}if(n&2){let r=l();d(4),O(r.routeName)}}function ki(n,o){n&1&&(p(0,"nz-spin",1),c(1,"nz-empty",7),u()),n&2&&m("nzSpinning",!0)}function Ri(n,o){if(n&1&&c(0,"app-ride",8),n&2){let r=o.$implicit,e=l(3);m("id",e.id)("rideId",r.rideId)}}function Ei(n,o){if(n&1&&V(0,Ri,1,2,"app-ride",8,X),n&2){let r=l(2);B(r.schedules())}}function Vi(n,o){if(n&1){let r=N();c(0,"app-ride",8),p(1,"div",9)(2,"button",10),g("click",function(){C(r);let t=l(2);return b(t.delete())}),I(3," Cancel "),u(),p(4,"button",10),g("click",function(){C(r);let t=l(2);return b(t.back())}),I(5," Submit "),u()()}if(n&2){let r=l(2);m("id",r.id)("rideId",r.newRideId)}}function Bi(n,o){if(n&1&&z(0,Ei,2,0)(1,Vi,6,2),n&2){let r=l();h(r.rideService.mode==="edit"?0:1)}}var yo=(()=>{let o=class o{constructor(e,t,i){this.router=e,this.route=t,this.rideService=i,this.id=0,this.routeName="",this.newRideId=0,this.paths=v(()=>this.rideService.ride().path||null),this.schedules=v(()=>this.rideService.ride().schedule),this.carriages=v(()=>this.rideService.ride().carriages),this.route.paramMap.subscribe(s=>{this.id=Number(s.get("id"))}),this.id&&(this.routeName=`Route ${this.id}`,this.rideService.getRide(this.id))}isEnd(e){return(this.paths()?.length??0)===e+1}generateSegments(){let t=[...new Set(this.carriages())].reduce((a,_)=>(a[_]=100,a),{}),i=[],s=new Date;for(let a=1;a<(this.paths()?.length??0);a+=1){let _=new Date(new Date().setHours(s.getHours()+2*a)),L=new Date(new Date().setHours(s.getHours()+2*a+1)),ye={time:[_.toISOString(),L.toISOString()],price:t};i.push(ye)}return i}create(){return y(this,null,function*(){let e=this.generateSegments(),t=yield this.rideService.createRide(this.id,e);this.newRideId=t.id,yield this.rideService.getRide(this.id),this.rideService.mode="create"})}delete(){return y(this,null,function*(){let e=yield this.rideService.deleteRide(this.id,this.newRideId);this.rideService.mode="edit",e&&this.rideService.getRide(this.id)})}back(){this.rideService.mode="edit"}};o.\u0275fac=function(t){return new(t||o)(f(mt),f(pt),f(T))},o.\u0275cmp=x({type:o,selectors:[["app-route"]],standalone:!0,features:[S],decls:3,vars:2,consts:[[1,"header"],["nzTip","Loading...",3,"nzSpinning"],["nz-button","","nzType","link","routerLink","/routes"],["nz-icon","","nzType","arrow-left","nzTheme","outline"],["nz-typography","",1,"heading"],["nz-button","","nzType","default","nzShape","circle",3,"click"],["nz-icon","","nzType","plus"],["nzNotFoundImage","simple"],[3,"id","rideId"],[1,"footer"],["nz-button","","nzType","primary",3,"click"]],template:function(t,i){t&1&&z(0,Ai,7,1,"div",0)(1,ki,2,1,"nz-spin",1)(2,Bi,2,1),t&2&&(h(i.rideService.mode==="edit"?0:-1),d(),h(i.schedules().length===0?1:2))},dependencies:[A,D,P,pe,ve,Dt,me,F,M,ut,_e,$t,yt,St,Ot,Ft],styles:[".heading[_ngcontent-%COMP%]{text-align:center}.city[_ngcontent-%COMP%]{font-weight:500;line-height:2rem;background-color:var(--form-background-color);width:64px;padding:.5rem;border:1px solid var(--form-background-color)}.editable[_ngcontent-%COMP%]{width:192px;display:flex}.prices[_ngcontent-%COMP%]{display:flex}.price[_ngcontent-%COMP%]{width:64px}.priceControl[_ngcontent-%COMP%]{flex-direction:row}.item[_ngcontent-%COMP%]{display:flex;flex-flow:row wrap;margin-left:2rem}.pricesItem[_ngcontent-%COMP%]{display:block;border:1px solid var(--form-background-color);padding:.5rem;margin:0}.timeItem[_ngcontent-%COMP%]{border:1px solid var(--form-background-color);padding:.5rem;margin:0}.dateInput[_ngcontent-%COMP%]{width:128px}.label[_ngcontent-%COMP%]{height:28px}.header[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:2rem;justify-content:space-around;width:728px}.footer[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:2rem;justify-content:space-around;width:728px;margin-top:2rem}"]});let n=o;return n})();export{yo as RouteComponent};
