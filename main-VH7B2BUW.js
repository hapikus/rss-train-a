import{c as ph,d as J_,e as mh,f as Q_,g as X_,h as ev,i as ka,k as qa,l as $a,n as av}from"./chunk-JMEGZPJE.js";import{c as Y_,d as fh,e as gh,f as _h}from"./chunk-RYUHB3BB.js";import"./chunk-SUYZW3TD.js";import{a as tv,b as nv,c as iv,d as rv,e as ov,f as jr}from"./chunk-3M7BBWJB.js";import{c as hh,d as j_,f as U_,g as H_}from"./chunk-EWQNCL4D.js";import{$ as Er,Ab as G_,B as Rs,Ba as uh,Bb as K_,Ca as N_,Ea as ch,Eb as rp,Fa as ip,Ga as R_,H as S_,Ia as lu,Jb as qr,K as T_,Oa as B_,Ob as $r,Pb as Da,Qb as Zr,R as A_,Rb as La,S as P_,Sb as Na,Ta as k_,Tb as Wo,Ua as q_,Ub as Ra,Va as Xi,Vb as Ba,X as I_,Xb as Vo,Z as Ir,Zb as sv,_ as zn,a as __,aa as Or,ab as $_,b as Pr,bb as dr,c as v_,ca as E_,cb as Qt,d as y_,db as Fn,e as x_,ea as O_,eb as Sn,f as C_,fa as Mr,fb as Lr,ga as Uo,gb as Nr,ha as M_,hb as Ai,ia as D_,ib as Rr,j as w_,ja as Ho,jb as gi,k as Oa,ka as oh,kb as _i,l as ih,la as sh,m as b_,ma as ah,mb as Z_,n as rh,na as Dr,oa as L_,sa as Ti,tb as Br,u as tp,ub as kr,vb as dh,wb as W_,x as z_,xb as V_,y as F_,ya as np,z as Ma,za as lh}from"./chunk-AJSIW5UZ.js";import{A as nh,B as Ar,d as Ia,n as g_,p as Ea,q as Xc,r as eh,v as jo,w as Tr,x as th,y as Ns}from"./chunk-PQGTFRF3.js";import{$b as Yc,A as Wg,Aa as Qg,Ac as p_,B as Vg,Ba as Xg,Bb as Ls,Cb as u_,Cc as m_,Db as kn,Dc as Qn,E as Xf,Ec as ho,Fa as e_,Fc as Sr,G as Es,Ga as t_,Gb as K,Gc as tt,Ha as bn,Hb as Qi,Ia as Xe,Ib as B,J as tu,Ja as et,Jb as Jn,K as Bo,Ka as Ms,Kb as Bt,La as n_,Lb as c_,M as Aa,Mb as h_,Nb as Kc,Oa as Ds,P as Uc,Pa as ep,R as Os,Ra as Bn,Rb as pe,Rc as cn,Sa as hr,Sb as $o,T as Gg,Tb as Si,U as Kg,Ua as qo,Ub as ln,Vb as un,Wb as E,Wc as pt,Xb as I,Xc as au,Yb as se,Yc as Qc,Zb as st,_a as i_,_b as at,a as Yn,ac as Ft,b as Fi,bc as d_,c as $c,ca as Yg,d as A,da as ko,e as Nt,ea as wt,f as ct,fc as it,g as Qf,ga as Hc,h as jg,hc as q,i as Sa,ia as nu,ic as pi,jc as mi,k as Ug,ka as Jg,kb as Vc,la as wn,lc as Zo,ma as Hn,mc as qn,n as Rn,nc as Yt,o as Hg,oa as Wc,ob as S,oc as Jt,pb as Q,pc as He,qa as oi,qb as r_,qc as U,ra as Rt,rb as co,rc as yt,sb as o_,sc as We,t as Kt,tc as f_,ub as s_,uc as ru,v as Zc,vb as Pa,vc as ou,w as jc,wa as Ee,wb as a_,wc as su,xa as Wn,xc as Fr,ya as iu,yb as l_,yc as Oe,z as Ta,zb as Gc,zc as Jc}from"./chunk-26O7SS3C.js";var op=A((oH,lv)=>{"use strict";var VE=typeof global=="object"&&global&&global.Object===Object&&global;lv.exports=VE});var fr=A((sH,uv)=>{"use strict";var GE=op(),KE=typeof self=="object"&&self&&self.Object===Object&&self,YE=GE||KE||Function("return this")();uv.exports=YE});var Bs=A((aH,cv)=>{"use strict";var JE=fr(),QE=JE.Symbol;cv.exports=QE});var pv=A((lH,fv)=>{"use strict";var hv=Bs(),dv=Object.prototype,XE=dv.hasOwnProperty,eO=dv.toString,uu=hv?hv.toStringTag:void 0;function tO(e){var t=XE.call(e,uu),i=e[uu];try{e[uu]=void 0;var o=!0}catch{}var s=eO.call(e);return o&&(t?e[uu]=i:delete e[uu]),s}fv.exports=tO});var gv=A((uH,mv)=>{"use strict";var nO=Object.prototype,iO=nO.toString;function rO(e){return iO.call(e)}mv.exports=rO});var ks=A((cH,yv)=>{"use strict";var _v=Bs(),oO=pv(),sO=gv(),aO="[object Null]",lO="[object Undefined]",vv=_v?_v.toStringTag:void 0;function uO(e){return e==null?e===void 0?lO:aO:vv&&vv in Object(e)?oO(e):sO(e)}yv.exports=uO});var sp=A((hH,xv)=>{"use strict";function cO(e,t){return function(i){return e(t(i))}}xv.exports=cO});var vh=A((dH,Cv)=>{"use strict";var hO=sp(),dO=hO(Object.getPrototypeOf,Object);Cv.exports=dO});var fo=A((fH,wv)=>{"use strict";function fO(e){return e!=null&&typeof e=="object"}wv.exports=fO});var Fv=A((pH,zv)=>{"use strict";var pO=ks(),mO=vh(),gO=fo(),_O="[object Object]",vO=Function.prototype,yO=Object.prototype,bv=vO.toString,xO=yO.hasOwnProperty,CO=bv.call(Object);function wO(e){if(!gO(e)||pO(e)!=_O)return!1;var t=mO(e);if(t===null)return!0;var i=xO.call(t,"constructor")&&t.constructor;return typeof i=="function"&&i instanceof i&&bv.call(i)==CO}zv.exports=wO});var Ur=A((mH,Sv)=>{"use strict";function bO(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}Sv.exports=bO});var yh=A((gH,Tv)=>{"use strict";var zO=ks(),FO=Ur(),SO="[object AsyncFunction]",TO="[object Function]",AO="[object GeneratorFunction]",PO="[object Proxy]";function IO(e){if(!FO(e))return!1;var t=zO(e);return t==TO||t==AO||t==SO||t==PO}Tv.exports=IO});var Pv=A((_H,Av)=>{"use strict";var EO=fr(),OO=EO["__core-js_shared__"];Av.exports=OO});var Ov=A((vH,Ev)=>{"use strict";var ap=Pv(),Iv=function(){var e=/[^.]+$/.exec(ap&&ap.keys&&ap.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();function MO(e){return!!Iv&&Iv in e}Ev.exports=MO});var lp=A((yH,Mv)=>{"use strict";var DO=Function.prototype,LO=DO.toString;function NO(e){if(e!=null){try{return LO.call(e)}catch{}try{return e+""}catch{}}return""}Mv.exports=NO});var Lv=A((xH,Dv)=>{"use strict";var RO=yh(),BO=Ov(),kO=Ur(),qO=lp(),$O=/[\\^$.*+?()[\]{}|]/g,ZO=/^\[object .+?Constructor\]$/,jO=Function.prototype,UO=Object.prototype,HO=jO.toString,WO=UO.hasOwnProperty,VO=RegExp("^"+HO.call(WO).replace($O,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function GO(e){if(!kO(e)||BO(e))return!1;var t=RO(e)?VO:ZO;return t.test(qO(e))}Dv.exports=GO});var Rv=A((CH,Nv)=>{"use strict";function KO(e,t){return e?.[t]}Nv.exports=KO});var Go=A((wH,Bv)=>{"use strict";var YO=Lv(),JO=Rv();function QO(e,t){var i=JO(e,t);return YO(i)?i:void 0}Bv.exports=QO});var up=A((bH,kv)=>{"use strict";var XO=Go(),eM=function(){try{var e=XO(Object,"defineProperty");return e({},"",{}),e}catch{}}();kv.exports=eM});var xh=A((zH,$v)=>{"use strict";var qv=up();function tM(e,t,i){t=="__proto__"&&qv?qv(e,t,{configurable:!0,enumerable:!0,value:i,writable:!0}):e[t]=i}$v.exports=tM});var jv=A((FH,Zv)=>{"use strict";function nM(e){return function(t,i,o){for(var s=-1,u=Object(t),d=o(t),m=d.length;m--;){var v=d[e?m:++s];if(i(u[v],v,u)===!1)break}return t}}Zv.exports=nM});var cp=A((SH,Uv)=>{"use strict";var iM=jv(),rM=iM();Uv.exports=rM});var Wv=A((TH,Hv)=>{"use strict";function oM(e,t){for(var i=-1,o=Array(e);++i<e;)o[i]=t(i);return o}Hv.exports=oM});var Gv=A((AH,Vv)=>{"use strict";var sM=ks(),aM=fo(),lM="[object Arguments]";function uM(e){return aM(e)&&sM(e)==lM}Vv.exports=uM});var cu=A((PH,Jv)=>{"use strict";var Kv=Gv(),cM=fo(),Yv=Object.prototype,hM=Yv.hasOwnProperty,dM=Yv.propertyIsEnumerable,fM=Kv(function(){return arguments}())?Kv:function(e){return cM(e)&&hM.call(e,"callee")&&!dM.call(e,"callee")};Jv.exports=fM});var Bi=A((IH,Qv)=>{"use strict";var pM=Array.isArray;Qv.exports=pM});var ey=A((EH,Xv)=>{"use strict";function mM(){return!1}Xv.exports=mM});var du=A((hu,Za)=>{"use strict";var gM=fr(),_M=ey(),iy=typeof hu=="object"&&hu&&!hu.nodeType&&hu,ty=iy&&typeof Za=="object"&&Za&&!Za.nodeType&&Za,vM=ty&&ty.exports===iy,ny=vM?gM.Buffer:void 0,yM=ny?ny.isBuffer:void 0,xM=yM||_M;Za.exports=xM});var fu=A((OH,ry)=>{"use strict";var CM=9007199254740991,wM=/^(?:0|[1-9]\d*)$/;function bM(e,t){var i=typeof e;return t=t??CM,!!t&&(i=="number"||i!="symbol"&&wM.test(e))&&e>-1&&e%1==0&&e<t}ry.exports=bM});var Ch=A((MH,oy)=>{"use strict";var zM=9007199254740991;function FM(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=zM}oy.exports=FM});var ay=A((DH,sy)=>{"use strict";var SM=ks(),TM=Ch(),AM=fo(),PM="[object Arguments]",IM="[object Array]",EM="[object Boolean]",OM="[object Date]",MM="[object Error]",DM="[object Function]",LM="[object Map]",NM="[object Number]",RM="[object Object]",BM="[object RegExp]",kM="[object Set]",qM="[object String]",$M="[object WeakMap]",ZM="[object ArrayBuffer]",jM="[object DataView]",UM="[object Float32Array]",HM="[object Float64Array]",WM="[object Int8Array]",VM="[object Int16Array]",GM="[object Int32Array]",KM="[object Uint8Array]",YM="[object Uint8ClampedArray]",JM="[object Uint16Array]",QM="[object Uint32Array]",Ut={};Ut[UM]=Ut[HM]=Ut[WM]=Ut[VM]=Ut[GM]=Ut[KM]=Ut[YM]=Ut[JM]=Ut[QM]=!0;Ut[PM]=Ut[IM]=Ut[ZM]=Ut[EM]=Ut[jM]=Ut[OM]=Ut[MM]=Ut[DM]=Ut[LM]=Ut[NM]=Ut[RM]=Ut[BM]=Ut[kM]=Ut[qM]=Ut[$M]=!1;function XM(e){return AM(e)&&TM(e.length)&&!!Ut[SM(e)]}sy.exports=XM});var wh=A((LH,ly)=>{"use strict";function eD(e){return function(t){return e(t)}}ly.exports=eD});var bh=A((pu,ja)=>{"use strict";var tD=op(),uy=typeof pu=="object"&&pu&&!pu.nodeType&&pu,mu=uy&&typeof ja=="object"&&ja&&!ja.nodeType&&ja,nD=mu&&mu.exports===uy,hp=nD&&tD.process,iD=function(){try{var e=mu&&mu.require&&mu.require("util").types;return e||hp&&hp.binding&&hp.binding("util")}catch{}}();ja.exports=iD});var zh=A((NH,dy)=>{"use strict";var rD=ay(),oD=wh(),cy=bh(),hy=cy&&cy.isTypedArray,sD=hy?oD(hy):rD;dy.exports=sD});var dp=A((RH,fy)=>{"use strict";var aD=Wv(),lD=cu(),uD=Bi(),cD=du(),hD=fu(),dD=zh(),fD=Object.prototype,pD=fD.hasOwnProperty;function mD(e,t){var i=uD(e),o=!i&&lD(e),s=!i&&!o&&cD(e),u=!i&&!o&&!s&&dD(e),d=i||o||s||u,m=d?aD(e.length,String):[],v=m.length;for(var _ in e)(t||pD.call(e,_))&&!(d&&(_=="length"||s&&(_=="offset"||_=="parent")||u&&(_=="buffer"||_=="byteLength"||_=="byteOffset")||hD(_,v)))&&m.push(_);return m}fy.exports=mD});var Ua=A((BH,py)=>{"use strict";var gD=Object.prototype;function _D(e){var t=e&&e.constructor,i=typeof t=="function"&&t.prototype||gD;return e===i}py.exports=_D});var gy=A((kH,my)=>{"use strict";var vD=sp(),yD=vD(Object.keys,Object);my.exports=yD});var fp=A((qH,_y)=>{"use strict";var xD=Ua(),CD=gy(),wD=Object.prototype,bD=wD.hasOwnProperty;function zD(e){if(!xD(e))return CD(e);var t=[];for(var i in Object(e))bD.call(e,i)&&i!="constructor"&&t.push(i);return t}_y.exports=zD});var Hr=A(($H,vy)=>{"use strict";var FD=yh(),SD=Ch();function TD(e){return e!=null&&SD(e.length)&&!FD(e)}vy.exports=TD});var po=A((ZH,yy)=>{"use strict";var AD=dp(),PD=fp(),ID=Hr();function ED(e){return ID(e)?AD(e):PD(e)}yy.exports=ED});var pp=A((jH,xy)=>{"use strict";var OD=cp(),MD=po();function DD(e,t){return e&&OD(e,t,MD)}xy.exports=DD});var wy=A((UH,Cy)=>{"use strict";function LD(){this.__data__=[],this.size=0}Cy.exports=LD});var gu=A((HH,by)=>{"use strict";function ND(e,t){return e===t||e!==e&&t!==t}by.exports=ND});var _u=A((WH,zy)=>{"use strict";var RD=gu();function BD(e,t){for(var i=e.length;i--;)if(RD(e[i][0],t))return i;return-1}zy.exports=BD});var Sy=A((VH,Fy)=>{"use strict";var kD=_u(),qD=Array.prototype,$D=qD.splice;function ZD(e){var t=this.__data__,i=kD(t,e);if(i<0)return!1;var o=t.length-1;return i==o?t.pop():$D.call(t,i,1),--this.size,!0}Fy.exports=ZD});var Ay=A((GH,Ty)=>{"use strict";var jD=_u();function UD(e){var t=this.__data__,i=jD(t,e);return i<0?void 0:t[i][1]}Ty.exports=UD});var Iy=A((KH,Py)=>{"use strict";var HD=_u();function WD(e){return HD(this.__data__,e)>-1}Py.exports=WD});var Oy=A((YH,Ey)=>{"use strict";var VD=_u();function GD(e,t){var i=this.__data__,o=VD(i,e);return o<0?(++this.size,i.push([e,t])):i[o][1]=t,this}Ey.exports=GD});var vu=A((JH,My)=>{"use strict";var KD=wy(),YD=Sy(),JD=Ay(),QD=Iy(),XD=Oy();function Ha(e){var t=-1,i=e==null?0:e.length;for(this.clear();++t<i;){var o=e[t];this.set(o[0],o[1])}}Ha.prototype.clear=KD;Ha.prototype.delete=YD;Ha.prototype.get=JD;Ha.prototype.has=QD;Ha.prototype.set=XD;My.exports=Ha});var Ly=A((QH,Dy)=>{"use strict";var e3=vu();function t3(){this.__data__=new e3,this.size=0}Dy.exports=t3});var Ry=A((XH,Ny)=>{"use strict";function n3(e){var t=this.__data__,i=t.delete(e);return this.size=t.size,i}Ny.exports=n3});var ky=A((eW,By)=>{"use strict";function i3(e){return this.__data__.get(e)}By.exports=i3});var $y=A((tW,qy)=>{"use strict";function r3(e){return this.__data__.has(e)}qy.exports=r3});var Fh=A((nW,Zy)=>{"use strict";var o3=Go(),s3=fr(),a3=o3(s3,"Map");Zy.exports=a3});var yu=A((iW,jy)=>{"use strict";var l3=Go(),u3=l3(Object,"create");jy.exports=u3});var Wy=A((rW,Hy)=>{"use strict";var Uy=yu();function c3(){this.__data__=Uy?Uy(null):{},this.size=0}Hy.exports=c3});var Gy=A((oW,Vy)=>{"use strict";function h3(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}Vy.exports=h3});var Yy=A((sW,Ky)=>{"use strict";var d3=yu(),f3="__lodash_hash_undefined__",p3=Object.prototype,m3=p3.hasOwnProperty;function g3(e){var t=this.__data__;if(d3){var i=t[e];return i===f3?void 0:i}return m3.call(t,e)?t[e]:void 0}Ky.exports=g3});var Qy=A((aW,Jy)=>{"use strict";var _3=yu(),v3=Object.prototype,y3=v3.hasOwnProperty;function x3(e){var t=this.__data__;return _3?t[e]!==void 0:y3.call(t,e)}Jy.exports=x3});var e1=A((lW,Xy)=>{"use strict";var C3=yu(),w3="__lodash_hash_undefined__";function b3(e,t){var i=this.__data__;return this.size+=this.has(e)?0:1,i[e]=C3&&t===void 0?w3:t,this}Xy.exports=b3});var n1=A((uW,t1)=>{"use strict";var z3=Wy(),F3=Gy(),S3=Yy(),T3=Qy(),A3=e1();function Wa(e){var t=-1,i=e==null?0:e.length;for(this.clear();++t<i;){var o=e[t];this.set(o[0],o[1])}}Wa.prototype.clear=z3;Wa.prototype.delete=F3;Wa.prototype.get=S3;Wa.prototype.has=T3;Wa.prototype.set=A3;t1.exports=Wa});var o1=A((cW,r1)=>{"use strict";var i1=n1(),P3=vu(),I3=Fh();function E3(){this.size=0,this.__data__={hash:new i1,map:new(I3||P3),string:new i1}}r1.exports=E3});var a1=A((hW,s1)=>{"use strict";function O3(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}s1.exports=O3});var xu=A((dW,l1)=>{"use strict";var M3=a1();function D3(e,t){var i=e.__data__;return M3(t)?i[typeof t=="string"?"string":"hash"]:i.map}l1.exports=D3});var c1=A((fW,u1)=>{"use strict";var L3=xu();function N3(e){var t=L3(this,e).delete(e);return this.size-=t?1:0,t}u1.exports=N3});var d1=A((pW,h1)=>{"use strict";var R3=xu();function B3(e){return R3(this,e).get(e)}h1.exports=B3});var p1=A((mW,f1)=>{"use strict";var k3=xu();function q3(e){return k3(this,e).has(e)}f1.exports=q3});var g1=A((gW,m1)=>{"use strict";var $3=xu();function Z3(e,t){var i=$3(this,e),o=i.size;return i.set(e,t),this.size+=i.size==o?0:1,this}m1.exports=Z3});var Sh=A((_W,_1)=>{"use strict";var j3=o1(),U3=c1(),H3=d1(),W3=p1(),V3=g1();function Va(e){var t=-1,i=e==null?0:e.length;for(this.clear();++t<i;){var o=e[t];this.set(o[0],o[1])}}Va.prototype.clear=j3;Va.prototype.delete=U3;Va.prototype.get=H3;Va.prototype.has=W3;Va.prototype.set=V3;_1.exports=Va});var y1=A((vW,v1)=>{"use strict";var G3=vu(),K3=Fh(),Y3=Sh(),J3=200;function Q3(e,t){var i=this.__data__;if(i instanceof G3){var o=i.__data__;if(!K3||o.length<J3-1)return o.push([e,t]),this.size=++i.size,this;i=this.__data__=new Y3(o)}return i.set(e,t),this.size=i.size,this}v1.exports=Q3});var Th=A((yW,x1)=>{"use strict";var X3=vu(),eL=Ly(),tL=Ry(),nL=ky(),iL=$y(),rL=y1();function Ga(e){var t=this.__data__=new X3(e);this.size=t.size}Ga.prototype.clear=eL;Ga.prototype.delete=tL;Ga.prototype.get=nL;Ga.prototype.has=iL;Ga.prototype.set=rL;x1.exports=Ga});var w1=A((xW,C1)=>{"use strict";var oL="__lodash_hash_undefined__";function sL(e){return this.__data__.set(e,oL),this}C1.exports=sL});var z1=A((CW,b1)=>{"use strict";function aL(e){return this.__data__.has(e)}b1.exports=aL});var mp=A((wW,F1)=>{"use strict";var lL=Sh(),uL=w1(),cL=z1();function Ah(e){var t=-1,i=e==null?0:e.length;for(this.__data__=new lL;++t<i;)this.add(e[t])}Ah.prototype.add=Ah.prototype.push=uL;Ah.prototype.has=cL;F1.exports=Ah});var T1=A((bW,S1)=>{"use strict";function hL(e,t){for(var i=-1,o=e==null?0:e.length;++i<o;)if(t(e[i],i,e))return!0;return!1}S1.exports=hL});var gp=A((zW,A1)=>{"use strict";function dL(e,t){return e.has(t)}A1.exports=dL});var _p=A((FW,P1)=>{"use strict";var fL=mp(),pL=T1(),mL=gp(),gL=1,_L=2;function vL(e,t,i,o,s,u){var d=i&gL,m=e.length,v=t.length;if(m!=v&&!(d&&v>m))return!1;var _=u.get(e),z=u.get(t);if(_&&z)return _==t&&z==e;var F=-1,N=!0,H=i&_L?new fL:void 0;for(u.set(e,t),u.set(t,e);++F<m;){var k=e[F],ae=t[F];if(o)var te=d?o(ae,k,F,t,e,u):o(k,ae,F,e,t,u);if(te!==void 0){if(te)continue;N=!1;break}if(H){if(!pL(t,function(de,ht){if(!mL(H,ht)&&(k===de||s(k,de,i,o,u)))return H.push(ht)})){N=!1;break}}else if(!(k===ae||s(k,ae,i,o,u))){N=!1;break}}return u.delete(e),u.delete(t),N}P1.exports=vL});var vp=A((SW,I1)=>{"use strict";var yL=fr(),xL=yL.Uint8Array;I1.exports=xL});var O1=A((TW,E1)=>{"use strict";function CL(e){var t=-1,i=Array(e.size);return e.forEach(function(o,s){i[++t]=[s,o]}),i}E1.exports=CL});var Ph=A((AW,M1)=>{"use strict";function wL(e){var t=-1,i=Array(e.size);return e.forEach(function(o){i[++t]=o}),i}M1.exports=wL});var B1=A((PW,R1)=>{"use strict";var D1=Bs(),L1=vp(),bL=gu(),zL=_p(),FL=O1(),SL=Ph(),TL=1,AL=2,PL="[object Boolean]",IL="[object Date]",EL="[object Error]",OL="[object Map]",ML="[object Number]",DL="[object RegExp]",LL="[object Set]",NL="[object String]",RL="[object Symbol]",BL="[object ArrayBuffer]",kL="[object DataView]",N1=D1?D1.prototype:void 0,yp=N1?N1.valueOf:void 0;function qL(e,t,i,o,s,u,d){switch(i){case kL:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case BL:return!(e.byteLength!=t.byteLength||!u(new L1(e),new L1(t)));case PL:case IL:case ML:return bL(+e,+t);case EL:return e.name==t.name&&e.message==t.message;case DL:case NL:return e==t+"";case OL:var m=FL;case LL:var v=o&TL;if(m||(m=SL),e.size!=t.size&&!v)return!1;var _=d.get(e);if(_)return _==t;o|=AL,d.set(e,t);var z=zL(m(e),m(t),o,s,u,d);return d.delete(e),z;case RL:if(yp)return yp.call(e)==yp.call(t)}return!1}R1.exports=qL});var Ih=A((IW,k1)=>{"use strict";function $L(e,t){for(var i=-1,o=t.length,s=e.length;++i<o;)e[s+i]=t[i];return e}k1.exports=$L});var xp=A((EW,q1)=>{"use strict";var ZL=Ih(),jL=Bi();function UL(e,t,i){var o=t(e);return jL(e)?o:ZL(o,i(e))}q1.exports=UL});var Z1=A((OW,$1)=>{"use strict";function HL(e,t){for(var i=-1,o=e==null?0:e.length,s=0,u=[];++i<o;){var d=e[i];t(d,i,e)&&(u[s++]=d)}return u}$1.exports=HL});var Cp=A((MW,j1)=>{"use strict";function WL(){return[]}j1.exports=WL});var Eh=A((DW,H1)=>{"use strict";var VL=Z1(),GL=Cp(),KL=Object.prototype,YL=KL.propertyIsEnumerable,U1=Object.getOwnPropertySymbols,JL=U1?function(e){return e==null?[]:(e=Object(e),VL(U1(e),function(t){return YL.call(e,t)}))}:GL;H1.exports=JL});var wp=A((LW,W1)=>{"use strict";var QL=xp(),XL=Eh(),eN=po();function tN(e){return QL(e,eN,XL)}W1.exports=tN});var K1=A((NW,G1)=>{"use strict";var V1=wp(),nN=1,iN=Object.prototype,rN=iN.hasOwnProperty;function oN(e,t,i,o,s,u){var d=i&nN,m=V1(e),v=m.length,_=V1(t),z=_.length;if(v!=z&&!d)return!1;for(var F=v;F--;){var N=m[F];if(!(d?N in t:rN.call(t,N)))return!1}var H=u.get(e),k=u.get(t);if(H&&k)return H==t&&k==e;var ae=!0;u.set(e,t),u.set(t,e);for(var te=d;++F<v;){N=m[F];var de=e[N],ht=t[N];if(o)var Ve=d?o(ht,de,N,t,e,u):o(de,ht,N,e,t,u);if(!(Ve===void 0?de===ht||s(de,ht,i,o,u):Ve)){ae=!1;break}te||(te=N=="constructor")}if(ae&&!te){var Ct=e.constructor,ke=t.constructor;Ct!=ke&&"constructor"in e&&"constructor"in t&&!(typeof Ct=="function"&&Ct instanceof Ct&&typeof ke=="function"&&ke instanceof ke)&&(ae=!1)}return u.delete(e),u.delete(t),ae}G1.exports=oN});var J1=A((RW,Y1)=>{"use strict";var sN=Go(),aN=fr(),lN=sN(aN,"DataView");Y1.exports=lN});var X1=A((BW,Q1)=>{"use strict";var uN=Go(),cN=fr(),hN=uN(cN,"Promise");Q1.exports=hN});var bp=A((kW,ex)=>{"use strict";var dN=Go(),fN=fr(),pN=dN(fN,"Set");ex.exports=pN});var nx=A((qW,tx)=>{"use strict";var mN=Go(),gN=fr(),_N=mN(gN,"WeakMap");tx.exports=_N});var Ya=A(($W,ux)=>{"use strict";var zp=J1(),Fp=Fh(),Sp=X1(),Tp=bp(),Ap=nx(),lx=ks(),Ka=lp(),ix="[object Map]",vN="[object Object]",rx="[object Promise]",ox="[object Set]",sx="[object WeakMap]",ax="[object DataView]",yN=Ka(zp),xN=Ka(Fp),CN=Ka(Sp),wN=Ka(Tp),bN=Ka(Ap),qs=lx;(zp&&qs(new zp(new ArrayBuffer(1)))!=ax||Fp&&qs(new Fp)!=ix||Sp&&qs(Sp.resolve())!=rx||Tp&&qs(new Tp)!=ox||Ap&&qs(new Ap)!=sx)&&(qs=function(e){var t=lx(e),i=t==vN?e.constructor:void 0,o=i?Ka(i):"";if(o)switch(o){case yN:return ax;case xN:return ix;case CN:return rx;case wN:return ox;case bN:return sx}return t});ux.exports=qs});var _x=A((ZW,gx)=>{"use strict";var Pp=Th(),zN=_p(),FN=B1(),SN=K1(),cx=Ya(),hx=Bi(),dx=du(),TN=zh(),AN=1,fx="[object Arguments]",px="[object Array]",Oh="[object Object]",PN=Object.prototype,mx=PN.hasOwnProperty;function IN(e,t,i,o,s,u){var d=hx(e),m=hx(t),v=d?px:cx(e),_=m?px:cx(t);v=v==fx?Oh:v,_=_==fx?Oh:_;var z=v==Oh,F=_==Oh,N=v==_;if(N&&dx(e)){if(!dx(t))return!1;d=!0,z=!1}if(N&&!z)return u||(u=new Pp),d||TN(e)?zN(e,t,i,o,s,u):FN(e,t,v,i,o,s,u);if(!(i&AN)){var H=z&&mx.call(e,"__wrapped__"),k=F&&mx.call(t,"__wrapped__");if(H||k){var ae=H?e.value():e,te=k?t.value():t;return u||(u=new Pp),s(ae,te,i,o,u)}}return N?(u||(u=new Pp),SN(e,t,i,o,s,u)):!1}gx.exports=IN});var Mh=A((jW,xx)=>{"use strict";var EN=_x(),vx=fo();function yx(e,t,i,o,s){return e===t?!0:e==null||t==null||!vx(e)&&!vx(t)?e!==e&&t!==t:EN(e,t,i,o,yx,s)}xx.exports=yx});var wx=A((UW,Cx)=>{"use strict";var ON=Th(),MN=Mh(),DN=1,LN=2;function NN(e,t,i,o){var s=i.length,u=s,d=!o;if(e==null)return!u;for(e=Object(e);s--;){var m=i[s];if(d&&m[2]?m[1]!==e[m[0]]:!(m[0]in e))return!1}for(;++s<u;){m=i[s];var v=m[0],_=e[v],z=m[1];if(d&&m[2]){if(_===void 0&&!(v in e))return!1}else{var F=new ON;if(o)var N=o(_,z,v,e,t,F);if(!(N===void 0?MN(z,_,DN|LN,o,F):N))return!1}}return!0}Cx.exports=NN});var Ip=A((HW,bx)=>{"use strict";var RN=Ur();function BN(e){return e===e&&!RN(e)}bx.exports=BN});var Fx=A((WW,zx)=>{"use strict";var kN=Ip(),qN=po();function $N(e){for(var t=qN(e),i=t.length;i--;){var o=t[i],s=e[o];t[i]=[o,s,kN(s)]}return t}zx.exports=$N});var Ep=A((VW,Sx)=>{"use strict";function ZN(e,t){return function(i){return i==null?!1:i[e]===t&&(t!==void 0||e in Object(i))}}Sx.exports=ZN});var Ax=A((GW,Tx)=>{"use strict";var jN=wx(),UN=Fx(),HN=Ep();function WN(e){var t=UN(e);return t.length==1&&t[0][2]?HN(t[0][0],t[0][1]):function(i){return i===e||jN(i,e,t)}}Tx.exports=WN});var Cu=A((KW,Px)=>{"use strict";var VN=ks(),GN=fo(),KN="[object Symbol]";function YN(e){return typeof e=="symbol"||GN(e)&&VN(e)==KN}Px.exports=YN});var Dh=A((YW,Ix)=>{"use strict";var JN=Bi(),QN=Cu(),XN=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,eR=/^\w*$/;function tR(e,t){if(JN(e))return!1;var i=typeof e;return i=="number"||i=="symbol"||i=="boolean"||e==null||QN(e)?!0:eR.test(e)||!XN.test(e)||t!=null&&e in Object(t)}Ix.exports=tR});var Mx=A((JW,Ox)=>{"use strict";var Ex=Sh(),nR="Expected a function";function Op(e,t){if(typeof e!="function"||t!=null&&typeof t!="function")throw new TypeError(nR);var i=function(){var o=arguments,s=t?t.apply(this,o):o[0],u=i.cache;if(u.has(s))return u.get(s);var d=e.apply(this,o);return i.cache=u.set(s,d)||u,d};return i.cache=new(Op.Cache||Ex),i}Op.Cache=Ex;Ox.exports=Op});var Lx=A((QW,Dx)=>{"use strict";var iR=Mx(),rR=500;function oR(e){var t=iR(e,function(o){return i.size===rR&&i.clear(),o}),i=t.cache;return t}Dx.exports=oR});var Rx=A((XW,Nx)=>{"use strict";var sR=Lx(),aR=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,lR=/\\(\\)?/g,uR=sR(function(e){var t=[];return e.charCodeAt(0)===46&&t.push(""),e.replace(aR,function(i,o,s,u){t.push(s?u.replace(lR,"$1"):o||i)}),t});Nx.exports=uR});var Lh=A((eV,Bx)=>{"use strict";function cR(e,t){for(var i=-1,o=e==null?0:e.length,s=Array(o);++i<o;)s[i]=t(e[i],i,e);return s}Bx.exports=cR});var Ux=A((tV,jx)=>{"use strict";var kx=Bs(),hR=Lh(),dR=Bi(),fR=Cu(),pR=1/0,qx=kx?kx.prototype:void 0,$x=qx?qx.toString:void 0;function Zx(e){if(typeof e=="string")return e;if(dR(e))return hR(e,Zx)+"";if(fR(e))return $x?$x.call(e):"";var t=e+"";return t=="0"&&1/e==-pR?"-0":t}jx.exports=Zx});var Mp=A((nV,Hx)=>{"use strict";var mR=Ux();function gR(e){return e==null?"":mR(e)}Hx.exports=gR});var Ja=A((iV,Wx)=>{"use strict";var _R=Bi(),vR=Dh(),yR=Rx(),xR=Mp();function CR(e,t){return _R(e)?e:vR(e,t)?[e]:yR(xR(e))}Wx.exports=CR});var $s=A((rV,Vx)=>{"use strict";var wR=Cu(),bR=1/0;function zR(e){if(typeof e=="string"||wR(e))return e;var t=e+"";return t=="0"&&1/e==-bR?"-0":t}Vx.exports=zR});var wu=A((oV,Gx)=>{"use strict";var FR=Ja(),SR=$s();function TR(e,t){t=FR(t,e);for(var i=0,o=t.length;e!=null&&i<o;)e=e[SR(t[i++])];return i&&i==o?e:void 0}Gx.exports=TR});var Dp=A((sV,Kx)=>{"use strict";var AR=wu();function PR(e,t,i){var o=e==null?void 0:AR(e,t);return o===void 0?i:o}Kx.exports=PR});var Jx=A((aV,Yx)=>{"use strict";function IR(e,t){return e!=null&&t in Object(e)}Yx.exports=IR});var Lp=A((lV,Qx)=>{"use strict";var ER=Ja(),OR=cu(),MR=Bi(),DR=fu(),LR=Ch(),NR=$s();function RR(e,t,i){t=ER(t,e);for(var o=-1,s=t.length,u=!1;++o<s;){var d=NR(t[o]);if(!(u=e!=null&&i(e,d)))break;e=e[d]}return u||++o!=s?u:(s=e==null?0:e.length,!!s&&LR(s)&&DR(d,s)&&(MR(e)||OR(e)))}Qx.exports=RR});var Np=A((uV,Xx)=>{"use strict";var BR=Jx(),kR=Lp();function qR(e,t){return e!=null&&kR(e,t,BR)}Xx.exports=qR});var tC=A((cV,eC)=>{"use strict";var $R=Mh(),ZR=Dp(),jR=Np(),UR=Dh(),HR=Ip(),WR=Ep(),VR=$s(),GR=1,KR=2;function YR(e,t){return UR(e)&&HR(t)?WR(VR(e),t):function(i){var o=ZR(i,e);return o===void 0&&o===t?jR(i,e):$R(t,o,GR|KR)}}eC.exports=YR});var bu=A((hV,nC)=>{"use strict";function JR(e){return e}nC.exports=JR});var rC=A((dV,iC)=>{"use strict";function QR(e){return function(t){return t?.[e]}}iC.exports=QR});var sC=A((fV,oC)=>{"use strict";var XR=wu();function e4(e){return function(t){return XR(t,e)}}oC.exports=e4});var lC=A((pV,aC)=>{"use strict";var t4=rC(),n4=sC(),i4=Dh(),r4=$s();function o4(e){return i4(e)?t4(r4(e)):n4(e)}aC.exports=o4});var Qa=A((mV,uC)=>{"use strict";var s4=Ax(),a4=tC(),l4=bu(),u4=Bi(),c4=lC();function h4(e){return typeof e=="function"?e:e==null?l4:typeof e=="object"?u4(e)?a4(e[0],e[1]):s4(e):c4(e)}uC.exports=h4});var hC=A((gV,cC)=>{"use strict";var d4=xh(),f4=pp(),p4=Qa();function m4(e,t){var i={};return t=p4(t,3),f4(e,function(o,s,u){d4(i,s,t(o,s,u))}),i}cC.exports=m4});var Rp=A((_V,dC)=>{"use strict";function g4(e,t,i,o){for(var s=e.length,u=i+(o?1:-1);o?u--:++u<s;)if(t(e[u],u,e))return u;return-1}dC.exports=g4});var pC=A((vV,fC)=>{"use strict";function _4(e){return e!==e}fC.exports=_4});var gC=A((yV,mC)=>{"use strict";function v4(e,t,i){for(var o=i-1,s=e.length;++o<s;)if(e[o]===t)return o;return-1}mC.exports=v4});var vC=A((xV,_C)=>{"use strict";var y4=Rp(),x4=pC(),C4=gC();function w4(e,t,i){return t===t?C4(e,t,i):y4(e,x4,i)}_C.exports=w4});var xC=A((CV,yC)=>{"use strict";var b4=vC();function z4(e,t){var i=e==null?0:e.length;return!!i&&b4(e,t,0)>-1}yC.exports=z4});var wC=A((wV,CC)=>{"use strict";function F4(e,t,i){for(var o=-1,s=e==null?0:e.length;++o<s;)if(i(t,e[o]))return!0;return!1}CC.exports=F4});var zC=A((bV,bC)=>{"use strict";function S4(){}bC.exports=S4});var SC=A((zV,FC)=>{"use strict";var Bp=bp(),T4=zC(),A4=Ph(),P4=1/0,I4=Bp&&1/A4(new Bp([,-0]))[1]==P4?function(e){return new Bp(e)}:T4;FC.exports=I4});var kp=A((FV,TC)=>{"use strict";var E4=mp(),O4=xC(),M4=wC(),D4=gp(),L4=SC(),N4=Ph(),R4=200;function B4(e,t,i){var o=-1,s=O4,u=e.length,d=!0,m=[],v=m;if(i)d=!1,s=M4;else if(u>=R4){var _=t?null:L4(e);if(_)return N4(_);d=!1,s=D4,v=new E4}else v=t?[]:m;e:for(;++o<u;){var z=e[o],F=t?t(z):z;if(z=i||z!==0?z:0,d&&F===F){for(var N=v.length;N--;)if(v[N]===F)continue e;t&&v.push(F),m.push(z)}else s(v,F,i)||(v!==m&&v.push(F),m.push(z))}return m}TC.exports=B4});var PC=A((SV,AC)=>{"use strict";var k4=kp();function q4(e){return e&&e.length?k4(e):[]}AC.exports=q4});var MC=A((TV,OC)=>{"use strict";var IC=Bs(),$4=cu(),Z4=Bi(),EC=IC?IC.isConcatSpreadable:void 0;function j4(e){return Z4(e)||$4(e)||!!(EC&&e&&e[EC])}OC.exports=j4});var NC=A((AV,LC)=>{"use strict";var U4=Ih(),H4=MC();function DC(e,t,i,o,s){var u=-1,d=e.length;for(i||(i=H4),s||(s=[]);++u<d;){var m=e[u];t>0&&i(m)?t>1?DC(m,t-1,i,o,s):U4(s,m):o||(s[s.length]=m)}return s}LC.exports=DC});var qp=A((PV,RC)=>{"use strict";var W4=NC();function V4(e){var t=e==null?0:e.length;return t?W4(e,1):[]}RC.exports=V4});var Wp=A((OV,VC)=>{"use strict";function X4(e,t,i){var o=-1,s=e.length;t<0&&(t=-t>s?0:s+t),i=i>s?s:i,i<0&&(i+=s),s=t>i?0:i-t>>>0,t>>>=0;for(var u=Array(s);++o<s;)u[o]=e[o+t];return u}VC.exports=X4});var KC=A((MV,GC)=>{"use strict";var e6=Wp();function t6(e,t,i){var o=e.length;return i=i===void 0?o:i,!t&&i>=o?e:e6(e,t,i)}GC.exports=t6});var Vp=A((DV,YC)=>{"use strict";var n6="\\ud800-\\udfff",i6="\\u0300-\\u036f",r6="\\ufe20-\\ufe2f",o6="\\u20d0-\\u20ff",s6=i6+r6+o6,a6="\\ufe0e\\ufe0f",l6="\\u200d",u6=RegExp("["+l6+n6+s6+a6+"]");function c6(e){return u6.test(e)}YC.exports=c6});var QC=A((LV,JC)=>{"use strict";function h6(e){return e.split("")}JC.exports=h6});var sw=A((NV,ow)=>{"use strict";var XC="\\ud800-\\udfff",d6="\\u0300-\\u036f",f6="\\ufe20-\\ufe2f",p6="\\u20d0-\\u20ff",m6=d6+f6+p6,g6="\\ufe0e\\ufe0f",_6="["+XC+"]",Gp="["+m6+"]",Kp="\\ud83c[\\udffb-\\udfff]",v6="(?:"+Gp+"|"+Kp+")",ew="[^"+XC+"]",tw="(?:\\ud83c[\\udde6-\\uddff]){2}",nw="[\\ud800-\\udbff][\\udc00-\\udfff]",y6="\\u200d",iw=v6+"?",rw="["+g6+"]?",x6="(?:"+y6+"(?:"+[ew,tw,nw].join("|")+")"+rw+iw+")*",C6=rw+iw+x6,w6="(?:"+[ew+Gp+"?",Gp,tw,nw,_6].join("|")+")",b6=RegExp(Kp+"(?="+Kp+")|"+w6+C6,"g");function z6(e){return e.match(b6)||[]}ow.exports=z6});var lw=A((RV,aw)=>{"use strict";var F6=QC(),S6=Vp(),T6=sw();function A6(e){return S6(e)?T6(e):F6(e)}aw.exports=A6});var cw=A((BV,uw)=>{"use strict";var P6=KC(),I6=Vp(),E6=lw(),O6=Mp();function M6(e){return function(t){t=O6(t);var i=I6(t)?E6(t):void 0,o=i?i[0]:t.charAt(0),s=i?P6(i,1).join(""):t.slice(1);return o[e]()+s}}uw.exports=M6});var dw=A((kV,hw)=>{"use strict";var D6=cw(),L6=D6("toLowerCase");hw.exports=L6});var pw=A((qV,fw)=>{"use strict";var N6=Mh();function R6(e,t){return N6(e,t)}fw.exports=R6});var gw=A(($V,mw)=>{"use strict";var B6=Hr();function k6(e,t){return function(i,o){if(i==null)return i;if(!B6(i))return e(i,o);for(var s=i.length,u=t?s:-1,d=Object(i);(t?u--:++u<s)&&o(d[u],u,d)!==!1;);return i}}mw.exports=k6});var Yp=A((ZV,_w)=>{"use strict";var q6=pp(),$6=gw(),Z6=$6(q6);_w.exports=Z6});var yw=A((jV,vw)=>{"use strict";var j6=Yp(),U6=Hr();function H6(e,t){var i=-1,o=U6(e)?Array(e.length):[];return j6(e,function(s,u,d){o[++i]=t(s,u,d)}),o}vw.exports=H6});var Cw=A((UV,xw)=>{"use strict";var W6=Lh(),V6=Qa(),G6=yw(),K6=Bi();function Y6(e,t){var i=K6(e)?W6:G6;return i(e,V6(t,3))}xw.exports=Y6});var bw=A((HV,ww)=>{"use strict";function J6(e,t){for(var i=-1,o=e==null?0:e.length;++i<o&&t(e[i],i,e)!==!1;);return e}ww.exports=J6});var zu=A((WV,zw)=>{"use strict";var Q6=xh(),X6=gu(),eB=Object.prototype,tB=eB.hasOwnProperty;function nB(e,t,i){var o=e[t];(!(tB.call(e,t)&&X6(o,i))||i===void 0&&!(t in e))&&Q6(e,t,i)}zw.exports=nB});var el=A((VV,Fw)=>{"use strict";var iB=zu(),rB=xh();function oB(e,t,i,o){var s=!i;i||(i={});for(var u=-1,d=t.length;++u<d;){var m=t[u],v=o?o(i[m],e[m],m,i,e):void 0;v===void 0&&(v=e[m]),s?rB(i,m,v):iB(i,m,v)}return i}Fw.exports=oB});var Tw=A((GV,Sw)=>{"use strict";var sB=el(),aB=po();function lB(e,t){return e&&sB(t,aB(t),e)}Sw.exports=lB});var Pw=A((KV,Aw)=>{"use strict";function uB(e){var t=[];if(e!=null)for(var i in Object(e))t.push(i);return t}Aw.exports=uB});var Ew=A((YV,Iw)=>{"use strict";var cB=Ur(),hB=Ua(),dB=Pw(),fB=Object.prototype,pB=fB.hasOwnProperty;function mB(e){if(!cB(e))return dB(e);var t=hB(e),i=[];for(var o in e)o=="constructor"&&(t||!pB.call(e,o))||i.push(o);return i}Iw.exports=mB});var Fu=A((JV,Ow)=>{"use strict";var gB=dp(),_B=Ew(),vB=Hr();function yB(e){return vB(e)?gB(e,!0):_B(e)}Ow.exports=yB});var Dw=A((QV,Mw)=>{"use strict";var xB=el(),CB=Fu();function wB(e,t){return e&&xB(t,CB(t),e)}Mw.exports=wB});var kw=A((Su,tl)=>{"use strict";var bB=fr(),Bw=typeof Su=="object"&&Su&&!Su.nodeType&&Su,Lw=Bw&&typeof tl=="object"&&tl&&!tl.nodeType&&tl,zB=Lw&&Lw.exports===Bw,Nw=zB?bB.Buffer:void 0,Rw=Nw?Nw.allocUnsafe:void 0;function FB(e,t){if(t)return e.slice();var i=e.length,o=Rw?Rw(i):new e.constructor(i);return e.copy(o),o}tl.exports=FB});var $w=A((XV,qw)=>{"use strict";function SB(e,t){var i=-1,o=e.length;for(t||(t=Array(o));++i<o;)t[i]=e[i];return t}qw.exports=SB});var jw=A((eG,Zw)=>{"use strict";var TB=el(),AB=Eh();function PB(e,t){return TB(e,AB(e),t)}Zw.exports=PB});var Jp=A((tG,Uw)=>{"use strict";var IB=Ih(),EB=vh(),OB=Eh(),MB=Cp(),DB=Object.getOwnPropertySymbols,LB=DB?function(e){for(var t=[];e;)IB(t,OB(e)),e=EB(e);return t}:MB;Uw.exports=LB});var Ww=A((nG,Hw)=>{"use strict";var NB=el(),RB=Jp();function BB(e,t){return NB(e,RB(e),t)}Hw.exports=BB});var Gw=A((iG,Vw)=>{"use strict";var kB=xp(),qB=Jp(),$B=Fu();function ZB(e){return kB(e,$B,qB)}Vw.exports=ZB});var Yw=A((rG,Kw)=>{"use strict";var jB=Object.prototype,UB=jB.hasOwnProperty;function HB(e){var t=e.length,i=new e.constructor(t);return t&&typeof e[0]=="string"&&UB.call(e,"index")&&(i.index=e.index,i.input=e.input),i}Kw.exports=HB});var Bh=A((oG,Qw)=>{"use strict";var Jw=vp();function WB(e){var t=new e.constructor(e.byteLength);return new Jw(t).set(new Jw(e)),t}Qw.exports=WB});var eb=A((sG,Xw)=>{"use strict";var VB=Bh();function GB(e,t){var i=t?VB(e.buffer):e.buffer;return new e.constructor(i,e.byteOffset,e.byteLength)}Xw.exports=GB});var nb=A((aG,tb)=>{"use strict";var KB=/\w*$/;function YB(e){var t=new e.constructor(e.source,KB.exec(e));return t.lastIndex=e.lastIndex,t}tb.exports=YB});var ab=A((lG,sb)=>{"use strict";var ib=Bs(),rb=ib?ib.prototype:void 0,ob=rb?rb.valueOf:void 0;function JB(e){return ob?Object(ob.call(e)):{}}sb.exports=JB});var ub=A((uG,lb)=>{"use strict";var QB=Bh();function XB(e,t){var i=t?QB(e.buffer):e.buffer;return new e.constructor(i,e.byteOffset,e.length)}lb.exports=XB});var hb=A((cG,cb)=>{"use strict";var ek=Bh(),tk=eb(),nk=nb(),ik=ab(),rk=ub(),ok="[object Boolean]",sk="[object Date]",ak="[object Map]",lk="[object Number]",uk="[object RegExp]",ck="[object Set]",hk="[object String]",dk="[object Symbol]",fk="[object ArrayBuffer]",pk="[object DataView]",mk="[object Float32Array]",gk="[object Float64Array]",_k="[object Int8Array]",vk="[object Int16Array]",yk="[object Int32Array]",xk="[object Uint8Array]",Ck="[object Uint8ClampedArray]",wk="[object Uint16Array]",bk="[object Uint32Array]";function zk(e,t,i){var o=e.constructor;switch(t){case fk:return ek(e);case ok:case sk:return new o(+e);case pk:return tk(e,i);case mk:case gk:case _k:case vk:case yk:case xk:case Ck:case wk:case bk:return rk(e,i);case ak:return new o;case lk:case hk:return new o(e);case uk:return nk(e);case ck:return new o;case dk:return ik(e)}}cb.exports=zk});var pb=A((hG,fb)=>{"use strict";var Fk=Ur(),db=Object.create,Sk=function(){function e(){}return function(t){if(!Fk(t))return{};if(db)return db(t);e.prototype=t;var i=new e;return e.prototype=void 0,i}}();fb.exports=Sk});var gb=A((dG,mb)=>{"use strict";var Tk=pb(),Ak=vh(),Pk=Ua();function Ik(e){return typeof e.constructor=="function"&&!Pk(e)?Tk(Ak(e)):{}}mb.exports=Ik});var vb=A((fG,_b)=>{"use strict";var Ek=Ya(),Ok=fo(),Mk="[object Map]";function Dk(e){return Ok(e)&&Ek(e)==Mk}_b.exports=Dk});var wb=A((pG,Cb)=>{"use strict";var Lk=vb(),Nk=wh(),yb=bh(),xb=yb&&yb.isMap,Rk=xb?Nk(xb):Lk;Cb.exports=Rk});var zb=A((mG,bb)=>{"use strict";var Bk=Ya(),kk=fo(),qk="[object Set]";function $k(e){return kk(e)&&Bk(e)==qk}bb.exports=$k});var Ab=A((gG,Tb)=>{"use strict";var Zk=zb(),jk=wh(),Fb=bh(),Sb=Fb&&Fb.isSet,Uk=Sb?jk(Sb):Zk;Tb.exports=Uk});var Mb=A((_G,Ob)=>{"use strict";var Hk=Th(),Wk=bw(),Vk=zu(),Gk=Tw(),Kk=Dw(),Yk=kw(),Jk=$w(),Qk=jw(),Xk=Ww(),e8=wp(),t8=Gw(),n8=Ya(),i8=Yw(),r8=hb(),o8=gb(),s8=Bi(),a8=du(),l8=wb(),u8=Ur(),c8=Ab(),h8=po(),d8=Fu(),f8=1,p8=2,m8=4,Pb="[object Arguments]",g8="[object Array]",_8="[object Boolean]",v8="[object Date]",y8="[object Error]",Ib="[object Function]",x8="[object GeneratorFunction]",C8="[object Map]",w8="[object Number]",Eb="[object Object]",b8="[object RegExp]",z8="[object Set]",F8="[object String]",S8="[object Symbol]",T8="[object WeakMap]",A8="[object ArrayBuffer]",P8="[object DataView]",I8="[object Float32Array]",E8="[object Float64Array]",O8="[object Int8Array]",M8="[object Int16Array]",D8="[object Int32Array]",L8="[object Uint8Array]",N8="[object Uint8ClampedArray]",R8="[object Uint16Array]",B8="[object Uint32Array]",kt={};kt[Pb]=kt[g8]=kt[A8]=kt[P8]=kt[_8]=kt[v8]=kt[I8]=kt[E8]=kt[O8]=kt[M8]=kt[D8]=kt[C8]=kt[w8]=kt[Eb]=kt[b8]=kt[z8]=kt[F8]=kt[S8]=kt[L8]=kt[N8]=kt[R8]=kt[B8]=!0;kt[y8]=kt[Ib]=kt[T8]=!1;function kh(e,t,i,o,s,u){var d,m=t&f8,v=t&p8,_=t&m8;if(i&&(d=s?i(e,o,s,u):i(e)),d!==void 0)return d;if(!u8(e))return e;var z=s8(e);if(z){if(d=i8(e),!m)return Jk(e,d)}else{var F=n8(e),N=F==Ib||F==x8;if(a8(e))return Yk(e,m);if(F==Eb||F==Pb||N&&!s){if(d=v||N?{}:o8(e),!m)return v?Xk(e,Kk(d,e)):Qk(e,Gk(d,e))}else{if(!kt[F])return s?e:{};d=r8(e,F,m)}}u||(u=new Hk);var H=u.get(e);if(H)return H;u.set(e,d),c8(e)?e.forEach(function(te){d.add(kh(te,t,i,te,e,u))}):l8(e)&&e.forEach(function(te,de){d.set(de,kh(te,t,i,de,e,u))});var k=_?v?t8:e8:v?d8:h8,ae=z?void 0:k(e);return Wk(ae||e,function(te,de){ae&&(de=te,te=e[de]),Vk(d,de,kh(te,t,i,de,e,u))}),d}Ob.exports=kh});var Lb=A((vG,Db)=>{"use strict";var k8=Mb(),q8=1,$8=4;function Z8(e){return k8(e,q8|$8)}Db.exports=Z8});var qh=A((yG,Nb)=>{"use strict";function j8(e,t,i){switch(i.length){case 0:return e.call(t);case 1:return e.call(t,i[0]);case 2:return e.call(t,i[0],i[1]);case 3:return e.call(t,i[0],i[1],i[2])}return e.apply(t,i)}Nb.exports=j8});var Bb=A((xG,Rb)=>{"use strict";function U8(e){var t=e==null?0:e.length;return t?e[t-1]:void 0}Rb.exports=U8});var qb=A((CG,kb)=>{"use strict";var H8=wu(),W8=Wp();function V8(e,t){return t.length<2?e:H8(e,W8(t,0,-1))}kb.exports=V8});var Zb=A((wG,$b)=>{"use strict";var G8=qh(),K8=Ja(),Y8=Bb(),J8=qb(),Q8=$s();function X8(e,t,i){t=K8(t,e),e=J8(e,t);var o=e==null?e:e[Q8(Y8(t))];return o==null?void 0:G8(o,e,i)}$b.exports=X8});var Qp=A((bG,Ub)=>{"use strict";var e5=qh(),jb=Math.max;function t5(e,t,i){return t=jb(t===void 0?e.length-1:t,0),function(){for(var o=arguments,s=-1,u=jb(o.length-t,0),d=Array(u);++s<u;)d[s]=o[t+s];s=-1;for(var m=Array(t+1);++s<t;)m[s]=o[s];return m[t]=i(d),e5(e,this,m)}}Ub.exports=t5});var Wb=A((zG,Hb)=>{"use strict";function n5(e){return function(){return e}}Hb.exports=n5});var Kb=A((FG,Gb)=>{"use strict";var i5=Wb(),Vb=up(),r5=bu(),o5=Vb?function(e,t){return Vb(e,"toString",{configurable:!0,enumerable:!1,value:i5(t),writable:!0})}:r5;Gb.exports=o5});var Jb=A((SG,Yb)=>{"use strict";var s5=800,a5=16,l5=Date.now;function u5(e){var t=0,i=0;return function(){var o=l5(),s=a5-(o-i);if(i=o,s>0){if(++t>=s5)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}Yb.exports=u5});var Xp=A((TG,Qb)=>{"use strict";var c5=Kb(),h5=Jb(),d5=h5(c5);Qb.exports=d5});var em=A((AG,Xb)=>{"use strict";var f5=bu(),p5=Qp(),m5=Xp();function g5(e,t){return m5(p5(e,t,f5),e+"")}Xb.exports=g5});var tz=A((PG,ez)=>{"use strict";var _5=qh(),v5=Yp(),y5=Zb(),x5=em(),C5=Hr(),w5=x5(function(e,t,i){var o=-1,s=typeof t=="function",u=C5(e)?Array(e.length):[];return v5(e,function(d){u[++o]=s?_5(t,d,i):y5(d,t,i)}),u});ez.exports=w5});var iz=A((IG,nz)=>{"use strict";function b5(e){for(var t=-1,i=e==null?0:e.length,o=0,s=[];++t<i;){var u=e[t];u&&(s[o++]=u)}return s}nz.exports=b5});var oz=A((EG,rz)=>{"use strict";var z5=Object.prototype,F5=z5.hasOwnProperty;function S5(e,t){return e!=null&&F5.call(e,t)}rz.exports=S5});var az=A((OG,sz)=>{"use strict";var T5=oz(),A5=Lp();function P5(e,t){return e!=null&&A5(e,t,T5)}sz.exports=P5});var uz=A((MG,lz)=>{"use strict";var I5=Lh();function E5(e,t){return I5(t,function(i){return e[i]})}lz.exports=E5});var hz=A((DG,cz)=>{"use strict";var O5=uz(),M5=po();function D5(e){return e==null?[]:O5(e,M5(e))}cz.exports=D5});var fz=A((LG,dz)=>{"use strict";var L5=fp(),N5=Ya(),R5=cu(),B5=Bi(),k5=Hr(),q5=du(),$5=Ua(),Z5=zh(),j5="[object Map]",U5="[object Set]",H5=Object.prototype,W5=H5.hasOwnProperty;function V5(e){if(e==null)return!0;if(k5(e)&&(B5(e)||typeof e=="string"||typeof e.splice=="function"||q5(e)||Z5(e)||R5(e)))return!e.length;var t=N5(e);if(t==j5||t==U5)return!e.size;if($5(e))return!L5(e).length;for(var i in e)if(W5.call(e,i))return!1;return!0}dz.exports=V5});var mz=A((NG,pz)=>{"use strict";var G5=Qa(),K5=kp();function Y5(e,t){return e&&e.length?K5(e,G5(t,2)):[]}pz.exports=Y5});var _z=A((RG,gz)=>{"use strict";var J5=bu();function Q5(e){return typeof e=="function"?e:J5}gz.exports=Q5});var yz=A((BG,vz)=>{"use strict";var X5=cp(),eq=_z(),tq=Fu();function nq(e,t){return e==null?e:X5(e,eq(t),tq)}vz.exports=nq});var wz=A((kG,Cz)=>{"use strict";var iq=zu(),rq=Ja(),oq=fu(),xz=Ur(),sq=$s();function aq(e,t,i,o){if(!xz(e))return e;t=rq(t,e);for(var s=-1,u=t.length,d=u-1,m=e;m!=null&&++s<u;){var v=sq(t[s]),_=i;if(v==="__proto__"||v==="constructor"||v==="prototype")return e;if(s!=d){var z=m[v];_=o?o(z,v,m):void 0,_===void 0&&(_=xz(z)?z:oq(t[s+1])?[]:{})}iq(m,v,_),m=m[v]}return e}Cz.exports=aq});var zz=A((qG,bz)=>{"use strict";var lq=wu(),uq=wz(),cq=Ja();function hq(e,t,i){for(var o=-1,s=t.length,u={};++o<s;){var d=t[o],m=lq(e,d);i(m,d)&&uq(u,cq(d,e),m)}return u}bz.exports=hq});var Sz=A(($G,Fz)=>{"use strict";var dq=zz(),fq=Np();function pq(e,t){return dq(e,t,function(i,o){return fq(e,o)})}Fz.exports=pq});var Az=A((ZG,Tz)=>{"use strict";var mq=qp(),gq=Qp(),_q=Xp();function vq(e){return _q(gq(e,void 0,mq),e+"")}Tz.exports=vq});var Iz=A((jG,Pz)=>{"use strict";var yq=Sz(),xq=Az(),Cq=xq(function(e,t){return e==null?{}:yq(e,t)});Pz.exports=Cq});var Oz=A((UG,Ez)=>{"use strict";var wq=gu(),bq=Hr(),zq=fu(),Fq=Ur();function Sq(e,t,i){if(!Fq(i))return!1;var o=typeof t;return(o=="number"?bq(i)&&zq(t,i.length):o=="string"&&t in i)?wq(i[t],e):!1}Ez.exports=Sq});var Dz=A((HG,Mz)=>{"use strict";var Tq=em(),Aq=Oz();function Pq(e){return Tq(function(t,i){var o=-1,s=i.length,u=s>1?i[s-1]:void 0,d=s>2?i[2]:void 0;for(u=e.length>3&&typeof u=="function"?(s--,u):void 0,d&&Aq(i[0],i[1],d)&&(u=s<3?void 0:u,s=1),t=Object(t);++o<s;){var m=i[o];m&&e(t,m,o,u)}return t})}Mz.exports=Pq});var Nz=A((WG,Lz)=>{"use strict";var Iq=zu(),Eq=el(),Oq=Dz(),Mq=Hr(),Dq=Ua(),Lq=po(),Nq=Object.prototype,Rq=Nq.hasOwnProperty,Bq=Oq(function(e,t){if(Dq(t)||Mq(t)){Eq(t,Lq(t),e);return}for(var i in t)Rq.call(t,i)&&Iq(e,i,t[i])});Lz.exports=Bq});var Bz=A((VG,Rz)=>{"use strict";var kq=Qa(),qq=Hr(),$q=po();function Zq(e){return function(t,i,o){var s=Object(t);if(!qq(t)){var u=kq(i,3);t=$q(t),i=function(m){return u(s[m],m,s)}}var d=e(t,i,o);return d>-1?s[u?t[d]:d]:void 0}}Rz.exports=Zq});var qz=A((GG,kz)=>{"use strict";var jq=/\s/;function Uq(e){for(var t=e.length;t--&&jq.test(e.charAt(t)););return t}kz.exports=Uq});var Zz=A((KG,$z)=>{"use strict";var Hq=qz(),Wq=/^\s+/;function Vq(e){return e&&e.slice(0,Hq(e)+1).replace(Wq,"")}$z.exports=Vq});var Wz=A((YG,Hz)=>{"use strict";var Gq=Zz(),jz=Ur(),Kq=Cu(),Uz=NaN,Yq=/^[-+]0x[0-9a-f]+$/i,Jq=/^0b[01]+$/i,Qq=/^0o[0-7]+$/i,Xq=parseInt;function e7(e){if(typeof e=="number")return e;if(Kq(e))return Uz;if(jz(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=jz(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=Gq(e);var i=Jq.test(e);return i||Qq.test(e)?Xq(e.slice(2),i?2:8):Yq.test(e)?Uz:+e}Hz.exports=e7});var Kz=A((JG,Gz)=>{"use strict";var t7=Wz(),Vz=1/0,n7=17976931348623157e292;function i7(e){if(!e)return e===0?e:0;if(e=t7(e),e===Vz||e===-Vz){var t=e<0?-1:1;return t*n7}return e===e?e:0}Gz.exports=i7});var tm=A((QG,Yz)=>{"use strict";var r7=Kz();function o7(e){var t=r7(e),i=t%1;return t===t?i?t-i:t:0}Yz.exports=o7});var Qz=A((XG,Jz)=>{"use strict";var s7=Rp(),a7=Qa(),l7=tm(),u7=Math.max;function c7(e,t,i){var o=e==null?0:e.length;if(!o)return-1;var s=i==null?0:l7(i);return s<0&&(s=u7(o+s,0)),s7(e,a7(t,3),s)}Jz.exports=c7});var eF=A((eK,Xz)=>{"use strict";var h7=Bz(),d7=Qz(),f7=h7(d7);Xz.exports=f7});var nF=A((tK,tF)=>{"use strict";var p7=tm();function m7(e){return typeof e=="number"&&e==p7(e)}tF.exports=m7});var QF=A((ll,Du)=>{"use strict";(function(){var e,t="4.17.21",i=200,o="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",s="Expected a function",u="Invalid `variable` option passed into `_.template`",d="__lodash_hash_undefined__",m=500,v="__lodash_placeholder__",_=1,z=2,F=4,N=1,H=2,k=1,ae=2,te=4,de=8,ht=16,Ve=32,Ct=64,ke=128,ge=256,rt=512,At=30,R="...",X=800,fe=16,re=1,Le=2,ee=3,Te=1/0,j=9007199254740991,Re=17976931348623157e292,ce=NaN,xe=4294967295,Ke=xe-1,lt=xe>>>1,je=[["ary",ke],["bind",k],["bindKey",ae],["curry",de],["curryRight",ht],["flip",rt],["partial",Ve],["partialRight",Ct],["rearg",ge]],Se="[object Arguments]",Ce="[object Array]",nt="[object AsyncFunction]",we="[object Boolean]",Ht="[object Date]",hn="[object DOMException]",Wt="[object Error]",Et="[object Function]",oe="[object GeneratorFunction]",ne="[object Map]",ie="[object Number]",ze="[object Null]",Vn="[object Object]",nr="[object Promise]",rs="[object Proxy]",ki="[object RegExp]",An="[object Set]",qi="[object String]",$i="[object Symbol]",yo="[object Undefined]",_n="[object WeakMap]",$n="[object WeakSet]",ve="[object ArrayBuffer]",be="[object DataView]",xt="[object Float32Array]",mt="[object Float64Array]",Pn="[object Int8Array]",Zn="[object Int16Array]",rn="[object Int32Array]",Xt="[object Uint8Array]",en="[object Uint8ClampedArray]",on="[object Uint16Array]",Ot="[object Uint32Array]",vn=/\b__p \+= '';/g,In=/\b(__p \+=) '' \+/g,yn=/(__e\(.*?\)|\b__t\)) \+\n'';/g,dn=/&(?:amp|lt|gt|quot|#39);/g,fn=/[&<>"']/g,En=RegExp(dn.source),On=RegExp(fn.source),Mn=/<%-([\s\S]+?)%>/g,Dn=/<%([\s\S]+?)%>/g,xn=/<%=([\s\S]+?)%>/g,Ln=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,gl=/^\w*$/,Nd=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,_l=/[\\^$.*+?()[\]{}|]/g,Rd=RegExp(_l.source),vl=/^\s+/,Zi=/\s/,ye=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,qu=/\{\n\/\* \[wrapped with (.+)\] \*/,$u=/,? & /,Zu=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,ju=/[()=,{}\[\]\/\s]/,yl=/\\(\\)?/g,Uu=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Gr=/\w*$/,Hu=/^[-+]0x[0-9a-f]+$/i,Bd=/^0b[01]+$/i,kd=/^\[object .+?Constructor\]$/,qd=/^0o[0-7]+$/i,$d=/^(?:0|[1-9]\d*)$/,Wu=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Qs=/($^)/,Xs=/['\n\r\u2028\u2029\\]/g,ea="\\ud800-\\udfff",Zd="\\u0300-\\u036f",jd="\\ufe20-\\ufe2f",Ud="\\u20d0-\\u20ff",Vu=Zd+jd+Ud,ta="\\u2700-\\u27bf",xo="a-z\\xdf-\\xf6\\xf8-\\xff",Gu="\\xac\\xb1\\xd7\\xf7",Ku="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",os="\\u2000-\\u206f",gt=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Mt="A-Z\\xc0-\\xd6\\xd8-\\xde",ss="\\ufe0e\\ufe0f",Kr=Gu+Ku+os+gt,mr="['\u2019]",xl="["+ea+"]",qe="["+Kr+"]",Dt="["+Vu+"]",na="\\d+",ia="["+ta+"]",ai="["+xo+"]",Yu="[^"+ea+Kr+na+ta+xo+Mt+"]",Co="\\ud83c[\\udffb-\\udfff]",Yr="(?:"+Dt+"|"+Co+")",tn="[^"+ea+"]",ir="(?:\\ud83c[\\udde6-\\uddff]){2}",Jr="[\\ud800-\\udbff][\\udc00-\\udfff]",ji="["+Mt+"]",ra="\\u200d",wo="(?:"+ai+"|"+Yu+")",Cl="(?:"+ji+"|"+Yu+")",oa="(?:"+mr+"(?:d|ll|m|re|s|t|ve))?",as="(?:"+mr+"(?:D|LL|M|RE|S|T|VE))?",sa=Yr+"?",aa="["+ss+"]?",la="(?:"+ra+"(?:"+[tn,ir,Jr].join("|")+")"+aa+sa+")*",Ju="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",wl="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",Qu=aa+sa+la,Be="(?:"+[ia,ir,Jr].join("|")+")"+Qu,Ui="(?:"+[tn+Dt+"?",Dt,ir,Jr,xl].join("|")+")",Pt=RegExp(mr,"g"),Xu=RegExp(Dt,"g"),ls=RegExp(Co+"(?="+Co+")|"+Ui+Qu,"g"),bl=RegExp([ji+"?"+ai+"+"+oa+"(?="+[qe,ji,"$"].join("|")+")",Cl+"+"+as+"(?="+[qe,ji+wo,"$"].join("|")+")",ji+"?"+wo+"+"+oa,ji+"+"+as,wl,Ju,na,Be].join("|"),"g"),zl=RegExp("["+ra+ea+Vu+ss+"]"),Qr=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Fl=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],us=-1,$e={};$e[xt]=$e[mt]=$e[Pn]=$e[Zn]=$e[rn]=$e[Xt]=$e[en]=$e[on]=$e[Ot]=!0,$e[Se]=$e[Ce]=$e[ve]=$e[we]=$e[be]=$e[Ht]=$e[Wt]=$e[Et]=$e[ne]=$e[ie]=$e[Vn]=$e[ki]=$e[An]=$e[qi]=$e[_n]=!1;var _t={};_t[Se]=_t[Ce]=_t[ve]=_t[be]=_t[we]=_t[Ht]=_t[xt]=_t[mt]=_t[Pn]=_t[Zn]=_t[rn]=_t[ne]=_t[ie]=_t[Vn]=_t[ki]=_t[An]=_t[qi]=_t[$i]=_t[Xt]=_t[en]=_t[on]=_t[Ot]=!0,_t[Wt]=_t[Et]=_t[_n]=!1;var ec={\u00C0:"A",\u00C1:"A",\u00C2:"A",\u00C3:"A",\u00C4:"A",\u00C5:"A",\u00E0:"a",\u00E1:"a",\u00E2:"a",\u00E3:"a",\u00E4:"a",\u00E5:"a",\u00C7:"C",\u00E7:"c",\u00D0:"D",\u00F0:"d",\u00C8:"E",\u00C9:"E",\u00CA:"E",\u00CB:"E",\u00E8:"e",\u00E9:"e",\u00EA:"e",\u00EB:"e",\u00CC:"I",\u00CD:"I",\u00CE:"I",\u00CF:"I",\u00EC:"i",\u00ED:"i",\u00EE:"i",\u00EF:"i",\u00D1:"N",\u00F1:"n",\u00D2:"O",\u00D3:"O",\u00D4:"O",\u00D5:"O",\u00D6:"O",\u00D8:"O",\u00F2:"o",\u00F3:"o",\u00F4:"o",\u00F5:"o",\u00F6:"o",\u00F8:"o",\u00D9:"U",\u00DA:"U",\u00DB:"U",\u00DC:"U",\u00F9:"u",\u00FA:"u",\u00FB:"u",\u00FC:"u",\u00DD:"Y",\u00FD:"y",\u00FF:"y",\u00C6:"Ae",\u00E6:"ae",\u00DE:"Th",\u00FE:"th",\u00DF:"ss",\u0100:"A",\u0102:"A",\u0104:"A",\u0101:"a",\u0103:"a",\u0105:"a",\u0106:"C",\u0108:"C",\u010A:"C",\u010C:"C",\u0107:"c",\u0109:"c",\u010B:"c",\u010D:"c",\u010E:"D",\u0110:"D",\u010F:"d",\u0111:"d",\u0112:"E",\u0114:"E",\u0116:"E",\u0118:"E",\u011A:"E",\u0113:"e",\u0115:"e",\u0117:"e",\u0119:"e",\u011B:"e",\u011C:"G",\u011E:"G",\u0120:"G",\u0122:"G",\u011D:"g",\u011F:"g",\u0121:"g",\u0123:"g",\u0124:"H",\u0126:"H",\u0125:"h",\u0127:"h",\u0128:"I",\u012A:"I",\u012C:"I",\u012E:"I",\u0130:"I",\u0129:"i",\u012B:"i",\u012D:"i",\u012F:"i",\u0131:"i",\u0134:"J",\u0135:"j",\u0136:"K",\u0137:"k",\u0138:"k",\u0139:"L",\u013B:"L",\u013D:"L",\u013F:"L",\u0141:"L",\u013A:"l",\u013C:"l",\u013E:"l",\u0140:"l",\u0142:"l",\u0143:"N",\u0145:"N",\u0147:"N",\u014A:"N",\u0144:"n",\u0146:"n",\u0148:"n",\u014B:"n",\u014C:"O",\u014E:"O",\u0150:"O",\u014D:"o",\u014F:"o",\u0151:"o",\u0154:"R",\u0156:"R",\u0158:"R",\u0155:"r",\u0157:"r",\u0159:"r",\u015A:"S",\u015C:"S",\u015E:"S",\u0160:"S",\u015B:"s",\u015D:"s",\u015F:"s",\u0161:"s",\u0162:"T",\u0164:"T",\u0166:"T",\u0163:"t",\u0165:"t",\u0167:"t",\u0168:"U",\u016A:"U",\u016C:"U",\u016E:"U",\u0170:"U",\u0172:"U",\u0169:"u",\u016B:"u",\u016D:"u",\u016F:"u",\u0171:"u",\u0173:"u",\u0174:"W",\u0175:"w",\u0176:"Y",\u0177:"y",\u0178:"Y",\u0179:"Z",\u017B:"Z",\u017D:"Z",\u017A:"z",\u017C:"z",\u017E:"z",\u0132:"IJ",\u0133:"ij",\u0152:"Oe",\u0153:"oe",\u0149:"'n",\u017F:"s"},tc={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},Hd={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},nc={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Sl=parseFloat,Wd=parseInt,Tl=typeof global=="object"&&global&&global.Object===Object&&global,ut=typeof self=="object"&&self&&self.Object===Object&&self,Cn=Tl||ut||Function("return this")(),li=typeof ll=="object"&&ll&&!ll.nodeType&&ll,Ei=li&&typeof Du=="object"&&Du&&!Du.nodeType&&Du,Al=Ei&&Ei.exports===li,Pl=Al&&Tl.process,ei=function(){try{var O=Ei&&Ei.require&&Ei.require("util").types;return O||Pl&&Pl.binding&&Pl.binding("util")}catch{}}(),ic=ei&&ei.isArrayBuffer,Il=ei&&ei.isDate,rc=ei&&ei.isMap,oc=ei&&ei.isRegExp,ua=ei&&ei.isSet,sc=ei&&ei.isTypedArray;function Vt(O,W,Z){switch(Z.length){case 0:return O.call(W);case 1:return O.call(W,Z[0]);case 2:return O.call(W,Z[0],Z[1]);case 3:return O.call(W,Z[0],Z[1],Z[2])}return O.apply(W,Z)}function Vd(O,W,Z,he){for(var Ne=-1,vt=O==null?0:O.length;++Ne<vt;){var pn=O[Ne];W(he,pn,Z(pn),O)}return he}function ui(O,W){for(var Z=-1,he=O==null?0:O.length;++Z<he&&W(O[Z],Z,O)!==!1;);return O}function gr(O,W){for(var Z=O==null?0:O.length;Z--&&W(O[Z],Z,O)!==!1;);return O}function El(O,W){for(var Z=-1,he=O==null?0:O.length;++Z<he;)if(!W(O[Z],Z,O))return!1;return!0}function rr(O,W){for(var Z=-1,he=O==null?0:O.length,Ne=0,vt=[];++Z<he;){var pn=O[Z];W(pn,Z,O)&&(vt[Ne++]=pn)}return vt}function bo(O,W){var Z=O==null?0:O.length;return!!Z&&zo(O,W,0)>-1}function Ol(O,W,Z){for(var he=-1,Ne=O==null?0:O.length;++he<Ne;)if(Z(W,O[he]))return!0;return!1}function It(O,W){for(var Z=-1,he=O==null?0:O.length,Ne=Array(he);++Z<he;)Ne[Z]=W(O[Z],Z,O);return Ne}function or(O,W){for(var Z=-1,he=W.length,Ne=O.length;++Z<he;)O[Ne+Z]=W[Z];return O}function Ml(O,W,Z,he){var Ne=-1,vt=O==null?0:O.length;for(he&&vt&&(Z=O[++Ne]);++Ne<vt;)Z=W(Z,O[Ne],Ne,O);return Z}function Gd(O,W,Z,he){var Ne=O==null?0:O.length;for(he&&Ne&&(Z=O[--Ne]);Ne--;)Z=W(Z,O[Ne],Ne,O);return Z}function cs(O,W){for(var Z=-1,he=O==null?0:O.length;++Z<he;)if(W(O[Z],Z,O))return!0;return!1}var Kd=ca("length");function ac(O){return O.split("")}function lc(O){return O.match(Zu)||[]}function hs(O,W,Z){var he;return Z(O,function(Ne,vt,pn){if(W(Ne,vt,pn))return he=vt,!1}),he}function Hi(O,W,Z,he){for(var Ne=O.length,vt=Z+(he?1:-1);he?vt--:++vt<Ne;)if(W(O[vt],vt,O))return vt;return-1}function zo(O,W,Z){return W===W?To(O,W,Z):Hi(O,ci,Z)}function ds(O,W,Z,he){for(var Ne=Z-1,vt=O.length;++Ne<vt;)if(he(O[Ne],W))return Ne;return-1}function ci(O){return O!==O}function Dl(O,W){var Z=O==null?0:O.length;return Z?Rl(O,W)/Z:ce}function ca(O){return function(W){return W==null?e:W[O]}}function Ll(O){return function(W){return O==null?e:O[W]}}function ha(O,W,Z,he,Ne){return Ne(O,function(vt,pn,bt){Z=he?(he=!1,vt):W(Z,vt,pn,bt)}),Z}function Nl(O,W){var Z=O.length;for(O.sort(W);Z--;)O[Z]=O[Z].value;return O}function Rl(O,W){for(var Z,he=-1,Ne=O.length;++he<Ne;){var vt=W(O[he]);vt!==e&&(Z=Z===e?vt:Z+vt)}return Z}function Bl(O,W){for(var Z=-1,he=Array(O);++Z<O;)he[Z]=W(Z);return he}function uc(O,W){return It(W,function(Z){return[Z,O[Z]]})}function cc(O){return O&&O.slice(0,ql(O)+1).replace(vl,"")}function jt(O){return function(W){return O(W)}}function _r(O,W){return It(W,function(Z){return O[Z]})}function fs(O,W){return O.has(W)}function Wi(O,W){for(var Z=-1,he=O.length;++Z<he&&zo(W,O[Z],0)>-1;);return Z}function hc(O,W){for(var Z=O.length;Z--&&zo(W,O[Z],0)>-1;);return Z}function Fo(O,W){for(var Z=O.length,he=0;Z--;)O[Z]===W&&++he;return he}var Yd=Ll(ec),ps=Ll(tc);function dc(O){return"\\"+nc[O]}function da(O,W){return O==null?e:O[W]}function So(O){return zl.test(O)}function vr(O){return Qr.test(O)}function fa(O){for(var W,Z=[];!(W=O.next()).done;)Z.push(W.value);return Z}function kl(O){var W=-1,Z=Array(O.size);return O.forEach(function(he,Ne){Z[++W]=[Ne,he]}),Z}function pa(O,W){return function(Z){return O(W(Z))}}function yr(O,W){for(var Z=-1,he=O.length,Ne=0,vt=[];++Z<he;){var pn=O[Z];(pn===W||pn===v)&&(O[Z]=v,vt[Ne++]=Z)}return vt}function xi(O){var W=-1,Z=Array(O.size);return O.forEach(function(he){Z[++W]=he}),Z}function Jd(O){var W=-1,Z=Array(O.size);return O.forEach(function(he){Z[++W]=[he,he]}),Z}function To(O,W,Z){for(var he=Z-1,Ne=O.length;++he<Ne;)if(O[he]===W)return he;return-1}function Qd(O,W,Z){for(var he=Z+1;he--;)if(O[he]===W)return he;return he}function ti(O){return So(O)?ma(O):Kd(O)}function ni(O){return So(O)?Zl(O):ac(O)}function ql(O){for(var W=O.length;W--&&Zi.test(O.charAt(W)););return W}var $l=Ll(Hd);function ma(O){for(var W=ls.lastIndex=0;ls.test(O);)++W;return W}function Zl(O){return O.match(ls)||[]}function ga(O){return O.match(bl)||[]}var Ao=function O(W){W=W==null?Cn:Oi.defaults(Cn.Object(),W,Oi.pick(Cn,Fl));var Z=W.Array,he=W.Date,Ne=W.Error,vt=W.Function,pn=W.Math,bt=W.Object,jl=W.RegExp,Vi=W.String,Gn=W.TypeError,_a=Z.prototype,va=vt.prototype,Po=bt.prototype,ms=W["__core-js_shared__"],ya=va.toString,dt=Po.hasOwnProperty,Xd=0,Xr=function(){var r=/[^.]+$/.exec(ms&&ms.keys&&ms.keys.IE_PROTO||"");return r?"Symbol(src)_1."+r:""}(),gs=Po.toString,fc=ya.call(bt),ef=Cn._,sr=jl("^"+ya.call(dt).replace(_l,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),_s=Al?W.Buffer:e,ar=W.Symbol,xr=W.Uint8Array,pc=_s?_s.allocUnsafe:e,eo=pa(bt.getPrototypeOf,bt),Io=bt.create,Ul=Po.propertyIsEnumerable,vs=_a.splice,mc=ar?ar.isConcatSpreadable:e,Eo=ar?ar.iterator:e,Cr=ar?ar.toStringTag:e,ys=function(){try{var r=As(bt,"defineProperty");return r({},"",{}),r}catch{}}(),gc=W.clearTimeout!==Cn.clearTimeout&&W.clearTimeout,_c=he&&he.now!==Cn.Date.now&&he.now,tf=W.setTimeout!==Cn.setTimeout&&W.setTimeout,xs=pn.ceil,Cs=pn.floor,Hl=bt.getOwnPropertySymbols,n=_s?_s.isBuffer:e,a=W.isFinite,c=_a.join,f=pa(bt.keys,bt),g=pn.max,x=pn.min,T=he.now,D=W.parseInt,$=pn.random,Y=_a.reverse,ue=As(W,"DataView"),Fe=As(W,"Map"),Ue=As(W,"Promise"),sn=As(W,"Set"),Gt=As(W,"WeakMap"),jn=As(bt,"create"),Nn=Gt&&new Gt,Mi={},nf=Ps(ue),rf=Ps(Fe),of=Ps(Ue),vc=Ps(sn),sf=Ps(Gt),ws=ar?ar.prototype:e,Lt=ws?ws.valueOf:e,bs=ws?ws.toString:e;function C(r){if(an(r)&&!Ze(r)&&!(r instanceof Je)){if(r instanceof ii)return r;if(dt.call(r,"__wrapped__"))return lg(r)}return new ii(r)}var Oo=function(){function r(){}return function(l){if(!nn(l))return{};if(Io)return Io(l);r.prototype=l;var h=new r;return r.prototype=e,h}}();function xa(){}function ii(r,l){this.__wrapped__=r,this.__actions__=[],this.__chain__=!!l,this.__index__=0,this.__values__=e}C.templateSettings={escape:Mn,evaluate:Dn,interpolate:xn,variable:"",imports:{_:C}},C.prototype=xa.prototype,C.prototype.constructor=C,ii.prototype=Oo(xa.prototype),ii.prototype.constructor=ii;function Je(r){this.__wrapped__=r,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=xe,this.__views__=[]}function af(){var r=new Je(this.__wrapped__);return r.__actions__=Ci(this.__actions__),r.__dir__=this.__dir__,r.__filtered__=this.__filtered__,r.__iteratees__=Ci(this.__iteratees__),r.__takeCount__=this.__takeCount__,r.__views__=Ci(this.__views__),r}function a2(){if(this.__filtered__){var r=new Je(this);r.__dir__=-1,r.__filtered__=!0}else r=this.clone(),r.__dir__*=-1;return r}function l2(){var r=this.__wrapped__.value(),l=this.__dir__,h=Ze(r),p=l<0,y=h?r.length:0,w=xT(0,y,this.__views__),b=w.start,P=w.end,M=P-b,V=p?P:b-1,G=this.__iteratees__,J=G.length,le=0,_e=x(M,this.__takeCount__);if(!h||!p&&y==M&&_e==M)return E0(r,this.__actions__);var Pe=[];e:for(;M--&&le<_e;){V+=l;for(var Ye=-1,Ie=r[V];++Ye<J;){var ot=G[Ye],ft=ot.iteratee,Ni=ot.type,fi=ft(Ie);if(Ni==Le)Ie=fi;else if(!fi){if(Ni==re)continue e;break e}}Pe[le++]=Ie}return Pe}Je.prototype=Oo(xa.prototype),Je.prototype.constructor=Je;function zs(r){var l=-1,h=r==null?0:r.length;for(this.clear();++l<h;){var p=r[l];this.set(p[0],p[1])}}function u2(){this.__data__=jn?jn(null):{},this.size=0}function c2(r){var l=this.has(r)&&delete this.__data__[r];return this.size-=l?1:0,l}function h2(r){var l=this.__data__;if(jn){var h=l[r];return h===d?e:h}return dt.call(l,r)?l[r]:e}function d2(r){var l=this.__data__;return jn?l[r]!==e:dt.call(l,r)}function f2(r,l){var h=this.__data__;return this.size+=this.has(r)?0:1,h[r]=jn&&l===e?d:l,this}zs.prototype.clear=u2,zs.prototype.delete=c2,zs.prototype.get=h2,zs.prototype.has=d2,zs.prototype.set=f2;function to(r){var l=-1,h=r==null?0:r.length;for(this.clear();++l<h;){var p=r[l];this.set(p[0],p[1])}}function p2(){this.__data__=[],this.size=0}function m2(r){var l=this.__data__,h=yc(l,r);if(h<0)return!1;var p=l.length-1;return h==p?l.pop():vs.call(l,h,1),--this.size,!0}function g2(r){var l=this.__data__,h=yc(l,r);return h<0?e:l[h][1]}function _2(r){return yc(this.__data__,r)>-1}function v2(r,l){var h=this.__data__,p=yc(h,r);return p<0?(++this.size,h.push([r,l])):h[p][1]=l,this}to.prototype.clear=p2,to.prototype.delete=m2,to.prototype.get=g2,to.prototype.has=_2,to.prototype.set=v2;function no(r){var l=-1,h=r==null?0:r.length;for(this.clear();++l<h;){var p=r[l];this.set(p[0],p[1])}}function y2(){this.size=0,this.__data__={hash:new zs,map:new(Fe||to),string:new zs}}function x2(r){var l=Ec(this,r).delete(r);return this.size-=l?1:0,l}function C2(r){return Ec(this,r).get(r)}function w2(r){return Ec(this,r).has(r)}function b2(r,l){var h=Ec(this,r),p=h.size;return h.set(r,l),this.size+=h.size==p?0:1,this}no.prototype.clear=y2,no.prototype.delete=x2,no.prototype.get=C2,no.prototype.has=w2,no.prototype.set=b2;function Fs(r){var l=-1,h=r==null?0:r.length;for(this.__data__=new no;++l<h;)this.add(r[l])}function z2(r){return this.__data__.set(r,d),this}function F2(r){return this.__data__.has(r)}Fs.prototype.add=Fs.prototype.push=z2,Fs.prototype.has=F2;function lr(r){var l=this.__data__=new to(r);this.size=l.size}function S2(){this.__data__=new to,this.size=0}function T2(r){var l=this.__data__,h=l.delete(r);return this.size=l.size,h}function A2(r){return this.__data__.get(r)}function P2(r){return this.__data__.has(r)}function I2(r,l){var h=this.__data__;if(h instanceof to){var p=h.__data__;if(!Fe||p.length<i-1)return p.push([r,l]),this.size=++h.size,this;h=this.__data__=new no(p)}return h.set(r,l),this.size=h.size,this}lr.prototype.clear=S2,lr.prototype.delete=T2,lr.prototype.get=A2,lr.prototype.has=P2,lr.prototype.set=I2;function l0(r,l){var h=Ze(r),p=!h&&Is(r),y=!h&&!p&&Ro(r),w=!h&&!p&&!y&&za(r),b=h||p||y||w,P=b?Bl(r.length,Vi):[],M=P.length;for(var V in r)(l||dt.call(r,V))&&!(b&&(V=="length"||y&&(V=="offset"||V=="parent")||w&&(V=="buffer"||V=="byteLength"||V=="byteOffset")||so(V,M)))&&P.push(V);return P}function u0(r){var l=r.length;return l?r[vf(0,l-1)]:e}function E2(r,l){return Oc(Ci(r),Ss(l,0,r.length))}function O2(r){return Oc(Ci(r))}function lf(r,l,h){(h!==e&&!ur(r[l],h)||h===e&&!(l in r))&&io(r,l,h)}function Wl(r,l,h){var p=r[l];(!(dt.call(r,l)&&ur(p,h))||h===e&&!(l in r))&&io(r,l,h)}function yc(r,l){for(var h=r.length;h--;)if(ur(r[h][0],l))return h;return-1}function M2(r,l,h,p){return Mo(r,function(y,w,b){l(p,y,h(y),b)}),p}function c0(r,l){return r&&br(l,Un(l),r)}function D2(r,l){return r&&br(l,bi(l),r)}function io(r,l,h){l=="__proto__"&&ys?ys(r,l,{configurable:!0,enumerable:!0,value:h,writable:!0}):r[l]=h}function uf(r,l){for(var h=-1,p=l.length,y=Z(p),w=r==null;++h<p;)y[h]=w?e:jf(r,l[h]);return y}function Ss(r,l,h){return r===r&&(h!==e&&(r=r<=h?r:h),l!==e&&(r=r>=l?r:l)),r}function Gi(r,l,h,p,y,w){var b,P=l&_,M=l&z,V=l&F;if(h&&(b=y?h(r,p,y,w):h(r)),b!==e)return b;if(!nn(r))return r;var G=Ze(r);if(G){if(b=wT(r),!P)return Ci(r,b)}else{var J=ri(r),le=J==Et||J==oe;if(Ro(r))return D0(r,P);if(J==Vn||J==Se||le&&!y){if(b=M||le?{}:X0(r),!P)return M?hT(r,D2(b,r)):cT(r,c0(b,r))}else{if(!_t[J])return y?r:{};b=bT(r,J,P)}}w||(w=new lr);var _e=w.get(r);if(_e)return _e;w.set(r,b),Ag(r)?r.forEach(function(Ie){b.add(Gi(Ie,l,h,Ie,r,w))}):Sg(r)&&r.forEach(function(Ie,ot){b.set(ot,Gi(Ie,l,h,ot,r,w))});var Pe=V?M?Pf:Af:M?bi:Un,Ye=G?e:Pe(r);return ui(Ye||r,function(Ie,ot){Ye&&(ot=Ie,Ie=r[ot]),Wl(b,ot,Gi(Ie,l,h,ot,r,w))}),b}function L2(r){var l=Un(r);return function(h){return h0(h,r,l)}}function h0(r,l,h){var p=h.length;if(r==null)return!p;for(r=bt(r);p--;){var y=h[p],w=l[y],b=r[y];if(b===e&&!(y in r)||!w(b))return!1}return!0}function d0(r,l,h){if(typeof r!="function")throw new Gn(s);return Xl(function(){r.apply(e,h)},l)}function Vl(r,l,h,p){var y=-1,w=bo,b=!0,P=r.length,M=[],V=l.length;if(!P)return M;h&&(l=It(l,jt(h))),p?(w=Ol,b=!1):l.length>=i&&(w=fs,b=!1,l=new Fs(l));e:for(;++y<P;){var G=r[y],J=h==null?G:h(G);if(G=p||G!==0?G:0,b&&J===J){for(var le=V;le--;)if(l[le]===J)continue e;M.push(G)}else w(l,J,p)||M.push(G)}return M}var Mo=k0(wr),f0=k0(hf,!0);function N2(r,l){var h=!0;return Mo(r,function(p,y,w){return h=!!l(p,y,w),h}),h}function xc(r,l,h){for(var p=-1,y=r.length;++p<y;){var w=r[p],b=l(w);if(b!=null&&(P===e?b===b&&!Li(b):h(b,P)))var P=b,M=w}return M}function R2(r,l,h,p){var y=r.length;for(h=Ge(h),h<0&&(h=-h>y?0:y+h),p=p===e||p>y?y:Ge(p),p<0&&(p+=y),p=h>p?0:Ig(p);h<p;)r[h++]=l;return r}function p0(r,l){var h=[];return Mo(r,function(p,y,w){l(p,y,w)&&h.push(p)}),h}function Kn(r,l,h,p,y){var w=-1,b=r.length;for(h||(h=FT),y||(y=[]);++w<b;){var P=r[w];l>0&&h(P)?l>1?Kn(P,l-1,h,p,y):or(y,P):p||(y[y.length]=P)}return y}var cf=q0(),m0=q0(!0);function wr(r,l){return r&&cf(r,l,Un)}function hf(r,l){return r&&m0(r,l,Un)}function Cc(r,l){return rr(l,function(h){return ao(r[h])})}function Ts(r,l){l=Lo(l,r);for(var h=0,p=l.length;r!=null&&h<p;)r=r[zr(l[h++])];return h&&h==p?r:e}function g0(r,l,h){var p=l(r);return Ze(r)?p:or(p,h(r))}function hi(r){return r==null?r===e?yo:ze:Cr&&Cr in bt(r)?yT(r):OT(r)}function df(r,l){return r>l}function B2(r,l){return r!=null&&dt.call(r,l)}function k2(r,l){return r!=null&&l in bt(r)}function q2(r,l,h){return r>=x(l,h)&&r<g(l,h)}function ff(r,l,h){for(var p=h?Ol:bo,y=r[0].length,w=r.length,b=w,P=Z(w),M=1/0,V=[];b--;){var G=r[b];b&&l&&(G=It(G,jt(l))),M=x(G.length,M),P[b]=!h&&(l||y>=120&&G.length>=120)?new Fs(b&&G):e}G=r[0];var J=-1,le=P[0];e:for(;++J<y&&V.length<M;){var _e=G[J],Pe=l?l(_e):_e;if(_e=h||_e!==0?_e:0,!(le?fs(le,Pe):p(V,Pe,h))){for(b=w;--b;){var Ye=P[b];if(!(Ye?fs(Ye,Pe):p(r[b],Pe,h)))continue e}le&&le.push(Pe),V.push(_e)}}return V}function $2(r,l,h,p){return wr(r,function(y,w,b){l(p,h(y),w,b)}),p}function Gl(r,l,h){l=Lo(l,r),r=ig(r,l);var p=r==null?r:r[zr(Yi(l))];return p==null?e:Vt(p,r,h)}function _0(r){return an(r)&&hi(r)==Se}function Z2(r){return an(r)&&hi(r)==ve}function j2(r){return an(r)&&hi(r)==Ht}function Kl(r,l,h,p,y){return r===l?!0:r==null||l==null||!an(r)&&!an(l)?r!==r&&l!==l:U2(r,l,h,p,Kl,y)}function U2(r,l,h,p,y,w){var b=Ze(r),P=Ze(l),M=b?Ce:ri(r),V=P?Ce:ri(l);M=M==Se?Vn:M,V=V==Se?Vn:V;var G=M==Vn,J=V==Vn,le=M==V;if(le&&Ro(r)){if(!Ro(l))return!1;b=!0,G=!1}if(le&&!G)return w||(w=new lr),b||za(r)?Y0(r,l,h,p,y,w):_T(r,l,M,h,p,y,w);if(!(h&N)){var _e=G&&dt.call(r,"__wrapped__"),Pe=J&&dt.call(l,"__wrapped__");if(_e||Pe){var Ye=_e?r.value():r,Ie=Pe?l.value():l;return w||(w=new lr),y(Ye,Ie,h,p,w)}}return le?(w||(w=new lr),vT(r,l,h,p,y,w)):!1}function H2(r){return an(r)&&ri(r)==ne}function pf(r,l,h,p){var y=h.length,w=y,b=!p;if(r==null)return!w;for(r=bt(r);y--;){var P=h[y];if(b&&P[2]?P[1]!==r[P[0]]:!(P[0]in r))return!1}for(;++y<w;){P=h[y];var M=P[0],V=r[M],G=P[1];if(b&&P[2]){if(V===e&&!(M in r))return!1}else{var J=new lr;if(p)var le=p(V,G,M,r,l,J);if(!(le===e?Kl(G,V,N|H,p,J):le))return!1}}return!0}function v0(r){if(!nn(r)||TT(r))return!1;var l=ao(r)?sr:kd;return l.test(Ps(r))}function W2(r){return an(r)&&hi(r)==ki}function V2(r){return an(r)&&ri(r)==An}function G2(r){return an(r)&&Bc(r.length)&&!!$e[hi(r)]}function y0(r){return typeof r=="function"?r:r==null?zi:typeof r=="object"?Ze(r)?w0(r[0],r[1]):C0(r):$g(r)}function mf(r){if(!Ql(r))return f(r);var l=[];for(var h in bt(r))dt.call(r,h)&&h!="constructor"&&l.push(h);return l}function K2(r){if(!nn(r))return ET(r);var l=Ql(r),h=[];for(var p in r)p=="constructor"&&(l||!dt.call(r,p))||h.push(p);return h}function gf(r,l){return r<l}function x0(r,l){var h=-1,p=wi(r)?Z(r.length):[];return Mo(r,function(y,w,b){p[++h]=l(y,w,b)}),p}function C0(r){var l=Ef(r);return l.length==1&&l[0][2]?tg(l[0][0],l[0][1]):function(h){return h===r||pf(h,r,l)}}function w0(r,l){return Mf(r)&&eg(l)?tg(zr(r),l):function(h){var p=jf(h,r);return p===e&&p===l?Uf(h,r):Kl(l,p,N|H)}}function wc(r,l,h,p,y){r!==l&&cf(l,function(w,b){if(y||(y=new lr),nn(w))Y2(r,l,b,h,wc,p,y);else{var P=p?p(Lf(r,b),w,b+"",r,l,y):e;P===e&&(P=w),lf(r,b,P)}},bi)}function Y2(r,l,h,p,y,w,b){var P=Lf(r,h),M=Lf(l,h),V=b.get(M);if(V){lf(r,h,V);return}var G=w?w(P,M,h+"",r,l,b):e,J=G===e;if(J){var le=Ze(M),_e=!le&&Ro(M),Pe=!le&&!_e&&za(M);G=M,le||_e||Pe?Ze(P)?G=P:mn(P)?G=Ci(P):_e?(J=!1,G=D0(M,!0)):Pe?(J=!1,G=L0(M,!0)):G=[]:eu(M)||Is(M)?(G=P,Is(P)?G=Eg(P):(!nn(P)||ao(P))&&(G=X0(M))):J=!1}J&&(b.set(M,G),y(G,M,p,w,b),b.delete(M)),lf(r,h,G)}function b0(r,l){var h=r.length;if(h)return l+=l<0?h:0,so(l,h)?r[l]:e}function z0(r,l,h){l.length?l=It(l,function(w){return Ze(w)?function(b){return Ts(b,w.length===1?w[0]:w)}:w}):l=[zi];var p=-1;l=It(l,jt(Ae()));var y=x0(r,function(w,b,P){var M=It(l,function(V){return V(w)});return{criteria:M,index:++p,value:w}});return Nl(y,function(w,b){return uT(w,b,h)})}function J2(r,l){return F0(r,l,function(h,p){return Uf(r,p)})}function F0(r,l,h){for(var p=-1,y=l.length,w={};++p<y;){var b=l[p],P=Ts(r,b);h(P,b)&&Yl(w,Lo(b,r),P)}return w}function Q2(r){return function(l){return Ts(l,r)}}function _f(r,l,h,p){var y=p?ds:zo,w=-1,b=l.length,P=r;for(r===l&&(l=Ci(l)),h&&(P=It(r,jt(h)));++w<b;)for(var M=0,V=l[w],G=h?h(V):V;(M=y(P,G,M,p))>-1;)P!==r&&vs.call(P,M,1),vs.call(r,M,1);return r}function S0(r,l){for(var h=r?l.length:0,p=h-1;h--;){var y=l[h];if(h==p||y!==w){var w=y;so(y)?vs.call(r,y,1):Cf(r,y)}}return r}function vf(r,l){return r+Cs($()*(l-r+1))}function X2(r,l,h,p){for(var y=-1,w=g(xs((l-r)/(h||1)),0),b=Z(w);w--;)b[p?w:++y]=r,r+=h;return b}function yf(r,l){var h="";if(!r||l<1||l>j)return h;do l%2&&(h+=r),l=Cs(l/2),l&&(r+=r);while(l);return h}function Qe(r,l){return Nf(ng(r,l,zi),r+"")}function eT(r){return u0(Fa(r))}function tT(r,l){var h=Fa(r);return Oc(h,Ss(l,0,h.length))}function Yl(r,l,h,p){if(!nn(r))return r;l=Lo(l,r);for(var y=-1,w=l.length,b=w-1,P=r;P!=null&&++y<w;){var M=zr(l[y]),V=h;if(M==="__proto__"||M==="constructor"||M==="prototype")return r;if(y!=b){var G=P[M];V=p?p(G,M,P):e,V===e&&(V=nn(G)?G:so(l[y+1])?[]:{})}Wl(P,M,V),P=P[M]}return r}var T0=Nn?function(r,l){return Nn.set(r,l),r}:zi,nT=ys?function(r,l){return ys(r,"toString",{configurable:!0,enumerable:!1,value:Wf(l),writable:!0})}:zi;function iT(r){return Oc(Fa(r))}function Ki(r,l,h){var p=-1,y=r.length;l<0&&(l=-l>y?0:y+l),h=h>y?y:h,h<0&&(h+=y),y=l>h?0:h-l>>>0,l>>>=0;for(var w=Z(y);++p<y;)w[p]=r[p+l];return w}function rT(r,l){var h;return Mo(r,function(p,y,w){return h=l(p,y,w),!h}),!!h}function bc(r,l,h){var p=0,y=r==null?p:r.length;if(typeof l=="number"&&l===l&&y<=lt){for(;p<y;){var w=p+y>>>1,b=r[w];b!==null&&!Li(b)&&(h?b<=l:b<l)?p=w+1:y=w}return y}return xf(r,l,zi,h)}function xf(r,l,h,p){var y=0,w=r==null?0:r.length;if(w===0)return 0;l=h(l);for(var b=l!==l,P=l===null,M=Li(l),V=l===e;y<w;){var G=Cs((y+w)/2),J=h(r[G]),le=J!==e,_e=J===null,Pe=J===J,Ye=Li(J);if(b)var Ie=p||Pe;else V?Ie=Pe&&(p||le):P?Ie=Pe&&le&&(p||!_e):M?Ie=Pe&&le&&!_e&&(p||!Ye):_e||Ye?Ie=!1:Ie=p?J<=l:J<l;Ie?y=G+1:w=G}return x(w,Ke)}function A0(r,l){for(var h=-1,p=r.length,y=0,w=[];++h<p;){var b=r[h],P=l?l(b):b;if(!h||!ur(P,M)){var M=P;w[y++]=b===0?0:b}}return w}function P0(r){return typeof r=="number"?r:Li(r)?ce:+r}function Di(r){if(typeof r=="string")return r;if(Ze(r))return It(r,Di)+"";if(Li(r))return bs?bs.call(r):"";var l=r+"";return l=="0"&&1/r==-Te?"-0":l}function Do(r,l,h){var p=-1,y=bo,w=r.length,b=!0,P=[],M=P;if(h)b=!1,y=Ol;else if(w>=i){var V=l?null:mT(r);if(V)return xi(V);b=!1,y=fs,M=new Fs}else M=l?[]:P;e:for(;++p<w;){var G=r[p],J=l?l(G):G;if(G=h||G!==0?G:0,b&&J===J){for(var le=M.length;le--;)if(M[le]===J)continue e;l&&M.push(J),P.push(G)}else y(M,J,h)||(M!==P&&M.push(J),P.push(G))}return P}function Cf(r,l){return l=Lo(l,r),r=ig(r,l),r==null||delete r[zr(Yi(l))]}function I0(r,l,h,p){return Yl(r,l,h(Ts(r,l)),p)}function zc(r,l,h,p){for(var y=r.length,w=p?y:-1;(p?w--:++w<y)&&l(r[w],w,r););return h?Ki(r,p?0:w,p?w+1:y):Ki(r,p?w+1:0,p?y:w)}function E0(r,l){var h=r;return h instanceof Je&&(h=h.value()),Ml(l,function(p,y){return y.func.apply(y.thisArg,or([p],y.args))},h)}function wf(r,l,h){var p=r.length;if(p<2)return p?Do(r[0]):[];for(var y=-1,w=Z(p);++y<p;)for(var b=r[y],P=-1;++P<p;)P!=y&&(w[y]=Vl(w[y]||b,r[P],l,h));return Do(Kn(w,1),l,h)}function O0(r,l,h){for(var p=-1,y=r.length,w=l.length,b={};++p<y;){var P=p<w?l[p]:e;h(b,r[p],P)}return b}function bf(r){return mn(r)?r:[]}function zf(r){return typeof r=="function"?r:zi}function Lo(r,l){return Ze(r)?r:Mf(r,l)?[r]:ag(zt(r))}var oT=Qe;function No(r,l,h){var p=r.length;return h=h===e?p:h,!l&&h>=p?r:Ki(r,l,h)}var M0=gc||function(r){return Cn.clearTimeout(r)};function D0(r,l){if(l)return r.slice();var h=r.length,p=pc?pc(h):new r.constructor(h);return r.copy(p),p}function Ff(r){var l=new r.constructor(r.byteLength);return new xr(l).set(new xr(r)),l}function sT(r,l){var h=l?Ff(r.buffer):r.buffer;return new r.constructor(h,r.byteOffset,r.byteLength)}function aT(r){var l=new r.constructor(r.source,Gr.exec(r));return l.lastIndex=r.lastIndex,l}function lT(r){return Lt?bt(Lt.call(r)):{}}function L0(r,l){var h=l?Ff(r.buffer):r.buffer;return new r.constructor(h,r.byteOffset,r.length)}function N0(r,l){if(r!==l){var h=r!==e,p=r===null,y=r===r,w=Li(r),b=l!==e,P=l===null,M=l===l,V=Li(l);if(!P&&!V&&!w&&r>l||w&&b&&M&&!P&&!V||p&&b&&M||!h&&M||!y)return 1;if(!p&&!w&&!V&&r<l||V&&h&&y&&!p&&!w||P&&h&&y||!b&&y||!M)return-1}return 0}function uT(r,l,h){for(var p=-1,y=r.criteria,w=l.criteria,b=y.length,P=h.length;++p<b;){var M=N0(y[p],w[p]);if(M){if(p>=P)return M;var V=h[p];return M*(V=="desc"?-1:1)}}return r.index-l.index}function R0(r,l,h,p){for(var y=-1,w=r.length,b=h.length,P=-1,M=l.length,V=g(w-b,0),G=Z(M+V),J=!p;++P<M;)G[P]=l[P];for(;++y<b;)(J||y<w)&&(G[h[y]]=r[y]);for(;V--;)G[P++]=r[y++];return G}function B0(r,l,h,p){for(var y=-1,w=r.length,b=-1,P=h.length,M=-1,V=l.length,G=g(w-P,0),J=Z(G+V),le=!p;++y<G;)J[y]=r[y];for(var _e=y;++M<V;)J[_e+M]=l[M];for(;++b<P;)(le||y<w)&&(J[_e+h[b]]=r[y++]);return J}function Ci(r,l){var h=-1,p=r.length;for(l||(l=Z(p));++h<p;)l[h]=r[h];return l}function br(r,l,h,p){var y=!h;h||(h={});for(var w=-1,b=l.length;++w<b;){var P=l[w],M=p?p(h[P],r[P],P,h,r):e;M===e&&(M=r[P]),y?io(h,P,M):Wl(h,P,M)}return h}function cT(r,l){return br(r,Of(r),l)}function hT(r,l){return br(r,J0(r),l)}function Fc(r,l){return function(h,p){var y=Ze(h)?Vd:M2,w=l?l():{};return y(h,r,Ae(p,2),w)}}function Ca(r){return Qe(function(l,h){var p=-1,y=h.length,w=y>1?h[y-1]:e,b=y>2?h[2]:e;for(w=r.length>3&&typeof w=="function"?(y--,w):e,b&&di(h[0],h[1],b)&&(w=y<3?e:w,y=1),l=bt(l);++p<y;){var P=h[p];P&&r(l,P,p,w)}return l})}function k0(r,l){return function(h,p){if(h==null)return h;if(!wi(h))return r(h,p);for(var y=h.length,w=l?y:-1,b=bt(h);(l?w--:++w<y)&&p(b[w],w,b)!==!1;);return h}}function q0(r){return function(l,h,p){for(var y=-1,w=bt(l),b=p(l),P=b.length;P--;){var M=b[r?P:++y];if(h(w[M],M,w)===!1)break}return l}}function dT(r,l,h){var p=l&k,y=Jl(r);function w(){var b=this&&this!==Cn&&this instanceof w?y:r;return b.apply(p?h:this,arguments)}return w}function $0(r){return function(l){l=zt(l);var h=So(l)?ni(l):e,p=h?h[0]:l.charAt(0),y=h?No(h,1).join(""):l.slice(1);return p[r]()+y}}function wa(r){return function(l){return Ml(kg(Bg(l).replace(Pt,"")),r,"")}}function Jl(r){return function(){var l=arguments;switch(l.length){case 0:return new r;case 1:return new r(l[0]);case 2:return new r(l[0],l[1]);case 3:return new r(l[0],l[1],l[2]);case 4:return new r(l[0],l[1],l[2],l[3]);case 5:return new r(l[0],l[1],l[2],l[3],l[4]);case 6:return new r(l[0],l[1],l[2],l[3],l[4],l[5]);case 7:return new r(l[0],l[1],l[2],l[3],l[4],l[5],l[6])}var h=Oo(r.prototype),p=r.apply(h,l);return nn(p)?p:h}}function fT(r,l,h){var p=Jl(r);function y(){for(var w=arguments.length,b=Z(w),P=w,M=ba(y);P--;)b[P]=arguments[P];var V=w<3&&b[0]!==M&&b[w-1]!==M?[]:yr(b,M);if(w-=V.length,w<h)return W0(r,l,Sc,y.placeholder,e,b,V,e,e,h-w);var G=this&&this!==Cn&&this instanceof y?p:r;return Vt(G,this,b)}return y}function Z0(r){return function(l,h,p){var y=bt(l);if(!wi(l)){var w=Ae(h,3);l=Un(l),h=function(P){return w(y[P],P,y)}}var b=r(l,h,p);return b>-1?y[w?l[b]:b]:e}}function j0(r){return oo(function(l){var h=l.length,p=h,y=ii.prototype.thru;for(r&&l.reverse();p--;){var w=l[p];if(typeof w!="function")throw new Gn(s);if(y&&!b&&Ic(w)=="wrapper")var b=new ii([],!0)}for(p=b?p:h;++p<h;){w=l[p];var P=Ic(w),M=P=="wrapper"?If(w):e;M&&Df(M[0])&&M[1]==(ke|de|Ve|ge)&&!M[4].length&&M[9]==1?b=b[Ic(M[0])].apply(b,M[3]):b=w.length==1&&Df(w)?b[P]():b.thru(w)}return function(){var V=arguments,G=V[0];if(b&&V.length==1&&Ze(G))return b.plant(G).value();for(var J=0,le=h?l[J].apply(this,V):G;++J<h;)le=l[J].call(this,le);return le}})}function Sc(r,l,h,p,y,w,b,P,M,V){var G=l&ke,J=l&k,le=l&ae,_e=l&(de|ht),Pe=l&rt,Ye=le?e:Jl(r);function Ie(){for(var ot=arguments.length,ft=Z(ot),Ni=ot;Ni--;)ft[Ni]=arguments[Ni];if(_e)var fi=ba(Ie),Ri=Fo(ft,fi);if(p&&(ft=R0(ft,p,y,_e)),w&&(ft=B0(ft,w,b,_e)),ot-=Ri,_e&&ot<V){var gn=yr(ft,fi);return W0(r,l,Sc,Ie.placeholder,h,ft,gn,P,M,V-ot)}var cr=J?h:this,uo=le?cr[r]:r;return ot=ft.length,P?ft=MT(ft,P):Pe&&ot>1&&ft.reverse(),G&&M<ot&&(ft.length=M),this&&this!==Cn&&this instanceof Ie&&(uo=Ye||Jl(uo)),uo.apply(cr,ft)}return Ie}function U0(r,l){return function(h,p){return $2(h,r,l(p),{})}}function Tc(r,l){return function(h,p){var y;if(h===e&&p===e)return l;if(h!==e&&(y=h),p!==e){if(y===e)return p;typeof h=="string"||typeof p=="string"?(h=Di(h),p=Di(p)):(h=P0(h),p=P0(p)),y=r(h,p)}return y}}function Sf(r){return oo(function(l){return l=It(l,jt(Ae())),Qe(function(h){var p=this;return r(l,function(y){return Vt(y,p,h)})})})}function Ac(r,l){l=l===e?" ":Di(l);var h=l.length;if(h<2)return h?yf(l,r):l;var p=yf(l,xs(r/ti(l)));return So(l)?No(ni(p),0,r).join(""):p.slice(0,r)}function pT(r,l,h,p){var y=l&k,w=Jl(r);function b(){for(var P=-1,M=arguments.length,V=-1,G=p.length,J=Z(G+M),le=this&&this!==Cn&&this instanceof b?w:r;++V<G;)J[V]=p[V];for(;M--;)J[V++]=arguments[++P];return Vt(le,y?h:this,J)}return b}function H0(r){return function(l,h,p){return p&&typeof p!="number"&&di(l,h,p)&&(h=p=e),l=lo(l),h===e?(h=l,l=0):h=lo(h),p=p===e?l<h?1:-1:lo(p),X2(l,h,p,r)}}function Pc(r){return function(l,h){return typeof l=="string"&&typeof h=="string"||(l=Ji(l),h=Ji(h)),r(l,h)}}function W0(r,l,h,p,y,w,b,P,M,V){var G=l&de,J=G?b:e,le=G?e:b,_e=G?w:e,Pe=G?e:w;l|=G?Ve:Ct,l&=~(G?Ct:Ve),l&te||(l&=~(k|ae));var Ye=[r,l,y,_e,J,Pe,le,P,M,V],Ie=h.apply(e,Ye);return Df(r)&&rg(Ie,Ye),Ie.placeholder=p,og(Ie,r,l)}function Tf(r){var l=pn[r];return function(h,p){if(h=Ji(h),p=p==null?0:x(Ge(p),292),p&&a(h)){var y=(zt(h)+"e").split("e"),w=l(y[0]+"e"+(+y[1]+p));return y=(zt(w)+"e").split("e"),+(y[0]+"e"+(+y[1]-p))}return l(h)}}var mT=sn&&1/xi(new sn([,-0]))[1]==Te?function(r){return new sn(r)}:Kf;function V0(r){return function(l){var h=ri(l);return h==ne?kl(l):h==An?Jd(l):uc(l,r(l))}}function ro(r,l,h,p,y,w,b,P){var M=l&ae;if(!M&&typeof r!="function")throw new Gn(s);var V=p?p.length:0;if(V||(l&=~(Ve|Ct),p=y=e),b=b===e?b:g(Ge(b),0),P=P===e?P:Ge(P),V-=y?y.length:0,l&Ct){var G=p,J=y;p=y=e}var le=M?e:If(r),_e=[r,l,h,p,y,G,J,w,b,P];if(le&&IT(_e,le),r=_e[0],l=_e[1],h=_e[2],p=_e[3],y=_e[4],P=_e[9]=_e[9]===e?M?0:r.length:g(_e[9]-V,0),!P&&l&(de|ht)&&(l&=~(de|ht)),!l||l==k)var Pe=dT(r,l,h);else l==de||l==ht?Pe=fT(r,l,P):(l==Ve||l==(k|Ve))&&!y.length?Pe=pT(r,l,h,p):Pe=Sc.apply(e,_e);var Ye=le?T0:rg;return og(Ye(Pe,_e),r,l)}function G0(r,l,h,p){return r===e||ur(r,Po[h])&&!dt.call(p,h)?l:r}function K0(r,l,h,p,y,w){return nn(r)&&nn(l)&&(w.set(l,r),wc(r,l,e,K0,w),w.delete(l)),r}function gT(r){return eu(r)?e:r}function Y0(r,l,h,p,y,w){var b=h&N,P=r.length,M=l.length;if(P!=M&&!(b&&M>P))return!1;var V=w.get(r),G=w.get(l);if(V&&G)return V==l&&G==r;var J=-1,le=!0,_e=h&H?new Fs:e;for(w.set(r,l),w.set(l,r);++J<P;){var Pe=r[J],Ye=l[J];if(p)var Ie=b?p(Ye,Pe,J,l,r,w):p(Pe,Ye,J,r,l,w);if(Ie!==e){if(Ie)continue;le=!1;break}if(_e){if(!cs(l,function(ot,ft){if(!fs(_e,ft)&&(Pe===ot||y(Pe,ot,h,p,w)))return _e.push(ft)})){le=!1;break}}else if(!(Pe===Ye||y(Pe,Ye,h,p,w))){le=!1;break}}return w.delete(r),w.delete(l),le}function _T(r,l,h,p,y,w,b){switch(h){case be:if(r.byteLength!=l.byteLength||r.byteOffset!=l.byteOffset)return!1;r=r.buffer,l=l.buffer;case ve:return!(r.byteLength!=l.byteLength||!w(new xr(r),new xr(l)));case we:case Ht:case ie:return ur(+r,+l);case Wt:return r.name==l.name&&r.message==l.message;case ki:case qi:return r==l+"";case ne:var P=kl;case An:var M=p&N;if(P||(P=xi),r.size!=l.size&&!M)return!1;var V=b.get(r);if(V)return V==l;p|=H,b.set(r,l);var G=Y0(P(r),P(l),p,y,w,b);return b.delete(r),G;case $i:if(Lt)return Lt.call(r)==Lt.call(l)}return!1}function vT(r,l,h,p,y,w){var b=h&N,P=Af(r),M=P.length,V=Af(l),G=V.length;if(M!=G&&!b)return!1;for(var J=M;J--;){var le=P[J];if(!(b?le in l:dt.call(l,le)))return!1}var _e=w.get(r),Pe=w.get(l);if(_e&&Pe)return _e==l&&Pe==r;var Ye=!0;w.set(r,l),w.set(l,r);for(var Ie=b;++J<M;){le=P[J];var ot=r[le],ft=l[le];if(p)var Ni=b?p(ft,ot,le,l,r,w):p(ot,ft,le,r,l,w);if(!(Ni===e?ot===ft||y(ot,ft,h,p,w):Ni)){Ye=!1;break}Ie||(Ie=le=="constructor")}if(Ye&&!Ie){var fi=r.constructor,Ri=l.constructor;fi!=Ri&&"constructor"in r&&"constructor"in l&&!(typeof fi=="function"&&fi instanceof fi&&typeof Ri=="function"&&Ri instanceof Ri)&&(Ye=!1)}return w.delete(r),w.delete(l),Ye}function oo(r){return Nf(ng(r,e,hg),r+"")}function Af(r){return g0(r,Un,Of)}function Pf(r){return g0(r,bi,J0)}var If=Nn?function(r){return Nn.get(r)}:Kf;function Ic(r){for(var l=r.name+"",h=Mi[l],p=dt.call(Mi,l)?h.length:0;p--;){var y=h[p],w=y.func;if(w==null||w==r)return y.name}return l}function ba(r){var l=dt.call(C,"placeholder")?C:r;return l.placeholder}function Ae(){var r=C.iteratee||Vf;return r=r===Vf?y0:r,arguments.length?r(arguments[0],arguments[1]):r}function Ec(r,l){var h=r.__data__;return ST(l)?h[typeof l=="string"?"string":"hash"]:h.map}function Ef(r){for(var l=Un(r),h=l.length;h--;){var p=l[h],y=r[p];l[h]=[p,y,eg(y)]}return l}function As(r,l){var h=da(r,l);return v0(h)?h:e}function yT(r){var l=dt.call(r,Cr),h=r[Cr];try{r[Cr]=e;var p=!0}catch{}var y=gs.call(r);return p&&(l?r[Cr]=h:delete r[Cr]),y}var Of=Hl?function(r){return r==null?[]:(r=bt(r),rr(Hl(r),function(l){return Ul.call(r,l)}))}:Yf,J0=Hl?function(r){for(var l=[];r;)or(l,Of(r)),r=eo(r);return l}:Yf,ri=hi;(ue&&ri(new ue(new ArrayBuffer(1)))!=be||Fe&&ri(new Fe)!=ne||Ue&&ri(Ue.resolve())!=nr||sn&&ri(new sn)!=An||Gt&&ri(new Gt)!=_n)&&(ri=function(r){var l=hi(r),h=l==Vn?r.constructor:e,p=h?Ps(h):"";if(p)switch(p){case nf:return be;case rf:return ne;case of:return nr;case vc:return An;case sf:return _n}return l});function xT(r,l,h){for(var p=-1,y=h.length;++p<y;){var w=h[p],b=w.size;switch(w.type){case"drop":r+=b;break;case"dropRight":l-=b;break;case"take":l=x(l,r+b);break;case"takeRight":r=g(r,l-b);break}}return{start:r,end:l}}function CT(r){var l=r.match(qu);return l?l[1].split($u):[]}function Q0(r,l,h){l=Lo(l,r);for(var p=-1,y=l.length,w=!1;++p<y;){var b=zr(l[p]);if(!(w=r!=null&&h(r,b)))break;r=r[b]}return w||++p!=y?w:(y=r==null?0:r.length,!!y&&Bc(y)&&so(b,y)&&(Ze(r)||Is(r)))}function wT(r){var l=r.length,h=new r.constructor(l);return l&&typeof r[0]=="string"&&dt.call(r,"index")&&(h.index=r.index,h.input=r.input),h}function X0(r){return typeof r.constructor=="function"&&!Ql(r)?Oo(eo(r)):{}}function bT(r,l,h){var p=r.constructor;switch(l){case ve:return Ff(r);case we:case Ht:return new p(+r);case be:return sT(r,h);case xt:case mt:case Pn:case Zn:case rn:case Xt:case en:case on:case Ot:return L0(r,h);case ne:return new p;case ie:case qi:return new p(r);case ki:return aT(r);case An:return new p;case $i:return lT(r)}}function zT(r,l){var h=l.length;if(!h)return r;var p=h-1;return l[p]=(h>1?"& ":"")+l[p],l=l.join(h>2?", ":" "),r.replace(ye,`{
/* [wrapped with `+l+`] */
`)}function FT(r){return Ze(r)||Is(r)||!!(mc&&r&&r[mc])}function so(r,l){var h=typeof r;return l=l??j,!!l&&(h=="number"||h!="symbol"&&$d.test(r))&&r>-1&&r%1==0&&r<l}function di(r,l,h){if(!nn(h))return!1;var p=typeof l;return(p=="number"?wi(h)&&so(l,h.length):p=="string"&&l in h)?ur(h[l],r):!1}function Mf(r,l){if(Ze(r))return!1;var h=typeof r;return h=="number"||h=="symbol"||h=="boolean"||r==null||Li(r)?!0:gl.test(r)||!Ln.test(r)||l!=null&&r in bt(l)}function ST(r){var l=typeof r;return l=="string"||l=="number"||l=="symbol"||l=="boolean"?r!=="__proto__":r===null}function Df(r){var l=Ic(r),h=C[l];if(typeof h!="function"||!(l in Je.prototype))return!1;if(r===h)return!0;var p=If(h);return!!p&&r===p[0]}function TT(r){return!!Xr&&Xr in r}var AT=ms?ao:Jf;function Ql(r){var l=r&&r.constructor,h=typeof l=="function"&&l.prototype||Po;return r===h}function eg(r){return r===r&&!nn(r)}function tg(r,l){return function(h){return h==null?!1:h[r]===l&&(l!==e||r in bt(h))}}function PT(r){var l=Nc(r,function(p){return h.size===m&&h.clear(),p}),h=l.cache;return l}function IT(r,l){var h=r[1],p=l[1],y=h|p,w=y<(k|ae|ke),b=p==ke&&h==de||p==ke&&h==ge&&r[7].length<=l[8]||p==(ke|ge)&&l[7].length<=l[8]&&h==de;if(!(w||b))return r;p&k&&(r[2]=l[2],y|=h&k?0:te);var P=l[3];if(P){var M=r[3];r[3]=M?R0(M,P,l[4]):P,r[4]=M?yr(r[3],v):l[4]}return P=l[5],P&&(M=r[5],r[5]=M?B0(M,P,l[6]):P,r[6]=M?yr(r[5],v):l[6]),P=l[7],P&&(r[7]=P),p&ke&&(r[8]=r[8]==null?l[8]:x(r[8],l[8])),r[9]==null&&(r[9]=l[9]),r[0]=l[0],r[1]=y,r}function ET(r){var l=[];if(r!=null)for(var h in bt(r))l.push(h);return l}function OT(r){return gs.call(r)}function ng(r,l,h){return l=g(l===e?r.length-1:l,0),function(){for(var p=arguments,y=-1,w=g(p.length-l,0),b=Z(w);++y<w;)b[y]=p[l+y];y=-1;for(var P=Z(l+1);++y<l;)P[y]=p[y];return P[l]=h(b),Vt(r,this,P)}}function ig(r,l){return l.length<2?r:Ts(r,Ki(l,0,-1))}function MT(r,l){for(var h=r.length,p=x(l.length,h),y=Ci(r);p--;){var w=l[p];r[p]=so(w,h)?y[w]:e}return r}function Lf(r,l){if(!(l==="constructor"&&typeof r[l]=="function")&&l!="__proto__")return r[l]}var rg=sg(T0),Xl=tf||function(r,l){return Cn.setTimeout(r,l)},Nf=sg(nT);function og(r,l,h){var p=l+"";return Nf(r,zT(p,DT(CT(p),h)))}function sg(r){var l=0,h=0;return function(){var p=T(),y=fe-(p-h);if(h=p,y>0){if(++l>=X)return arguments[0]}else l=0;return r.apply(e,arguments)}}function Oc(r,l){var h=-1,p=r.length,y=p-1;for(l=l===e?p:l;++h<l;){var w=vf(h,y),b=r[w];r[w]=r[h],r[h]=b}return r.length=l,r}var ag=PT(function(r){var l=[];return r.charCodeAt(0)===46&&l.push(""),r.replace(Nd,function(h,p,y,w){l.push(y?w.replace(yl,"$1"):p||h)}),l});function zr(r){if(typeof r=="string"||Li(r))return r;var l=r+"";return l=="0"&&1/r==-Te?"-0":l}function Ps(r){if(r!=null){try{return ya.call(r)}catch{}try{return r+""}catch{}}return""}function DT(r,l){return ui(je,function(h){var p="_."+h[0];l&h[1]&&!bo(r,p)&&r.push(p)}),r.sort()}function lg(r){if(r instanceof Je)return r.clone();var l=new ii(r.__wrapped__,r.__chain__);return l.__actions__=Ci(r.__actions__),l.__index__=r.__index__,l.__values__=r.__values__,l}function LT(r,l,h){(h?di(r,l,h):l===e)?l=1:l=g(Ge(l),0);var p=r==null?0:r.length;if(!p||l<1)return[];for(var y=0,w=0,b=Z(xs(p/l));y<p;)b[w++]=Ki(r,y,y+=l);return b}function NT(r){for(var l=-1,h=r==null?0:r.length,p=0,y=[];++l<h;){var w=r[l];w&&(y[p++]=w)}return y}function RT(){var r=arguments.length;if(!r)return[];for(var l=Z(r-1),h=arguments[0],p=r;p--;)l[p-1]=arguments[p];return or(Ze(h)?Ci(h):[h],Kn(l,1))}var BT=Qe(function(r,l){return mn(r)?Vl(r,Kn(l,1,mn,!0)):[]}),kT=Qe(function(r,l){var h=Yi(l);return mn(h)&&(h=e),mn(r)?Vl(r,Kn(l,1,mn,!0),Ae(h,2)):[]}),qT=Qe(function(r,l){var h=Yi(l);return mn(h)&&(h=e),mn(r)?Vl(r,Kn(l,1,mn,!0),e,h):[]});function $T(r,l,h){var p=r==null?0:r.length;return p?(l=h||l===e?1:Ge(l),Ki(r,l<0?0:l,p)):[]}function ZT(r,l,h){var p=r==null?0:r.length;return p?(l=h||l===e?1:Ge(l),l=p-l,Ki(r,0,l<0?0:l)):[]}function jT(r,l){return r&&r.length?zc(r,Ae(l,3),!0,!0):[]}function UT(r,l){return r&&r.length?zc(r,Ae(l,3),!0):[]}function HT(r,l,h,p){var y=r==null?0:r.length;return y?(h&&typeof h!="number"&&di(r,l,h)&&(h=0,p=y),R2(r,l,h,p)):[]}function ug(r,l,h){var p=r==null?0:r.length;if(!p)return-1;var y=h==null?0:Ge(h);return y<0&&(y=g(p+y,0)),Hi(r,Ae(l,3),y)}function cg(r,l,h){var p=r==null?0:r.length;if(!p)return-1;var y=p-1;return h!==e&&(y=Ge(h),y=h<0?g(p+y,0):x(y,p-1)),Hi(r,Ae(l,3),y,!0)}function hg(r){var l=r==null?0:r.length;return l?Kn(r,1):[]}function WT(r){var l=r==null?0:r.length;return l?Kn(r,Te):[]}function VT(r,l){var h=r==null?0:r.length;return h?(l=l===e?1:Ge(l),Kn(r,l)):[]}function GT(r){for(var l=-1,h=r==null?0:r.length,p={};++l<h;){var y=r[l];p[y[0]]=y[1]}return p}function dg(r){return r&&r.length?r[0]:e}function KT(r,l,h){var p=r==null?0:r.length;if(!p)return-1;var y=h==null?0:Ge(h);return y<0&&(y=g(p+y,0)),zo(r,l,y)}function YT(r){var l=r==null?0:r.length;return l?Ki(r,0,-1):[]}var JT=Qe(function(r){var l=It(r,bf);return l.length&&l[0]===r[0]?ff(l):[]}),QT=Qe(function(r){var l=Yi(r),h=It(r,bf);return l===Yi(h)?l=e:h.pop(),h.length&&h[0]===r[0]?ff(h,Ae(l,2)):[]}),XT=Qe(function(r){var l=Yi(r),h=It(r,bf);return l=typeof l=="function"?l:e,l&&h.pop(),h.length&&h[0]===r[0]?ff(h,e,l):[]});function eA(r,l){return r==null?"":c.call(r,l)}function Yi(r){var l=r==null?0:r.length;return l?r[l-1]:e}function tA(r,l,h){var p=r==null?0:r.length;if(!p)return-1;var y=p;return h!==e&&(y=Ge(h),y=y<0?g(p+y,0):x(y,p-1)),l===l?Qd(r,l,y):Hi(r,ci,y,!0)}function nA(r,l){return r&&r.length?b0(r,Ge(l)):e}var iA=Qe(fg);function fg(r,l){return r&&r.length&&l&&l.length?_f(r,l):r}function rA(r,l,h){return r&&r.length&&l&&l.length?_f(r,l,Ae(h,2)):r}function oA(r,l,h){return r&&r.length&&l&&l.length?_f(r,l,e,h):r}var sA=oo(function(r,l){var h=r==null?0:r.length,p=uf(r,l);return S0(r,It(l,function(y){return so(y,h)?+y:y}).sort(N0)),p});function aA(r,l){var h=[];if(!(r&&r.length))return h;var p=-1,y=[],w=r.length;for(l=Ae(l,3);++p<w;){var b=r[p];l(b,p,r)&&(h.push(b),y.push(p))}return S0(r,y),h}function Rf(r){return r==null?r:Y.call(r)}function lA(r,l,h){var p=r==null?0:r.length;return p?(h&&typeof h!="number"&&di(r,l,h)?(l=0,h=p):(l=l==null?0:Ge(l),h=h===e?p:Ge(h)),Ki(r,l,h)):[]}function uA(r,l){return bc(r,l)}function cA(r,l,h){return xf(r,l,Ae(h,2))}function hA(r,l){var h=r==null?0:r.length;if(h){var p=bc(r,l);if(p<h&&ur(r[p],l))return p}return-1}function dA(r,l){return bc(r,l,!0)}function fA(r,l,h){return xf(r,l,Ae(h,2),!0)}function pA(r,l){var h=r==null?0:r.length;if(h){var p=bc(r,l,!0)-1;if(ur(r[p],l))return p}return-1}function mA(r){return r&&r.length?A0(r):[]}function gA(r,l){return r&&r.length?A0(r,Ae(l,2)):[]}function _A(r){var l=r==null?0:r.length;return l?Ki(r,1,l):[]}function vA(r,l,h){return r&&r.length?(l=h||l===e?1:Ge(l),Ki(r,0,l<0?0:l)):[]}function yA(r,l,h){var p=r==null?0:r.length;return p?(l=h||l===e?1:Ge(l),l=p-l,Ki(r,l<0?0:l,p)):[]}function xA(r,l){return r&&r.length?zc(r,Ae(l,3),!1,!0):[]}function CA(r,l){return r&&r.length?zc(r,Ae(l,3)):[]}var wA=Qe(function(r){return Do(Kn(r,1,mn,!0))}),bA=Qe(function(r){var l=Yi(r);return mn(l)&&(l=e),Do(Kn(r,1,mn,!0),Ae(l,2))}),zA=Qe(function(r){var l=Yi(r);return l=typeof l=="function"?l:e,Do(Kn(r,1,mn,!0),e,l)});function FA(r){return r&&r.length?Do(r):[]}function SA(r,l){return r&&r.length?Do(r,Ae(l,2)):[]}function TA(r,l){return l=typeof l=="function"?l:e,r&&r.length?Do(r,e,l):[]}function Bf(r){if(!(r&&r.length))return[];var l=0;return r=rr(r,function(h){if(mn(h))return l=g(h.length,l),!0}),Bl(l,function(h){return It(r,ca(h))})}function pg(r,l){if(!(r&&r.length))return[];var h=Bf(r);return l==null?h:It(h,function(p){return Vt(l,e,p)})}var AA=Qe(function(r,l){return mn(r)?Vl(r,l):[]}),PA=Qe(function(r){return wf(rr(r,mn))}),IA=Qe(function(r){var l=Yi(r);return mn(l)&&(l=e),wf(rr(r,mn),Ae(l,2))}),EA=Qe(function(r){var l=Yi(r);return l=typeof l=="function"?l:e,wf(rr(r,mn),e,l)}),OA=Qe(Bf);function MA(r,l){return O0(r||[],l||[],Wl)}function DA(r,l){return O0(r||[],l||[],Yl)}var LA=Qe(function(r){var l=r.length,h=l>1?r[l-1]:e;return h=typeof h=="function"?(r.pop(),h):e,pg(r,h)});function mg(r){var l=C(r);return l.__chain__=!0,l}function NA(r,l){return l(r),r}function Mc(r,l){return l(r)}var RA=oo(function(r){var l=r.length,h=l?r[0]:0,p=this.__wrapped__,y=function(w){return uf(w,r)};return l>1||this.__actions__.length||!(p instanceof Je)||!so(h)?this.thru(y):(p=p.slice(h,+h+(l?1:0)),p.__actions__.push({func:Mc,args:[y],thisArg:e}),new ii(p,this.__chain__).thru(function(w){return l&&!w.length&&w.push(e),w}))});function BA(){return mg(this)}function kA(){return new ii(this.value(),this.__chain__)}function qA(){this.__values__===e&&(this.__values__=Pg(this.value()));var r=this.__index__>=this.__values__.length,l=r?e:this.__values__[this.__index__++];return{done:r,value:l}}function $A(){return this}function ZA(r){for(var l,h=this;h instanceof xa;){var p=lg(h);p.__index__=0,p.__values__=e,l?y.__wrapped__=p:l=p;var y=p;h=h.__wrapped__}return y.__wrapped__=r,l}function jA(){var r=this.__wrapped__;if(r instanceof Je){var l=r;return this.__actions__.length&&(l=new Je(this)),l=l.reverse(),l.__actions__.push({func:Mc,args:[Rf],thisArg:e}),new ii(l,this.__chain__)}return this.thru(Rf)}function UA(){return E0(this.__wrapped__,this.__actions__)}var HA=Fc(function(r,l,h){dt.call(r,h)?++r[h]:io(r,h,1)});function WA(r,l,h){var p=Ze(r)?El:N2;return h&&di(r,l,h)&&(l=e),p(r,Ae(l,3))}function VA(r,l){var h=Ze(r)?rr:p0;return h(r,Ae(l,3))}var GA=Z0(ug),KA=Z0(cg);function YA(r,l){return Kn(Dc(r,l),1)}function JA(r,l){return Kn(Dc(r,l),Te)}function QA(r,l,h){return h=h===e?1:Ge(h),Kn(Dc(r,l),h)}function gg(r,l){var h=Ze(r)?ui:Mo;return h(r,Ae(l,3))}function _g(r,l){var h=Ze(r)?gr:f0;return h(r,Ae(l,3))}var XA=Fc(function(r,l,h){dt.call(r,h)?r[h].push(l):io(r,h,[l])});function eP(r,l,h,p){r=wi(r)?r:Fa(r),h=h&&!p?Ge(h):0;var y=r.length;return h<0&&(h=g(y+h,0)),kc(r)?h<=y&&r.indexOf(l,h)>-1:!!y&&zo(r,l,h)>-1}var tP=Qe(function(r,l,h){var p=-1,y=typeof l=="function",w=wi(r)?Z(r.length):[];return Mo(r,function(b){w[++p]=y?Vt(l,b,h):Gl(b,l,h)}),w}),nP=Fc(function(r,l,h){io(r,h,l)});function Dc(r,l){var h=Ze(r)?It:x0;return h(r,Ae(l,3))}function iP(r,l,h,p){return r==null?[]:(Ze(l)||(l=l==null?[]:[l]),h=p?e:h,Ze(h)||(h=h==null?[]:[h]),z0(r,l,h))}var rP=Fc(function(r,l,h){r[h?0:1].push(l)},function(){return[[],[]]});function oP(r,l,h){var p=Ze(r)?Ml:ha,y=arguments.length<3;return p(r,Ae(l,4),h,y,Mo)}function sP(r,l,h){var p=Ze(r)?Gd:ha,y=arguments.length<3;return p(r,Ae(l,4),h,y,f0)}function aP(r,l){var h=Ze(r)?rr:p0;return h(r,Rc(Ae(l,3)))}function lP(r){var l=Ze(r)?u0:eT;return l(r)}function uP(r,l,h){(h?di(r,l,h):l===e)?l=1:l=Ge(l);var p=Ze(r)?E2:tT;return p(r,l)}function cP(r){var l=Ze(r)?O2:iT;return l(r)}function hP(r){if(r==null)return 0;if(wi(r))return kc(r)?ti(r):r.length;var l=ri(r);return l==ne||l==An?r.size:mf(r).length}function dP(r,l,h){var p=Ze(r)?cs:rT;return h&&di(r,l,h)&&(l=e),p(r,Ae(l,3))}var fP=Qe(function(r,l){if(r==null)return[];var h=l.length;return h>1&&di(r,l[0],l[1])?l=[]:h>2&&di(l[0],l[1],l[2])&&(l=[l[0]]),z0(r,Kn(l,1),[])}),Lc=_c||function(){return Cn.Date.now()};function pP(r,l){if(typeof l!="function")throw new Gn(s);return r=Ge(r),function(){if(--r<1)return l.apply(this,arguments)}}function vg(r,l,h){return l=h?e:l,l=r&&l==null?r.length:l,ro(r,ke,e,e,e,e,l)}function yg(r,l){var h;if(typeof l!="function")throw new Gn(s);return r=Ge(r),function(){return--r>0&&(h=l.apply(this,arguments)),r<=1&&(l=e),h}}var kf=Qe(function(r,l,h){var p=k;if(h.length){var y=yr(h,ba(kf));p|=Ve}return ro(r,p,l,h,y)}),xg=Qe(function(r,l,h){var p=k|ae;if(h.length){var y=yr(h,ba(xg));p|=Ve}return ro(l,p,r,h,y)});function Cg(r,l,h){l=h?e:l;var p=ro(r,de,e,e,e,e,e,l);return p.placeholder=Cg.placeholder,p}function wg(r,l,h){l=h?e:l;var p=ro(r,ht,e,e,e,e,e,l);return p.placeholder=wg.placeholder,p}function bg(r,l,h){var p,y,w,b,P,M,V=0,G=!1,J=!1,le=!0;if(typeof r!="function")throw new Gn(s);l=Ji(l)||0,nn(h)&&(G=!!h.leading,J="maxWait"in h,w=J?g(Ji(h.maxWait)||0,l):w,le="trailing"in h?!!h.trailing:le);function _e(gn){var cr=p,uo=y;return p=y=e,V=gn,b=r.apply(uo,cr),b}function Pe(gn){return V=gn,P=Xl(ot,l),G?_e(gn):b}function Ye(gn){var cr=gn-M,uo=gn-V,Zg=l-cr;return J?x(Zg,w-uo):Zg}function Ie(gn){var cr=gn-M,uo=gn-V;return M===e||cr>=l||cr<0||J&&uo>=w}function ot(){var gn=Lc();if(Ie(gn))return ft(gn);P=Xl(ot,Ye(gn))}function ft(gn){return P=e,le&&p?_e(gn):(p=y=e,b)}function Ni(){P!==e&&M0(P),V=0,p=M=y=P=e}function fi(){return P===e?b:ft(Lc())}function Ri(){var gn=Lc(),cr=Ie(gn);if(p=arguments,y=this,M=gn,cr){if(P===e)return Pe(M);if(J)return M0(P),P=Xl(ot,l),_e(M)}return P===e&&(P=Xl(ot,l)),b}return Ri.cancel=Ni,Ri.flush=fi,Ri}var mP=Qe(function(r,l){return d0(r,1,l)}),gP=Qe(function(r,l,h){return d0(r,Ji(l)||0,h)});function _P(r){return ro(r,rt)}function Nc(r,l){if(typeof r!="function"||l!=null&&typeof l!="function")throw new Gn(s);var h=function(){var p=arguments,y=l?l.apply(this,p):p[0],w=h.cache;if(w.has(y))return w.get(y);var b=r.apply(this,p);return h.cache=w.set(y,b)||w,b};return h.cache=new(Nc.Cache||no),h}Nc.Cache=no;function Rc(r){if(typeof r!="function")throw new Gn(s);return function(){var l=arguments;switch(l.length){case 0:return!r.call(this);case 1:return!r.call(this,l[0]);case 2:return!r.call(this,l[0],l[1]);case 3:return!r.call(this,l[0],l[1],l[2])}return!r.apply(this,l)}}function vP(r){return yg(2,r)}var yP=oT(function(r,l){l=l.length==1&&Ze(l[0])?It(l[0],jt(Ae())):It(Kn(l,1),jt(Ae()));var h=l.length;return Qe(function(p){for(var y=-1,w=x(p.length,h);++y<w;)p[y]=l[y].call(this,p[y]);return Vt(r,this,p)})}),qf=Qe(function(r,l){var h=yr(l,ba(qf));return ro(r,Ve,e,l,h)}),zg=Qe(function(r,l){var h=yr(l,ba(zg));return ro(r,Ct,e,l,h)}),xP=oo(function(r,l){return ro(r,ge,e,e,e,l)});function CP(r,l){if(typeof r!="function")throw new Gn(s);return l=l===e?l:Ge(l),Qe(r,l)}function wP(r,l){if(typeof r!="function")throw new Gn(s);return l=l==null?0:g(Ge(l),0),Qe(function(h){var p=h[l],y=No(h,0,l);return p&&or(y,p),Vt(r,this,y)})}function bP(r,l,h){var p=!0,y=!0;if(typeof r!="function")throw new Gn(s);return nn(h)&&(p="leading"in h?!!h.leading:p,y="trailing"in h?!!h.trailing:y),bg(r,l,{leading:p,maxWait:l,trailing:y})}function zP(r){return vg(r,1)}function FP(r,l){return qf(zf(l),r)}function SP(){if(!arguments.length)return[];var r=arguments[0];return Ze(r)?r:[r]}function TP(r){return Gi(r,F)}function AP(r,l){return l=typeof l=="function"?l:e,Gi(r,F,l)}function PP(r){return Gi(r,_|F)}function IP(r,l){return l=typeof l=="function"?l:e,Gi(r,_|F,l)}function EP(r,l){return l==null||h0(r,l,Un(l))}function ur(r,l){return r===l||r!==r&&l!==l}var OP=Pc(df),MP=Pc(function(r,l){return r>=l}),Is=_0(function(){return arguments}())?_0:function(r){return an(r)&&dt.call(r,"callee")&&!Ul.call(r,"callee")},Ze=Z.isArray,DP=ic?jt(ic):Z2;function wi(r){return r!=null&&Bc(r.length)&&!ao(r)}function mn(r){return an(r)&&wi(r)}function LP(r){return r===!0||r===!1||an(r)&&hi(r)==we}var Ro=n||Jf,NP=Il?jt(Il):j2;function RP(r){return an(r)&&r.nodeType===1&&!eu(r)}function BP(r){if(r==null)return!0;if(wi(r)&&(Ze(r)||typeof r=="string"||typeof r.splice=="function"||Ro(r)||za(r)||Is(r)))return!r.length;var l=ri(r);if(l==ne||l==An)return!r.size;if(Ql(r))return!mf(r).length;for(var h in r)if(dt.call(r,h))return!1;return!0}function kP(r,l){return Kl(r,l)}function qP(r,l,h){h=typeof h=="function"?h:e;var p=h?h(r,l):e;return p===e?Kl(r,l,e,h):!!p}function $f(r){if(!an(r))return!1;var l=hi(r);return l==Wt||l==hn||typeof r.message=="string"&&typeof r.name=="string"&&!eu(r)}function $P(r){return typeof r=="number"&&a(r)}function ao(r){if(!nn(r))return!1;var l=hi(r);return l==Et||l==oe||l==nt||l==rs}function Fg(r){return typeof r=="number"&&r==Ge(r)}function Bc(r){return typeof r=="number"&&r>-1&&r%1==0&&r<=j}function nn(r){var l=typeof r;return r!=null&&(l=="object"||l=="function")}function an(r){return r!=null&&typeof r=="object"}var Sg=rc?jt(rc):H2;function ZP(r,l){return r===l||pf(r,l,Ef(l))}function jP(r,l,h){return h=typeof h=="function"?h:e,pf(r,l,Ef(l),h)}function UP(r){return Tg(r)&&r!=+r}function HP(r){if(AT(r))throw new Ne(o);return v0(r)}function WP(r){return r===null}function VP(r){return r==null}function Tg(r){return typeof r=="number"||an(r)&&hi(r)==ie}function eu(r){if(!an(r)||hi(r)!=Vn)return!1;var l=eo(r);if(l===null)return!0;var h=dt.call(l,"constructor")&&l.constructor;return typeof h=="function"&&h instanceof h&&ya.call(h)==fc}var Zf=oc?jt(oc):W2;function GP(r){return Fg(r)&&r>=-j&&r<=j}var Ag=ua?jt(ua):V2;function kc(r){return typeof r=="string"||!Ze(r)&&an(r)&&hi(r)==qi}function Li(r){return typeof r=="symbol"||an(r)&&hi(r)==$i}var za=sc?jt(sc):G2;function KP(r){return r===e}function YP(r){return an(r)&&ri(r)==_n}function JP(r){return an(r)&&hi(r)==$n}var QP=Pc(gf),XP=Pc(function(r,l){return r<=l});function Pg(r){if(!r)return[];if(wi(r))return kc(r)?ni(r):Ci(r);if(Eo&&r[Eo])return fa(r[Eo]());var l=ri(r),h=l==ne?kl:l==An?xi:Fa;return h(r)}function lo(r){if(!r)return r===0?r:0;if(r=Ji(r),r===Te||r===-Te){var l=r<0?-1:1;return l*Re}return r===r?r:0}function Ge(r){var l=lo(r),h=l%1;return l===l?h?l-h:l:0}function Ig(r){return r?Ss(Ge(r),0,xe):0}function Ji(r){if(typeof r=="number")return r;if(Li(r))return ce;if(nn(r)){var l=typeof r.valueOf=="function"?r.valueOf():r;r=nn(l)?l+"":l}if(typeof r!="string")return r===0?r:+r;r=cc(r);var h=Bd.test(r);return h||qd.test(r)?Wd(r.slice(2),h?2:8):Hu.test(r)?ce:+r}function Eg(r){return br(r,bi(r))}function eI(r){return r?Ss(Ge(r),-j,j):r===0?r:0}function zt(r){return r==null?"":Di(r)}var tI=Ca(function(r,l){if(Ql(l)||wi(l)){br(l,Un(l),r);return}for(var h in l)dt.call(l,h)&&Wl(r,h,l[h])}),Og=Ca(function(r,l){br(l,bi(l),r)}),qc=Ca(function(r,l,h,p){br(l,bi(l),r,p)}),nI=Ca(function(r,l,h,p){br(l,Un(l),r,p)}),iI=oo(uf);function rI(r,l){var h=Oo(r);return l==null?h:c0(h,l)}var oI=Qe(function(r,l){r=bt(r);var h=-1,p=l.length,y=p>2?l[2]:e;for(y&&di(l[0],l[1],y)&&(p=1);++h<p;)for(var w=l[h],b=bi(w),P=-1,M=b.length;++P<M;){var V=b[P],G=r[V];(G===e||ur(G,Po[V])&&!dt.call(r,V))&&(r[V]=w[V])}return r}),sI=Qe(function(r){return r.push(e,K0),Vt(Mg,e,r)});function aI(r,l){return hs(r,Ae(l,3),wr)}function lI(r,l){return hs(r,Ae(l,3),hf)}function uI(r,l){return r==null?r:cf(r,Ae(l,3),bi)}function cI(r,l){return r==null?r:m0(r,Ae(l,3),bi)}function hI(r,l){return r&&wr(r,Ae(l,3))}function dI(r,l){return r&&hf(r,Ae(l,3))}function fI(r){return r==null?[]:Cc(r,Un(r))}function pI(r){return r==null?[]:Cc(r,bi(r))}function jf(r,l,h){var p=r==null?e:Ts(r,l);return p===e?h:p}function mI(r,l){return r!=null&&Q0(r,l,B2)}function Uf(r,l){return r!=null&&Q0(r,l,k2)}var gI=U0(function(r,l,h){l!=null&&typeof l.toString!="function"&&(l=gs.call(l)),r[l]=h},Wf(zi)),_I=U0(function(r,l,h){l!=null&&typeof l.toString!="function"&&(l=gs.call(l)),dt.call(r,l)?r[l].push(h):r[l]=[h]},Ae),vI=Qe(Gl);function Un(r){return wi(r)?l0(r):mf(r)}function bi(r){return wi(r)?l0(r,!0):K2(r)}function yI(r,l){var h={};return l=Ae(l,3),wr(r,function(p,y,w){io(h,l(p,y,w),p)}),h}function xI(r,l){var h={};return l=Ae(l,3),wr(r,function(p,y,w){io(h,y,l(p,y,w))}),h}var CI=Ca(function(r,l,h){wc(r,l,h)}),Mg=Ca(function(r,l,h,p){wc(r,l,h,p)}),wI=oo(function(r,l){var h={};if(r==null)return h;var p=!1;l=It(l,function(w){return w=Lo(w,r),p||(p=w.length>1),w}),br(r,Pf(r),h),p&&(h=Gi(h,_|z|F,gT));for(var y=l.length;y--;)Cf(h,l[y]);return h});function bI(r,l){return Dg(r,Rc(Ae(l)))}var zI=oo(function(r,l){return r==null?{}:J2(r,l)});function Dg(r,l){if(r==null)return{};var h=It(Pf(r),function(p){return[p]});return l=Ae(l),F0(r,h,function(p,y){return l(p,y[0])})}function FI(r,l,h){l=Lo(l,r);var p=-1,y=l.length;for(y||(y=1,r=e);++p<y;){var w=r==null?e:r[zr(l[p])];w===e&&(p=y,w=h),r=ao(w)?w.call(r):w}return r}function SI(r,l,h){return r==null?r:Yl(r,l,h)}function TI(r,l,h,p){return p=typeof p=="function"?p:e,r==null?r:Yl(r,l,h,p)}var Lg=V0(Un),Ng=V0(bi);function AI(r,l,h){var p=Ze(r),y=p||Ro(r)||za(r);if(l=Ae(l,4),h==null){var w=r&&r.constructor;y?h=p?new w:[]:nn(r)?h=ao(w)?Oo(eo(r)):{}:h={}}return(y?ui:wr)(r,function(b,P,M){return l(h,b,P,M)}),h}function PI(r,l){return r==null?!0:Cf(r,l)}function II(r,l,h){return r==null?r:I0(r,l,zf(h))}function EI(r,l,h,p){return p=typeof p=="function"?p:e,r==null?r:I0(r,l,zf(h),p)}function Fa(r){return r==null?[]:_r(r,Un(r))}function OI(r){return r==null?[]:_r(r,bi(r))}function MI(r,l,h){return h===e&&(h=l,l=e),h!==e&&(h=Ji(h),h=h===h?h:0),l!==e&&(l=Ji(l),l=l===l?l:0),Ss(Ji(r),l,h)}function DI(r,l,h){return l=lo(l),h===e?(h=l,l=0):h=lo(h),r=Ji(r),q2(r,l,h)}function LI(r,l,h){if(h&&typeof h!="boolean"&&di(r,l,h)&&(l=h=e),h===e&&(typeof l=="boolean"?(h=l,l=e):typeof r=="boolean"&&(h=r,r=e)),r===e&&l===e?(r=0,l=1):(r=lo(r),l===e?(l=r,r=0):l=lo(l)),r>l){var p=r;r=l,l=p}if(h||r%1||l%1){var y=$();return x(r+y*(l-r+Sl("1e-"+((y+"").length-1))),l)}return vf(r,l)}var NI=wa(function(r,l,h){return l=l.toLowerCase(),r+(h?Rg(l):l)});function Rg(r){return Hf(zt(r).toLowerCase())}function Bg(r){return r=zt(r),r&&r.replace(Wu,Yd).replace(Xu,"")}function RI(r,l,h){r=zt(r),l=Di(l);var p=r.length;h=h===e?p:Ss(Ge(h),0,p);var y=h;return h-=l.length,h>=0&&r.slice(h,y)==l}function BI(r){return r=zt(r),r&&On.test(r)?r.replace(fn,ps):r}function kI(r){return r=zt(r),r&&Rd.test(r)?r.replace(_l,"\\$&"):r}var qI=wa(function(r,l,h){return r+(h?"-":"")+l.toLowerCase()}),$I=wa(function(r,l,h){return r+(h?" ":"")+l.toLowerCase()}),ZI=$0("toLowerCase");function jI(r,l,h){r=zt(r),l=Ge(l);var p=l?ti(r):0;if(!l||p>=l)return r;var y=(l-p)/2;return Ac(Cs(y),h)+r+Ac(xs(y),h)}function UI(r,l,h){r=zt(r),l=Ge(l);var p=l?ti(r):0;return l&&p<l?r+Ac(l-p,h):r}function HI(r,l,h){r=zt(r),l=Ge(l);var p=l?ti(r):0;return l&&p<l?Ac(l-p,h)+r:r}function WI(r,l,h){return h||l==null?l=0:l&&(l=+l),D(zt(r).replace(vl,""),l||0)}function VI(r,l,h){return(h?di(r,l,h):l===e)?l=1:l=Ge(l),yf(zt(r),l)}function GI(){var r=arguments,l=zt(r[0]);return r.length<3?l:l.replace(r[1],r[2])}var KI=wa(function(r,l,h){return r+(h?"_":"")+l.toLowerCase()});function YI(r,l,h){return h&&typeof h!="number"&&di(r,l,h)&&(l=h=e),h=h===e?xe:h>>>0,h?(r=zt(r),r&&(typeof l=="string"||l!=null&&!Zf(l))&&(l=Di(l),!l&&So(r))?No(ni(r),0,h):r.split(l,h)):[]}var JI=wa(function(r,l,h){return r+(h?" ":"")+Hf(l)});function QI(r,l,h){return r=zt(r),h=h==null?0:Ss(Ge(h),0,r.length),l=Di(l),r.slice(h,h+l.length)==l}function XI(r,l,h){var p=C.templateSettings;h&&di(r,l,h)&&(l=e),r=zt(r),l=qc({},l,p,G0);var y=qc({},l.imports,p.imports,G0),w=Un(y),b=_r(y,w),P,M,V=0,G=l.interpolate||Qs,J="__p += '",le=jl((l.escape||Qs).source+"|"+G.source+"|"+(G===xn?Uu:Qs).source+"|"+(l.evaluate||Qs).source+"|$","g"),_e="//# sourceURL="+(dt.call(l,"sourceURL")?(l.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++us+"]")+`
`;r.replace(le,function(Ie,ot,ft,Ni,fi,Ri){return ft||(ft=Ni),J+=r.slice(V,Ri).replace(Xs,dc),ot&&(P=!0,J+=`' +
__e(`+ot+`) +
'`),fi&&(M=!0,J+=`';
`+fi+`;
__p += '`),ft&&(J+=`' +
((__t = (`+ft+`)) == null ? '' : __t) +
'`),V=Ri+Ie.length,Ie}),J+=`';
`;var Pe=dt.call(l,"variable")&&l.variable;if(!Pe)J=`with (obj) {
`+J+`
}
`;else if(ju.test(Pe))throw new Ne(u);J=(M?J.replace(vn,""):J).replace(In,"$1").replace(yn,"$1;"),J="function("+(Pe||"obj")+`) {
`+(Pe?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(P?", __e = _.escape":"")+(M?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+J+`return __p
}`;var Ye=qg(function(){return vt(w,_e+"return "+J).apply(e,b)});if(Ye.source=J,$f(Ye))throw Ye;return Ye}function eE(r){return zt(r).toLowerCase()}function tE(r){return zt(r).toUpperCase()}function nE(r,l,h){if(r=zt(r),r&&(h||l===e))return cc(r);if(!r||!(l=Di(l)))return r;var p=ni(r),y=ni(l),w=Wi(p,y),b=hc(p,y)+1;return No(p,w,b).join("")}function iE(r,l,h){if(r=zt(r),r&&(h||l===e))return r.slice(0,ql(r)+1);if(!r||!(l=Di(l)))return r;var p=ni(r),y=hc(p,ni(l))+1;return No(p,0,y).join("")}function rE(r,l,h){if(r=zt(r),r&&(h||l===e))return r.replace(vl,"");if(!r||!(l=Di(l)))return r;var p=ni(r),y=Wi(p,ni(l));return No(p,y).join("")}function oE(r,l){var h=At,p=R;if(nn(l)){var y="separator"in l?l.separator:y;h="length"in l?Ge(l.length):h,p="omission"in l?Di(l.omission):p}r=zt(r);var w=r.length;if(So(r)){var b=ni(r);w=b.length}if(h>=w)return r;var P=h-ti(p);if(P<1)return p;var M=b?No(b,0,P).join(""):r.slice(0,P);if(y===e)return M+p;if(b&&(P+=M.length-P),Zf(y)){if(r.slice(P).search(y)){var V,G=M;for(y.global||(y=jl(y.source,zt(Gr.exec(y))+"g")),y.lastIndex=0;V=y.exec(G);)var J=V.index;M=M.slice(0,J===e?P:J)}}else if(r.indexOf(Di(y),P)!=P){var le=M.lastIndexOf(y);le>-1&&(M=M.slice(0,le))}return M+p}function sE(r){return r=zt(r),r&&En.test(r)?r.replace(dn,$l):r}var aE=wa(function(r,l,h){return r+(h?" ":"")+l.toUpperCase()}),Hf=$0("toUpperCase");function kg(r,l,h){return r=zt(r),l=h?e:l,l===e?vr(r)?ga(r):lc(r):r.match(l)||[]}var qg=Qe(function(r,l){try{return Vt(r,e,l)}catch(h){return $f(h)?h:new Ne(h)}}),lE=oo(function(r,l){return ui(l,function(h){h=zr(h),io(r,h,kf(r[h],r))}),r});function uE(r){var l=r==null?0:r.length,h=Ae();return r=l?It(r,function(p){if(typeof p[1]!="function")throw new Gn(s);return[h(p[0]),p[1]]}):[],Qe(function(p){for(var y=-1;++y<l;){var w=r[y];if(Vt(w[0],this,p))return Vt(w[1],this,p)}})}function cE(r){return L2(Gi(r,_))}function Wf(r){return function(){return r}}function hE(r,l){return r==null||r!==r?l:r}var dE=j0(),fE=j0(!0);function zi(r){return r}function Vf(r){return y0(typeof r=="function"?r:Gi(r,_))}function pE(r){return C0(Gi(r,_))}function mE(r,l){return w0(r,Gi(l,_))}var gE=Qe(function(r,l){return function(h){return Gl(h,r,l)}}),_E=Qe(function(r,l){return function(h){return Gl(r,h,l)}});function Gf(r,l,h){var p=Un(l),y=Cc(l,p);h==null&&!(nn(l)&&(y.length||!p.length))&&(h=l,l=r,r=this,y=Cc(l,Un(l)));var w=!(nn(h)&&"chain"in h)||!!h.chain,b=ao(r);return ui(y,function(P){var M=l[P];r[P]=M,b&&(r.prototype[P]=function(){var V=this.__chain__;if(w||V){var G=r(this.__wrapped__),J=G.__actions__=Ci(this.__actions__);return J.push({func:M,args:arguments,thisArg:r}),G.__chain__=V,G}return M.apply(r,or([this.value()],arguments))})}),r}function vE(){return Cn._===this&&(Cn._=ef),this}function Kf(){}function yE(r){return r=Ge(r),Qe(function(l){return b0(l,r)})}var xE=Sf(It),CE=Sf(El),wE=Sf(cs);function $g(r){return Mf(r)?ca(zr(r)):Q2(r)}function bE(r){return function(l){return r==null?e:Ts(r,l)}}var zE=H0(),FE=H0(!0);function Yf(){return[]}function Jf(){return!1}function SE(){return{}}function TE(){return""}function AE(){return!0}function PE(r,l){if(r=Ge(r),r<1||r>j)return[];var h=xe,p=x(r,xe);l=Ae(l),r-=xe;for(var y=Bl(p,l);++h<r;)l(h);return y}function IE(r){return Ze(r)?It(r,zr):Li(r)?[r]:Ci(ag(zt(r)))}function EE(r){var l=++Xd;return zt(r)+l}var OE=Tc(function(r,l){return r+l},0),ME=Tf("ceil"),DE=Tc(function(r,l){return r/l},1),LE=Tf("floor");function NE(r){return r&&r.length?xc(r,zi,df):e}function RE(r,l){return r&&r.length?xc(r,Ae(l,2),df):e}function BE(r){return Dl(r,zi)}function kE(r,l){return Dl(r,Ae(l,2))}function qE(r){return r&&r.length?xc(r,zi,gf):e}function $E(r,l){return r&&r.length?xc(r,Ae(l,2),gf):e}var ZE=Tc(function(r,l){return r*l},1),jE=Tf("round"),UE=Tc(function(r,l){return r-l},0);function HE(r){return r&&r.length?Rl(r,zi):0}function WE(r,l){return r&&r.length?Rl(r,Ae(l,2)):0}return C.after=pP,C.ary=vg,C.assign=tI,C.assignIn=Og,C.assignInWith=qc,C.assignWith=nI,C.at=iI,C.before=yg,C.bind=kf,C.bindAll=lE,C.bindKey=xg,C.castArray=SP,C.chain=mg,C.chunk=LT,C.compact=NT,C.concat=RT,C.cond=uE,C.conforms=cE,C.constant=Wf,C.countBy=HA,C.create=rI,C.curry=Cg,C.curryRight=wg,C.debounce=bg,C.defaults=oI,C.defaultsDeep=sI,C.defer=mP,C.delay=gP,C.difference=BT,C.differenceBy=kT,C.differenceWith=qT,C.drop=$T,C.dropRight=ZT,C.dropRightWhile=jT,C.dropWhile=UT,C.fill=HT,C.filter=VA,C.flatMap=YA,C.flatMapDeep=JA,C.flatMapDepth=QA,C.flatten=hg,C.flattenDeep=WT,C.flattenDepth=VT,C.flip=_P,C.flow=dE,C.flowRight=fE,C.fromPairs=GT,C.functions=fI,C.functionsIn=pI,C.groupBy=XA,C.initial=YT,C.intersection=JT,C.intersectionBy=QT,C.intersectionWith=XT,C.invert=gI,C.invertBy=_I,C.invokeMap=tP,C.iteratee=Vf,C.keyBy=nP,C.keys=Un,C.keysIn=bi,C.map=Dc,C.mapKeys=yI,C.mapValues=xI,C.matches=pE,C.matchesProperty=mE,C.memoize=Nc,C.merge=CI,C.mergeWith=Mg,C.method=gE,C.methodOf=_E,C.mixin=Gf,C.negate=Rc,C.nthArg=yE,C.omit=wI,C.omitBy=bI,C.once=vP,C.orderBy=iP,C.over=xE,C.overArgs=yP,C.overEvery=CE,C.overSome=wE,C.partial=qf,C.partialRight=zg,C.partition=rP,C.pick=zI,C.pickBy=Dg,C.property=$g,C.propertyOf=bE,C.pull=iA,C.pullAll=fg,C.pullAllBy=rA,C.pullAllWith=oA,C.pullAt=sA,C.range=zE,C.rangeRight=FE,C.rearg=xP,C.reject=aP,C.remove=aA,C.rest=CP,C.reverse=Rf,C.sampleSize=uP,C.set=SI,C.setWith=TI,C.shuffle=cP,C.slice=lA,C.sortBy=fP,C.sortedUniq=mA,C.sortedUniqBy=gA,C.split=YI,C.spread=wP,C.tail=_A,C.take=vA,C.takeRight=yA,C.takeRightWhile=xA,C.takeWhile=CA,C.tap=NA,C.throttle=bP,C.thru=Mc,C.toArray=Pg,C.toPairs=Lg,C.toPairsIn=Ng,C.toPath=IE,C.toPlainObject=Eg,C.transform=AI,C.unary=zP,C.union=wA,C.unionBy=bA,C.unionWith=zA,C.uniq=FA,C.uniqBy=SA,C.uniqWith=TA,C.unset=PI,C.unzip=Bf,C.unzipWith=pg,C.update=II,C.updateWith=EI,C.values=Fa,C.valuesIn=OI,C.without=AA,C.words=kg,C.wrap=FP,C.xor=PA,C.xorBy=IA,C.xorWith=EA,C.zip=OA,C.zipObject=MA,C.zipObjectDeep=DA,C.zipWith=LA,C.entries=Lg,C.entriesIn=Ng,C.extend=Og,C.extendWith=qc,Gf(C,C),C.add=OE,C.attempt=qg,C.camelCase=NI,C.capitalize=Rg,C.ceil=ME,C.clamp=MI,C.clone=TP,C.cloneDeep=PP,C.cloneDeepWith=IP,C.cloneWith=AP,C.conformsTo=EP,C.deburr=Bg,C.defaultTo=hE,C.divide=DE,C.endsWith=RI,C.eq=ur,C.escape=BI,C.escapeRegExp=kI,C.every=WA,C.find=GA,C.findIndex=ug,C.findKey=aI,C.findLast=KA,C.findLastIndex=cg,C.findLastKey=lI,C.floor=LE,C.forEach=gg,C.forEachRight=_g,C.forIn=uI,C.forInRight=cI,C.forOwn=hI,C.forOwnRight=dI,C.get=jf,C.gt=OP,C.gte=MP,C.has=mI,C.hasIn=Uf,C.head=dg,C.identity=zi,C.includes=eP,C.indexOf=KT,C.inRange=DI,C.invoke=vI,C.isArguments=Is,C.isArray=Ze,C.isArrayBuffer=DP,C.isArrayLike=wi,C.isArrayLikeObject=mn,C.isBoolean=LP,C.isBuffer=Ro,C.isDate=NP,C.isElement=RP,C.isEmpty=BP,C.isEqual=kP,C.isEqualWith=qP,C.isError=$f,C.isFinite=$P,C.isFunction=ao,C.isInteger=Fg,C.isLength=Bc,C.isMap=Sg,C.isMatch=ZP,C.isMatchWith=jP,C.isNaN=UP,C.isNative=HP,C.isNil=VP,C.isNull=WP,C.isNumber=Tg,C.isObject=nn,C.isObjectLike=an,C.isPlainObject=eu,C.isRegExp=Zf,C.isSafeInteger=GP,C.isSet=Ag,C.isString=kc,C.isSymbol=Li,C.isTypedArray=za,C.isUndefined=KP,C.isWeakMap=YP,C.isWeakSet=JP,C.join=eA,C.kebabCase=qI,C.last=Yi,C.lastIndexOf=tA,C.lowerCase=$I,C.lowerFirst=ZI,C.lt=QP,C.lte=XP,C.max=NE,C.maxBy=RE,C.mean=BE,C.meanBy=kE,C.min=qE,C.minBy=$E,C.stubArray=Yf,C.stubFalse=Jf,C.stubObject=SE,C.stubString=TE,C.stubTrue=AE,C.multiply=ZE,C.nth=nA,C.noConflict=vE,C.noop=Kf,C.now=Lc,C.pad=jI,C.padEnd=UI,C.padStart=HI,C.parseInt=WI,C.random=LI,C.reduce=oP,C.reduceRight=sP,C.repeat=VI,C.replace=GI,C.result=FI,C.round=jE,C.runInContext=O,C.sample=lP,C.size=hP,C.snakeCase=KI,C.some=dP,C.sortedIndex=uA,C.sortedIndexBy=cA,C.sortedIndexOf=hA,C.sortedLastIndex=dA,C.sortedLastIndexBy=fA,C.sortedLastIndexOf=pA,C.startCase=JI,C.startsWith=QI,C.subtract=UE,C.sum=HE,C.sumBy=WE,C.template=XI,C.times=PE,C.toFinite=lo,C.toInteger=Ge,C.toLength=Ig,C.toLower=eE,C.toNumber=Ji,C.toSafeInteger=eI,C.toString=zt,C.toUpper=tE,C.trim=nE,C.trimEnd=iE,C.trimStart=rE,C.truncate=oE,C.unescape=sE,C.uniqueId=EE,C.upperCase=aE,C.upperFirst=Hf,C.each=gg,C.eachRight=_g,C.first=dg,Gf(C,function(){var r={};return wr(C,function(l,h){dt.call(C.prototype,h)||(r[h]=l)}),r}(),{chain:!1}),C.VERSION=t,ui(["bind","bindKey","curry","curryRight","partial","partialRight"],function(r){C[r].placeholder=C}),ui(["drop","take"],function(r,l){Je.prototype[r]=function(h){h=h===e?1:g(Ge(h),0);var p=this.__filtered__&&!l?new Je(this):this.clone();return p.__filtered__?p.__takeCount__=x(h,p.__takeCount__):p.__views__.push({size:x(h,xe),type:r+(p.__dir__<0?"Right":"")}),p},Je.prototype[r+"Right"]=function(h){return this.reverse()[r](h).reverse()}}),ui(["filter","map","takeWhile"],function(r,l){var h=l+1,p=h==re||h==ee;Je.prototype[r]=function(y){var w=this.clone();return w.__iteratees__.push({iteratee:Ae(y,3),type:h}),w.__filtered__=w.__filtered__||p,w}}),ui(["head","last"],function(r,l){var h="take"+(l?"Right":"");Je.prototype[r]=function(){return this[h](1).value()[0]}}),ui(["initial","tail"],function(r,l){var h="drop"+(l?"":"Right");Je.prototype[r]=function(){return this.__filtered__?new Je(this):this[h](1)}}),Je.prototype.compact=function(){return this.filter(zi)},Je.prototype.find=function(r){return this.filter(r).head()},Je.prototype.findLast=function(r){return this.reverse().find(r)},Je.prototype.invokeMap=Qe(function(r,l){return typeof r=="function"?new Je(this):this.map(function(h){return Gl(h,r,l)})}),Je.prototype.reject=function(r){return this.filter(Rc(Ae(r)))},Je.prototype.slice=function(r,l){r=Ge(r);var h=this;return h.__filtered__&&(r>0||l<0)?new Je(h):(r<0?h=h.takeRight(-r):r&&(h=h.drop(r)),l!==e&&(l=Ge(l),h=l<0?h.dropRight(-l):h.take(l-r)),h)},Je.prototype.takeRightWhile=function(r){return this.reverse().takeWhile(r).reverse()},Je.prototype.toArray=function(){return this.take(xe)},wr(Je.prototype,function(r,l){var h=/^(?:filter|find|map|reject)|While$/.test(l),p=/^(?:head|last)$/.test(l),y=C[p?"take"+(l=="last"?"Right":""):l],w=p||/^find/.test(l);y&&(C.prototype[l]=function(){var b=this.__wrapped__,P=p?[1]:arguments,M=b instanceof Je,V=P[0],G=M||Ze(b),J=function(ot){var ft=y.apply(C,or([ot],P));return p&&le?ft[0]:ft};G&&h&&typeof V=="function"&&V.length!=1&&(M=G=!1);var le=this.__chain__,_e=!!this.__actions__.length,Pe=w&&!le,Ye=M&&!_e;if(!w&&G){b=Ye?b:new Je(this);var Ie=r.apply(b,P);return Ie.__actions__.push({func:Mc,args:[J],thisArg:e}),new ii(Ie,le)}return Pe&&Ye?r.apply(this,P):(Ie=this.thru(J),Pe?p?Ie.value()[0]:Ie.value():Ie)})}),ui(["pop","push","shift","sort","splice","unshift"],function(r){var l=_a[r],h=/^(?:push|sort|unshift)$/.test(r)?"tap":"thru",p=/^(?:pop|shift)$/.test(r);C.prototype[r]=function(){var y=arguments;if(p&&!this.__chain__){var w=this.value();return l.apply(Ze(w)?w:[],y)}return this[h](function(b){return l.apply(Ze(b)?b:[],y)})}}),wr(Je.prototype,function(r,l){var h=C[l];if(h){var p=h.name+"";dt.call(Mi,p)||(Mi[p]=[]),Mi[p].push({name:l,func:h})}}),Mi[Sc(e,ae).name]=[{name:"wrapper",func:e}],Je.prototype.clone=af,Je.prototype.reverse=a2,Je.prototype.value=l2,C.prototype.at=RA,C.prototype.chain=BA,C.prototype.commit=kA,C.prototype.next=qA,C.prototype.plant=ZA,C.prototype.reverse=jA,C.prototype.toJSON=C.prototype.valueOf=C.prototype.value=UA,C.prototype.first=C.prototype.head,Eo&&(C.prototype[Eo]=$A),C},Oi=Ao();typeof define=="function"&&typeof define.amd=="object"&&define.amd?(Cn._=Oi,define(function(){return Oi})):Ei?((Ei.exports=Oi)._=Oi,li._=Oi):Cn._=Oi}).call(ll)});var XF=A((mK,cd)=>{"use strict";(function(){"use strict";var e="input is invalid type",t="finalize already called",i=typeof window=="object",o=i?window:{};o.JS_SHA512_NO_WINDOW&&(i=!1);var s=!i&&typeof self=="object",u=!o.JS_SHA512_NO_NODE_JS&&typeof process=="object"&&process.versions&&process.versions.node;u?o=global:s&&(o=self);var d=!o.JS_SHA512_NO_COMMON_JS&&typeof cd=="object"&&cd.exports,m=typeof define=="function"&&define.amd,v=!o.JS_SHA512_NO_ARRAY_BUFFER&&typeof ArrayBuffer<"u",_="0123456789abcdef".split(""),z=[-2147483648,8388608,32768,128],F=[24,16,8,0],N=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591],H=["hex","array","digest","arrayBuffer"],k=[],ae=Array.isArray;(o.JS_SHA512_NO_NODE_JS||!ae)&&(ae=function(R){return Object.prototype.toString.call(R)==="[object Array]"});var te=ArrayBuffer.isView;v&&(o.JS_SHA512_NO_ARRAY_BUFFER_IS_VIEW||!te)&&(te=function(R){return typeof R=="object"&&R.buffer&&R.buffer.constructor===ArrayBuffer});var de=function(R){var X=typeof R;if(X==="string")return[R,!0];if(X!=="object"||R===null)throw new Error(e);if(v&&R.constructor===ArrayBuffer)return[new Uint8Array(R),!1];if(!ae(R)&&!te(R))throw new Error(e);return[R,!1]},ht=function(R,X){return function(fe){return new ge(X,!0).update(fe)[R]()}},Ve=function(R){var X=ht("hex",R);X.create=function(){return new ge(R)},X.update=function(Le){return X.create().update(Le)};for(var fe=0;fe<H.length;++fe){var re=H[fe];X[re]=ht(re,R)}return X},Ct=function(R,X){return function(fe,re){return new rt(fe,X,!0).update(re)[R]()}},ke=function(R){var X=Ct("hex",R);X.create=function(Le){return new rt(Le,R)},X.update=function(Le,ee){return X.create(Le).update(ee)};for(var fe=0;fe<H.length;++fe){var re=H[fe];X[re]=Ct(re,R)}return X};function ge(R,X){X?(k[0]=k[1]=k[2]=k[3]=k[4]=k[5]=k[6]=k[7]=k[8]=k[9]=k[10]=k[11]=k[12]=k[13]=k[14]=k[15]=k[16]=k[17]=k[18]=k[19]=k[20]=k[21]=k[22]=k[23]=k[24]=k[25]=k[26]=k[27]=k[28]=k[29]=k[30]=k[31]=k[32]=0,this.blocks=k):this.blocks=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],R==384?(this.h0h=3418070365,this.h0l=3238371032,this.h1h=1654270250,this.h1l=914150663,this.h2h=2438529370,this.h2l=812702999,this.h3h=355462360,this.h3l=4144912697,this.h4h=1731405415,this.h4l=4290775857,this.h5h=2394180231,this.h5l=1750603025,this.h6h=3675008525,this.h6l=1694076839,this.h7h=1203062813,this.h7l=3204075428):R==256?(this.h0h=573645204,this.h0l=4230739756,this.h1h=2673172387,this.h1l=3360449730,this.h2h=596883563,this.h2l=1867755857,this.h3h=2520282905,this.h3l=1497426621,this.h4h=2519219938,this.h4l=2827943907,this.h5h=3193839141,this.h5l=1401305490,this.h6h=721525244,this.h6l=746961066,this.h7h=246885852,this.h7l=2177182882):R==224?(this.h0h=2352822216,this.h0l=424955298,this.h1h=1944164710,this.h1l=2312950998,this.h2h=502970286,this.h2l=855612546,this.h3h=1738396948,this.h3l=1479516111,this.h4h=258812777,this.h4l=2077511080,this.h5h=2011393907,this.h5l=79989058,this.h6h=1067287976,this.h6l=1780299464,this.h7h=286451373,this.h7l=2446758561):(this.h0h=1779033703,this.h0l=4089235720,this.h1h=3144134277,this.h1l=2227873595,this.h2h=1013904242,this.h2l=4271175723,this.h3h=2773480762,this.h3l=1595750129,this.h4h=1359893119,this.h4l=2917565137,this.h5h=2600822924,this.h5l=725511199,this.h6h=528734635,this.h6l=4215389547,this.h7h=1541459225,this.h7l=327033209),this.bits=R,this.block=this.start=this.bytes=this.hBytes=0,this.finalized=this.hashed=!1}ge.prototype.update=function(R){if(this.finalized)throw new Error(t);var X=de(R);R=X[0];for(var fe=X[1],re,Le=0,ee,Te=R.length,j=this.blocks;Le<Te;){if(this.hashed&&(this.hashed=!1,j[0]=this.block,this.block=j[1]=j[2]=j[3]=j[4]=j[5]=j[6]=j[7]=j[8]=j[9]=j[10]=j[11]=j[12]=j[13]=j[14]=j[15]=j[16]=j[17]=j[18]=j[19]=j[20]=j[21]=j[22]=j[23]=j[24]=j[25]=j[26]=j[27]=j[28]=j[29]=j[30]=j[31]=j[32]=0),fe)for(ee=this.start;Le<Te&&ee<128;++Le)re=R.charCodeAt(Le),re<128?j[ee>>>2]|=re<<F[ee++&3]:re<2048?(j[ee>>>2]|=(192|re>>>6)<<F[ee++&3],j[ee>>>2]|=(128|re&63)<<F[ee++&3]):re<55296||re>=57344?(j[ee>>>2]|=(224|re>>>12)<<F[ee++&3],j[ee>>>2]|=(128|re>>>6&63)<<F[ee++&3],j[ee>>>2]|=(128|re&63)<<F[ee++&3]):(re=65536+((re&1023)<<10|R.charCodeAt(++Le)&1023),j[ee>>>2]|=(240|re>>>18)<<F[ee++&3],j[ee>>>2]|=(128|re>>>12&63)<<F[ee++&3],j[ee>>>2]|=(128|re>>>6&63)<<F[ee++&3],j[ee>>>2]|=(128|re&63)<<F[ee++&3]);else for(ee=this.start;Le<Te&&ee<128;++Le)j[ee>>>2]|=R[Le]<<F[ee++&3];this.lastByteIndex=ee,this.bytes+=ee-this.start,ee>=128?(this.block=j[32],this.start=ee-128,this.hash(),this.hashed=!0):this.start=ee}return this.bytes>4294967295&&(this.hBytes+=this.bytes/4294967296<<0,this.bytes=this.bytes%4294967296),this},ge.prototype.finalize=function(){if(!this.finalized){this.finalized=!0;var R=this.blocks,X=this.lastByteIndex;R[32]=this.block,R[X>>>2]|=z[X&3],this.block=R[32],X>=112&&(this.hashed||this.hash(),R[0]=this.block,R[1]=R[2]=R[3]=R[4]=R[5]=R[6]=R[7]=R[8]=R[9]=R[10]=R[11]=R[12]=R[13]=R[14]=R[15]=R[16]=R[17]=R[18]=R[19]=R[20]=R[21]=R[22]=R[23]=R[24]=R[25]=R[26]=R[27]=R[28]=R[29]=R[30]=R[31]=R[32]=0),R[30]=this.hBytes<<3|this.bytes>>>29,R[31]=this.bytes<<3,this.hash()}},ge.prototype.hash=function(){var R=this.h0h,X=this.h0l,fe=this.h1h,re=this.h1l,Le=this.h2h,ee=this.h2l,Te=this.h3h,j=this.h3l,Re=this.h4h,ce=this.h4l,xe=this.h5h,Ke=this.h5l,lt=this.h6h,je=this.h6l,Se=this.h7h,Ce=this.h7l,nt=this.blocks,we,Ht,hn,Wt,Et,oe,ne,ie,ze,Vn,nr,rs,ki,An,qi,$i,yo,_n,$n,ve,be,xt,mt,Pn,Zn;for(we=32;we<160;we+=2)ve=nt[we-30],be=nt[we-29],Ht=(ve>>>1|be<<31)^(ve>>>8|be<<24)^ve>>>7,hn=(be>>>1|ve<<31)^(be>>>8|ve<<24)^(be>>>7|ve<<25),ve=nt[we-4],be=nt[we-3],Wt=(ve>>>19|be<<13)^(be>>>29|ve<<3)^ve>>>6,Et=(be>>>19|ve<<13)^(ve>>>29|be<<3)^(be>>>6|ve<<26),ve=nt[we-32],be=nt[we-31],xt=nt[we-14],mt=nt[we-13],oe=(mt&65535)+(be&65535)+(hn&65535)+(Et&65535),ne=(mt>>>16)+(be>>>16)+(hn>>>16)+(Et>>>16)+(oe>>>16),ie=(xt&65535)+(ve&65535)+(Ht&65535)+(Wt&65535)+(ne>>>16),ze=(xt>>>16)+(ve>>>16)+(Ht>>>16)+(Wt>>>16)+(ie>>>16),nt[we]=ze<<16|ie&65535,nt[we+1]=ne<<16|oe&65535;var rn=R,Xt=X,en=fe,on=re,Ot=Le,vn=ee,In=Te,yn=j,dn=Re,fn=ce,En=xe,On=Ke,Mn=lt,Dn=je,xn=Se,Ln=Ce;for($i=en&Ot,yo=on&vn,we=0;we<160;we+=8)Ht=(rn>>>28|Xt<<4)^(Xt>>>2|rn<<30)^(Xt>>>7|rn<<25),hn=(Xt>>>28|rn<<4)^(rn>>>2|Xt<<30)^(rn>>>7|Xt<<25),Wt=(dn>>>14|fn<<18)^(dn>>>18|fn<<14)^(fn>>>9|dn<<23),Et=(fn>>>14|dn<<18)^(fn>>>18|dn<<14)^(dn>>>9|fn<<23),Vn=rn&en,nr=Xt&on,_n=Vn^rn&Ot^$i,$n=nr^Xt&vn^yo,Pn=dn&En^~dn&Mn,Zn=fn&On^~fn&Dn,ve=nt[we],be=nt[we+1],xt=N[we],mt=N[we+1],oe=(mt&65535)+(be&65535)+(Zn&65535)+(Et&65535)+(Ln&65535),ne=(mt>>>16)+(be>>>16)+(Zn>>>16)+(Et>>>16)+(Ln>>>16)+(oe>>>16),ie=(xt&65535)+(ve&65535)+(Pn&65535)+(Wt&65535)+(xn&65535)+(ne>>>16),ze=(xt>>>16)+(ve>>>16)+(Pn>>>16)+(Wt>>>16)+(xn>>>16)+(ie>>>16),ve=ze<<16|ie&65535,be=ne<<16|oe&65535,oe=($n&65535)+(hn&65535),ne=($n>>>16)+(hn>>>16)+(oe>>>16),ie=(_n&65535)+(Ht&65535)+(ne>>>16),ze=(_n>>>16)+(Ht>>>16)+(ie>>>16),xt=ze<<16|ie&65535,mt=ne<<16|oe&65535,oe=(yn&65535)+(be&65535),ne=(yn>>>16)+(be>>>16)+(oe>>>16),ie=(In&65535)+(ve&65535)+(ne>>>16),ze=(In>>>16)+(ve>>>16)+(ie>>>16),xn=ze<<16|ie&65535,Ln=ne<<16|oe&65535,oe=(mt&65535)+(be&65535),ne=(mt>>>16)+(be>>>16)+(oe>>>16),ie=(xt&65535)+(ve&65535)+(ne>>>16),ze=(xt>>>16)+(ve>>>16)+(ie>>>16),In=ze<<16|ie&65535,yn=ne<<16|oe&65535,Ht=(In>>>28|yn<<4)^(yn>>>2|In<<30)^(yn>>>7|In<<25),hn=(yn>>>28|In<<4)^(In>>>2|yn<<30)^(In>>>7|yn<<25),Wt=(xn>>>14|Ln<<18)^(xn>>>18|Ln<<14)^(Ln>>>9|xn<<23),Et=(Ln>>>14|xn<<18)^(Ln>>>18|xn<<14)^(xn>>>9|Ln<<23),rs=In&rn,ki=yn&Xt,_n=rs^In&en^Vn,$n=ki^yn&on^nr,Pn=xn&dn^~xn&En,Zn=Ln&fn^~Ln&On,ve=nt[we+2],be=nt[we+3],xt=N[we+2],mt=N[we+3],oe=(mt&65535)+(be&65535)+(Zn&65535)+(Et&65535)+(Dn&65535),ne=(mt>>>16)+(be>>>16)+(Zn>>>16)+(Et>>>16)+(Dn>>>16)+(oe>>>16),ie=(xt&65535)+(ve&65535)+(Pn&65535)+(Wt&65535)+(Mn&65535)+(ne>>>16),ze=(xt>>>16)+(ve>>>16)+(Pn>>>16)+(Wt>>>16)+(Mn>>>16)+(ie>>>16),ve=ze<<16|ie&65535,be=ne<<16|oe&65535,oe=($n&65535)+(hn&65535),ne=($n>>>16)+(hn>>>16)+(oe>>>16),ie=(_n&65535)+(Ht&65535)+(ne>>>16),ze=(_n>>>16)+(Ht>>>16)+(ie>>>16),xt=ze<<16|ie&65535,mt=ne<<16|oe&65535,oe=(vn&65535)+(be&65535),ne=(vn>>>16)+(be>>>16)+(oe>>>16),ie=(Ot&65535)+(ve&65535)+(ne>>>16),ze=(Ot>>>16)+(ve>>>16)+(ie>>>16),Mn=ze<<16|ie&65535,Dn=ne<<16|oe&65535,oe=(mt&65535)+(be&65535),ne=(mt>>>16)+(be>>>16)+(oe>>>16),ie=(xt&65535)+(ve&65535)+(ne>>>16),ze=(xt>>>16)+(ve>>>16)+(ie>>>16),Ot=ze<<16|ie&65535,vn=ne<<16|oe&65535,Ht=(Ot>>>28|vn<<4)^(vn>>>2|Ot<<30)^(vn>>>7|Ot<<25),hn=(vn>>>28|Ot<<4)^(Ot>>>2|vn<<30)^(Ot>>>7|vn<<25),Wt=(Mn>>>14|Dn<<18)^(Mn>>>18|Dn<<14)^(Dn>>>9|Mn<<23),Et=(Dn>>>14|Mn<<18)^(Dn>>>18|Mn<<14)^(Mn>>>9|Dn<<23),An=Ot&In,qi=vn&yn,_n=An^Ot&rn^rs,$n=qi^vn&Xt^ki,Pn=Mn&xn^~Mn&dn,Zn=Dn&Ln^~Dn&fn,ve=nt[we+4],be=nt[we+5],xt=N[we+4],mt=N[we+5],oe=(mt&65535)+(be&65535)+(Zn&65535)+(Et&65535)+(On&65535),ne=(mt>>>16)+(be>>>16)+(Zn>>>16)+(Et>>>16)+(On>>>16)+(oe>>>16),ie=(xt&65535)+(ve&65535)+(Pn&65535)+(Wt&65535)+(En&65535)+(ne>>>16),ze=(xt>>>16)+(ve>>>16)+(Pn>>>16)+(Wt>>>16)+(En>>>16)+(ie>>>16),ve=ze<<16|ie&65535,be=ne<<16|oe&65535,oe=($n&65535)+(hn&65535),ne=($n>>>16)+(hn>>>16)+(oe>>>16),ie=(_n&65535)+(Ht&65535)+(ne>>>16),ze=(_n>>>16)+(Ht>>>16)+(ie>>>16),xt=ze<<16|ie&65535,mt=ne<<16|oe&65535,oe=(on&65535)+(be&65535),ne=(on>>>16)+(be>>>16)+(oe>>>16),ie=(en&65535)+(ve&65535)+(ne>>>16),ze=(en>>>16)+(ve>>>16)+(ie>>>16),En=ze<<16|ie&65535,On=ne<<16|oe&65535,oe=(mt&65535)+(be&65535),ne=(mt>>>16)+(be>>>16)+(oe>>>16),ie=(xt&65535)+(ve&65535)+(ne>>>16),ze=(xt>>>16)+(ve>>>16)+(ie>>>16),en=ze<<16|ie&65535,on=ne<<16|oe&65535,Ht=(en>>>28|on<<4)^(on>>>2|en<<30)^(on>>>7|en<<25),hn=(on>>>28|en<<4)^(en>>>2|on<<30)^(en>>>7|on<<25),Wt=(En>>>14|On<<18)^(En>>>18|On<<14)^(On>>>9|En<<23),Et=(On>>>14|En<<18)^(On>>>18|En<<14)^(En>>>9|On<<23),$i=en&Ot,yo=on&vn,_n=$i^en&In^An,$n=yo^on&yn^qi,Pn=En&Mn^~En&xn,Zn=On&Dn^~On&Ln,ve=nt[we+6],be=nt[we+7],xt=N[we+6],mt=N[we+7],oe=(mt&65535)+(be&65535)+(Zn&65535)+(Et&65535)+(fn&65535),ne=(mt>>>16)+(be>>>16)+(Zn>>>16)+(Et>>>16)+(fn>>>16)+(oe>>>16),ie=(xt&65535)+(ve&65535)+(Pn&65535)+(Wt&65535)+(dn&65535)+(ne>>>16),ze=(xt>>>16)+(ve>>>16)+(Pn>>>16)+(Wt>>>16)+(dn>>>16)+(ie>>>16),ve=ze<<16|ie&65535,be=ne<<16|oe&65535,oe=($n&65535)+(hn&65535),ne=($n>>>16)+(hn>>>16)+(oe>>>16),ie=(_n&65535)+(Ht&65535)+(ne>>>16),ze=(_n>>>16)+(Ht>>>16)+(ie>>>16),xt=ze<<16|ie&65535,mt=ne<<16|oe&65535,oe=(Xt&65535)+(be&65535),ne=(Xt>>>16)+(be>>>16)+(oe>>>16),ie=(rn&65535)+(ve&65535)+(ne>>>16),ze=(rn>>>16)+(ve>>>16)+(ie>>>16),dn=ze<<16|ie&65535,fn=ne<<16|oe&65535,oe=(mt&65535)+(be&65535),ne=(mt>>>16)+(be>>>16)+(oe>>>16),ie=(xt&65535)+(ve&65535)+(ne>>>16),ze=(xt>>>16)+(ve>>>16)+(ie>>>16),rn=ze<<16|ie&65535,Xt=ne<<16|oe&65535;oe=(X&65535)+(Xt&65535),ne=(X>>>16)+(Xt>>>16)+(oe>>>16),ie=(R&65535)+(rn&65535)+(ne>>>16),ze=(R>>>16)+(rn>>>16)+(ie>>>16),this.h0h=ze<<16|ie&65535,this.h0l=ne<<16|oe&65535,oe=(re&65535)+(on&65535),ne=(re>>>16)+(on>>>16)+(oe>>>16),ie=(fe&65535)+(en&65535)+(ne>>>16),ze=(fe>>>16)+(en>>>16)+(ie>>>16),this.h1h=ze<<16|ie&65535,this.h1l=ne<<16|oe&65535,oe=(ee&65535)+(vn&65535),ne=(ee>>>16)+(vn>>>16)+(oe>>>16),ie=(Le&65535)+(Ot&65535)+(ne>>>16),ze=(Le>>>16)+(Ot>>>16)+(ie>>>16),this.h2h=ze<<16|ie&65535,this.h2l=ne<<16|oe&65535,oe=(j&65535)+(yn&65535),ne=(j>>>16)+(yn>>>16)+(oe>>>16),ie=(Te&65535)+(In&65535)+(ne>>>16),ze=(Te>>>16)+(In>>>16)+(ie>>>16),this.h3h=ze<<16|ie&65535,this.h3l=ne<<16|oe&65535,oe=(ce&65535)+(fn&65535),ne=(ce>>>16)+(fn>>>16)+(oe>>>16),ie=(Re&65535)+(dn&65535)+(ne>>>16),ze=(Re>>>16)+(dn>>>16)+(ie>>>16),this.h4h=ze<<16|ie&65535,this.h4l=ne<<16|oe&65535,oe=(Ke&65535)+(On&65535),ne=(Ke>>>16)+(On>>>16)+(oe>>>16),ie=(xe&65535)+(En&65535)+(ne>>>16),ze=(xe>>>16)+(En>>>16)+(ie>>>16),this.h5h=ze<<16|ie&65535,this.h5l=ne<<16|oe&65535,oe=(je&65535)+(Dn&65535),ne=(je>>>16)+(Dn>>>16)+(oe>>>16),ie=(lt&65535)+(Mn&65535)+(ne>>>16),ze=(lt>>>16)+(Mn>>>16)+(ie>>>16),this.h6h=ze<<16|ie&65535,this.h6l=ne<<16|oe&65535,oe=(Ce&65535)+(Ln&65535),ne=(Ce>>>16)+(Ln>>>16)+(oe>>>16),ie=(Se&65535)+(xn&65535)+(ne>>>16),ze=(Se>>>16)+(xn>>>16)+(ie>>>16),this.h7h=ze<<16|ie&65535,this.h7l=ne<<16|oe&65535},ge.prototype.hex=function(){this.finalize();var R=this.h0h,X=this.h0l,fe=this.h1h,re=this.h1l,Le=this.h2h,ee=this.h2l,Te=this.h3h,j=this.h3l,Re=this.h4h,ce=this.h4l,xe=this.h5h,Ke=this.h5l,lt=this.h6h,je=this.h6l,Se=this.h7h,Ce=this.h7l,nt=this.bits,we=_[R>>>28&15]+_[R>>>24&15]+_[R>>>20&15]+_[R>>>16&15]+_[R>>>12&15]+_[R>>>8&15]+_[R>>>4&15]+_[R&15]+_[X>>>28&15]+_[X>>>24&15]+_[X>>>20&15]+_[X>>>16&15]+_[X>>>12&15]+_[X>>>8&15]+_[X>>>4&15]+_[X&15]+_[fe>>>28&15]+_[fe>>>24&15]+_[fe>>>20&15]+_[fe>>>16&15]+_[fe>>>12&15]+_[fe>>>8&15]+_[fe>>>4&15]+_[fe&15]+_[re>>>28&15]+_[re>>>24&15]+_[re>>>20&15]+_[re>>>16&15]+_[re>>>12&15]+_[re>>>8&15]+_[re>>>4&15]+_[re&15]+_[Le>>>28&15]+_[Le>>>24&15]+_[Le>>>20&15]+_[Le>>>16&15]+_[Le>>>12&15]+_[Le>>>8&15]+_[Le>>>4&15]+_[Le&15]+_[ee>>>28&15]+_[ee>>>24&15]+_[ee>>>20&15]+_[ee>>>16&15]+_[ee>>>12&15]+_[ee>>>8&15]+_[ee>>>4&15]+_[ee&15]+_[Te>>>28&15]+_[Te>>>24&15]+_[Te>>>20&15]+_[Te>>>16&15]+_[Te>>>12&15]+_[Te>>>8&15]+_[Te>>>4&15]+_[Te&15];return nt>=256&&(we+=_[j>>>28&15]+_[j>>>24&15]+_[j>>>20&15]+_[j>>>16&15]+_[j>>>12&15]+_[j>>>8&15]+_[j>>>4&15]+_[j&15]),nt>=384&&(we+=_[Re>>>28&15]+_[Re>>>24&15]+_[Re>>>20&15]+_[Re>>>16&15]+_[Re>>>12&15]+_[Re>>>8&15]+_[Re>>>4&15]+_[Re&15]+_[ce>>>28&15]+_[ce>>>24&15]+_[ce>>>20&15]+_[ce>>>16&15]+_[ce>>>12&15]+_[ce>>>8&15]+_[ce>>>4&15]+_[ce&15]+_[xe>>>28&15]+_[xe>>>24&15]+_[xe>>>20&15]+_[xe>>>16&15]+_[xe>>>12&15]+_[xe>>>8&15]+_[xe>>>4&15]+_[xe&15]+_[Ke>>>28&15]+_[Ke>>>24&15]+_[Ke>>>20&15]+_[Ke>>>16&15]+_[Ke>>>12&15]+_[Ke>>>8&15]+_[Ke>>>4&15]+_[Ke&15]),nt==512&&(we+=_[lt>>>28&15]+_[lt>>>24&15]+_[lt>>>20&15]+_[lt>>>16&15]+_[lt>>>12&15]+_[lt>>>8&15]+_[lt>>>4&15]+_[lt&15]+_[je>>>28&15]+_[je>>>24&15]+_[je>>>20&15]+_[je>>>16&15]+_[je>>>12&15]+_[je>>>8&15]+_[je>>>4&15]+_[je&15]+_[Se>>>28&15]+_[Se>>>24&15]+_[Se>>>20&15]+_[Se>>>16&15]+_[Se>>>12&15]+_[Se>>>8&15]+_[Se>>>4&15]+_[Se&15]+_[Ce>>>28&15]+_[Ce>>>24&15]+_[Ce>>>20&15]+_[Ce>>>16&15]+_[Ce>>>12&15]+_[Ce>>>8&15]+_[Ce>>>4&15]+_[Ce&15]),we},ge.prototype.toString=ge.prototype.hex,ge.prototype.digest=function(){this.finalize();var R=this.h0h,X=this.h0l,fe=this.h1h,re=this.h1l,Le=this.h2h,ee=this.h2l,Te=this.h3h,j=this.h3l,Re=this.h4h,ce=this.h4l,xe=this.h5h,Ke=this.h5l,lt=this.h6h,je=this.h6l,Se=this.h7h,Ce=this.h7l,nt=this.bits,we=[R>>>24&255,R>>>16&255,R>>>8&255,R&255,X>>>24&255,X>>>16&255,X>>>8&255,X&255,fe>>>24&255,fe>>>16&255,fe>>>8&255,fe&255,re>>>24&255,re>>>16&255,re>>>8&255,re&255,Le>>>24&255,Le>>>16&255,Le>>>8&255,Le&255,ee>>>24&255,ee>>>16&255,ee>>>8&255,ee&255,Te>>>24&255,Te>>>16&255,Te>>>8&255,Te&255];return nt>=256&&we.push(j>>>24&255,j>>>16&255,j>>>8&255,j&255),nt>=384&&we.push(Re>>>24&255,Re>>>16&255,Re>>>8&255,Re&255,ce>>>24&255,ce>>>16&255,ce>>>8&255,ce&255,xe>>>24&255,xe>>>16&255,xe>>>8&255,xe&255,Ke>>>24&255,Ke>>>16&255,Ke>>>8&255,Ke&255),nt==512&&we.push(lt>>>24&255,lt>>>16&255,lt>>>8&255,lt&255,je>>>24&255,je>>>16&255,je>>>8&255,je&255,Se>>>24&255,Se>>>16&255,Se>>>8&255,Se&255,Ce>>>24&255,Ce>>>16&255,Ce>>>8&255,Ce&255),we},ge.prototype.array=ge.prototype.digest,ge.prototype.arrayBuffer=function(){this.finalize();var R=this.bits,X=new ArrayBuffer(R/8),fe=new DataView(X);return fe.setUint32(0,this.h0h),fe.setUint32(4,this.h0l),fe.setUint32(8,this.h1h),fe.setUint32(12,this.h1l),fe.setUint32(16,this.h2h),fe.setUint32(20,this.h2l),fe.setUint32(24,this.h3h),R>=256&&fe.setUint32(28,this.h3l),R>=384&&(fe.setUint32(32,this.h4h),fe.setUint32(36,this.h4l),fe.setUint32(40,this.h5h),fe.setUint32(44,this.h5l)),R==512&&(fe.setUint32(48,this.h6h),fe.setUint32(52,this.h6l),fe.setUint32(56,this.h7h),fe.setUint32(60,this.h7l)),X},ge.prototype.clone=function(){var R=new ge(this.bits,!1);return this.copyTo(R),R},ge.prototype.copyTo=function(R){var X=0,fe=["h0h","h0l","h1h","h1l","h2h","h2l","h3h","h3l","h4h","h4l","h5h","h5l","h6h","h6l","h7h","h7l","start","bytes","hBytes","finalized","hashed","lastByteIndex"];for(X=0;X<fe.length;++X)R[fe[X]]=this[fe[X]];for(X=0;X<this.blocks.length;++X)R.blocks[X]=this.blocks[X]};function rt(R,X,fe){var re,Le=de(R);if(R=Le[0],Le[1]){for(var ee=[],Te=R.length,j=0,Re,re=0;re<Te;++re)Re=R.charCodeAt(re),Re<128?ee[j++]=Re:Re<2048?(ee[j++]=192|Re>>>6,ee[j++]=128|Re&63):Re<55296||Re>=57344?(ee[j++]=224|Re>>>12,ee[j++]=128|Re>>>6&63,ee[j++]=128|Re&63):(Re=65536+((Re&1023)<<10|R.charCodeAt(++re)&1023),ee[j++]=240|Re>>>18,ee[j++]=128|Re>>>12&63,ee[j++]=128|Re>>>6&63,ee[j++]=128|Re&63);R=ee}R.length>128&&(R=new ge(X,!0).update(R).array());for(var ce=[],xe=[],re=0;re<128;++re){var Ke=R[re]||0;ce[re]=92^Ke,xe[re]=54^Ke}ge.call(this,X,fe),this.update(xe),this.oKeyPad=ce,this.inner=!0,this.sharedMemory=fe}rt.prototype=new ge,rt.prototype.finalize=function(){if(ge.prototype.finalize.call(this),this.inner){this.inner=!1;var R=this.array();ge.call(this,this.bits,this.sharedMemory),this.update(this.oKeyPad),this.update(R),ge.prototype.finalize.call(this)}},rt.prototype.clone=function(){var R=new rt([],this.bits,!1);this.copyTo(R),R.inner=this.inner;for(var X=0;X<this.oKeyPad.length;++X)R.oKeyPad[X]=this.oKeyPad[X];return R};var At=Ve(512);At.sha512=At,At.sha384=Ve(384),At.sha512_256=Ve(256),At.sha512_224=Ve(224),At.sha512.hmac=ke(512),At.sha384.hmac=ke(384),At.sha512_256.hmac=ke(256),At.sha512_224.hmac=ke(224),d?cd.exports=At:(o.sha512=At.sha512,o.sha384=At.sha384,o.sha512_256=At.sha512_256,o.sha512_224=At.sha512_224,m&&define(function(){return At}))})()});var yd=A((vd,fS)=>{"use strict";(function(e,t){typeof vd=="object"&&typeof fS<"u"?t(vd):typeof define=="function"&&define.amd?define(["exports"],t):(e=typeof globalThis<"u"?globalThis:e||self,t(e.leaflet={}))})(vd,function(e){"use strict";var t="1.9.4";function i(n){var a,c,f,g;for(c=1,f=arguments.length;c<f;c++){g=arguments[c];for(a in g)n[a]=g[a]}return n}var o=Object.create||function(){function n(){}return function(a){return n.prototype=a,new n}}();function s(n,a){var c=Array.prototype.slice;if(n.bind)return n.bind.apply(n,c.call(arguments,1));var f=c.call(arguments,2);return function(){return n.apply(a,f.length?f.concat(c.call(arguments)):arguments)}}var u=0;function d(n){return"_leaflet_id"in n||(n._leaflet_id=++u),n._leaflet_id}function m(n,a,c){var f,g,x,T;return T=function(){f=!1,g&&(x.apply(c,g),g=!1)},x=function(){f?g=arguments:(n.apply(c,arguments),setTimeout(T,a),f=!0)},x}function v(n,a,c){var f=a[1],g=a[0],x=f-g;return n===f&&c?n:((n-g)%x+x)%x+g}function _(){return!1}function z(n,a){if(a===!1)return n;var c=Math.pow(10,a===void 0?6:a);return Math.round(n*c)/c}function F(n){return n.trim?n.trim():n.replace(/^\s+|\s+$/g,"")}function N(n){return F(n).split(/\s+/)}function H(n,a){Object.prototype.hasOwnProperty.call(n,"options")||(n.options=n.options?o(n.options):{});for(var c in a)n.options[c]=a[c];return n.options}function k(n,a,c){var f=[];for(var g in n)f.push(encodeURIComponent(c?g.toUpperCase():g)+"="+encodeURIComponent(n[g]));return(!a||a.indexOf("?")===-1?"?":"&")+f.join("&")}var ae=/\{ *([\w_ -]+) *\}/g;function te(n,a){return n.replace(ae,function(c,f){var g=a[f];if(g===void 0)throw new Error("No value provided for variable "+c);return typeof g=="function"&&(g=g(a)),g})}var de=Array.isArray||function(n){return Object.prototype.toString.call(n)==="[object Array]"};function ht(n,a){for(var c=0;c<n.length;c++)if(n[c]===a)return c;return-1}var Ve="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function Ct(n){return window["webkit"+n]||window["moz"+n]||window["ms"+n]}var ke=0;function ge(n){var a=+new Date,c=Math.max(0,16-(a-ke));return ke=a+c,window.setTimeout(n,c)}var rt=window.requestAnimationFrame||Ct("RequestAnimationFrame")||ge,At=window.cancelAnimationFrame||Ct("CancelAnimationFrame")||Ct("CancelRequestAnimationFrame")||function(n){window.clearTimeout(n)};function R(n,a,c){if(c&&rt===ge)n.call(a);else return rt.call(window,s(n,a))}function X(n){n&&At.call(window,n)}var fe={__proto__:null,extend:i,create:o,bind:s,get lastId(){return u},stamp:d,throttle:m,wrapNum:v,falseFn:_,formatNum:z,trim:F,splitWords:N,setOptions:H,getParamString:k,template:te,isArray:de,indexOf:ht,emptyImageUrl:Ve,requestFn:rt,cancelFn:At,requestAnimFrame:R,cancelAnimFrame:X};function re(){}re.extend=function(n){var a=function(){H(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},c=a.__super__=this.prototype,f=o(c);f.constructor=a,a.prototype=f;for(var g in this)Object.prototype.hasOwnProperty.call(this,g)&&g!=="prototype"&&g!=="__super__"&&(a[g]=this[g]);return n.statics&&i(a,n.statics),n.includes&&(Le(n.includes),i.apply(null,[f].concat(n.includes))),i(f,n),delete f.statics,delete f.includes,f.options&&(f.options=c.options?o(c.options):{},i(f.options,n.options)),f._initHooks=[],f.callInitHooks=function(){if(!this._initHooksCalled){c.callInitHooks&&c.callInitHooks.call(this),this._initHooksCalled=!0;for(var x=0,T=f._initHooks.length;x<T;x++)f._initHooks[x].call(this)}},a},re.include=function(n){var a=this.prototype.options;return i(this.prototype,n),n.options&&(this.prototype.options=a,this.mergeOptions(n.options)),this},re.mergeOptions=function(n){return i(this.prototype.options,n),this},re.addInitHook=function(n){var a=Array.prototype.slice.call(arguments,1),c=typeof n=="function"?n:function(){this[n].apply(this,a)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(c),this};function Le(n){if(!(typeof L>"u"||!L||!L.Mixin)){n=de(n)?n:[n];for(var a=0;a<n.length;a++)n[a]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var ee={on:function(n,a,c){if(typeof n=="object")for(var f in n)this._on(f,n[f],a);else{n=N(n);for(var g=0,x=n.length;g<x;g++)this._on(n[g],a,c)}return this},off:function(n,a,c){if(!arguments.length)delete this._events;else if(typeof n=="object")for(var f in n)this._off(f,n[f],a);else{n=N(n);for(var g=arguments.length===1,x=0,T=n.length;x<T;x++)g?this._off(n[x]):this._off(n[x],a,c)}return this},_on:function(n,a,c,f){if(typeof a!="function"){console.warn("wrong listener type: "+typeof a);return}if(this._listens(n,a,c)===!1){c===this&&(c=void 0);var g={fn:a,ctx:c};f&&(g.once=!0),this._events=this._events||{},this._events[n]=this._events[n]||[],this._events[n].push(g)}},_off:function(n,a,c){var f,g,x;if(this._events&&(f=this._events[n],!!f)){if(arguments.length===1){if(this._firingCount)for(g=0,x=f.length;g<x;g++)f[g].fn=_;delete this._events[n];return}if(typeof a!="function"){console.warn("wrong listener type: "+typeof a);return}var T=this._listens(n,a,c);if(T!==!1){var D=f[T];this._firingCount&&(D.fn=_,this._events[n]=f=f.slice()),f.splice(T,1)}}},fire:function(n,a,c){if(!this.listens(n,c))return this;var f=i({},a,{type:n,target:this,sourceTarget:a&&a.sourceTarget||this});if(this._events){var g=this._events[n];if(g){this._firingCount=this._firingCount+1||1;for(var x=0,T=g.length;x<T;x++){var D=g[x],$=D.fn;D.once&&this.off(n,$,D.ctx),$.call(D.ctx||this,f)}this._firingCount--}}return c&&this._propagateEvent(f),this},listens:function(n,a,c,f){typeof n!="string"&&console.warn('"string" type argument expected');var g=a;typeof a!="function"&&(f=!!a,g=void 0,c=void 0);var x=this._events&&this._events[n];if(x&&x.length&&this._listens(n,g,c)!==!1)return!0;if(f){for(var T in this._eventParents)if(this._eventParents[T].listens(n,a,c,f))return!0}return!1},_listens:function(n,a,c){if(!this._events)return!1;var f=this._events[n]||[];if(!a)return!!f.length;c===this&&(c=void 0);for(var g=0,x=f.length;g<x;g++)if(f[g].fn===a&&f[g].ctx===c)return g;return!1},once:function(n,a,c){if(typeof n=="object")for(var f in n)this._on(f,n[f],a,!0);else{n=N(n);for(var g=0,x=n.length;g<x;g++)this._on(n[g],a,c,!0)}return this},addEventParent:function(n){return this._eventParents=this._eventParents||{},this._eventParents[d(n)]=n,this},removeEventParent:function(n){return this._eventParents&&delete this._eventParents[d(n)],this},_propagateEvent:function(n){for(var a in this._eventParents)this._eventParents[a].fire(n.type,i({layer:n.target,propagatedFrom:n.target},n),!0)}};ee.addEventListener=ee.on,ee.removeEventListener=ee.clearAllEventListeners=ee.off,ee.addOneTimeEventListener=ee.once,ee.fireEvent=ee.fire,ee.hasEventListeners=ee.listens;var Te=re.extend(ee);function j(n,a,c){this.x=c?Math.round(n):n,this.y=c?Math.round(a):a}var Re=Math.trunc||function(n){return n>0?Math.floor(n):Math.ceil(n)};j.prototype={clone:function(){return new j(this.x,this.y)},add:function(n){return this.clone()._add(ce(n))},_add:function(n){return this.x+=n.x,this.y+=n.y,this},subtract:function(n){return this.clone()._subtract(ce(n))},_subtract:function(n){return this.x-=n.x,this.y-=n.y,this},divideBy:function(n){return this.clone()._divideBy(n)},_divideBy:function(n){return this.x/=n,this.y/=n,this},multiplyBy:function(n){return this.clone()._multiplyBy(n)},_multiplyBy:function(n){return this.x*=n,this.y*=n,this},scaleBy:function(n){return new j(this.x*n.x,this.y*n.y)},unscaleBy:function(n){return new j(this.x/n.x,this.y/n.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=Re(this.x),this.y=Re(this.y),this},distanceTo:function(n){n=ce(n);var a=n.x-this.x,c=n.y-this.y;return Math.sqrt(a*a+c*c)},equals:function(n){return n=ce(n),n.x===this.x&&n.y===this.y},contains:function(n){return n=ce(n),Math.abs(n.x)<=Math.abs(this.x)&&Math.abs(n.y)<=Math.abs(this.y)},toString:function(){return"Point("+z(this.x)+", "+z(this.y)+")"}};function ce(n,a,c){return n instanceof j?n:de(n)?new j(n[0],n[1]):n==null?n:typeof n=="object"&&"x"in n&&"y"in n?new j(n.x,n.y):new j(n,a,c)}function xe(n,a){if(n)for(var c=a?[n,a]:n,f=0,g=c.length;f<g;f++)this.extend(c[f])}xe.prototype={extend:function(n){var a,c;if(!n)return this;if(n instanceof j||typeof n[0]=="number"||"x"in n)a=c=ce(n);else if(n=Ke(n),a=n.min,c=n.max,!a||!c)return this;return!this.min&&!this.max?(this.min=a.clone(),this.max=c.clone()):(this.min.x=Math.min(a.x,this.min.x),this.max.x=Math.max(c.x,this.max.x),this.min.y=Math.min(a.y,this.min.y),this.max.y=Math.max(c.y,this.max.y)),this},getCenter:function(n){return ce((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,n)},getBottomLeft:function(){return ce(this.min.x,this.max.y)},getTopRight:function(){return ce(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(n){var a,c;return typeof n[0]=="number"||n instanceof j?n=ce(n):n=Ke(n),n instanceof xe?(a=n.min,c=n.max):a=c=n,a.x>=this.min.x&&c.x<=this.max.x&&a.y>=this.min.y&&c.y<=this.max.y},intersects:function(n){n=Ke(n);var a=this.min,c=this.max,f=n.min,g=n.max,x=g.x>=a.x&&f.x<=c.x,T=g.y>=a.y&&f.y<=c.y;return x&&T},overlaps:function(n){n=Ke(n);var a=this.min,c=this.max,f=n.min,g=n.max,x=g.x>a.x&&f.x<c.x,T=g.y>a.y&&f.y<c.y;return x&&T},isValid:function(){return!!(this.min&&this.max)},pad:function(n){var a=this.min,c=this.max,f=Math.abs(a.x-c.x)*n,g=Math.abs(a.y-c.y)*n;return Ke(ce(a.x-f,a.y-g),ce(c.x+f,c.y+g))},equals:function(n){return n?(n=Ke(n),this.min.equals(n.getTopLeft())&&this.max.equals(n.getBottomRight())):!1}};function Ke(n,a){return!n||n instanceof xe?n:new xe(n,a)}function lt(n,a){if(n)for(var c=a?[n,a]:n,f=0,g=c.length;f<g;f++)this.extend(c[f])}lt.prototype={extend:function(n){var a=this._southWest,c=this._northEast,f,g;if(n instanceof Se)f=n,g=n;else if(n instanceof lt){if(f=n._southWest,g=n._northEast,!f||!g)return this}else return n?this.extend(Ce(n)||je(n)):this;return!a&&!c?(this._southWest=new Se(f.lat,f.lng),this._northEast=new Se(g.lat,g.lng)):(a.lat=Math.min(f.lat,a.lat),a.lng=Math.min(f.lng,a.lng),c.lat=Math.max(g.lat,c.lat),c.lng=Math.max(g.lng,c.lng)),this},pad:function(n){var a=this._southWest,c=this._northEast,f=Math.abs(a.lat-c.lat)*n,g=Math.abs(a.lng-c.lng)*n;return new lt(new Se(a.lat-f,a.lng-g),new Se(c.lat+f,c.lng+g))},getCenter:function(){return new Se((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new Se(this.getNorth(),this.getWest())},getSouthEast:function(){return new Se(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(n){typeof n[0]=="number"||n instanceof Se||"lat"in n?n=Ce(n):n=je(n);var a=this._southWest,c=this._northEast,f,g;return n instanceof lt?(f=n.getSouthWest(),g=n.getNorthEast()):f=g=n,f.lat>=a.lat&&g.lat<=c.lat&&f.lng>=a.lng&&g.lng<=c.lng},intersects:function(n){n=je(n);var a=this._southWest,c=this._northEast,f=n.getSouthWest(),g=n.getNorthEast(),x=g.lat>=a.lat&&f.lat<=c.lat,T=g.lng>=a.lng&&f.lng<=c.lng;return x&&T},overlaps:function(n){n=je(n);var a=this._southWest,c=this._northEast,f=n.getSouthWest(),g=n.getNorthEast(),x=g.lat>a.lat&&f.lat<c.lat,T=g.lng>a.lng&&f.lng<c.lng;return x&&T},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(n,a){return n?(n=je(n),this._southWest.equals(n.getSouthWest(),a)&&this._northEast.equals(n.getNorthEast(),a)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function je(n,a){return n instanceof lt?n:new lt(n,a)}function Se(n,a,c){if(isNaN(n)||isNaN(a))throw new Error("Invalid LatLng object: ("+n+", "+a+")");this.lat=+n,this.lng=+a,c!==void 0&&(this.alt=+c)}Se.prototype={equals:function(n,a){if(!n)return!1;n=Ce(n);var c=Math.max(Math.abs(this.lat-n.lat),Math.abs(this.lng-n.lng));return c<=(a===void 0?1e-9:a)},toString:function(n){return"LatLng("+z(this.lat,n)+", "+z(this.lng,n)+")"},distanceTo:function(n){return we.distance(this,Ce(n))},wrap:function(){return we.wrapLatLng(this)},toBounds:function(n){var a=180*n/40075017,c=a/Math.cos(Math.PI/180*this.lat);return je([this.lat-a,this.lng-c],[this.lat+a,this.lng+c])},clone:function(){return new Se(this.lat,this.lng,this.alt)}};function Ce(n,a,c){return n instanceof Se?n:de(n)&&typeof n[0]!="object"?n.length===3?new Se(n[0],n[1],n[2]):n.length===2?new Se(n[0],n[1]):null:n==null?n:typeof n=="object"&&"lat"in n?new Se(n.lat,"lng"in n?n.lng:n.lon,n.alt):a===void 0?null:new Se(n,a,c)}var nt={latLngToPoint:function(n,a){var c=this.projection.project(n),f=this.scale(a);return this.transformation._transform(c,f)},pointToLatLng:function(n,a){var c=this.scale(a),f=this.transformation.untransform(n,c);return this.projection.unproject(f)},project:function(n){return this.projection.project(n)},unproject:function(n){return this.projection.unproject(n)},scale:function(n){return 256*Math.pow(2,n)},zoom:function(n){return Math.log(n/256)/Math.LN2},getProjectedBounds:function(n){if(this.infinite)return null;var a=this.projection.bounds,c=this.scale(n),f=this.transformation.transform(a.min,c),g=this.transformation.transform(a.max,c);return new xe(f,g)},infinite:!1,wrapLatLng:function(n){var a=this.wrapLng?v(n.lng,this.wrapLng,!0):n.lng,c=this.wrapLat?v(n.lat,this.wrapLat,!0):n.lat,f=n.alt;return new Se(c,a,f)},wrapLatLngBounds:function(n){var a=n.getCenter(),c=this.wrapLatLng(a),f=a.lat-c.lat,g=a.lng-c.lng;if(f===0&&g===0)return n;var x=n.getSouthWest(),T=n.getNorthEast(),D=new Se(x.lat-f,x.lng-g),$=new Se(T.lat-f,T.lng-g);return new lt(D,$)}},we=i({},nt,{wrapLng:[-180,180],R:6371e3,distance:function(n,a){var c=Math.PI/180,f=n.lat*c,g=a.lat*c,x=Math.sin((a.lat-n.lat)*c/2),T=Math.sin((a.lng-n.lng)*c/2),D=x*x+Math.cos(f)*Math.cos(g)*T*T,$=2*Math.atan2(Math.sqrt(D),Math.sqrt(1-D));return this.R*$}}),Ht=6378137,hn={R:Ht,MAX_LATITUDE:85.0511287798,project:function(n){var a=Math.PI/180,c=this.MAX_LATITUDE,f=Math.max(Math.min(c,n.lat),-c),g=Math.sin(f*a);return new j(this.R*n.lng*a,this.R*Math.log((1+g)/(1-g))/2)},unproject:function(n){var a=180/Math.PI;return new Se((2*Math.atan(Math.exp(n.y/this.R))-Math.PI/2)*a,n.x*a/this.R)},bounds:function(){var n=Ht*Math.PI;return new xe([-n,-n],[n,n])}()};function Wt(n,a,c,f){if(de(n)){this._a=n[0],this._b=n[1],this._c=n[2],this._d=n[3];return}this._a=n,this._b=a,this._c=c,this._d=f}Wt.prototype={transform:function(n,a){return this._transform(n.clone(),a)},_transform:function(n,a){return a=a||1,n.x=a*(this._a*n.x+this._b),n.y=a*(this._c*n.y+this._d),n},untransform:function(n,a){return a=a||1,new j((n.x/a-this._b)/this._a,(n.y/a-this._d)/this._c)}};function Et(n,a,c,f){return new Wt(n,a,c,f)}var oe=i({},we,{code:"EPSG:3857",projection:hn,transformation:function(){var n=.5/(Math.PI*hn.R);return Et(n,.5,-n,.5)}()}),ne=i({},oe,{code:"EPSG:900913"});function ie(n){return document.createElementNS("http://www.w3.org/2000/svg",n)}function ze(n,a){var c="",f,g,x,T,D,$;for(f=0,x=n.length;f<x;f++){for(D=n[f],g=0,T=D.length;g<T;g++)$=D[g],c+=(g?"L":"M")+$.x+" "+$.y;c+=a?ye.svg?"z":"x":""}return c||"M0 0"}var Vn=document.documentElement.style,nr="ActiveXObject"in window,rs=nr&&!document.addEventListener,ki="msLaunchUri"in navigator&&!("documentMode"in document),An=Zi("webkit"),qi=Zi("android"),$i=Zi("android 2")||Zi("android 3"),yo=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),_n=qi&&Zi("Google")&&yo<537&&!("AudioNode"in window),$n=!!window.opera,ve=!ki&&Zi("chrome"),be=Zi("gecko")&&!An&&!$n&&!nr,xt=!ve&&Zi("safari"),mt=Zi("phantom"),Pn="OTransition"in Vn,Zn=navigator.platform.indexOf("Win")===0,rn=nr&&"transition"in Vn,Xt="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!$i,en="MozPerspective"in Vn,on=!window.L_DISABLE_3D&&(rn||Xt||en)&&!Pn&&!mt,Ot=typeof orientation<"u"||Zi("mobile"),vn=Ot&&An,In=Ot&&Xt,yn=!window.PointerEvent&&window.MSPointerEvent,dn=!!(window.PointerEvent||yn),fn="ontouchstart"in window||!!window.TouchEvent,En=!window.L_NO_TOUCH&&(fn||dn),On=Ot&&$n,Mn=Ot&&be,Dn=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,xn=function(){var n=!1;try{var a=Object.defineProperty({},"passive",{get:function(){n=!0}});window.addEventListener("testPassiveEventSupport",_,a),window.removeEventListener("testPassiveEventSupport",_,a)}catch{}return n}(),Ln=function(){return!!document.createElement("canvas").getContext}(),gl=!!(document.createElementNS&&ie("svg").createSVGRect),Nd=!!gl&&function(){var n=document.createElement("div");return n.innerHTML="<svg/>",(n.firstChild&&n.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"}(),_l=!gl&&function(){try{var n=document.createElement("div");n.innerHTML='<v:shape adj="1"/>';var a=n.firstChild;return a.style.behavior="url(#default#VML)",a&&typeof a.adj=="object"}catch{return!1}}(),Rd=navigator.platform.indexOf("Mac")===0,vl=navigator.platform.indexOf("Linux")===0;function Zi(n){return navigator.userAgent.toLowerCase().indexOf(n)>=0}var ye={ie:nr,ielt9:rs,edge:ki,webkit:An,android:qi,android23:$i,androidStock:_n,opera:$n,chrome:ve,gecko:be,safari:xt,phantom:mt,opera12:Pn,win:Zn,ie3d:rn,webkit3d:Xt,gecko3d:en,any3d:on,mobile:Ot,mobileWebkit:vn,mobileWebkit3d:In,msPointer:yn,pointer:dn,touch:En,touchNative:fn,mobileOpera:On,mobileGecko:Mn,retina:Dn,passiveEvents:xn,canvas:Ln,svg:gl,vml:_l,inlineSvg:Nd,mac:Rd,linux:vl},qu=ye.msPointer?"MSPointerDown":"pointerdown",$u=ye.msPointer?"MSPointerMove":"pointermove",Zu=ye.msPointer?"MSPointerUp":"pointerup",ju=ye.msPointer?"MSPointerCancel":"pointercancel",yl={touchstart:qu,touchmove:$u,touchend:Zu,touchcancel:ju},Uu={touchstart:ea,touchmove:Xs,touchend:Xs,touchcancel:Xs},Gr={},Hu=!1;function Bd(n,a,c){return a==="touchstart"&&Qs(),Uu[a]?(c=Uu[a].bind(this,c),n.addEventListener(yl[a],c,!1),c):(console.warn("wrong event specified:",a),_)}function kd(n,a,c){if(!yl[a]){console.warn("wrong event specified:",a);return}n.removeEventListener(yl[a],c,!1)}function qd(n){Gr[n.pointerId]=n}function $d(n){Gr[n.pointerId]&&(Gr[n.pointerId]=n)}function Wu(n){delete Gr[n.pointerId]}function Qs(){Hu||(document.addEventListener(qu,qd,!0),document.addEventListener($u,$d,!0),document.addEventListener(Zu,Wu,!0),document.addEventListener(ju,Wu,!0),Hu=!0)}function Xs(n,a){if(a.pointerType!==(a.MSPOINTER_TYPE_MOUSE||"mouse")){a.touches=[];for(var c in Gr)a.touches.push(Gr[c]);a.changedTouches=[a],n(a)}}function ea(n,a){a.MSPOINTER_TYPE_TOUCH&&a.pointerType===a.MSPOINTER_TYPE_TOUCH&&$e(a),Xs(n,a)}function Zd(n){var a={},c,f;for(f in n)c=n[f],a[f]=c&&c.bind?c.bind(n):c;return n=a,a.type="dblclick",a.detail=2,a.isTrusted=!1,a._simulated=!0,a}var jd=200;function Ud(n,a){n.addEventListener("dblclick",a);var c=0,f;function g(x){if(x.detail!==1){f=x.detail;return}if(!(x.pointerType==="mouse"||x.sourceCapabilities&&!x.sourceCapabilities.firesTouchEvents)){var T=ec(x);if(!(T.some(function($){return $ instanceof HTMLLabelElement&&$.attributes.for})&&!T.some(function($){return $ instanceof HTMLInputElement||$ instanceof HTMLSelectElement}))){var D=Date.now();D-c<=jd?(f++,f===2&&a(Zd(x))):f=1,c=D}}}return n.addEventListener("click",g),{dblclick:a,simDblclick:g}}function Vu(n,a){n.removeEventListener("dblclick",a.dblclick),n.removeEventListener("click",a.simDblclick)}var ta=Co(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),xo=Co(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),Gu=xo==="webkitTransition"||xo==="OTransition"?xo+"End":"transitionend";function Ku(n){return typeof n=="string"?document.getElementById(n):n}function os(n,a){var c=n.style[a]||n.currentStyle&&n.currentStyle[a];if((!c||c==="auto")&&document.defaultView){var f=document.defaultView.getComputedStyle(n,null);c=f?f[a]:null}return c==="auto"?null:c}function gt(n,a,c){var f=document.createElement(n);return f.className=a||"",c&&c.appendChild(f),f}function Mt(n){var a=n.parentNode;a&&a.removeChild(n)}function ss(n){for(;n.firstChild;)n.removeChild(n.firstChild)}function Kr(n){var a=n.parentNode;a&&a.lastChild!==n&&a.appendChild(n)}function mr(n){var a=n.parentNode;a&&a.firstChild!==n&&a.insertBefore(n,a.firstChild)}function xl(n,a){if(n.classList!==void 0)return n.classList.contains(a);var c=ia(n);return c.length>0&&new RegExp("(^|\\s)"+a+"(\\s|$)").test(c)}function qe(n,a){if(n.classList!==void 0)for(var c=N(a),f=0,g=c.length;f<g;f++)n.classList.add(c[f]);else if(!xl(n,a)){var x=ia(n);na(n,(x?x+" ":"")+a)}}function Dt(n,a){n.classList!==void 0?n.classList.remove(a):na(n,F((" "+ia(n)+" ").replace(" "+a+" "," ")))}function na(n,a){n.className.baseVal===void 0?n.className=a:n.className.baseVal=a}function ia(n){return n.correspondingElement&&(n=n.correspondingElement),n.className.baseVal===void 0?n.className:n.className.baseVal}function ai(n,a){"opacity"in n.style?n.style.opacity=a:"filter"in n.style&&Yu(n,a)}function Yu(n,a){var c=!1,f="DXImageTransform.Microsoft.Alpha";try{c=n.filters.item(f)}catch{if(a===1)return}a=Math.round(a*100),c?(c.Enabled=a!==100,c.Opacity=a):n.style.filter+=" progid:"+f+"(opacity="+a+")"}function Co(n){for(var a=document.documentElement.style,c=0;c<n.length;c++)if(n[c]in a)return n[c];return!1}function Yr(n,a,c){var f=a||new j(0,0);n.style[ta]=(ye.ie3d?"translate("+f.x+"px,"+f.y+"px)":"translate3d("+f.x+"px,"+f.y+"px,0)")+(c?" scale("+c+")":"")}function tn(n,a){n._leaflet_pos=a,ye.any3d?Yr(n,a):(n.style.left=a.x+"px",n.style.top=a.y+"px")}function ir(n){return n._leaflet_pos||new j(0,0)}var Jr,ji,ra;if("onselectstart"in document)Jr=function(){Be(window,"selectstart",$e)},ji=function(){Pt(window,"selectstart",$e)};else{var wo=Co(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);Jr=function(){if(wo){var n=document.documentElement.style;ra=n[wo],n[wo]="none"}},ji=function(){wo&&(document.documentElement.style[wo]=ra,ra=void 0)}}function Cl(){Be(window,"dragstart",$e)}function oa(){Pt(window,"dragstart",$e)}var as,sa;function aa(n){for(;n.tabIndex===-1;)n=n.parentNode;n.style&&(la(),as=n,sa=n.style.outlineStyle,n.style.outlineStyle="none",Be(window,"keydown",la))}function la(){as&&(as.style.outlineStyle=sa,as=void 0,sa=void 0,Pt(window,"keydown",la))}function Ju(n){do n=n.parentNode;while((!n.offsetWidth||!n.offsetHeight)&&n!==document.body);return n}function wl(n){var a=n.getBoundingClientRect();return{x:a.width/n.offsetWidth||1,y:a.height/n.offsetHeight||1,boundingClientRect:a}}var Qu={__proto__:null,TRANSFORM:ta,TRANSITION:xo,TRANSITION_END:Gu,get:Ku,getStyle:os,create:gt,remove:Mt,empty:ss,toFront:Kr,toBack:mr,hasClass:xl,addClass:qe,removeClass:Dt,setClass:na,getClass:ia,setOpacity:ai,testProp:Co,setTransform:Yr,setPosition:tn,getPosition:ir,get disableTextSelection(){return Jr},get enableTextSelection(){return ji},disableImageDrag:Cl,enableImageDrag:oa,preventOutline:aa,restoreOutline:la,getSizedParentNode:Ju,getScale:wl};function Be(n,a,c,f){if(a&&typeof a=="object")for(var g in a)bl(n,g,a[g],c);else{a=N(a);for(var x=0,T=a.length;x<T;x++)bl(n,a[x],c,f)}return this}var Ui="_leaflet_events";function Pt(n,a,c,f){if(arguments.length===1)Xu(n),delete n[Ui];else if(a&&typeof a=="object")for(var g in a)zl(n,g,a[g],c);else if(a=N(a),arguments.length===2)Xu(n,function(D){return ht(a,D)!==-1});else for(var x=0,T=a.length;x<T;x++)zl(n,a[x],c,f);return this}function Xu(n,a){for(var c in n[Ui]){var f=c.split(/\d/)[0];(!a||a(f))&&zl(n,f,null,null,c)}}var ls={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function bl(n,a,c,f){var g=a+d(c)+(f?"_"+d(f):"");if(n[Ui]&&n[Ui][g])return this;var x=function(D){return c.call(f||n,D||window.event)},T=x;!ye.touchNative&&ye.pointer&&a.indexOf("touch")===0?x=Bd(n,a,x):ye.touch&&a==="dblclick"?x=Ud(n,x):"addEventListener"in n?a==="touchstart"||a==="touchmove"||a==="wheel"||a==="mousewheel"?n.addEventListener(ls[a]||a,x,ye.passiveEvents?{passive:!1}:!1):a==="mouseenter"||a==="mouseleave"?(x=function(D){D=D||window.event,Sl(n,D)&&T(D)},n.addEventListener(ls[a],x,!1)):n.addEventListener(a,T,!1):n.attachEvent("on"+a,x),n[Ui]=n[Ui]||{},n[Ui][g]=x}function zl(n,a,c,f,g){g=g||a+d(c)+(f?"_"+d(f):"");var x=n[Ui]&&n[Ui][g];if(!x)return this;!ye.touchNative&&ye.pointer&&a.indexOf("touch")===0?kd(n,a,x):ye.touch&&a==="dblclick"?Vu(n,x):"removeEventListener"in n?n.removeEventListener(ls[a]||a,x,!1):n.detachEvent("on"+a,x),n[Ui][g]=null}function Qr(n){return n.stopPropagation?n.stopPropagation():n.originalEvent?n.originalEvent._stopped=!0:n.cancelBubble=!0,this}function Fl(n){return bl(n,"wheel",Qr),this}function us(n){return Be(n,"mousedown touchstart dblclick contextmenu",Qr),n._leaflet_disable_click=!0,this}function $e(n){return n.preventDefault?n.preventDefault():n.returnValue=!1,this}function _t(n){return $e(n),Qr(n),this}function ec(n){if(n.composedPath)return n.composedPath();for(var a=[],c=n.target;c;)a.push(c),c=c.parentNode;return a}function tc(n,a){if(!a)return new j(n.clientX,n.clientY);var c=wl(a),f=c.boundingClientRect;return new j((n.clientX-f.left)/c.x-a.clientLeft,(n.clientY-f.top)/c.y-a.clientTop)}var Hd=ye.linux&&ye.chrome?window.devicePixelRatio:ye.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function nc(n){return ye.edge?n.wheelDeltaY/2:n.deltaY&&n.deltaMode===0?-n.deltaY/Hd:n.deltaY&&n.deltaMode===1?-n.deltaY*20:n.deltaY&&n.deltaMode===2?-n.deltaY*60:n.deltaX||n.deltaZ?0:n.wheelDelta?(n.wheelDeltaY||n.wheelDelta)/2:n.detail&&Math.abs(n.detail)<32765?-n.detail*20:n.detail?n.detail/-32765*60:0}function Sl(n,a){var c=a.relatedTarget;if(!c)return!0;try{for(;c&&c!==n;)c=c.parentNode}catch{return!1}return c!==n}var Wd={__proto__:null,on:Be,off:Pt,stopPropagation:Qr,disableScrollPropagation:Fl,disableClickPropagation:us,preventDefault:$e,stop:_t,getPropagationPath:ec,getMousePosition:tc,getWheelDelta:nc,isExternalTarget:Sl,addListener:Be,removeListener:Pt},Tl=Te.extend({run:function(n,a,c,f){this.stop(),this._el=n,this._inProgress=!0,this._duration=c||.25,this._easeOutPower=1/Math.max(f||.5,.2),this._startPos=ir(n),this._offset=a.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=R(this._animate,this),this._step()},_step:function(n){var a=+new Date-this._startTime,c=this._duration*1e3;a<c?this._runFrame(this._easeOut(a/c),n):(this._runFrame(1),this._complete())},_runFrame:function(n,a){var c=this._startPos.add(this._offset.multiplyBy(n));a&&c._round(),tn(this._el,c),this.fire("step")},_complete:function(){X(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(n){return 1-Math.pow(1-n,this._easeOutPower)}}),ut=Te.extend({options:{crs:oe,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(n,a){a=H(this,a),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(n),this._initLayout(),this._onResize=s(this._onResize,this),this._initEvents(),a.maxBounds&&this.setMaxBounds(a.maxBounds),a.zoom!==void 0&&(this._zoom=this._limitZoom(a.zoom)),a.center&&a.zoom!==void 0&&this.setView(Ce(a.center),a.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=xo&&ye.any3d&&!ye.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),Be(this._proxy,Gu,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(n,a,c){if(a=a===void 0?this._zoom:this._limitZoom(a),n=this._limitCenter(Ce(n),a,this.options.maxBounds),c=c||{},this._stop(),this._loaded&&!c.reset&&c!==!0){c.animate!==void 0&&(c.zoom=i({animate:c.animate},c.zoom),c.pan=i({animate:c.animate,duration:c.duration},c.pan));var f=this._zoom!==a?this._tryAnimatedZoom&&this._tryAnimatedZoom(n,a,c.zoom):this._tryAnimatedPan(n,c.pan);if(f)return clearTimeout(this._sizeTimer),this}return this._resetView(n,a,c.pan&&c.pan.noMoveStart),this},setZoom:function(n,a){return this._loaded?this.setView(this.getCenter(),n,{zoom:a}):(this._zoom=n,this)},zoomIn:function(n,a){return n=n||(ye.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+n,a)},zoomOut:function(n,a){return n=n||(ye.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-n,a)},setZoomAround:function(n,a,c){var f=this.getZoomScale(a),g=this.getSize().divideBy(2),x=n instanceof j?n:this.latLngToContainerPoint(n),T=x.subtract(g).multiplyBy(1-1/f),D=this.containerPointToLatLng(g.add(T));return this.setView(D,a,{zoom:c})},_getBoundsCenterZoom:function(n,a){a=a||{},n=n.getBounds?n.getBounds():je(n);var c=ce(a.paddingTopLeft||a.padding||[0,0]),f=ce(a.paddingBottomRight||a.padding||[0,0]),g=this.getBoundsZoom(n,!1,c.add(f));if(g=typeof a.maxZoom=="number"?Math.min(a.maxZoom,g):g,g===1/0)return{center:n.getCenter(),zoom:g};var x=f.subtract(c).divideBy(2),T=this.project(n.getSouthWest(),g),D=this.project(n.getNorthEast(),g),$=this.unproject(T.add(D).divideBy(2).add(x),g);return{center:$,zoom:g}},fitBounds:function(n,a){if(n=je(n),!n.isValid())throw new Error("Bounds are not valid.");var c=this._getBoundsCenterZoom(n,a);return this.setView(c.center,c.zoom,a)},fitWorld:function(n){return this.fitBounds([[-90,-180],[90,180]],n)},panTo:function(n,a){return this.setView(n,this._zoom,{pan:a})},panBy:function(n,a){if(n=ce(n).round(),a=a||{},!n.x&&!n.y)return this.fire("moveend");if(a.animate!==!0&&!this.getSize().contains(n))return this._resetView(this.unproject(this.project(this.getCenter()).add(n)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new Tl,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),a.noMoveStart||this.fire("movestart"),a.animate!==!1){qe(this._mapPane,"leaflet-pan-anim");var c=this._getMapPanePos().subtract(n).round();this._panAnim.run(this._mapPane,c,a.duration||.25,a.easeLinearity)}else this._rawPanBy(n),this.fire("move").fire("moveend");return this},flyTo:function(n,a,c){if(c=c||{},c.animate===!1||!ye.any3d)return this.setView(n,a,c);this._stop();var f=this.project(this.getCenter()),g=this.project(n),x=this.getSize(),T=this._zoom;n=Ce(n),a=a===void 0?T:a;var D=Math.max(x.x,x.y),$=D*this.getZoomScale(T,a),Y=g.distanceTo(f)||1,ue=1.42,Fe=ue*ue;function Ue(Lt){var bs=Lt?-1:1,C=Lt?$:D,Oo=$*$-D*D+bs*Fe*Fe*Y*Y,xa=2*C*Fe*Y,ii=Oo/xa,Je=Math.sqrt(ii*ii+1)-ii,af=Je<1e-9?-18:Math.log(Je);return af}function sn(Lt){return(Math.exp(Lt)-Math.exp(-Lt))/2}function Gt(Lt){return(Math.exp(Lt)+Math.exp(-Lt))/2}function jn(Lt){return sn(Lt)/Gt(Lt)}var Nn=Ue(0);function Mi(Lt){return D*(Gt(Nn)/Gt(Nn+ue*Lt))}function nf(Lt){return D*(Gt(Nn)*jn(Nn+ue*Lt)-sn(Nn))/Fe}function rf(Lt){return 1-Math.pow(1-Lt,1.5)}var of=Date.now(),vc=(Ue(1)-Nn)/ue,sf=c.duration?1e3*c.duration:1e3*vc*.8;function ws(){var Lt=(Date.now()-of)/sf,bs=rf(Lt)*vc;Lt<=1?(this._flyToFrame=R(ws,this),this._move(this.unproject(f.add(g.subtract(f).multiplyBy(nf(bs)/Y)),T),this.getScaleZoom(D/Mi(bs),T),{flyTo:!0})):this._move(n,a)._moveEnd(!0)}return this._moveStart(!0,c.noMoveStart),ws.call(this),this},flyToBounds:function(n,a){var c=this._getBoundsCenterZoom(n,a);return this.flyTo(c.center,c.zoom,a)},setMaxBounds:function(n){return n=je(n),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),n.isValid()?(this.options.maxBounds=n,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(n){var a=this.options.minZoom;return this.options.minZoom=n,this._loaded&&a!==n&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(n):this},setMaxZoom:function(n){var a=this.options.maxZoom;return this.options.maxZoom=n,this._loaded&&a!==n&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(n):this},panInsideBounds:function(n,a){this._enforcingBounds=!0;var c=this.getCenter(),f=this._limitCenter(c,this._zoom,je(n));return c.equals(f)||this.panTo(f,a),this._enforcingBounds=!1,this},panInside:function(n,a){a=a||{};var c=ce(a.paddingTopLeft||a.padding||[0,0]),f=ce(a.paddingBottomRight||a.padding||[0,0]),g=this.project(this.getCenter()),x=this.project(n),T=this.getPixelBounds(),D=Ke([T.min.add(c),T.max.subtract(f)]),$=D.getSize();if(!D.contains(x)){this._enforcingBounds=!0;var Y=x.subtract(D.getCenter()),ue=D.extend(x).getSize().subtract($);g.x+=Y.x<0?-ue.x:ue.x,g.y+=Y.y<0?-ue.y:ue.y,this.panTo(this.unproject(g),a),this._enforcingBounds=!1}return this},invalidateSize:function(n){if(!this._loaded)return this;n=i({animate:!1,pan:!0},n===!0?{animate:!0}:n);var a=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var c=this.getSize(),f=a.divideBy(2).round(),g=c.divideBy(2).round(),x=f.subtract(g);return!x.x&&!x.y?this:(n.animate&&n.pan?this.panBy(x):(n.pan&&this._rawPanBy(x),this.fire("move"),n.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(s(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:a,newSize:c}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(n){if(n=this._locateOptions=i({timeout:1e4,watch:!1},n),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var a=s(this._handleGeolocationResponse,this),c=s(this._handleGeolocationError,this);return n.watch?this._locationWatchId=navigator.geolocation.watchPosition(a,c,n):navigator.geolocation.getCurrentPosition(a,c,n),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(n){if(this._container._leaflet_id){var a=n.code,c=n.message||(a===1?"permission denied":a===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:a,message:"Geolocation error: "+c+"."})}},_handleGeolocationResponse:function(n){if(this._container._leaflet_id){var a=n.coords.latitude,c=n.coords.longitude,f=new Se(a,c),g=f.toBounds(n.coords.accuracy*2),x=this._locateOptions;if(x.setView){var T=this.getBoundsZoom(g);this.setView(f,x.maxZoom?Math.min(T,x.maxZoom):T)}var D={latlng:f,bounds:g,timestamp:n.timestamp};for(var $ in n.coords)typeof n.coords[$]=="number"&&(D[$]=n.coords[$]);this.fire("locationfound",D)}},addHandler:function(n,a){if(!a)return this;var c=this[n]=new a(this);return this._handlers.push(c),this.options[n]&&c.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),Mt(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(X(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var n;for(n in this._layers)this._layers[n].remove();for(n in this._panes)Mt(this._panes[n]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(n,a){var c="leaflet-pane"+(n?" leaflet-"+n.replace("Pane","")+"-pane":""),f=gt("div",c,a||this._mapPane);return n&&(this._panes[n]=f),f},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var n=this.getPixelBounds(),a=this.unproject(n.getBottomLeft()),c=this.unproject(n.getTopRight());return new lt(a,c)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(n,a,c){n=je(n),c=ce(c||[0,0]);var f=this.getZoom()||0,g=this.getMinZoom(),x=this.getMaxZoom(),T=n.getNorthWest(),D=n.getSouthEast(),$=this.getSize().subtract(c),Y=Ke(this.project(D,f),this.project(T,f)).getSize(),ue=ye.any3d?this.options.zoomSnap:1,Fe=$.x/Y.x,Ue=$.y/Y.y,sn=a?Math.max(Fe,Ue):Math.min(Fe,Ue);return f=this.getScaleZoom(sn,f),ue&&(f=Math.round(f/(ue/100))*(ue/100),f=a?Math.ceil(f/ue)*ue:Math.floor(f/ue)*ue),Math.max(g,Math.min(x,f))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new j(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(n,a){var c=this._getTopLeftPoint(n,a);return new xe(c,c.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(n){return this.options.crs.getProjectedBounds(n===void 0?this.getZoom():n)},getPane:function(n){return typeof n=="string"?this._panes[n]:n},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(n,a){var c=this.options.crs;return a=a===void 0?this._zoom:a,c.scale(n)/c.scale(a)},getScaleZoom:function(n,a){var c=this.options.crs;a=a===void 0?this._zoom:a;var f=c.zoom(n*c.scale(a));return isNaN(f)?1/0:f},project:function(n,a){return a=a===void 0?this._zoom:a,this.options.crs.latLngToPoint(Ce(n),a)},unproject:function(n,a){return a=a===void 0?this._zoom:a,this.options.crs.pointToLatLng(ce(n),a)},layerPointToLatLng:function(n){var a=ce(n).add(this.getPixelOrigin());return this.unproject(a)},latLngToLayerPoint:function(n){var a=this.project(Ce(n))._round();return a._subtract(this.getPixelOrigin())},wrapLatLng:function(n){return this.options.crs.wrapLatLng(Ce(n))},wrapLatLngBounds:function(n){return this.options.crs.wrapLatLngBounds(je(n))},distance:function(n,a){return this.options.crs.distance(Ce(n),Ce(a))},containerPointToLayerPoint:function(n){return ce(n).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(n){return ce(n).add(this._getMapPanePos())},containerPointToLatLng:function(n){var a=this.containerPointToLayerPoint(ce(n));return this.layerPointToLatLng(a)},latLngToContainerPoint:function(n){return this.layerPointToContainerPoint(this.latLngToLayerPoint(Ce(n)))},mouseEventToContainerPoint:function(n){return tc(n,this._container)},mouseEventToLayerPoint:function(n){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(n))},mouseEventToLatLng:function(n){return this.layerPointToLatLng(this.mouseEventToLayerPoint(n))},_initContainer:function(n){var a=this._container=Ku(n);if(a){if(a._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");Be(a,"scroll",this._onScroll,this),this._containerId=d(a)},_initLayout:function(){var n=this._container;this._fadeAnimated=this.options.fadeAnimation&&ye.any3d,qe(n,"leaflet-container"+(ye.touch?" leaflet-touch":"")+(ye.retina?" leaflet-retina":"")+(ye.ielt9?" leaflet-oldie":"")+(ye.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var a=os(n,"position");a!=="absolute"&&a!=="relative"&&a!=="fixed"&&a!=="sticky"&&(n.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var n=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),tn(this._mapPane,new j(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(qe(n.markerPane,"leaflet-zoom-hide"),qe(n.shadowPane,"leaflet-zoom-hide"))},_resetView:function(n,a,c){tn(this._mapPane,new j(0,0));var f=!this._loaded;this._loaded=!0,a=this._limitZoom(a),this.fire("viewprereset");var g=this._zoom!==a;this._moveStart(g,c)._move(n,a)._moveEnd(g),this.fire("viewreset"),f&&this.fire("load")},_moveStart:function(n,a){return n&&this.fire("zoomstart"),a||this.fire("movestart"),this},_move:function(n,a,c,f){a===void 0&&(a=this._zoom);var g=this._zoom!==a;return this._zoom=a,this._lastCenter=n,this._pixelOrigin=this._getNewPixelOrigin(n),f?c&&c.pinch&&this.fire("zoom",c):((g||c&&c.pinch)&&this.fire("zoom",c),this.fire("move",c)),this},_moveEnd:function(n){return n&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return X(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(n){tn(this._mapPane,this._getMapPanePos().subtract(n))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(n){this._targets={},this._targets[d(this._container)]=this;var a=n?Pt:Be;a(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&a(window,"resize",this._onResize,this),ye.any3d&&this.options.transform3DLimit&&(n?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){X(this._resizeRequest),this._resizeRequest=R(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var n=this._getMapPanePos();Math.max(Math.abs(n.x),Math.abs(n.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(n,a){for(var c=[],f,g=a==="mouseout"||a==="mouseover",x=n.target||n.srcElement,T=!1;x;){if(f=this._targets[d(x)],f&&(a==="click"||a==="preclick")&&this._draggableMoved(f)){T=!0;break}if(f&&f.listens(a,!0)&&(g&&!Sl(x,n)||(c.push(f),g))||x===this._container)break;x=x.parentNode}return!c.length&&!T&&!g&&this.listens(a,!0)&&(c=[this]),c},_isClickDisabled:function(n){for(;n&&n!==this._container;){if(n._leaflet_disable_click)return!0;n=n.parentNode}},_handleDOMEvent:function(n){var a=n.target||n.srcElement;if(!(!this._loaded||a._leaflet_disable_events||n.type==="click"&&this._isClickDisabled(a))){var c=n.type;c==="mousedown"&&aa(a),this._fireDOMEvent(n,c)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(n,a,c){if(n.type==="click"){var f=i({},n);f.type="preclick",this._fireDOMEvent(f,f.type,c)}var g=this._findEventTargets(n,a);if(c){for(var x=[],T=0;T<c.length;T++)c[T].listens(a,!0)&&x.push(c[T]);g=x.concat(g)}if(g.length){a==="contextmenu"&&$e(n);var D=g[0],$={originalEvent:n};if(n.type!=="keypress"&&n.type!=="keydown"&&n.type!=="keyup"){var Y=D.getLatLng&&(!D._radius||D._radius<=10);$.containerPoint=Y?this.latLngToContainerPoint(D.getLatLng()):this.mouseEventToContainerPoint(n),$.layerPoint=this.containerPointToLayerPoint($.containerPoint),$.latlng=Y?D.getLatLng():this.layerPointToLatLng($.layerPoint)}for(T=0;T<g.length;T++)if(g[T].fire(a,$,!0),$.originalEvent._stopped||g[T].options.bubblingMouseEvents===!1&&ht(this._mouseEvents,a)!==-1)return}},_draggableMoved:function(n){return n=n.dragging&&n.dragging.enabled()?n:this,n.dragging&&n.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var n=0,a=this._handlers.length;n<a;n++)this._handlers[n].disable()},whenReady:function(n,a){return this._loaded?n.call(a||this,{target:this}):this.on("load",n,a),this},_getMapPanePos:function(){return ir(this._mapPane)||new j(0,0)},_moved:function(){var n=this._getMapPanePos();return n&&!n.equals([0,0])},_getTopLeftPoint:function(n,a){var c=n&&a!==void 0?this._getNewPixelOrigin(n,a):this.getPixelOrigin();return c.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(n,a){var c=this.getSize()._divideBy(2);return this.project(n,a)._subtract(c)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(n,a,c){var f=this._getNewPixelOrigin(c,a);return this.project(n,a)._subtract(f)},_latLngBoundsToNewLayerBounds:function(n,a,c){var f=this._getNewPixelOrigin(c,a);return Ke([this.project(n.getSouthWest(),a)._subtract(f),this.project(n.getNorthWest(),a)._subtract(f),this.project(n.getSouthEast(),a)._subtract(f),this.project(n.getNorthEast(),a)._subtract(f)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(n){return this.latLngToLayerPoint(n).subtract(this._getCenterLayerPoint())},_limitCenter:function(n,a,c){if(!c)return n;var f=this.project(n,a),g=this.getSize().divideBy(2),x=new xe(f.subtract(g),f.add(g)),T=this._getBoundsOffset(x,c,a);return Math.abs(T.x)<=1&&Math.abs(T.y)<=1?n:this.unproject(f.add(T),a)},_limitOffset:function(n,a){if(!a)return n;var c=this.getPixelBounds(),f=new xe(c.min.add(n),c.max.add(n));return n.add(this._getBoundsOffset(f,a))},_getBoundsOffset:function(n,a,c){var f=Ke(this.project(a.getNorthEast(),c),this.project(a.getSouthWest(),c)),g=f.min.subtract(n.min),x=f.max.subtract(n.max),T=this._rebound(g.x,-x.x),D=this._rebound(g.y,-x.y);return new j(T,D)},_rebound:function(n,a){return n+a>0?Math.round(n-a)/2:Math.max(0,Math.ceil(n))-Math.max(0,Math.floor(a))},_limitZoom:function(n){var a=this.getMinZoom(),c=this.getMaxZoom(),f=ye.any3d?this.options.zoomSnap:1;return f&&(n=Math.round(n/f)*f),Math.max(a,Math.min(c,n))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){Dt(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(n,a){var c=this._getCenterOffset(n)._trunc();return(a&&a.animate)!==!0&&!this.getSize().contains(c)?!1:(this.panBy(c,a),!0)},_createAnimProxy:function(){var n=this._proxy=gt("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(n),this.on("zoomanim",function(a){var c=ta,f=this._proxy.style[c];Yr(this._proxy,this.project(a.center,a.zoom),this.getZoomScale(a.zoom,1)),f===this._proxy.style[c]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){Mt(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var n=this.getCenter(),a=this.getZoom();Yr(this._proxy,this.project(n,a),this.getZoomScale(a,1))},_catchTransitionEnd:function(n){this._animatingZoom&&n.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(n,a,c){if(this._animatingZoom)return!0;if(c=c||{},!this._zoomAnimated||c.animate===!1||this._nothingToAnimate()||Math.abs(a-this._zoom)>this.options.zoomAnimationThreshold)return!1;var f=this.getZoomScale(a),g=this._getCenterOffset(n)._divideBy(1-1/f);return c.animate!==!0&&!this.getSize().contains(g)?!1:(R(function(){this._moveStart(!0,c.noMoveStart||!1)._animateZoom(n,a,!0)},this),!0)},_animateZoom:function(n,a,c,f){this._mapPane&&(c&&(this._animatingZoom=!0,this._animateToCenter=n,this._animateToZoom=a,qe(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:n,zoom:a,noUpdate:f}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(s(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&Dt(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function Cn(n,a){return new ut(n,a)}var li=re.extend({options:{position:"topright"},initialize:function(n){H(this,n)},getPosition:function(){return this.options.position},setPosition:function(n){var a=this._map;return a&&a.removeControl(this),this.options.position=n,a&&a.addControl(this),this},getContainer:function(){return this._container},addTo:function(n){this.remove(),this._map=n;var a=this._container=this.onAdd(n),c=this.getPosition(),f=n._controlCorners[c];return qe(a,"leaflet-control"),c.indexOf("bottom")!==-1?f.insertBefore(a,f.firstChild):f.appendChild(a),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(Mt(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(n){this._map&&n&&n.screenX>0&&n.screenY>0&&this._map.getContainer().focus()}}),Ei=function(n){return new li(n)};ut.include({addControl:function(n){return n.addTo(this),this},removeControl:function(n){return n.remove(),this},_initControlPos:function(){var n=this._controlCorners={},a="leaflet-",c=this._controlContainer=gt("div",a+"control-container",this._container);function f(g,x){var T=a+g+" "+a+x;n[g+x]=gt("div",T,c)}f("top","left"),f("top","right"),f("bottom","left"),f("bottom","right")},_clearControlPos:function(){for(var n in this._controlCorners)Mt(this._controlCorners[n]);Mt(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var Al=li.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(n,a,c,f){return c<f?-1:f<c?1:0}},initialize:function(n,a,c){H(this,c),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var f in n)this._addLayer(n[f],f);for(f in a)this._addLayer(a[f],f,!0)},onAdd:function(n){this._initLayout(),this._update(),this._map=n,n.on("zoomend",this._checkDisabledLayers,this);for(var a=0;a<this._layers.length;a++)this._layers[a].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(n){return li.prototype.addTo.call(this,n),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var n=0;n<this._layers.length;n++)this._layers[n].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(n,a){return this._addLayer(n,a),this._map?this._update():this},addOverlay:function(n,a){return this._addLayer(n,a,!0),this._map?this._update():this},removeLayer:function(n){n.off("add remove",this._onLayerChange,this);var a=this._getLayer(d(n));return a&&this._layers.splice(this._layers.indexOf(a),1),this._map?this._update():this},expand:function(){qe(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var n=this._map.getSize().y-(this._container.offsetTop+50);return n<this._section.clientHeight?(qe(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=n+"px"):Dt(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return Dt(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var n="leaflet-control-layers",a=this._container=gt("div",n),c=this.options.collapsed;a.setAttribute("aria-haspopup",!0),us(a),Fl(a);var f=this._section=gt("section",n+"-list");c&&(this._map.on("click",this.collapse,this),Be(a,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var g=this._layersLink=gt("a",n+"-toggle",a);g.href="#",g.title="Layers",g.setAttribute("role","button"),Be(g,{keydown:function(x){x.keyCode===13&&this._expandSafely()},click:function(x){$e(x),this._expandSafely()}},this),c||this.expand(),this._baseLayersList=gt("div",n+"-base",f),this._separator=gt("div",n+"-separator",f),this._overlaysList=gt("div",n+"-overlays",f),a.appendChild(f)},_getLayer:function(n){for(var a=0;a<this._layers.length;a++)if(this._layers[a]&&d(this._layers[a].layer)===n)return this._layers[a]},_addLayer:function(n,a,c){this._map&&n.on("add remove",this._onLayerChange,this),this._layers.push({layer:n,name:a,overlay:c}),this.options.sortLayers&&this._layers.sort(s(function(f,g){return this.options.sortFunction(f.layer,g.layer,f.name,g.name)},this)),this.options.autoZIndex&&n.setZIndex&&(this._lastZIndex++,n.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;ss(this._baseLayersList),ss(this._overlaysList),this._layerControlInputs=[];var n,a,c,f,g=0;for(c=0;c<this._layers.length;c++)f=this._layers[c],this._addItem(f),a=a||f.overlay,n=n||!f.overlay,g+=f.overlay?0:1;return this.options.hideSingleBase&&(n=n&&g>1,this._baseLayersList.style.display=n?"":"none"),this._separator.style.display=a&&n?"":"none",this},_onLayerChange:function(n){this._handlingClick||this._update();var a=this._getLayer(d(n.target)),c=a.overlay?n.type==="add"?"overlayadd":"overlayremove":n.type==="add"?"baselayerchange":null;c&&this._map.fire(c,a)},_createRadioElement:function(n,a){var c='<input type="radio" class="leaflet-control-layers-selector" name="'+n+'"'+(a?' checked="checked"':"")+"/>",f=document.createElement("div");return f.innerHTML=c,f.firstChild},_addItem:function(n){var a=document.createElement("label"),c=this._map.hasLayer(n.layer),f;n.overlay?(f=document.createElement("input"),f.type="checkbox",f.className="leaflet-control-layers-selector",f.defaultChecked=c):f=this._createRadioElement("leaflet-base-layers_"+d(this),c),this._layerControlInputs.push(f),f.layerId=d(n.layer),Be(f,"click",this._onInputClick,this);var g=document.createElement("span");g.innerHTML=" "+n.name;var x=document.createElement("span");a.appendChild(x),x.appendChild(f),x.appendChild(g);var T=n.overlay?this._overlaysList:this._baseLayersList;return T.appendChild(a),this._checkDisabledLayers(),a},_onInputClick:function(){if(!this._preventClick){var n=this._layerControlInputs,a,c,f=[],g=[];this._handlingClick=!0;for(var x=n.length-1;x>=0;x--)a=n[x],c=this._getLayer(a.layerId).layer,a.checked?f.push(c):a.checked||g.push(c);for(x=0;x<g.length;x++)this._map.hasLayer(g[x])&&this._map.removeLayer(g[x]);for(x=0;x<f.length;x++)this._map.hasLayer(f[x])||this._map.addLayer(f[x]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var n=this._layerControlInputs,a,c,f=this._map.getZoom(),g=n.length-1;g>=0;g--)a=n[g],c=this._getLayer(a.layerId).layer,a.disabled=c.options.minZoom!==void 0&&f<c.options.minZoom||c.options.maxZoom!==void 0&&f>c.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var n=this._section;this._preventClick=!0,Be(n,"click",$e),this.expand();var a=this;setTimeout(function(){Pt(n,"click",$e),a._preventClick=!1})}}),Pl=function(n,a,c){return new Al(n,a,c)},ei=li.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(n){var a="leaflet-control-zoom",c=gt("div",a+" leaflet-bar"),f=this.options;return this._zoomInButton=this._createButton(f.zoomInText,f.zoomInTitle,a+"-in",c,this._zoomIn),this._zoomOutButton=this._createButton(f.zoomOutText,f.zoomOutTitle,a+"-out",c,this._zoomOut),this._updateDisabled(),n.on("zoomend zoomlevelschange",this._updateDisabled,this),c},onRemove:function(n){n.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(n){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(n.shiftKey?3:1))},_zoomOut:function(n){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(n.shiftKey?3:1))},_createButton:function(n,a,c,f,g){var x=gt("a",c,f);return x.innerHTML=n,x.href="#",x.title=a,x.setAttribute("role","button"),x.setAttribute("aria-label",a),us(x),Be(x,"click",_t),Be(x,"click",g,this),Be(x,"click",this._refocusOnMap,this),x},_updateDisabled:function(){var n=this._map,a="leaflet-disabled";Dt(this._zoomInButton,a),Dt(this._zoomOutButton,a),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||n._zoom===n.getMinZoom())&&(qe(this._zoomOutButton,a),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||n._zoom===n.getMaxZoom())&&(qe(this._zoomInButton,a),this._zoomInButton.setAttribute("aria-disabled","true"))}});ut.mergeOptions({zoomControl:!0}),ut.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new ei,this.addControl(this.zoomControl))});var ic=function(n){return new ei(n)},Il=li.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(n){var a="leaflet-control-scale",c=gt("div",a),f=this.options;return this._addScales(f,a+"-line",c),n.on(f.updateWhenIdle?"moveend":"move",this._update,this),n.whenReady(this._update,this),c},onRemove:function(n){n.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(n,a,c){n.metric&&(this._mScale=gt("div",a,c)),n.imperial&&(this._iScale=gt("div",a,c))},_update:function(){var n=this._map,a=n.getSize().y/2,c=n.distance(n.containerPointToLatLng([0,a]),n.containerPointToLatLng([this.options.maxWidth,a]));this._updateScales(c)},_updateScales:function(n){this.options.metric&&n&&this._updateMetric(n),this.options.imperial&&n&&this._updateImperial(n)},_updateMetric:function(n){var a=this._getRoundNum(n),c=a<1e3?a+" m":a/1e3+" km";this._updateScale(this._mScale,c,a/n)},_updateImperial:function(n){var a=n*3.2808399,c,f,g;a>5280?(c=a/5280,f=this._getRoundNum(c),this._updateScale(this._iScale,f+" mi",f/c)):(g=this._getRoundNum(a),this._updateScale(this._iScale,g+" ft",g/a))},_updateScale:function(n,a,c){n.style.width=Math.round(this.options.maxWidth*c)+"px",n.innerHTML=a},_getRoundNum:function(n){var a=Math.pow(10,(Math.floor(n)+"").length-1),c=n/a;return c=c>=10?10:c>=5?5:c>=3?3:c>=2?2:1,a*c}}),rc=function(n){return new Il(n)},oc='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',ua=li.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(ye.inlineSvg?oc+" ":"")+"Leaflet</a>"},initialize:function(n){H(this,n),this._attributions={}},onAdd:function(n){n.attributionControl=this,this._container=gt("div","leaflet-control-attribution"),us(this._container);for(var a in n._layers)n._layers[a].getAttribution&&this.addAttribution(n._layers[a].getAttribution());return this._update(),n.on("layeradd",this._addAttribution,this),this._container},onRemove:function(n){n.off("layeradd",this._addAttribution,this)},_addAttribution:function(n){n.layer.getAttribution&&(this.addAttribution(n.layer.getAttribution()),n.layer.once("remove",function(){this.removeAttribution(n.layer.getAttribution())},this))},setPrefix:function(n){return this.options.prefix=n,this._update(),this},addAttribution:function(n){return n?(this._attributions[n]||(this._attributions[n]=0),this._attributions[n]++,this._update(),this):this},removeAttribution:function(n){return n?(this._attributions[n]&&(this._attributions[n]--,this._update()),this):this},_update:function(){if(this._map){var n=[];for(var a in this._attributions)this._attributions[a]&&n.push(a);var c=[];this.options.prefix&&c.push(this.options.prefix),n.length&&c.push(n.join(", ")),this._container.innerHTML=c.join(' <span aria-hidden="true">|</span> ')}}});ut.mergeOptions({attributionControl:!0}),ut.addInitHook(function(){this.options.attributionControl&&new ua().addTo(this)});var sc=function(n){return new ua(n)};li.Layers=Al,li.Zoom=ei,li.Scale=Il,li.Attribution=ua,Ei.layers=Pl,Ei.zoom=ic,Ei.scale=rc,Ei.attribution=sc;var Vt=re.extend({initialize:function(n){this._map=n},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});Vt.addTo=function(n,a){return n.addHandler(a,this),this};var Vd={Events:ee},ui=ye.touch?"touchstart mousedown":"mousedown",gr=Te.extend({options:{clickTolerance:3},initialize:function(n,a,c,f){H(this,f),this._element=n,this._dragStartTarget=a||n,this._preventOutline=c},enable:function(){this._enabled||(Be(this._dragStartTarget,ui,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(gr._dragging===this&&this.finishDrag(!0),Pt(this._dragStartTarget,ui,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(n){if(this._enabled&&(this._moved=!1,!xl(this._element,"leaflet-zoom-anim"))){if(n.touches&&n.touches.length!==1){gr._dragging===this&&this.finishDrag();return}if(!(gr._dragging||n.shiftKey||n.which!==1&&n.button!==1&&!n.touches)&&(gr._dragging=this,this._preventOutline&&aa(this._element),Cl(),Jr(),!this._moving)){this.fire("down");var a=n.touches?n.touches[0]:n,c=Ju(this._element);this._startPoint=new j(a.clientX,a.clientY),this._startPos=ir(this._element),this._parentScale=wl(c);var f=n.type==="mousedown";Be(document,f?"mousemove":"touchmove",this._onMove,this),Be(document,f?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(n){if(this._enabled){if(n.touches&&n.touches.length>1){this._moved=!0;return}var a=n.touches&&n.touches.length===1?n.touches[0]:n,c=new j(a.clientX,a.clientY)._subtract(this._startPoint);!c.x&&!c.y||Math.abs(c.x)+Math.abs(c.y)<this.options.clickTolerance||(c.x/=this._parentScale.x,c.y/=this._parentScale.y,$e(n),this._moved||(this.fire("dragstart"),this._moved=!0,qe(document.body,"leaflet-dragging"),this._lastTarget=n.target||n.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),qe(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(c),this._moving=!0,this._lastEvent=n,this._updatePosition())}},_updatePosition:function(){var n={originalEvent:this._lastEvent};this.fire("predrag",n),tn(this._element,this._newPos),this.fire("drag",n)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(n){Dt(document.body,"leaflet-dragging"),this._lastTarget&&(Dt(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),Pt(document,"mousemove touchmove",this._onMove,this),Pt(document,"mouseup touchend touchcancel",this._onUp,this),oa(),ji();var a=this._moved&&this._moving;this._moving=!1,gr._dragging=!1,a&&this.fire("dragend",{noInertia:n,distance:this._newPos.distanceTo(this._startPos)})}});function El(n,a,c){var f,g=[1,4,2,8],x,T,D,$,Y,ue,Fe,Ue;for(x=0,ue=n.length;x<ue;x++)n[x]._code=Hi(n[x],a);for(D=0;D<4;D++){for(Fe=g[D],f=[],x=0,ue=n.length,T=ue-1;x<ue;T=x++)$=n[x],Y=n[T],$._code&Fe?Y._code&Fe||(Ue=hs(Y,$,Fe,a,c),Ue._code=Hi(Ue,a),f.push(Ue)):(Y._code&Fe&&(Ue=hs(Y,$,Fe,a,c),Ue._code=Hi(Ue,a),f.push(Ue)),f.push($));n=f}return n}function rr(n,a){var c,f,g,x,T,D,$,Y,ue;if(!n||n.length===0)throw new Error("latlngs not passed");ci(n)||(console.warn("latlngs are not flat! Only the first ring will be used"),n=n[0]);var Fe=Ce([0,0]),Ue=je(n),sn=Ue.getNorthWest().distanceTo(Ue.getSouthWest())*Ue.getNorthEast().distanceTo(Ue.getNorthWest());sn<1700&&(Fe=bo(n));var Gt=n.length,jn=[];for(c=0;c<Gt;c++){var Nn=Ce(n[c]);jn.push(a.project(Ce([Nn.lat-Fe.lat,Nn.lng-Fe.lng])))}for(D=$=Y=0,c=0,f=Gt-1;c<Gt;f=c++)g=jn[c],x=jn[f],T=g.y*x.x-x.y*g.x,$+=(g.x+x.x)*T,Y+=(g.y+x.y)*T,D+=T*3;D===0?ue=jn[0]:ue=[$/D,Y/D];var Mi=a.unproject(ce(ue));return Ce([Mi.lat+Fe.lat,Mi.lng+Fe.lng])}function bo(n){for(var a=0,c=0,f=0,g=0;g<n.length;g++){var x=Ce(n[g]);a+=x.lat,c+=x.lng,f++}return Ce([a/f,c/f])}var Ol={__proto__:null,clipPolygon:El,polygonCenter:rr,centroid:bo};function It(n,a){if(!a||!n.length)return n.slice();var c=a*a;return n=Kd(n,c),n=Gd(n,c),n}function or(n,a,c){return Math.sqrt(ds(n,a,c,!0))}function Ml(n,a,c){return ds(n,a,c)}function Gd(n,a){var c=n.length,f=typeof Uint8Array<"u"?Uint8Array:Array,g=new f(c);g[0]=g[c-1]=1,cs(n,g,a,0,c-1);var x,T=[];for(x=0;x<c;x++)g[x]&&T.push(n[x]);return T}function cs(n,a,c,f,g){var x=0,T,D,$;for(D=f+1;D<=g-1;D++)$=ds(n[D],n[f],n[g],!0),$>x&&(T=D,x=$);x>c&&(a[T]=1,cs(n,a,c,f,T),cs(n,a,c,T,g))}function Kd(n,a){for(var c=[n[0]],f=1,g=0,x=n.length;f<x;f++)zo(n[f],n[g])>a&&(c.push(n[f]),g=f);return g<x-1&&c.push(n[x-1]),c}var ac;function lc(n,a,c,f,g){var x=f?ac:Hi(n,c),T=Hi(a,c),D,$,Y;for(ac=T;;){if(!(x|T))return[n,a];if(x&T)return!1;D=x||T,$=hs(n,a,D,c,g),Y=Hi($,c),D===x?(n=$,x=Y):(a=$,T=Y)}}function hs(n,a,c,f,g){var x=a.x-n.x,T=a.y-n.y,D=f.min,$=f.max,Y,ue;return c&8?(Y=n.x+x*($.y-n.y)/T,ue=$.y):c&4?(Y=n.x+x*(D.y-n.y)/T,ue=D.y):c&2?(Y=$.x,ue=n.y+T*($.x-n.x)/x):c&1&&(Y=D.x,ue=n.y+T*(D.x-n.x)/x),new j(Y,ue,g)}function Hi(n,a){var c=0;return n.x<a.min.x?c|=1:n.x>a.max.x&&(c|=2),n.y<a.min.y?c|=4:n.y>a.max.y&&(c|=8),c}function zo(n,a){var c=a.x-n.x,f=a.y-n.y;return c*c+f*f}function ds(n,a,c,f){var g=a.x,x=a.y,T=c.x-g,D=c.y-x,$=T*T+D*D,Y;return $>0&&(Y=((n.x-g)*T+(n.y-x)*D)/$,Y>1?(g=c.x,x=c.y):Y>0&&(g+=T*Y,x+=D*Y)),T=n.x-g,D=n.y-x,f?T*T+D*D:new j(g,x)}function ci(n){return!de(n[0])||typeof n[0][0]!="object"&&typeof n[0][0]<"u"}function Dl(n){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),ci(n)}function ca(n,a){var c,f,g,x,T,D,$,Y;if(!n||n.length===0)throw new Error("latlngs not passed");ci(n)||(console.warn("latlngs are not flat! Only the first ring will be used"),n=n[0]);var ue=Ce([0,0]),Fe=je(n),Ue=Fe.getNorthWest().distanceTo(Fe.getSouthWest())*Fe.getNorthEast().distanceTo(Fe.getNorthWest());Ue<1700&&(ue=bo(n));var sn=n.length,Gt=[];for(c=0;c<sn;c++){var jn=Ce(n[c]);Gt.push(a.project(Ce([jn.lat-ue.lat,jn.lng-ue.lng])))}for(c=0,f=0;c<sn-1;c++)f+=Gt[c].distanceTo(Gt[c+1])/2;if(f===0)Y=Gt[0];else for(c=0,x=0;c<sn-1;c++)if(T=Gt[c],D=Gt[c+1],g=T.distanceTo(D),x+=g,x>f){$=(x-f)/g,Y=[D.x-$*(D.x-T.x),D.y-$*(D.y-T.y)];break}var Nn=a.unproject(ce(Y));return Ce([Nn.lat+ue.lat,Nn.lng+ue.lng])}var Ll={__proto__:null,simplify:It,pointToSegmentDistance:or,closestPointOnSegment:Ml,clipSegment:lc,_getEdgeIntersection:hs,_getBitCode:Hi,_sqClosestPointOnSegment:ds,isFlat:ci,_flat:Dl,polylineCenter:ca},ha={project:function(n){return new j(n.lng,n.lat)},unproject:function(n){return new Se(n.y,n.x)},bounds:new xe([-180,-90],[180,90])},Nl={R:6378137,R_MINOR:6356752314245179e-9,bounds:new xe([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(n){var a=Math.PI/180,c=this.R,f=n.lat*a,g=this.R_MINOR/c,x=Math.sqrt(1-g*g),T=x*Math.sin(f),D=Math.tan(Math.PI/4-f/2)/Math.pow((1-T)/(1+T),x/2);return f=-c*Math.log(Math.max(D,1e-10)),new j(n.lng*a*c,f)},unproject:function(n){for(var a=180/Math.PI,c=this.R,f=this.R_MINOR/c,g=Math.sqrt(1-f*f),x=Math.exp(-n.y/c),T=Math.PI/2-2*Math.atan(x),D=0,$=.1,Y;D<15&&Math.abs($)>1e-7;D++)Y=g*Math.sin(T),Y=Math.pow((1-Y)/(1+Y),g/2),$=Math.PI/2-2*Math.atan(x*Y)-T,T+=$;return new Se(T*a,n.x*a/c)}},Rl={__proto__:null,LonLat:ha,Mercator:Nl,SphericalMercator:hn},Bl=i({},we,{code:"EPSG:3395",projection:Nl,transformation:function(){var n=.5/(Math.PI*Nl.R);return Et(n,.5,-n,.5)}()}),uc=i({},we,{code:"EPSG:4326",projection:ha,transformation:Et(1/180,1,-1/180,.5)}),cc=i({},nt,{projection:ha,transformation:Et(1,0,-1,0),scale:function(n){return Math.pow(2,n)},zoom:function(n){return Math.log(n)/Math.LN2},distance:function(n,a){var c=a.lng-n.lng,f=a.lat-n.lat;return Math.sqrt(c*c+f*f)},infinite:!0});nt.Earth=we,nt.EPSG3395=Bl,nt.EPSG3857=oe,nt.EPSG900913=ne,nt.EPSG4326=uc,nt.Simple=cc;var jt=Te.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(n){return n.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(n){return n&&n.removeLayer(this),this},getPane:function(n){return this._map.getPane(n?this.options[n]||n:this.options.pane)},addInteractiveTarget:function(n){return this._map._targets[d(n)]=this,this},removeInteractiveTarget:function(n){return delete this._map._targets[d(n)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(n){var a=n.target;if(a.hasLayer(this)){if(this._map=a,this._zoomAnimated=a._zoomAnimated,this.getEvents){var c=this.getEvents();a.on(c,this),this.once("remove",function(){a.off(c,this)},this)}this.onAdd(a),this.fire("add"),a.fire("layeradd",{layer:this})}}});ut.include({addLayer:function(n){if(!n._layerAdd)throw new Error("The provided object is not a Layer.");var a=d(n);return this._layers[a]?this:(this._layers[a]=n,n._mapToAdd=this,n.beforeAdd&&n.beforeAdd(this),this.whenReady(n._layerAdd,n),this)},removeLayer:function(n){var a=d(n);return this._layers[a]?(this._loaded&&n.onRemove(this),delete this._layers[a],this._loaded&&(this.fire("layerremove",{layer:n}),n.fire("remove")),n._map=n._mapToAdd=null,this):this},hasLayer:function(n){return d(n)in this._layers},eachLayer:function(n,a){for(var c in this._layers)n.call(a,this._layers[c]);return this},_addLayers:function(n){n=n?de(n)?n:[n]:[];for(var a=0,c=n.length;a<c;a++)this.addLayer(n[a])},_addZoomLimit:function(n){(!isNaN(n.options.maxZoom)||!isNaN(n.options.minZoom))&&(this._zoomBoundLayers[d(n)]=n,this._updateZoomLevels())},_removeZoomLimit:function(n){var a=d(n);this._zoomBoundLayers[a]&&(delete this._zoomBoundLayers[a],this._updateZoomLevels())},_updateZoomLevels:function(){var n=1/0,a=-1/0,c=this._getZoomSpan();for(var f in this._zoomBoundLayers){var g=this._zoomBoundLayers[f].options;n=g.minZoom===void 0?n:Math.min(n,g.minZoom),a=g.maxZoom===void 0?a:Math.max(a,g.maxZoom)}this._layersMaxZoom=a===-1/0?void 0:a,this._layersMinZoom=n===1/0?void 0:n,c!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var _r=jt.extend({initialize:function(n,a){H(this,a),this._layers={};var c,f;if(n)for(c=0,f=n.length;c<f;c++)this.addLayer(n[c])},addLayer:function(n){var a=this.getLayerId(n);return this._layers[a]=n,this._map&&this._map.addLayer(n),this},removeLayer:function(n){var a=n in this._layers?n:this.getLayerId(n);return this._map&&this._layers[a]&&this._map.removeLayer(this._layers[a]),delete this._layers[a],this},hasLayer:function(n){var a=typeof n=="number"?n:this.getLayerId(n);return a in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(n){var a=Array.prototype.slice.call(arguments,1),c,f;for(c in this._layers)f=this._layers[c],f[n]&&f[n].apply(f,a);return this},onAdd:function(n){this.eachLayer(n.addLayer,n)},onRemove:function(n){this.eachLayer(n.removeLayer,n)},eachLayer:function(n,a){for(var c in this._layers)n.call(a,this._layers[c]);return this},getLayer:function(n){return this._layers[n]},getLayers:function(){var n=[];return this.eachLayer(n.push,n),n},setZIndex:function(n){return this.invoke("setZIndex",n)},getLayerId:function(n){return d(n)}}),fs=function(n,a){return new _r(n,a)},Wi=_r.extend({addLayer:function(n){return this.hasLayer(n)?this:(n.addEventParent(this),_r.prototype.addLayer.call(this,n),this.fire("layeradd",{layer:n}))},removeLayer:function(n){return this.hasLayer(n)?(n in this._layers&&(n=this._layers[n]),n.removeEventParent(this),_r.prototype.removeLayer.call(this,n),this.fire("layerremove",{layer:n})):this},setStyle:function(n){return this.invoke("setStyle",n)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var n=new lt;for(var a in this._layers){var c=this._layers[a];n.extend(c.getBounds?c.getBounds():c.getLatLng())}return n}}),hc=function(n,a){return new Wi(n,a)},Fo=re.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(n){H(this,n)},createIcon:function(n){return this._createIcon("icon",n)},createShadow:function(n){return this._createIcon("shadow",n)},_createIcon:function(n,a){var c=this._getIconUrl(n);if(!c){if(n==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var f=this._createImg(c,a&&a.tagName==="IMG"?a:null);return this._setIconStyles(f,n),(this.options.crossOrigin||this.options.crossOrigin==="")&&(f.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),f},_setIconStyles:function(n,a){var c=this.options,f=c[a+"Size"];typeof f=="number"&&(f=[f,f]);var g=ce(f),x=ce(a==="shadow"&&c.shadowAnchor||c.iconAnchor||g&&g.divideBy(2,!0));n.className="leaflet-marker-"+a+" "+(c.className||""),x&&(n.style.marginLeft=-x.x+"px",n.style.marginTop=-x.y+"px"),g&&(n.style.width=g.x+"px",n.style.height=g.y+"px")},_createImg:function(n,a){return a=a||document.createElement("img"),a.src=n,a},_getIconUrl:function(n){return ye.retina&&this.options[n+"RetinaUrl"]||this.options[n+"Url"]}});function Yd(n){return new Fo(n)}var ps=Fo.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(n){return typeof ps.imagePath!="string"&&(ps.imagePath=this._detectIconPath()),(this.options.imagePath||ps.imagePath)+Fo.prototype._getIconUrl.call(this,n)},_stripUrl:function(n){var a=function(c,f,g){var x=f.exec(c);return x&&x[g]};return n=a(n,/^url\((['"])?(.+)\1\)$/,2),n&&a(n,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var n=gt("div","leaflet-default-icon-path",document.body),a=os(n,"background-image")||os(n,"backgroundImage");if(document.body.removeChild(n),a=this._stripUrl(a),a)return a;var c=document.querySelector('link[href$="leaflet.css"]');return c?c.href.substring(0,c.href.length-11-1):""}}),dc=Vt.extend({initialize:function(n){this._marker=n},addHooks:function(){var n=this._marker._icon;this._draggable||(this._draggable=new gr(n,n,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),qe(n,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&Dt(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(n){var a=this._marker,c=a._map,f=this._marker.options.autoPanSpeed,g=this._marker.options.autoPanPadding,x=ir(a._icon),T=c.getPixelBounds(),D=c.getPixelOrigin(),$=Ke(T.min._subtract(D).add(g),T.max._subtract(D).subtract(g));if(!$.contains(x)){var Y=ce((Math.max($.max.x,x.x)-$.max.x)/(T.max.x-$.max.x)-(Math.min($.min.x,x.x)-$.min.x)/(T.min.x-$.min.x),(Math.max($.max.y,x.y)-$.max.y)/(T.max.y-$.max.y)-(Math.min($.min.y,x.y)-$.min.y)/(T.min.y-$.min.y)).multiplyBy(f);c.panBy(Y,{animate:!1}),this._draggable._newPos._add(Y),this._draggable._startPos._add(Y),tn(a._icon,this._draggable._newPos),this._onDrag(n),this._panRequest=R(this._adjustPan.bind(this,n))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(n){this._marker.options.autoPan&&(X(this._panRequest),this._panRequest=R(this._adjustPan.bind(this,n)))},_onDrag:function(n){var a=this._marker,c=a._shadow,f=ir(a._icon),g=a._map.layerPointToLatLng(f);c&&tn(c,f),a._latlng=g,n.latlng=g,n.oldLatLng=this._oldLatLng,a.fire("move",n).fire("drag",n)},_onDragEnd:function(n){X(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",n)}}),da=jt.extend({options:{icon:new ps,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(n,a){H(this,a),this._latlng=Ce(n)},onAdd:function(n){this._zoomAnimated=this._zoomAnimated&&n.options.markerZoomAnimation,this._zoomAnimated&&n.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(n){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&n.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(n){var a=this._latlng;return this._latlng=Ce(n),this.update(),this.fire("move",{oldLatLng:a,latlng:this._latlng})},setZIndexOffset:function(n){return this.options.zIndexOffset=n,this.update()},getIcon:function(){return this.options.icon},setIcon:function(n){return this.options.icon=n,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var n=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(n)}return this},_initIcon:function(){var n=this.options,a="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),c=n.icon.createIcon(this._icon),f=!1;c!==this._icon&&(this._icon&&this._removeIcon(),f=!0,n.title&&(c.title=n.title),c.tagName==="IMG"&&(c.alt=n.alt||"")),qe(c,a),n.keyboard&&(c.tabIndex="0",c.setAttribute("role","button")),this._icon=c,n.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&Be(c,"focus",this._panOnFocus,this);var g=n.icon.createShadow(this._shadow),x=!1;g!==this._shadow&&(this._removeShadow(),x=!0),g&&(qe(g,a),g.alt=""),this._shadow=g,n.opacity<1&&this._updateOpacity(),f&&this.getPane().appendChild(this._icon),this._initInteraction(),g&&x&&this.getPane(n.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&Pt(this._icon,"focus",this._panOnFocus,this),Mt(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&Mt(this._shadow),this._shadow=null},_setPos:function(n){this._icon&&tn(this._icon,n),this._shadow&&tn(this._shadow,n),this._zIndex=n.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(n){this._icon&&(this._icon.style.zIndex=this._zIndex+n)},_animateZoom:function(n){var a=this._map._latLngToNewLayerPoint(this._latlng,n.zoom,n.center).round();this._setPos(a)},_initInteraction:function(){if(this.options.interactive&&(qe(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),dc)){var n=this.options.draggable;this.dragging&&(n=this.dragging.enabled(),this.dragging.disable()),this.dragging=new dc(this),n&&this.dragging.enable()}},setOpacity:function(n){return this.options.opacity=n,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var n=this.options.opacity;this._icon&&ai(this._icon,n),this._shadow&&ai(this._shadow,n)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var n=this._map;if(n){var a=this.options.icon.options,c=a.iconSize?ce(a.iconSize):ce(0,0),f=a.iconAnchor?ce(a.iconAnchor):ce(0,0);n.panInside(this._latlng,{paddingTopLeft:f,paddingBottomRight:c.subtract(f)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function So(n,a){return new da(n,a)}var vr=jt.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(n){this._renderer=n.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(n){return H(this,n),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&n&&Object.prototype.hasOwnProperty.call(n,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),fa=vr.extend({options:{fill:!0,radius:10},initialize:function(n,a){H(this,a),this._latlng=Ce(n),this._radius=this.options.radius},setLatLng:function(n){var a=this._latlng;return this._latlng=Ce(n),this.redraw(),this.fire("move",{oldLatLng:a,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(n){return this.options.radius=this._radius=n,this.redraw()},getRadius:function(){return this._radius},setStyle:function(n){var a=n&&n.radius||this._radius;return vr.prototype.setStyle.call(this,n),this.setRadius(a),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var n=this._radius,a=this._radiusY||n,c=this._clickTolerance(),f=[n+c,a+c];this._pxBounds=new xe(this._point.subtract(f),this._point.add(f))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(n){return n.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function kl(n,a){return new fa(n,a)}var pa=fa.extend({initialize:function(n,a,c){if(typeof a=="number"&&(a=i({},c,{radius:a})),H(this,a),this._latlng=Ce(n),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(n){return this._mRadius=n,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var n=[this._radius,this._radiusY||this._radius];return new lt(this._map.layerPointToLatLng(this._point.subtract(n)),this._map.layerPointToLatLng(this._point.add(n)))},setStyle:vr.prototype.setStyle,_project:function(){var n=this._latlng.lng,a=this._latlng.lat,c=this._map,f=c.options.crs;if(f.distance===we.distance){var g=Math.PI/180,x=this._mRadius/we.R/g,T=c.project([a+x,n]),D=c.project([a-x,n]),$=T.add(D).divideBy(2),Y=c.unproject($).lat,ue=Math.acos((Math.cos(x*g)-Math.sin(a*g)*Math.sin(Y*g))/(Math.cos(a*g)*Math.cos(Y*g)))/g;(isNaN(ue)||ue===0)&&(ue=x/Math.cos(Math.PI/180*a)),this._point=$.subtract(c.getPixelOrigin()),this._radius=isNaN(ue)?0:$.x-c.project([Y,n-ue]).x,this._radiusY=$.y-T.y}else{var Fe=f.unproject(f.project(this._latlng).subtract([this._mRadius,0]));this._point=c.latLngToLayerPoint(this._latlng),this._radius=this._point.x-c.latLngToLayerPoint(Fe).x}this._updateBounds()}});function yr(n,a,c){return new pa(n,a,c)}var xi=vr.extend({options:{smoothFactor:1,noClip:!1},initialize:function(n,a){H(this,a),this._setLatLngs(n)},getLatLngs:function(){return this._latlngs},setLatLngs:function(n){return this._setLatLngs(n),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(n){for(var a=1/0,c=null,f=ds,g,x,T=0,D=this._parts.length;T<D;T++)for(var $=this._parts[T],Y=1,ue=$.length;Y<ue;Y++){g=$[Y-1],x=$[Y];var Fe=f(n,g,x,!0);Fe<a&&(a=Fe,c=f(n,g,x))}return c&&(c.distance=Math.sqrt(a)),c},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return ca(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(n,a){return a=a||this._defaultShape(),n=Ce(n),a.push(n),this._bounds.extend(n),this.redraw()},_setLatLngs:function(n){this._bounds=new lt,this._latlngs=this._convertLatLngs(n)},_defaultShape:function(){return ci(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(n){for(var a=[],c=ci(n),f=0,g=n.length;f<g;f++)c?(a[f]=Ce(n[f]),this._bounds.extend(a[f])):a[f]=this._convertLatLngs(n[f]);return a},_project:function(){var n=new xe;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,n),this._bounds.isValid()&&n.isValid()&&(this._rawPxBounds=n,this._updateBounds())},_updateBounds:function(){var n=this._clickTolerance(),a=new j(n,n);this._rawPxBounds&&(this._pxBounds=new xe([this._rawPxBounds.min.subtract(a),this._rawPxBounds.max.add(a)]))},_projectLatlngs:function(n,a,c){var f=n[0]instanceof Se,g=n.length,x,T;if(f){for(T=[],x=0;x<g;x++)T[x]=this._map.latLngToLayerPoint(n[x]),c.extend(T[x]);a.push(T)}else for(x=0;x<g;x++)this._projectLatlngs(n[x],a,c)},_clipPoints:function(){var n=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(n))){if(this.options.noClip){this._parts=this._rings;return}var a=this._parts,c,f,g,x,T,D,$;for(c=0,g=0,x=this._rings.length;c<x;c++)for($=this._rings[c],f=0,T=$.length;f<T-1;f++)D=lc($[f],$[f+1],n,f,!0),D&&(a[g]=a[g]||[],a[g].push(D[0]),(D[1]!==$[f+1]||f===T-2)&&(a[g].push(D[1]),g++))}},_simplifyPoints:function(){for(var n=this._parts,a=this.options.smoothFactor,c=0,f=n.length;c<f;c++)n[c]=It(n[c],a)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(n,a){var c,f,g,x,T,D,$=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(n))return!1;for(c=0,x=this._parts.length;c<x;c++)for(D=this._parts[c],f=0,T=D.length,g=T-1;f<T;g=f++)if(!(!a&&f===0)&&or(n,D[g],D[f])<=$)return!0;return!1}});function Jd(n,a){return new xi(n,a)}xi._flat=Dl;var To=xi.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return rr(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(n){var a=xi.prototype._convertLatLngs.call(this,n),c=a.length;return c>=2&&a[0]instanceof Se&&a[0].equals(a[c-1])&&a.pop(),a},_setLatLngs:function(n){xi.prototype._setLatLngs.call(this,n),ci(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return ci(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var n=this._renderer._bounds,a=this.options.weight,c=new j(a,a);if(n=new xe(n.min.subtract(c),n.max.add(c)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(n))){if(this.options.noClip){this._parts=this._rings;return}for(var f=0,g=this._rings.length,x;f<g;f++)x=El(this._rings[f],n,!0),x.length&&this._parts.push(x)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(n){var a=!1,c,f,g,x,T,D,$,Y;if(!this._pxBounds||!this._pxBounds.contains(n))return!1;for(x=0,$=this._parts.length;x<$;x++)for(c=this._parts[x],T=0,Y=c.length,D=Y-1;T<Y;D=T++)f=c[T],g=c[D],f.y>n.y!=g.y>n.y&&n.x<(g.x-f.x)*(n.y-f.y)/(g.y-f.y)+f.x&&(a=!a);return a||xi.prototype._containsPoint.call(this,n,!0)}});function Qd(n,a){return new To(n,a)}var ti=Wi.extend({initialize:function(n,a){H(this,a),this._layers={},n&&this.addData(n)},addData:function(n){var a=de(n)?n:n.features,c,f,g;if(a){for(c=0,f=a.length;c<f;c++)g=a[c],(g.geometries||g.geometry||g.features||g.coordinates)&&this.addData(g);return this}var x=this.options;if(x.filter&&!x.filter(n))return this;var T=ni(n,x);return T?(T.feature=Oi(n),T.defaultOptions=T.options,this.resetStyle(T),x.onEachFeature&&x.onEachFeature(n,T),this.addLayer(T)):this},resetStyle:function(n){return n===void 0?this.eachLayer(this.resetStyle,this):(n.options=i({},n.defaultOptions),this._setLayerStyle(n,this.options.style),this)},setStyle:function(n){return this.eachLayer(function(a){this._setLayerStyle(a,n)},this)},_setLayerStyle:function(n,a){n.setStyle&&(typeof a=="function"&&(a=a(n.feature)),n.setStyle(a))}});function ni(n,a){var c=n.type==="Feature"?n.geometry:n,f=c?c.coordinates:null,g=[],x=a&&a.pointToLayer,T=a&&a.coordsToLatLng||$l,D,$,Y,ue;if(!f&&!c)return null;switch(c.type){case"Point":return D=T(f),ql(x,n,D,a);case"MultiPoint":for(Y=0,ue=f.length;Y<ue;Y++)D=T(f[Y]),g.push(ql(x,n,D,a));return new Wi(g);case"LineString":case"MultiLineString":return $=ma(f,c.type==="LineString"?0:1,T),new xi($,a);case"Polygon":case"MultiPolygon":return $=ma(f,c.type==="Polygon"?1:2,T),new To($,a);case"GeometryCollection":for(Y=0,ue=c.geometries.length;Y<ue;Y++){var Fe=ni({geometry:c.geometries[Y],type:"Feature",properties:n.properties},a);Fe&&g.push(Fe)}return new Wi(g);case"FeatureCollection":for(Y=0,ue=c.features.length;Y<ue;Y++){var Ue=ni(c.features[Y],a);Ue&&g.push(Ue)}return new Wi(g);default:throw new Error("Invalid GeoJSON object.")}}function ql(n,a,c,f){return n?n(a,c):new da(c,f&&f.markersInheritOptions&&f)}function $l(n){return new Se(n[1],n[0],n[2])}function ma(n,a,c){for(var f=[],g=0,x=n.length,T;g<x;g++)T=a?ma(n[g],a-1,c):(c||$l)(n[g]),f.push(T);return f}function Zl(n,a){return n=Ce(n),n.alt!==void 0?[z(n.lng,a),z(n.lat,a),z(n.alt,a)]:[z(n.lng,a),z(n.lat,a)]}function ga(n,a,c,f){for(var g=[],x=0,T=n.length;x<T;x++)g.push(a?ga(n[x],ci(n[x])?0:a-1,c,f):Zl(n[x],f));return!a&&c&&g.length>0&&g.push(g[0].slice()),g}function Ao(n,a){return n.feature?i({},n.feature,{geometry:a}):Oi(a)}function Oi(n){return n.type==="Feature"||n.type==="FeatureCollection"?n:{type:"Feature",properties:{},geometry:n}}var O={toGeoJSON:function(n){return Ao(this,{type:"Point",coordinates:Zl(this.getLatLng(),n)})}};da.include(O),pa.include(O),fa.include(O),xi.include({toGeoJSON:function(n){var a=!ci(this._latlngs),c=ga(this._latlngs,a?1:0,!1,n);return Ao(this,{type:(a?"Multi":"")+"LineString",coordinates:c})}}),To.include({toGeoJSON:function(n){var a=!ci(this._latlngs),c=a&&!ci(this._latlngs[0]),f=ga(this._latlngs,c?2:a?1:0,!0,n);return a||(f=[f]),Ao(this,{type:(c?"Multi":"")+"Polygon",coordinates:f})}}),_r.include({toMultiPoint:function(n){var a=[];return this.eachLayer(function(c){a.push(c.toGeoJSON(n).geometry.coordinates)}),Ao(this,{type:"MultiPoint",coordinates:a})},toGeoJSON:function(n){var a=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(a==="MultiPoint")return this.toMultiPoint(n);var c=a==="GeometryCollection",f=[];return this.eachLayer(function(g){if(g.toGeoJSON){var x=g.toGeoJSON(n);if(c)f.push(x.geometry);else{var T=Oi(x);T.type==="FeatureCollection"?f.push.apply(f,T.features):f.push(T)}}}),c?Ao(this,{geometries:f,type:"GeometryCollection"}):{type:"FeatureCollection",features:f}}});function W(n,a){return new ti(n,a)}var Z=W,he=jt.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(n,a,c){this._url=n,this._bounds=je(a),H(this,c)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(qe(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){Mt(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(n){return this.options.opacity=n,this._image&&this._updateOpacity(),this},setStyle:function(n){return n.opacity&&this.setOpacity(n.opacity),this},bringToFront:function(){return this._map&&Kr(this._image),this},bringToBack:function(){return this._map&&mr(this._image),this},setUrl:function(n){return this._url=n,this._image&&(this._image.src=n),this},setBounds:function(n){return this._bounds=je(n),this._map&&this._reset(),this},getEvents:function(){var n={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(n.zoomanim=this._animateZoom),n},setZIndex:function(n){return this.options.zIndex=n,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var n=this._url.tagName==="IMG",a=this._image=n?this._url:gt("img");if(qe(a,"leaflet-image-layer"),this._zoomAnimated&&qe(a,"leaflet-zoom-animated"),this.options.className&&qe(a,this.options.className),a.onselectstart=_,a.onmousemove=_,a.onload=s(this.fire,this,"load"),a.onerror=s(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(a.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),n){this._url=a.src;return}a.src=this._url,a.alt=this.options.alt},_animateZoom:function(n){var a=this._map.getZoomScale(n.zoom),c=this._map._latLngBoundsToNewLayerBounds(this._bounds,n.zoom,n.center).min;Yr(this._image,c,a)},_reset:function(){var n=this._image,a=new xe(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),c=a.getSize();tn(n,a.min),n.style.width=c.x+"px",n.style.height=c.y+"px"},_updateOpacity:function(){ai(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var n=this.options.errorOverlayUrl;n&&this._url!==n&&(this._url=n,this._image.src=n)},getCenter:function(){return this._bounds.getCenter()}}),Ne=function(n,a,c){return new he(n,a,c)},vt=he.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var n=this._url.tagName==="VIDEO",a=this._image=n?this._url:gt("video");if(qe(a,"leaflet-image-layer"),this._zoomAnimated&&qe(a,"leaflet-zoom-animated"),this.options.className&&qe(a,this.options.className),a.onselectstart=_,a.onmousemove=_,a.onloadeddata=s(this.fire,this,"load"),n){for(var c=a.getElementsByTagName("source"),f=[],g=0;g<c.length;g++)f.push(c[g].src);this._url=c.length>0?f:[a.src];return}de(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(a.style,"objectFit")&&(a.style.objectFit="fill"),a.autoplay=!!this.options.autoplay,a.loop=!!this.options.loop,a.muted=!!this.options.muted,a.playsInline=!!this.options.playsInline;for(var x=0;x<this._url.length;x++){var T=gt("source");T.src=this._url[x],a.appendChild(T)}}});function pn(n,a,c){return new vt(n,a,c)}var bt=he.extend({_initImage:function(){var n=this._image=this._url;qe(n,"leaflet-image-layer"),this._zoomAnimated&&qe(n,"leaflet-zoom-animated"),this.options.className&&qe(n,this.options.className),n.onselectstart=_,n.onmousemove=_}});function jl(n,a,c){return new bt(n,a,c)}var Vi=jt.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(n,a){n&&(n instanceof Se||de(n))?(this._latlng=Ce(n),H(this,a)):(H(this,n),this._source=a),this.options.content&&(this._content=this.options.content)},openOn:function(n){return n=arguments.length?n:this._source._map,n.hasLayer(this)||n.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(n){return this._map?this.close():(arguments.length?this._source=n:n=this._source,this._prepareOpen(),this.openOn(n._map)),this},onAdd:function(n){this._zoomAnimated=n._zoomAnimated,this._container||this._initLayout(),n._fadeAnimated&&ai(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),n._fadeAnimated&&ai(this._container,1),this.bringToFront(),this.options.interactive&&(qe(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(n){n._fadeAnimated?(ai(this._container,0),this._removeTimeout=setTimeout(s(Mt,void 0,this._container),200)):Mt(this._container),this.options.interactive&&(Dt(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(n){return this._latlng=Ce(n),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(n){return this._content=n,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var n={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(n.zoomanim=this._animateZoom),n},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&Kr(this._container),this},bringToBack:function(){return this._map&&mr(this._container),this},_prepareOpen:function(n){var a=this._source;if(!a._map)return!1;if(a instanceof Wi){a=null;var c=this._source._layers;for(var f in c)if(c[f]._map){a=c[f];break}if(!a)return!1;this._source=a}if(!n)if(a.getCenter)n=a.getCenter();else if(a.getLatLng)n=a.getLatLng();else if(a.getBounds)n=a.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(n),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var n=this._contentNode,a=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof a=="string")n.innerHTML=a;else{for(;n.hasChildNodes();)n.removeChild(n.firstChild);n.appendChild(a)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var n=this._map.latLngToLayerPoint(this._latlng),a=ce(this.options.offset),c=this._getAnchor();this._zoomAnimated?tn(this._container,n.add(c)):a=a.add(n).add(c);var f=this._containerBottom=-a.y,g=this._containerLeft=-Math.round(this._containerWidth/2)+a.x;this._container.style.bottom=f+"px",this._container.style.left=g+"px"}},_getAnchor:function(){return[0,0]}});ut.include({_initOverlay:function(n,a,c,f){var g=a;return g instanceof n||(g=new n(f).setContent(a)),c&&g.setLatLng(c),g}}),jt.include({_initOverlay:function(n,a,c,f){var g=c;return g instanceof n?(H(g,f),g._source=this):(g=a&&!f?a:new n(f,this),g.setContent(c)),g}});var Gn=Vi.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(n){return n=arguments.length?n:this._source._map,!n.hasLayer(this)&&n._popup&&n._popup.options.autoClose&&n.removeLayer(n._popup),n._popup=this,Vi.prototype.openOn.call(this,n)},onAdd:function(n){Vi.prototype.onAdd.call(this,n),n.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof vr||this._source.on("preclick",Qr))},onRemove:function(n){Vi.prototype.onRemove.call(this,n),n.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof vr||this._source.off("preclick",Qr))},getEvents:function(){var n=Vi.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(n.preclick=this.close),this.options.keepInView&&(n.moveend=this._adjustPan),n},_initLayout:function(){var n="leaflet-popup",a=this._container=gt("div",n+" "+(this.options.className||"")+" leaflet-zoom-animated"),c=this._wrapper=gt("div",n+"-content-wrapper",a);if(this._contentNode=gt("div",n+"-content",c),us(a),Fl(this._contentNode),Be(a,"contextmenu",Qr),this._tipContainer=gt("div",n+"-tip-container",a),this._tip=gt("div",n+"-tip",this._tipContainer),this.options.closeButton){var f=this._closeButton=gt("a",n+"-close-button",a);f.setAttribute("role","button"),f.setAttribute("aria-label","Close popup"),f.href="#close",f.innerHTML='<span aria-hidden="true">&#215;</span>',Be(f,"click",function(g){$e(g),this.close()},this)}},_updateLayout:function(){var n=this._contentNode,a=n.style;a.width="",a.whiteSpace="nowrap";var c=n.offsetWidth;c=Math.min(c,this.options.maxWidth),c=Math.max(c,this.options.minWidth),a.width=c+1+"px",a.whiteSpace="",a.height="";var f=n.offsetHeight,g=this.options.maxHeight,x="leaflet-popup-scrolled";g&&f>g?(a.height=g+"px",qe(n,x)):Dt(n,x),this._containerWidth=this._container.offsetWidth},_animateZoom:function(n){var a=this._map._latLngToNewLayerPoint(this._latlng,n.zoom,n.center),c=this._getAnchor();tn(this._container,a.add(c))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var n=this._map,a=parseInt(os(this._container,"marginBottom"),10)||0,c=this._container.offsetHeight+a,f=this._containerWidth,g=new j(this._containerLeft,-c-this._containerBottom);g._add(ir(this._container));var x=n.layerPointToContainerPoint(g),T=ce(this.options.autoPanPadding),D=ce(this.options.autoPanPaddingTopLeft||T),$=ce(this.options.autoPanPaddingBottomRight||T),Y=n.getSize(),ue=0,Fe=0;x.x+f+$.x>Y.x&&(ue=x.x+f-Y.x+$.x),x.x-ue-D.x<0&&(ue=x.x-D.x),x.y+c+$.y>Y.y&&(Fe=x.y+c-Y.y+$.y),x.y-Fe-D.y<0&&(Fe=x.y-D.y),(ue||Fe)&&(this.options.keepInView&&(this._autopanning=!0),n.fire("autopanstart").panBy([ue,Fe]))}},_getAnchor:function(){return ce(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),_a=function(n,a){return new Gn(n,a)};ut.mergeOptions({closePopupOnClick:!0}),ut.include({openPopup:function(n,a,c){return this._initOverlay(Gn,n,a,c).openOn(this),this},closePopup:function(n){return n=arguments.length?n:this._popup,n&&n.close(),this}}),jt.include({bindPopup:function(n,a){return this._popup=this._initOverlay(Gn,this._popup,n,a),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(n){return this._popup&&(this instanceof Wi||(this._popup._source=this),this._popup._prepareOpen(n||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(n){return this._popup&&this._popup.setContent(n),this},getPopup:function(){return this._popup},_openPopup:function(n){if(!(!this._popup||!this._map)){_t(n);var a=n.layer||n.target;if(this._popup._source===a&&!(a instanceof vr)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(n.latlng);return}this._popup._source=a,this.openPopup(n.latlng)}},_movePopup:function(n){this._popup.setLatLng(n.latlng)},_onKeyPress:function(n){n.originalEvent.keyCode===13&&this._openPopup(n)}});var va=Vi.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(n){Vi.prototype.onAdd.call(this,n),this.setOpacity(this.options.opacity),n.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(n){Vi.prototype.onRemove.call(this,n),n.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var n=Vi.prototype.getEvents.call(this);return this.options.permanent||(n.preclick=this.close),n},_initLayout:function(){var n="leaflet-tooltip",a=n+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=gt("div",a),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+d(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(n){var a,c,f=this._map,g=this._container,x=f.latLngToContainerPoint(f.getCenter()),T=f.layerPointToContainerPoint(n),D=this.options.direction,$=g.offsetWidth,Y=g.offsetHeight,ue=ce(this.options.offset),Fe=this._getAnchor();D==="top"?(a=$/2,c=Y):D==="bottom"?(a=$/2,c=0):D==="center"?(a=$/2,c=Y/2):D==="right"?(a=0,c=Y/2):D==="left"?(a=$,c=Y/2):T.x<x.x?(D="right",a=0,c=Y/2):(D="left",a=$+(ue.x+Fe.x)*2,c=Y/2),n=n.subtract(ce(a,c,!0)).add(ue).add(Fe),Dt(g,"leaflet-tooltip-right"),Dt(g,"leaflet-tooltip-left"),Dt(g,"leaflet-tooltip-top"),Dt(g,"leaflet-tooltip-bottom"),qe(g,"leaflet-tooltip-"+D),tn(g,n)},_updatePosition:function(){var n=this._map.latLngToLayerPoint(this._latlng);this._setPosition(n)},setOpacity:function(n){this.options.opacity=n,this._container&&ai(this._container,n)},_animateZoom:function(n){var a=this._map._latLngToNewLayerPoint(this._latlng,n.zoom,n.center);this._setPosition(a)},_getAnchor:function(){return ce(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),Po=function(n,a){return new va(n,a)};ut.include({openTooltip:function(n,a,c){return this._initOverlay(va,n,a,c).openOn(this),this},closeTooltip:function(n){return n.close(),this}}),jt.include({bindTooltip:function(n,a){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(va,this._tooltip,n,a),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(n){if(!(!n&&this._tooltipHandlersAdded)){var a=n?"off":"on",c={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?c.add=this._openTooltip:(c.mouseover=this._openTooltip,c.mouseout=this.closeTooltip,c.click=this._openTooltip,this._map?this._addFocusListeners():c.add=this._addFocusListeners),this._tooltip.options.sticky&&(c.mousemove=this._moveTooltip),this[a](c),this._tooltipHandlersAdded=!n}},openTooltip:function(n){return this._tooltip&&(this instanceof Wi||(this._tooltip._source=this),this._tooltip._prepareOpen(n)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(n){return this._tooltip&&this._tooltip.setContent(n),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(n){var a=typeof n.getElement=="function"&&n.getElement();a&&(Be(a,"focus",function(){this._tooltip._source=n,this.openTooltip()},this),Be(a,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(n){var a=typeof n.getElement=="function"&&n.getElement();a&&a.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(n){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var a=this;this._map.once("moveend",function(){a._openOnceFlag=!1,a._openTooltip(n)});return}this._tooltip._source=n.layer||n.target,this.openTooltip(this._tooltip.options.sticky?n.latlng:void 0)}},_moveTooltip:function(n){var a=n.latlng,c,f;this._tooltip.options.sticky&&n.originalEvent&&(c=this._map.mouseEventToContainerPoint(n.originalEvent),f=this._map.containerPointToLayerPoint(c),a=this._map.layerPointToLatLng(f)),this._tooltip.setLatLng(a)}});var ms=Fo.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(n){var a=n&&n.tagName==="DIV"?n:document.createElement("div"),c=this.options;if(c.html instanceof Element?(ss(a),a.appendChild(c.html)):a.innerHTML=c.html!==!1?c.html:"",c.bgPos){var f=ce(c.bgPos);a.style.backgroundPosition=-f.x+"px "+-f.y+"px"}return this._setIconStyles(a,"icon"),a},createShadow:function(){return null}});function ya(n){return new ms(n)}Fo.Default=ps;var dt=jt.extend({options:{tileSize:256,opacity:1,updateWhenIdle:ye.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(n){H(this,n)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(n){n._addZoomLimit(this)},onRemove:function(n){this._removeAllTiles(),Mt(this._container),n._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(Kr(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(mr(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(n){return this.options.opacity=n,this._updateOpacity(),this},setZIndex:function(n){return this.options.zIndex=n,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var n=this._clampZoom(this._map.getZoom());n!==this._tileZoom&&(this._tileZoom=n,this._updateLevels()),this._update()}return this},getEvents:function(){var n={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=m(this._onMoveEnd,this.options.updateInterval,this)),n.move=this._onMove),this._zoomAnimated&&(n.zoomanim=this._animateZoom),n},createTile:function(){return document.createElement("div")},getTileSize:function(){var n=this.options.tileSize;return n instanceof j?n:new j(n,n)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(n){for(var a=this.getPane().children,c=-n(-1/0,1/0),f=0,g=a.length,x;f<g;f++)x=a[f].style.zIndex,a[f]!==this._container&&x&&(c=n(c,+x));isFinite(c)&&(this.options.zIndex=c+n(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!ye.ielt9){ai(this._container,this.options.opacity);var n=+new Date,a=!1,c=!1;for(var f in this._tiles){var g=this._tiles[f];if(!(!g.current||!g.loaded)){var x=Math.min(1,(n-g.loaded)/200);ai(g.el,x),x<1?a=!0:(g.active?c=!0:this._onOpaqueTile(g),g.active=!0)}}c&&!this._noPrune&&this._pruneTiles(),a&&(X(this._fadeFrame),this._fadeFrame=R(this._updateOpacity,this))}},_onOpaqueTile:_,_initContainer:function(){this._container||(this._container=gt("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var n=this._tileZoom,a=this.options.maxZoom;if(n!==void 0){for(var c in this._levels)c=Number(c),this._levels[c].el.children.length||c===n?(this._levels[c].el.style.zIndex=a-Math.abs(n-c),this._onUpdateLevel(c)):(Mt(this._levels[c].el),this._removeTilesAtZoom(c),this._onRemoveLevel(c),delete this._levels[c]);var f=this._levels[n],g=this._map;return f||(f=this._levels[n]={},f.el=gt("div","leaflet-tile-container leaflet-zoom-animated",this._container),f.el.style.zIndex=a,f.origin=g.project(g.unproject(g.getPixelOrigin()),n).round(),f.zoom=n,this._setZoomTransform(f,g.getCenter(),g.getZoom()),_(f.el.offsetWidth),this._onCreateLevel(f)),this._level=f,f}},_onUpdateLevel:_,_onRemoveLevel:_,_onCreateLevel:_,_pruneTiles:function(){if(this._map){var n,a,c=this._map.getZoom();if(c>this.options.maxZoom||c<this.options.minZoom){this._removeAllTiles();return}for(n in this._tiles)a=this._tiles[n],a.retain=a.current;for(n in this._tiles)if(a=this._tiles[n],a.current&&!a.active){var f=a.coords;this._retainParent(f.x,f.y,f.z,f.z-5)||this._retainChildren(f.x,f.y,f.z,f.z+2)}for(n in this._tiles)this._tiles[n].retain||this._removeTile(n)}},_removeTilesAtZoom:function(n){for(var a in this._tiles)this._tiles[a].coords.z===n&&this._removeTile(a)},_removeAllTiles:function(){for(var n in this._tiles)this._removeTile(n)},_invalidateAll:function(){for(var n in this._levels)Mt(this._levels[n].el),this._onRemoveLevel(Number(n)),delete this._levels[n];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(n,a,c,f){var g=Math.floor(n/2),x=Math.floor(a/2),T=c-1,D=new j(+g,+x);D.z=+T;var $=this._tileCoordsToKey(D),Y=this._tiles[$];return Y&&Y.active?(Y.retain=!0,!0):(Y&&Y.loaded&&(Y.retain=!0),T>f?this._retainParent(g,x,T,f):!1)},_retainChildren:function(n,a,c,f){for(var g=2*n;g<2*n+2;g++)for(var x=2*a;x<2*a+2;x++){var T=new j(g,x);T.z=c+1;var D=this._tileCoordsToKey(T),$=this._tiles[D];if($&&$.active){$.retain=!0;continue}else $&&$.loaded&&($.retain=!0);c+1<f&&this._retainChildren(g,x,c+1,f)}},_resetView:function(n){var a=n&&(n.pinch||n.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),a,a)},_animateZoom:function(n){this._setView(n.center,n.zoom,!0,n.noUpdate)},_clampZoom:function(n){var a=this.options;return a.minNativeZoom!==void 0&&n<a.minNativeZoom?a.minNativeZoom:a.maxNativeZoom!==void 0&&a.maxNativeZoom<n?a.maxNativeZoom:n},_setView:function(n,a,c,f){var g=Math.round(a);this.options.maxZoom!==void 0&&g>this.options.maxZoom||this.options.minZoom!==void 0&&g<this.options.minZoom?g=void 0:g=this._clampZoom(g);var x=this.options.updateWhenZooming&&g!==this._tileZoom;(!f||x)&&(this._tileZoom=g,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),g!==void 0&&this._update(n),c||this._pruneTiles(),this._noPrune=!!c),this._setZoomTransforms(n,a)},_setZoomTransforms:function(n,a){for(var c in this._levels)this._setZoomTransform(this._levels[c],n,a)},_setZoomTransform:function(n,a,c){var f=this._map.getZoomScale(c,n.zoom),g=n.origin.multiplyBy(f).subtract(this._map._getNewPixelOrigin(a,c)).round();ye.any3d?Yr(n.el,g,f):tn(n.el,g)},_resetGrid:function(){var n=this._map,a=n.options.crs,c=this._tileSize=this.getTileSize(),f=this._tileZoom,g=this._map.getPixelWorldBounds(this._tileZoom);g&&(this._globalTileRange=this._pxBoundsToTileRange(g)),this._wrapX=a.wrapLng&&!this.options.noWrap&&[Math.floor(n.project([0,a.wrapLng[0]],f).x/c.x),Math.ceil(n.project([0,a.wrapLng[1]],f).x/c.y)],this._wrapY=a.wrapLat&&!this.options.noWrap&&[Math.floor(n.project([a.wrapLat[0],0],f).y/c.x),Math.ceil(n.project([a.wrapLat[1],0],f).y/c.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(n){var a=this._map,c=a._animatingZoom?Math.max(a._animateToZoom,a.getZoom()):a.getZoom(),f=a.getZoomScale(c,this._tileZoom),g=a.project(n,this._tileZoom).floor(),x=a.getSize().divideBy(f*2);return new xe(g.subtract(x),g.add(x))},_update:function(n){var a=this._map;if(a){var c=this._clampZoom(a.getZoom());if(n===void 0&&(n=a.getCenter()),this._tileZoom!==void 0){var f=this._getTiledPixelBounds(n),g=this._pxBoundsToTileRange(f),x=g.getCenter(),T=[],D=this.options.keepBuffer,$=new xe(g.getBottomLeft().subtract([D,-D]),g.getTopRight().add([D,-D]));if(!(isFinite(g.min.x)&&isFinite(g.min.y)&&isFinite(g.max.x)&&isFinite(g.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var Y in this._tiles){var ue=this._tiles[Y].coords;(ue.z!==this._tileZoom||!$.contains(new j(ue.x,ue.y)))&&(this._tiles[Y].current=!1)}if(Math.abs(c-this._tileZoom)>1){this._setView(n,c);return}for(var Fe=g.min.y;Fe<=g.max.y;Fe++)for(var Ue=g.min.x;Ue<=g.max.x;Ue++){var sn=new j(Ue,Fe);if(sn.z=this._tileZoom,!!this._isValidTile(sn)){var Gt=this._tiles[this._tileCoordsToKey(sn)];Gt?Gt.current=!0:T.push(sn)}}if(T.sort(function(Nn,Mi){return Nn.distanceTo(x)-Mi.distanceTo(x)}),T.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var jn=document.createDocumentFragment();for(Ue=0;Ue<T.length;Ue++)this._addTile(T[Ue],jn);this._level.el.appendChild(jn)}}}},_isValidTile:function(n){var a=this._map.options.crs;if(!a.infinite){var c=this._globalTileRange;if(!a.wrapLng&&(n.x<c.min.x||n.x>c.max.x)||!a.wrapLat&&(n.y<c.min.y||n.y>c.max.y))return!1}if(!this.options.bounds)return!0;var f=this._tileCoordsToBounds(n);return je(this.options.bounds).overlaps(f)},_keyToBounds:function(n){return this._tileCoordsToBounds(this._keyToTileCoords(n))},_tileCoordsToNwSe:function(n){var a=this._map,c=this.getTileSize(),f=n.scaleBy(c),g=f.add(c),x=a.unproject(f,n.z),T=a.unproject(g,n.z);return[x,T]},_tileCoordsToBounds:function(n){var a=this._tileCoordsToNwSe(n),c=new lt(a[0],a[1]);return this.options.noWrap||(c=this._map.wrapLatLngBounds(c)),c},_tileCoordsToKey:function(n){return n.x+":"+n.y+":"+n.z},_keyToTileCoords:function(n){var a=n.split(":"),c=new j(+a[0],+a[1]);return c.z=+a[2],c},_removeTile:function(n){var a=this._tiles[n];a&&(Mt(a.el),delete this._tiles[n],this.fire("tileunload",{tile:a.el,coords:this._keyToTileCoords(n)}))},_initTile:function(n){qe(n,"leaflet-tile");var a=this.getTileSize();n.style.width=a.x+"px",n.style.height=a.y+"px",n.onselectstart=_,n.onmousemove=_,ye.ielt9&&this.options.opacity<1&&ai(n,this.options.opacity)},_addTile:function(n,a){var c=this._getTilePos(n),f=this._tileCoordsToKey(n),g=this.createTile(this._wrapCoords(n),s(this._tileReady,this,n));this._initTile(g),this.createTile.length<2&&R(s(this._tileReady,this,n,null,g)),tn(g,c),this._tiles[f]={el:g,coords:n,current:!0},a.appendChild(g),this.fire("tileloadstart",{tile:g,coords:n})},_tileReady:function(n,a,c){a&&this.fire("tileerror",{error:a,tile:c,coords:n});var f=this._tileCoordsToKey(n);c=this._tiles[f],c&&(c.loaded=+new Date,this._map._fadeAnimated?(ai(c.el,0),X(this._fadeFrame),this._fadeFrame=R(this._updateOpacity,this)):(c.active=!0,this._pruneTiles()),a||(qe(c.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:c.el,coords:n})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),ye.ielt9||!this._map._fadeAnimated?R(this._pruneTiles,this):setTimeout(s(this._pruneTiles,this),250)))},_getTilePos:function(n){return n.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(n){var a=new j(this._wrapX?v(n.x,this._wrapX):n.x,this._wrapY?v(n.y,this._wrapY):n.y);return a.z=n.z,a},_pxBoundsToTileRange:function(n){var a=this.getTileSize();return new xe(n.min.unscaleBy(a).floor(),n.max.unscaleBy(a).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var n in this._tiles)if(!this._tiles[n].loaded)return!1;return!0}});function Xd(n){return new dt(n)}var Xr=dt.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(n,a){this._url=n,a=H(this,a),a.detectRetina&&ye.retina&&a.maxZoom>0?(a.tileSize=Math.floor(a.tileSize/2),a.zoomReverse?(a.zoomOffset--,a.minZoom=Math.min(a.maxZoom,a.minZoom+1)):(a.zoomOffset++,a.maxZoom=Math.max(a.minZoom,a.maxZoom-1)),a.minZoom=Math.max(0,a.minZoom)):a.zoomReverse?a.minZoom=Math.min(a.maxZoom,a.minZoom):a.maxZoom=Math.max(a.minZoom,a.maxZoom),typeof a.subdomains=="string"&&(a.subdomains=a.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(n,a){return this._url===n&&a===void 0&&(a=!0),this._url=n,a||this.redraw(),this},createTile:function(n,a){var c=document.createElement("img");return Be(c,"load",s(this._tileOnLoad,this,a,c)),Be(c,"error",s(this._tileOnError,this,a,c)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(c.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(c.referrerPolicy=this.options.referrerPolicy),c.alt="",c.src=this.getTileUrl(n),c},getTileUrl:function(n){var a={r:ye.retina?"@2x":"",s:this._getSubdomain(n),x:n.x,y:n.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var c=this._globalTileRange.max.y-n.y;this.options.tms&&(a.y=c),a["-y"]=c}return te(this._url,i(a,this.options))},_tileOnLoad:function(n,a){ye.ielt9?setTimeout(s(n,this,null,a),0):n(null,a)},_tileOnError:function(n,a,c){var f=this.options.errorTileUrl;f&&a.getAttribute("src")!==f&&(a.src=f),n(c,a)},_onTileRemove:function(n){n.tile.onload=null},_getZoomForUrl:function(){var n=this._tileZoom,a=this.options.maxZoom,c=this.options.zoomReverse,f=this.options.zoomOffset;return c&&(n=a-n),n+f},_getSubdomain:function(n){var a=Math.abs(n.x+n.y)%this.options.subdomains.length;return this.options.subdomains[a]},_abortLoading:function(){var n,a;for(n in this._tiles)if(this._tiles[n].coords.z!==this._tileZoom&&(a=this._tiles[n].el,a.onload=_,a.onerror=_,!a.complete)){a.src=Ve;var c=this._tiles[n].coords;Mt(a),delete this._tiles[n],this.fire("tileabort",{tile:a,coords:c})}},_removeTile:function(n){var a=this._tiles[n];if(a)return a.el.setAttribute("src",Ve),dt.prototype._removeTile.call(this,n)},_tileReady:function(n,a,c){if(!(!this._map||c&&c.getAttribute("src")===Ve))return dt.prototype._tileReady.call(this,n,a,c)}});function gs(n,a){return new Xr(n,a)}var fc=Xr.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(n,a){this._url=n;var c=i({},this.defaultWmsParams);for(var f in a)f in this.options||(c[f]=a[f]);a=H(this,a);var g=a.detectRetina&&ye.retina?2:1,x=this.getTileSize();c.width=x.x*g,c.height=x.y*g,this.wmsParams=c},onAdd:function(n){this._crs=this.options.crs||n.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var a=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[a]=this._crs.code,Xr.prototype.onAdd.call(this,n)},getTileUrl:function(n){var a=this._tileCoordsToNwSe(n),c=this._crs,f=Ke(c.project(a[0]),c.project(a[1])),g=f.min,x=f.max,T=(this._wmsVersion>=1.3&&this._crs===uc?[g.y,g.x,x.y,x.x]:[g.x,g.y,x.x,x.y]).join(","),D=Xr.prototype.getTileUrl.call(this,n);return D+k(this.wmsParams,D,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+T},setParams:function(n,a){return i(this.wmsParams,n),a||this.redraw(),this}});function ef(n,a){return new fc(n,a)}Xr.WMS=fc,gs.wms=ef;var sr=jt.extend({options:{padding:.1},initialize:function(n){H(this,n),d(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),qe(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var n={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(n.zoomanim=this._onAnimZoom),n},_onAnimZoom:function(n){this._updateTransform(n.center,n.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(n,a){var c=this._map.getZoomScale(a,this._zoom),f=this._map.getSize().multiplyBy(.5+this.options.padding),g=this._map.project(this._center,a),x=f.multiplyBy(-c).add(g).subtract(this._map._getNewPixelOrigin(n,a));ye.any3d?Yr(this._container,x,c):tn(this._container,x)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var n in this._layers)this._layers[n]._reset()},_onZoomEnd:function(){for(var n in this._layers)this._layers[n]._project()},_updatePaths:function(){for(var n in this._layers)this._layers[n]._update()},_update:function(){var n=this.options.padding,a=this._map.getSize(),c=this._map.containerPointToLayerPoint(a.multiplyBy(-n)).round();this._bounds=new xe(c,c.add(a.multiplyBy(1+n*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),_s=sr.extend({options:{tolerance:0},getEvents:function(){var n=sr.prototype.getEvents.call(this);return n.viewprereset=this._onViewPreReset,n},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){sr.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var n=this._container=document.createElement("canvas");Be(n,"mousemove",this._onMouseMove,this),Be(n,"click dblclick mousedown mouseup contextmenu",this._onClick,this),Be(n,"mouseout",this._handleMouseOut,this),n._leaflet_disable_events=!0,this._ctx=n.getContext("2d")},_destroyContainer:function(){X(this._redrawRequest),delete this._ctx,Mt(this._container),Pt(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var n;this._redrawBounds=null;for(var a in this._layers)n=this._layers[a],n._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){sr.prototype._update.call(this);var n=this._bounds,a=this._container,c=n.getSize(),f=ye.retina?2:1;tn(a,n.min),a.width=f*c.x,a.height=f*c.y,a.style.width=c.x+"px",a.style.height=c.y+"px",ye.retina&&this._ctx.scale(2,2),this._ctx.translate(-n.min.x,-n.min.y),this.fire("update")}},_reset:function(){sr.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(n){this._updateDashArray(n),this._layers[d(n)]=n;var a=n._order={layer:n,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=a),this._drawLast=a,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(n){this._requestRedraw(n)},_removePath:function(n){var a=n._order,c=a.next,f=a.prev;c?c.prev=f:this._drawLast=f,f?f.next=c:this._drawFirst=c,delete n._order,delete this._layers[d(n)],this._requestRedraw(n)},_updatePath:function(n){this._extendRedrawBounds(n),n._project(),n._update(),this._requestRedraw(n)},_updateStyle:function(n){this._updateDashArray(n),this._requestRedraw(n)},_updateDashArray:function(n){if(typeof n.options.dashArray=="string"){var a=n.options.dashArray.split(/[, ]+/),c=[],f,g;for(g=0;g<a.length;g++){if(f=Number(a[g]),isNaN(f))return;c.push(f)}n.options._dashArray=c}else n.options._dashArray=n.options.dashArray},_requestRedraw:function(n){this._map&&(this._extendRedrawBounds(n),this._redrawRequest=this._redrawRequest||R(this._redraw,this))},_extendRedrawBounds:function(n){if(n._pxBounds){var a=(n.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new xe,this._redrawBounds.extend(n._pxBounds.min.subtract([a,a])),this._redrawBounds.extend(n._pxBounds.max.add([a,a]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var n=this._redrawBounds;if(n){var a=n.getSize();this._ctx.clearRect(n.min.x,n.min.y,a.x,a.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var n,a=this._redrawBounds;if(this._ctx.save(),a){var c=a.getSize();this._ctx.beginPath(),this._ctx.rect(a.min.x,a.min.y,c.x,c.y),this._ctx.clip()}this._drawing=!0;for(var f=this._drawFirst;f;f=f.next)n=f.layer,(!a||n._pxBounds&&n._pxBounds.intersects(a))&&n._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(n,a){if(this._drawing){var c,f,g,x,T=n._parts,D=T.length,$=this._ctx;if(D){for($.beginPath(),c=0;c<D;c++){for(f=0,g=T[c].length;f<g;f++)x=T[c][f],$[f?"lineTo":"moveTo"](x.x,x.y);a&&$.closePath()}this._fillStroke($,n)}}},_updateCircle:function(n){if(!(!this._drawing||n._empty())){var a=n._point,c=this._ctx,f=Math.max(Math.round(n._radius),1),g=(Math.max(Math.round(n._radiusY),1)||f)/f;g!==1&&(c.save(),c.scale(1,g)),c.beginPath(),c.arc(a.x,a.y/g,f,0,Math.PI*2,!1),g!==1&&c.restore(),this._fillStroke(c,n)}},_fillStroke:function(n,a){var c=a.options;c.fill&&(n.globalAlpha=c.fillOpacity,n.fillStyle=c.fillColor||c.color,n.fill(c.fillRule||"evenodd")),c.stroke&&c.weight!==0&&(n.setLineDash&&n.setLineDash(a.options&&a.options._dashArray||[]),n.globalAlpha=c.opacity,n.lineWidth=c.weight,n.strokeStyle=c.color,n.lineCap=c.lineCap,n.lineJoin=c.lineJoin,n.stroke())},_onClick:function(n){for(var a=this._map.mouseEventToLayerPoint(n),c,f,g=this._drawFirst;g;g=g.next)c=g.layer,c.options.interactive&&c._containsPoint(a)&&(!(n.type==="click"||n.type==="preclick")||!this._map._draggableMoved(c))&&(f=c);this._fireEvent(f?[f]:!1,n)},_onMouseMove:function(n){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var a=this._map.mouseEventToLayerPoint(n);this._handleMouseHover(n,a)}},_handleMouseOut:function(n){var a=this._hoveredLayer;a&&(Dt(this._container,"leaflet-interactive"),this._fireEvent([a],n,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(n,a){if(!this._mouseHoverThrottled){for(var c,f,g=this._drawFirst;g;g=g.next)c=g.layer,c.options.interactive&&c._containsPoint(a)&&(f=c);f!==this._hoveredLayer&&(this._handleMouseOut(n),f&&(qe(this._container,"leaflet-interactive"),this._fireEvent([f],n,"mouseover"),this._hoveredLayer=f)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,n),this._mouseHoverThrottled=!0,setTimeout(s(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(n,a,c){this._map._fireDOMEvent(a,c||a.type,n)},_bringToFront:function(n){var a=n._order;if(a){var c=a.next,f=a.prev;if(c)c.prev=f;else return;f?f.next=c:c&&(this._drawFirst=c),a.prev=this._drawLast,this._drawLast.next=a,a.next=null,this._drawLast=a,this._requestRedraw(n)}},_bringToBack:function(n){var a=n._order;if(a){var c=a.next,f=a.prev;if(f)f.next=c;else return;c?c.prev=f:f&&(this._drawLast=f),a.prev=null,a.next=this._drawFirst,this._drawFirst.prev=a,this._drawFirst=a,this._requestRedraw(n)}}});function ar(n){return ye.canvas?new _s(n):null}var xr=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(n){return document.createElement("<lvml:"+n+' class="lvml">')}}catch{}return function(n){return document.createElement("<"+n+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}(),pc={_initContainer:function(){this._container=gt("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(sr.prototype._update.call(this),this.fire("update"))},_initPath:function(n){var a=n._container=xr("shape");qe(a,"leaflet-vml-shape "+(this.options.className||"")),a.coordsize="1 1",n._path=xr("path"),a.appendChild(n._path),this._updateStyle(n),this._layers[d(n)]=n},_addPath:function(n){var a=n._container;this._container.appendChild(a),n.options.interactive&&n.addInteractiveTarget(a)},_removePath:function(n){var a=n._container;Mt(a),n.removeInteractiveTarget(a),delete this._layers[d(n)]},_updateStyle:function(n){var a=n._stroke,c=n._fill,f=n.options,g=n._container;g.stroked=!!f.stroke,g.filled=!!f.fill,f.stroke?(a||(a=n._stroke=xr("stroke")),g.appendChild(a),a.weight=f.weight+"px",a.color=f.color,a.opacity=f.opacity,f.dashArray?a.dashStyle=de(f.dashArray)?f.dashArray.join(" "):f.dashArray.replace(/( *, *)/g," "):a.dashStyle="",a.endcap=f.lineCap.replace("butt","flat"),a.joinstyle=f.lineJoin):a&&(g.removeChild(a),n._stroke=null),f.fill?(c||(c=n._fill=xr("fill")),g.appendChild(c),c.color=f.fillColor||f.color,c.opacity=f.fillOpacity):c&&(g.removeChild(c),n._fill=null)},_updateCircle:function(n){var a=n._point.round(),c=Math.round(n._radius),f=Math.round(n._radiusY||c);this._setPath(n,n._empty()?"M0 0":"AL "+a.x+","+a.y+" "+c+","+f+" 0,"+65535*360)},_setPath:function(n,a){n._path.v=a},_bringToFront:function(n){Kr(n._container)},_bringToBack:function(n){mr(n._container)}},eo=ye.vml?xr:ie,Io=sr.extend({_initContainer:function(){this._container=eo("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=eo("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){Mt(this._container),Pt(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){sr.prototype._update.call(this);var n=this._bounds,a=n.getSize(),c=this._container;(!this._svgSize||!this._svgSize.equals(a))&&(this._svgSize=a,c.setAttribute("width",a.x),c.setAttribute("height",a.y)),tn(c,n.min),c.setAttribute("viewBox",[n.min.x,n.min.y,a.x,a.y].join(" ")),this.fire("update")}},_initPath:function(n){var a=n._path=eo("path");n.options.className&&qe(a,n.options.className),n.options.interactive&&qe(a,"leaflet-interactive"),this._updateStyle(n),this._layers[d(n)]=n},_addPath:function(n){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(n._path),n.addInteractiveTarget(n._path)},_removePath:function(n){Mt(n._path),n.removeInteractiveTarget(n._path),delete this._layers[d(n)]},_updatePath:function(n){n._project(),n._update()},_updateStyle:function(n){var a=n._path,c=n.options;a&&(c.stroke?(a.setAttribute("stroke",c.color),a.setAttribute("stroke-opacity",c.opacity),a.setAttribute("stroke-width",c.weight),a.setAttribute("stroke-linecap",c.lineCap),a.setAttribute("stroke-linejoin",c.lineJoin),c.dashArray?a.setAttribute("stroke-dasharray",c.dashArray):a.removeAttribute("stroke-dasharray"),c.dashOffset?a.setAttribute("stroke-dashoffset",c.dashOffset):a.removeAttribute("stroke-dashoffset")):a.setAttribute("stroke","none"),c.fill?(a.setAttribute("fill",c.fillColor||c.color),a.setAttribute("fill-opacity",c.fillOpacity),a.setAttribute("fill-rule",c.fillRule||"evenodd")):a.setAttribute("fill","none"))},_updatePoly:function(n,a){this._setPath(n,ze(n._parts,a))},_updateCircle:function(n){var a=n._point,c=Math.max(Math.round(n._radius),1),f=Math.max(Math.round(n._radiusY),1)||c,g="a"+c+","+f+" 0 1,0 ",x=n._empty()?"M0 0":"M"+(a.x-c)+","+a.y+g+c*2+",0 "+g+-c*2+",0 ";this._setPath(n,x)},_setPath:function(n,a){n._path.setAttribute("d",a)},_bringToFront:function(n){Kr(n._path)},_bringToBack:function(n){mr(n._path)}});ye.vml&&Io.include(pc);function Ul(n){return ye.svg||ye.vml?new Io(n):null}ut.include({getRenderer:function(n){var a=n.options.renderer||this._getPaneRenderer(n.options.pane)||this.options.renderer||this._renderer;return a||(a=this._renderer=this._createRenderer()),this.hasLayer(a)||this.addLayer(a),a},_getPaneRenderer:function(n){if(n==="overlayPane"||n===void 0)return!1;var a=this._paneRenderers[n];return a===void 0&&(a=this._createRenderer({pane:n}),this._paneRenderers[n]=a),a},_createRenderer:function(n){return this.options.preferCanvas&&ar(n)||Ul(n)}});var vs=To.extend({initialize:function(n,a){To.prototype.initialize.call(this,this._boundsToLatLngs(n),a)},setBounds:function(n){return this.setLatLngs(this._boundsToLatLngs(n))},_boundsToLatLngs:function(n){return n=je(n),[n.getSouthWest(),n.getNorthWest(),n.getNorthEast(),n.getSouthEast()]}});function mc(n,a){return new vs(n,a)}Io.create=eo,Io.pointsToPath=ze,ti.geometryToLayer=ni,ti.coordsToLatLng=$l,ti.coordsToLatLngs=ma,ti.latLngToCoords=Zl,ti.latLngsToCoords=ga,ti.getFeature=Ao,ti.asFeature=Oi,ut.mergeOptions({boxZoom:!0});var Eo=Vt.extend({initialize:function(n){this._map=n,this._container=n._container,this._pane=n._panes.overlayPane,this._resetStateTimeout=0,n.on("unload",this._destroy,this)},addHooks:function(){Be(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){Pt(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){Mt(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(n){if(!n.shiftKey||n.which!==1&&n.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),Jr(),Cl(),this._startPoint=this._map.mouseEventToContainerPoint(n),Be(document,{contextmenu:_t,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(n){this._moved||(this._moved=!0,this._box=gt("div","leaflet-zoom-box",this._container),qe(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(n);var a=new xe(this._point,this._startPoint),c=a.getSize();tn(this._box,a.min),this._box.style.width=c.x+"px",this._box.style.height=c.y+"px"},_finish:function(){this._moved&&(Mt(this._box),Dt(this._container,"leaflet-crosshair")),ji(),oa(),Pt(document,{contextmenu:_t,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(n){if(!(n.which!==1&&n.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(s(this._resetState,this),0);var a=new lt(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(a).fire("boxzoomend",{boxZoomBounds:a})}},_onKeyDown:function(n){n.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});ut.addInitHook("addHandler","boxZoom",Eo),ut.mergeOptions({doubleClickZoom:!0});var Cr=Vt.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(n){var a=this._map,c=a.getZoom(),f=a.options.zoomDelta,g=n.originalEvent.shiftKey?c-f:c+f;a.options.doubleClickZoom==="center"?a.setZoom(g):a.setZoomAround(n.containerPoint,g)}});ut.addInitHook("addHandler","doubleClickZoom",Cr),ut.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var ys=Vt.extend({addHooks:function(){if(!this._draggable){var n=this._map;this._draggable=new gr(n._mapPane,n._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),n.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),n.on("zoomend",this._onZoomEnd,this),n.whenReady(this._onZoomEnd,this))}qe(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){Dt(this._map._container,"leaflet-grab"),Dt(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var n=this._map;if(n._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var a=je(this._map.options.maxBounds);this._offsetLimit=Ke(this._map.latLngToContainerPoint(a.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(a.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;n.fire("movestart").fire("dragstart"),n.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(n){if(this._map.options.inertia){var a=this._lastTime=+new Date,c=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(c),this._times.push(a),this._prunePositions(a)}this._map.fire("move",n).fire("drag",n)},_prunePositions:function(n){for(;this._positions.length>1&&n-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var n=this._map.getSize().divideBy(2),a=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=a.subtract(n).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(n,a){return n-(n-a)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var n=this._draggable._newPos.subtract(this._draggable._startPos),a=this._offsetLimit;n.x<a.min.x&&(n.x=this._viscousLimit(n.x,a.min.x)),n.y<a.min.y&&(n.y=this._viscousLimit(n.y,a.min.y)),n.x>a.max.x&&(n.x=this._viscousLimit(n.x,a.max.x)),n.y>a.max.y&&(n.y=this._viscousLimit(n.y,a.max.y)),this._draggable._newPos=this._draggable._startPos.add(n)}},_onPreDragWrap:function(){var n=this._worldWidth,a=Math.round(n/2),c=this._initialWorldOffset,f=this._draggable._newPos.x,g=(f-a+c)%n+a-c,x=(f+a+c)%n-a-c,T=Math.abs(g+c)<Math.abs(x+c)?g:x;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=T},_onDragEnd:function(n){var a=this._map,c=a.options,f=!c.inertia||n.noInertia||this._times.length<2;if(a.fire("dragend",n),f)a.fire("moveend");else{this._prunePositions(+new Date);var g=this._lastPos.subtract(this._positions[0]),x=(this._lastTime-this._times[0])/1e3,T=c.easeLinearity,D=g.multiplyBy(T/x),$=D.distanceTo([0,0]),Y=Math.min(c.inertiaMaxSpeed,$),ue=D.multiplyBy(Y/$),Fe=Y/(c.inertiaDeceleration*T),Ue=ue.multiplyBy(-Fe/2).round();!Ue.x&&!Ue.y?a.fire("moveend"):(Ue=a._limitOffset(Ue,a.options.maxBounds),R(function(){a.panBy(Ue,{duration:Fe,easeLinearity:T,noMoveStart:!0,animate:!0})}))}}});ut.addInitHook("addHandler","dragging",ys),ut.mergeOptions({keyboard:!0,keyboardPanDelta:80});var gc=Vt.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(n){this._map=n,this._setPanDelta(n.options.keyboardPanDelta),this._setZoomDelta(n.options.zoomDelta)},addHooks:function(){var n=this._map._container;n.tabIndex<=0&&(n.tabIndex="0"),Be(n,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),Pt(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var n=document.body,a=document.documentElement,c=n.scrollTop||a.scrollTop,f=n.scrollLeft||a.scrollLeft;this._map._container.focus(),window.scrollTo(f,c)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(n){var a=this._panKeys={},c=this.keyCodes,f,g;for(f=0,g=c.left.length;f<g;f++)a[c.left[f]]=[-1*n,0];for(f=0,g=c.right.length;f<g;f++)a[c.right[f]]=[n,0];for(f=0,g=c.down.length;f<g;f++)a[c.down[f]]=[0,n];for(f=0,g=c.up.length;f<g;f++)a[c.up[f]]=[0,-1*n]},_setZoomDelta:function(n){var a=this._zoomKeys={},c=this.keyCodes,f,g;for(f=0,g=c.zoomIn.length;f<g;f++)a[c.zoomIn[f]]=n;for(f=0,g=c.zoomOut.length;f<g;f++)a[c.zoomOut[f]]=-n},_addHooks:function(){Be(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){Pt(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(n){if(!(n.altKey||n.ctrlKey||n.metaKey)){var a=n.keyCode,c=this._map,f;if(a in this._panKeys){if(!c._panAnim||!c._panAnim._inProgress)if(f=this._panKeys[a],n.shiftKey&&(f=ce(f).multiplyBy(3)),c.options.maxBounds&&(f=c._limitOffset(ce(f),c.options.maxBounds)),c.options.worldCopyJump){var g=c.wrapLatLng(c.unproject(c.project(c.getCenter()).add(f)));c.panTo(g)}else c.panBy(f)}else if(a in this._zoomKeys)c.setZoom(c.getZoom()+(n.shiftKey?3:1)*this._zoomKeys[a]);else if(a===27&&c._popup&&c._popup.options.closeOnEscapeKey)c.closePopup();else return;_t(n)}}});ut.addInitHook("addHandler","keyboard",gc),ut.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var _c=Vt.extend({addHooks:function(){Be(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){Pt(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(n){var a=nc(n),c=this._map.options.wheelDebounceTime;this._delta+=a,this._lastMousePos=this._map.mouseEventToContainerPoint(n),this._startTime||(this._startTime=+new Date);var f=Math.max(c-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(s(this._performZoom,this),f),_t(n)},_performZoom:function(){var n=this._map,a=n.getZoom(),c=this._map.options.zoomSnap||0;n._stop();var f=this._delta/(this._map.options.wheelPxPerZoomLevel*4),g=4*Math.log(2/(1+Math.exp(-Math.abs(f))))/Math.LN2,x=c?Math.ceil(g/c)*c:g,T=n._limitZoom(a+(this._delta>0?x:-x))-a;this._delta=0,this._startTime=null,T&&(n.options.scrollWheelZoom==="center"?n.setZoom(a+T):n.setZoomAround(this._lastMousePos,a+T))}});ut.addInitHook("addHandler","scrollWheelZoom",_c);var tf=600;ut.mergeOptions({tapHold:ye.touchNative&&ye.safari&&ye.mobile,tapTolerance:15});var xs=Vt.extend({addHooks:function(){Be(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){Pt(this._map._container,"touchstart",this._onDown,this)},_onDown:function(n){if(clearTimeout(this._holdTimeout),n.touches.length===1){var a=n.touches[0];this._startPos=this._newPos=new j(a.clientX,a.clientY),this._holdTimeout=setTimeout(s(function(){this._cancel(),this._isTapValid()&&(Be(document,"touchend",$e),Be(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",a))},this),tf),Be(document,"touchend touchcancel contextmenu",this._cancel,this),Be(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function n(){Pt(document,"touchend",$e),Pt(document,"touchend touchcancel",n)},_cancel:function(){clearTimeout(this._holdTimeout),Pt(document,"touchend touchcancel contextmenu",this._cancel,this),Pt(document,"touchmove",this._onMove,this)},_onMove:function(n){var a=n.touches[0];this._newPos=new j(a.clientX,a.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(n,a){var c=new MouseEvent(n,{bubbles:!0,cancelable:!0,view:window,screenX:a.screenX,screenY:a.screenY,clientX:a.clientX,clientY:a.clientY});c._simulated=!0,a.target.dispatchEvent(c)}});ut.addInitHook("addHandler","tapHold",xs),ut.mergeOptions({touchZoom:ye.touch,bounceAtZoomLimits:!0});var Cs=Vt.extend({addHooks:function(){qe(this._map._container,"leaflet-touch-zoom"),Be(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){Dt(this._map._container,"leaflet-touch-zoom"),Pt(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(n){var a=this._map;if(!(!n.touches||n.touches.length!==2||a._animatingZoom||this._zooming)){var c=a.mouseEventToContainerPoint(n.touches[0]),f=a.mouseEventToContainerPoint(n.touches[1]);this._centerPoint=a.getSize()._divideBy(2),this._startLatLng=a.containerPointToLatLng(this._centerPoint),a.options.touchZoom!=="center"&&(this._pinchStartLatLng=a.containerPointToLatLng(c.add(f)._divideBy(2))),this._startDist=c.distanceTo(f),this._startZoom=a.getZoom(),this._moved=!1,this._zooming=!0,a._stop(),Be(document,"touchmove",this._onTouchMove,this),Be(document,"touchend touchcancel",this._onTouchEnd,this),$e(n)}},_onTouchMove:function(n){if(!(!n.touches||n.touches.length!==2||!this._zooming)){var a=this._map,c=a.mouseEventToContainerPoint(n.touches[0]),f=a.mouseEventToContainerPoint(n.touches[1]),g=c.distanceTo(f)/this._startDist;if(this._zoom=a.getScaleZoom(g,this._startZoom),!a.options.bounceAtZoomLimits&&(this._zoom<a.getMinZoom()&&g<1||this._zoom>a.getMaxZoom()&&g>1)&&(this._zoom=a._limitZoom(this._zoom)),a.options.touchZoom==="center"){if(this._center=this._startLatLng,g===1)return}else{var x=c._add(f)._divideBy(2)._subtract(this._centerPoint);if(g===1&&x.x===0&&x.y===0)return;this._center=a.unproject(a.project(this._pinchStartLatLng,this._zoom).subtract(x),this._zoom)}this._moved||(a._moveStart(!0,!1),this._moved=!0),X(this._animRequest);var T=s(a._move,a,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=R(T,this,!0),$e(n)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,X(this._animRequest),Pt(document,"touchmove",this._onTouchMove,this),Pt(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});ut.addInitHook("addHandler","touchZoom",Cs),ut.BoxZoom=Eo,ut.DoubleClickZoom=Cr,ut.Drag=ys,ut.Keyboard=gc,ut.ScrollWheelZoom=_c,ut.TapHold=xs,ut.TouchZoom=Cs,e.Bounds=xe,e.Browser=ye,e.CRS=nt,e.Canvas=_s,e.Circle=pa,e.CircleMarker=fa,e.Class=re,e.Control=li,e.DivIcon=ms,e.DivOverlay=Vi,e.DomEvent=Wd,e.DomUtil=Qu,e.Draggable=gr,e.Evented=Te,e.FeatureGroup=Wi,e.GeoJSON=ti,e.GridLayer=dt,e.Handler=Vt,e.Icon=Fo,e.ImageOverlay=he,e.LatLng=Se,e.LatLngBounds=lt,e.Layer=jt,e.LayerGroup=_r,e.LineUtil=Ll,e.Map=ut,e.Marker=da,e.Mixin=Vd,e.Path=vr,e.Point=j,e.PolyUtil=Ol,e.Polygon=To,e.Polyline=xi,e.Popup=Gn,e.PosAnimation=Tl,e.Projection=Rl,e.Rectangle=vs,e.Renderer=sr,e.SVG=Io,e.SVGOverlay=bt,e.TileLayer=Xr,e.Tooltip=va,e.Transformation=Wt,e.Util=fe,e.VideoOverlay=vt,e.bind=s,e.bounds=Ke,e.canvas=ar,e.circle=yr,e.circleMarker=kl,e.control=Ei,e.divIcon=ya,e.extend=i,e.featureGroup=hc,e.geoJSON=W,e.geoJson=Z,e.gridLayer=Xd,e.icon=Yd,e.imageOverlay=Ne,e.latLng=Ce,e.latLngBounds=je,e.layerGroup=fs,e.map=Cn,e.marker=So,e.point=ce,e.polygon=Qd,e.polyline=Jd,e.popup=_a,e.rectangle=mc,e.setOptions=H,e.stamp=d,e.svg=Ul,e.svgOverlay=jl,e.tileLayer=gs,e.tooltip=Po,e.transformation=Et,e.version=t,e.videoOverlay=pn;var Hl=window.L;e.noConflict=function(){return window.L=Hl,this},window.L=e})});var sl=Nt(Fv(),1),Ou=Nt(yh(),1),MF=Nt(hC(),1),DF=Nt(PC(),1),ld=Nt(qp(),1);var G4=Object.prototype.toString;function K4(e){return G4.call(e)==="[object Function]"}var ZC=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},Nh=function(){function e(t,i){for(var o=0;o<i.length;o++){var s=i[o];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}return function(t,i,o){return i&&e(t.prototype,i),o&&e(t,o),t}}();function BC(e){return e.split("").map(function(t){return"(?:"+t.toUpperCase()+"|"+t.toLowerCase()+")"}).join("")}function Xa(e,t){for(var i=e.length-1;i>=0;i--)e[i]===t&&Array.prototype.splice.call(e,i,1)}function Y4(e,t){return Object.prototype.hasOwnProperty.call(e,t)}var $p={},kC=function(){Nh(e,null,[{key:"getInstance",value:function(i){return $p[i]=$p[i]||new e,$p[i]}}]);function e(){ZC(this,e),this.plurals=[],this.singulars=[],this.uncountables=[],this.humans=[],this.acronyms={},this.acronymRegex=/(?=a)b/}return Nh(e,[{key:"acronym",value:function(i){this.acronyms[i.toLowerCase()]=i;var o=[];for(var s in this.acronyms)Y4(this.acronyms,s)&&o.push(this.acronyms[s]);this.acronymRegex=new RegExp(o.join("|"))}},{key:"plural",value:function(i,o){typeof i=="string"&&Xa(this.uncountables,i),Xa(this.uncountables,o),this.plurals.unshift([i,o])}},{key:"singular",value:function(i,o){typeof i=="string"&&Xa(this.uncountables,i),Xa(this.uncountables,o),this.singulars.unshift([i,o])}},{key:"irregular",value:function(i,o){Xa(this.uncountables,i),Xa(this.uncountables,o);var s=i[0],u=i.substr(1),d=o[0],m=o.substr(1);if(s.toUpperCase()===d.toUpperCase())this.plural(new RegExp("("+s+")"+u+"$","i"),"$1"+m),this.plural(new RegExp("("+d+")"+m+"$","i"),"$1"+m),this.singular(new RegExp("("+s+")"+u+"$","i"),"$1"+u),this.singular(new RegExp("("+d+")"+m+"$","i"),"$1"+u);else{var v=BC(u),_=BC(m);this.plural(new RegExp(s.toUpperCase()+v+"$"),d.toUpperCase()+m),this.plural(new RegExp(s.toLowerCase()+v+"$"),d.toLowerCase()+m),this.plural(new RegExp(d.toUpperCase()+_+"$"),d.toUpperCase()+m),this.plural(new RegExp(d.toLowerCase()+_+"$"),d.toLowerCase()+m),this.singular(new RegExp(s.toUpperCase()+v+"$"),s.toUpperCase()+u),this.singular(new RegExp(s.toLowerCase()+v+"$"),s.toLowerCase()+u),this.singular(new RegExp(d.toUpperCase()+_+"$"),s.toUpperCase()+u),this.singular(new RegExp(d.toLowerCase()+_+"$"),s.toLowerCase()+u)}}},{key:"uncountable",value:function(){for(var i=arguments.length,o=Array(i),s=0;s<i;s++)o[s]=arguments[s];this.uncountables=this.uncountables.concat(o)}},{key:"human",value:function(i,o){this.humans.unshift([i,o])}},{key:"clear",value:function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"all";i==="all"?(this.plurals=[],this.singulars=[],this.uncountables=[],this.humans=[]):this[i]=[]}}]),e}();function J4(e){e.plural(/$/,"s"),e.plural(/s$/i,"s"),e.plural(/^(ax|test)is$/i,"$1es"),e.plural(/(octop|vir)us$/i,"$1i"),e.plural(/(octop|vir)i$/i,"$1i"),e.plural(/(alias|status)$/i,"$1es"),e.plural(/(bu)s$/i,"$1ses"),e.plural(/(buffal|tomat)o$/i,"$1oes"),e.plural(/([ti])um$/i,"$1a"),e.plural(/([ti])a$/i,"$1a"),e.plural(/sis$/i,"ses"),e.plural(/(?:([^f])fe|([lr])f)$/i,"$1$2ves"),e.plural(/(hive)$/i,"$1s"),e.plural(/([^aeiouy]|qu)y$/i,"$1ies"),e.plural(/(x|ch|ss|sh)$/i,"$1es"),e.plural(/(matr|vert|ind)(?:ix|ex)$/i,"$1ices"),e.plural(/^(m|l)ouse$/i,"$1ice"),e.plural(/^(m|l)ice$/i,"$1ice"),e.plural(/^(ox)$/i,"$1en"),e.plural(/^(oxen)$/i,"$1"),e.plural(/(quiz)$/i,"$1zes"),e.singular(/s$/i,""),e.singular(/(ss)$/i,"$1"),e.singular(/(n)ews$/i,"$1ews"),e.singular(/([ti])a$/i,"$1um"),e.singular(/((a)naly|(b)a|(d)iagno|(p)arenthe|(p)rogno|(s)ynop|(t)he)(sis|ses)$/i,"$1sis"),e.singular(/(^analy)(sis|ses)$/i,"$1sis"),e.singular(/([^f])ves$/i,"$1fe"),e.singular(/(hive)s$/i,"$1"),e.singular(/(tive)s$/i,"$1"),e.singular(/([lr])ves$/i,"$1f"),e.singular(/([^aeiouy]|qu)ies$/i,"$1y"),e.singular(/(s)eries$/i,"$1eries"),e.singular(/(m)ovies$/i,"$1ovie"),e.singular(/(x|ch|ss|sh)es$/i,"$1"),e.singular(/^(m|l)ice$/i,"$1ouse"),e.singular(/(bus)(es)?$/i,"$1"),e.singular(/(o)es$/i,"$1"),e.singular(/(shoe)s$/i,"$1"),e.singular(/(cris|test)(is|es)$/i,"$1is"),e.singular(/^(a)x[ie]s$/i,"$1xis"),e.singular(/(octop|vir)(us|i)$/i,"$1us"),e.singular(/(alias|status)(es)?$/i,"$1"),e.singular(/^(ox)en/i,"$1"),e.singular(/(vert|ind)ices$/i,"$1ex"),e.singular(/(matr)ices$/i,"$1ix"),e.singular(/(quiz)zes$/i,"$1"),e.singular(/(database)s$/i,"$1"),e.irregular("person","people"),e.irregular("man","men"),e.irregular("child","children"),e.irregular("sex","sexes"),e.irregular("move","moves"),e.irregular("zombie","zombies"),e.uncountable("equipment","information","rice","money","species","series","fish","sheep","jeans","police")}var qC={en:J4};function Ko(e,t){if(K4(e)&&(t=e,e=null),e=e||"en",t)t(kC.getInstance(e));else return kC.getInstance(e)}for(Zp in qC)Ko(Zp,qC[Zp]);var Zp;function jC(e,t){var i=""+e,o,s,u;if(i.length===0)return i;var d=i.toLowerCase().match(/\b\w+$/);if(d&&Ko().uncountables.indexOf(d[0])>-1)return i;for(var m=0,v=t.length;m<v;m++)if(o=t[m],s=o[0],u=o[1],i.match(s)){i=i.replace(s,u);break}return i}function Up(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"en";return jC(e,Ko(t).plurals)}function Hp(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"en";return jC(e,Ko(t).singulars)}function Rh(e){var t=e==null?"":String(e);return t.charAt(0).toUpperCase()+t.slice(1)}function UC(e,t){t==null&&(t=!0);var i=""+e;return t?i=i.replace(/^[a-z\d]*/,function(o){return Ko().acronyms[o]||Rh(o)}):i=i.replace(new RegExp("^(?:"+Ko().acronymRegex.source+"(?=\\b|[A-Z_])|\\w)"),function(o){return o.toLowerCase()}),i=i.replace(/(?:_|(\/))([a-z\d]*)/gi,function(o,s,u,d,m){return s||(s=""),""+s+(Ko().acronyms[u]||Rh(u))}),i}function HC(e){var t=""+e;return t=t.replace(new RegExp("(?:([A-Za-z\\d])|^)("+Ko().acronymRegex.source+")(?=\\b|[^a-z])","g"),function(i,o,s){return""+(o||"")+(o?"_":"")+s.toLowerCase()}),t=t.replace(/([A-Z\d]+)([A-Z][a-z])/g,"$1_$2"),t=t.replace(/([a-z\d])([A-Z])/g,"$1_$2"),t=t.replace(/-/g,"_"),t.toLowerCase()}function WC(e){return e.replace(/_/g,"-")}var $C={\u00C0:"A",\u00C1:"A",\u00C2:"A",\u00C3:"A",\u00C4:"A",\u00C5:"A",\u00C6:"AE",\u00C7:"C",\u00C8:"E",\u00C9:"E",\u00CA:"E",\u00CB:"E",\u00CC:"I",\u00CD:"I",\u00CE:"I",\u00CF:"I",\u00D0:"D",\u00D1:"N",\u00D2:"O",\u00D3:"O",\u00D4:"O",\u00D5:"O",\u00D6:"O","\xD7":"x",\u00D8:"O",\u00D9:"U",\u00DA:"U",\u00DB:"U",\u00DC:"U",\u00DD:"Y",\u00DE:"Th",\u00DF:"ss",\u00E0:"a",\u00E1:"a",\u00E2:"a",\u00E3:"a",\u00E4:"a",\u00E5:"a",\u00E6:"ae",\u00E7:"c",\u00E8:"e",\u00E9:"e",\u00EA:"e",\u00EB:"e",\u00EC:"i",\u00ED:"i",\u00EE:"i",\u00EF:"i",\u00F0:"d",\u00F1:"n",\u00F2:"o",\u00F3:"o",\u00F4:"o",\u00F5:"o",\u00F6:"o",\u00F8:"o",\u00F9:"u",\u00FA:"u",\u00FB:"u",\u00FC:"u",\u00FD:"y",\u00FE:"th",\u00FF:"y",\u0100:"A",\u0101:"a",\u0102:"A",\u0103:"a",\u0104:"A",\u0105:"a",\u0106:"C",\u0107:"c",\u0108:"C",\u0109:"c",\u010A:"C",\u010B:"c",\u010C:"C",\u010D:"c",\u010E:"D",\u010F:"d",\u0110:"D",\u0111:"d",\u0112:"E",\u0113:"e",\u0114:"E",\u0115:"e",\u0116:"E",\u0117:"e",\u0118:"E",\u0119:"e",\u011A:"E",\u011B:"e",\u011C:"G",\u011D:"g",\u011E:"G",\u011F:"g",\u0120:"G",\u0121:"g",\u0122:"G",\u0123:"g",\u0124:"H",\u0125:"h",\u0126:"H",\u0127:"h",\u0128:"I",\u0129:"i",\u012A:"I",\u012B:"i",\u012C:"I",\u012D:"i",\u012E:"I",\u012F:"i",\u0130:"I",\u0131:"i",\u0132:"IJ",\u0133:"ij",\u0134:"J",\u0135:"j",\u0136:"K",\u0137:"k",\u0138:"k",\u0139:"L",\u013A:"l",\u013B:"L",\u013C:"l",\u013D:"L",\u013E:"l",\u013F:"L",\u0140:"l",\u0141:"L",\u0142:"l",\u0143:"N",\u0144:"n",\u0145:"N",\u0146:"n",\u0147:"N",\u0148:"n",\u0149:"'n",\u014A:"NG",\u014B:"ng",\u014C:"O",\u014D:"o",\u014E:"O",\u014F:"o",\u0150:"O",\u0151:"o",\u0152:"OE",\u0153:"oe",\u0154:"R",\u0155:"r",\u0156:"R",\u0157:"r",\u0158:"R",\u0159:"r",\u015A:"S",\u015B:"s",\u015C:"S",\u015D:"s",\u015E:"S",\u015F:"s",\u0160:"S",\u0161:"s",\u0162:"T",\u0163:"t",\u0164:"T",\u0165:"t",\u0166:"T",\u0167:"t",\u0168:"U",\u0169:"u",\u016A:"U",\u016B:"u",\u016C:"U",\u016D:"u",\u016E:"U",\u016F:"u",\u0170:"U",\u0171:"u",\u0172:"U",\u0173:"u",\u0174:"W",\u0175:"w",\u0176:"Y",\u0177:"y",\u0178:"Y",\u0179:"Z",\u017A:"z",\u017B:"Z",\u017C:"z",\u017D:"Z",\u017E:"z",\u0410:"A",\u0411:"B",\u0412:"V",\u0413:"G",\u0414:"D",\u0415:"E",\u0401:"E",\u0416:"ZH",\u0417:"Z",\u0418:"I",\u0419:"J",\u041A:"K",\u041B:"L",\u041C:"M",\u041D:"N",\u041E:"O",\u041F:"P",\u0420:"R",\u0421:"S",\u0422:"T",\u0423:"U",\u0424:"F",\u0425:"KH",\u0426:"C",\u0427:"CH",\u0428:"SH",\u0429:"SHCH",\u042A:"",\u042B:"Y",\u042C:"",\u042D:"E",\u042E:"YU",\u042F:"YA",\u0430:"a",\u0431:"b",\u0432:"v",\u0433:"g",\u0434:"d",\u0435:"e",\u0451:"e",\u0436:"zh",\u0437:"z",\u0438:"i",\u0439:"j",\u043A:"k",\u043B:"l",\u043C:"m",\u043D:"n",\u043E:"o",\u043F:"p",\u0440:"r",\u0441:"s",\u0442:"t",\u0443:"u",\u0444:"f",\u0445:"kh",\u0446:"c",\u0447:"ch",\u0448:"sh",\u0449:"shch",\u044A:"",\u044B:"y",\u044C:"",\u044D:"e",\u044E:"yu",\u044F:"ya"},Q4="?",jp={},IV=function(){Nh(e,null,[{key:"getInstance",value:function(i){return jp[i]=jp[i]||new e,jp[i]}}]);function e(){ZC(this,e),this.approximations={};for(var t in $C)this.approximate(t,$C[t])}return Nh(e,[{key:"approximate",value:function(i,o){this.approximations[i]=o}},{key:"transliterate",value:function(i,o){var s=this;return i.replace(/[^\u0000-\u007f]/g,function(u){return s.approximations[u]||o||Q4})}}]),e}();var LF=Nt(dw(),1),Yh=Nt(pw(),1),NF=Nt(Cw(),1),RF=Nt(Lb(),1),go=Nt(tz(),1),Mu=Nt(iz(),1),BF=Nt(az(),1),Gh=Nt(hz(),1),Jh=Nt(fz(),1),Nm=Nt(Dp(),1),Rm=Nt(mz(),1),kF=Nt(yz(),1),qF=Nt(Iz(),1),Qh=Nt(Nz(),1),Kh=Nt(eF(),1),zm=Nt(nF(),1);typeof global<"u"&&typeof global.self>"u"&&(global.self={},global.__pretenderNodePolyfill=!0);var g7=Object.create;function nm(){var e=g7(null);return e.__=void 0,delete e.__,e}var aF=function(t,i,o){this.path=t,this.matcher=i,this.delegate=o};aF.prototype.to=function(t,i){var o=this.delegate;if(o&&o.willAddRoute&&(t=o.willAddRoute(this.matcher.target,t)),this.matcher.add(this.path,t),i){if(i.length===0)throw new Error("You must have an argument in the function passed to `to`");this.matcher.addChild(this.path,t,i,this.delegate)}};var $h=function(t){this.routes=nm(),this.children=nm(),this.target=t};$h.prototype.add=function(t,i){this.routes[t]=i};$h.prototype.addChild=function(t,i,o,s){var u=new $h(i);this.children[t]=u;var d=im(t,u,s);s&&s.contextEntered&&s.contextEntered(i,d),o(d)};function im(e,t,i){function o(s,u){var d=e+s;if(u)u(im(d,t,i));else return new aF(d,t,i)}return o}function _7(e,t,i){for(var o=0,s=0;s<e.length;s++)o+=e[s].path.length;t=t.substr(o);var u={path:t,handler:i};e.push(u)}function lF(e,t,i,o){for(var s=t.routes,u=Object.keys(s),d=0;d<u.length;d++){var m=u[d],v=e.slice();_7(v,m,s[m]);var _=t.children[m];_?lF(v,_,i,o):i.call(o,v)}}var v7=function(e,t){var i=new $h;e(im("",i,this.delegate)),lF([],i,function(o){t?t(this,o):this.add(o)},this)};function uF(e){return e.split("/").map(rm).join("/")}var y7=/%|\//g;function rm(e){return e.length<3||e.indexOf("%")===-1?e:decodeURIComponent(e).replace(y7,encodeURIComponent)}var x7=/%(?:2(?:4|6|B|C)|3(?:B|D|A)|40)/g;function cF(e){return encodeURIComponent(e).replace(x7,decodeURIComponent)}var C7=/(\/|\.|\*|\+|\?|\||\(|\)|\[|\]|\{|\}|\\)/g,jh=Array.isArray,w7=Object.prototype.hasOwnProperty;function hF(e,t){if(typeof e!="object"||e===null)throw new Error("You must pass an object as the second argument to `generate`.");if(!w7.call(e,t))throw new Error("You must provide param `"+t+"` to `generate`.");var i=e[t],o=typeof i=="string"?i:""+i;if(o.length===0)throw new Error("You must provide a param `"+t+"`.");return o}var Tu=[];Tu[0]=function(e,t){for(var i=t,o=e.value,s=0;s<o.length;s++){var u=o.charCodeAt(s);i=i.put(u,!1,!1)}return i};Tu[1]=function(e,t){return t.put(47,!0,!0)};Tu[2]=function(e,t){return t.put(-1,!1,!0)};Tu[4]=function(e,t){return t};var Au=[];Au[0]=function(e){return e.value.replace(C7,"\\$1")};Au[1]=function(){return"([^/]+)"};Au[2]=function(){return"(.+)"};Au[4]=function(){return""};var Pu=[];Pu[0]=function(e){return e.value};Pu[1]=function(e,t){var i=hF(t,e.value);return vi.ENCODE_AND_DECODE_PATH_SEGMENTS?cF(i):i};Pu[2]=function(e,t){return hF(t,e.value)};Pu[4]=function(){return""};var iF=Object.freeze({}),Zh=Object.freeze([]);function b7(e,t,i){t.length>0&&t.charCodeAt(0)===47&&(t=t.substr(1));for(var o=t.split("/"),s=void 0,u=void 0,d=0;d<o.length;d++){var m=o[d],v=0,_=0;m===""?_=4:m.charCodeAt(0)===58?_=1:m.charCodeAt(0)===42?_=2:_=0,v=2<<_,v&12&&(m=m.slice(1),s=s||[],s.push(m),u=u||[],u.push((v&4)!==0)),v&14&&i[_]++,e.push({type:_,value:rm(m)})}return{names:s||Zh,shouldDecodes:u||Zh}}function rF(e,t,i){return e.char===t&&e.negate===i}var nl=function(t,i,o,s,u){this.states=t,this.id=i,this.char=o,this.negate=s,this.nextStates=u?i:null,this.pattern="",this._regex=void 0,this.handlers=void 0,this.types=void 0};nl.prototype.regex=function(){return this._regex||(this._regex=new RegExp(this.pattern)),this._regex};nl.prototype.get=function(t,i){var o=this,s=this.nextStates;if(s!==null)if(jh(s))for(var u=0;u<s.length;u++){var d=o.states[s[u]];if(rF(d,t,i))return d}else{var m=this.states[s];if(rF(m,t,i))return m}};nl.prototype.put=function(t,i,o){var s;if(s=this.get(t,i))return s;var u=this.states;return s=new nl(u,u.length,t,i,o),u[u.length]=s,this.nextStates==null?this.nextStates=s.id:jh(this.nextStates)?this.nextStates.push(s.id):this.nextStates=[this.nextStates,s.id],s};nl.prototype.match=function(t){var i=this,o=this.nextStates;if(!o)return[];var s=[];if(jh(o))for(var u=0;u<o.length;u++){var d=i.states[o[u]];oF(d,t)&&s.push(d)}else{var m=this.states[o];oF(m,t)&&s.push(m)}return s};function oF(e,t){return e.negate?e.char!==t&&e.char!==-1:e.char===t||e.char===-1}function z7(e){return e.sort(function(t,i){var o=t.types||[0,0,0],s=o[0],u=o[1],d=o[2],m=i.types||[0,0,0],v=m[0],_=m[1],z=m[2];if(d!==z)return d-z;if(d){if(s!==v)return v-s;if(u!==_)return _-u}return u!==_?u-_:s!==v?v-s:0})}function F7(e,t){for(var i=[],o=0,s=e.length;o<s;o++){var u=e[o];i=i.concat(u.match(t))}return i}var Uh=function(t){this.length=0,this.queryParams=t||{}};Uh.prototype.splice=Array.prototype.splice;Uh.prototype.slice=Array.prototype.slice;Uh.prototype.push=Array.prototype.push;function S7(e,t,i){var o=e.handlers,s=e.regex();if(!s||!o)throw new Error("state not initialized");var u=t.match(s),d=1,m=new Uh(i);m.length=o.length;for(var v=0;v<o.length;v++){var _=o[v],z=_.names,F=_.shouldDecodes,N=iF,H=!1;if(z!==Zh&&F!==Zh)for(var k=0;k<z.length;k++){H=!0;var ae=z[k],te=u&&u[d++];N===iF&&(N={}),vi.ENCODE_AND_DECODE_PATH_SEGMENTS&&F[k]?N[ae]=te&&decodeURIComponent(te):N[ae]=te}m[v]={handler:_.handler,params:N,isDynamic:H}}return m}function sF(e){e=e.replace(/\+/gm,"%20");var t;try{t=decodeURIComponent(e)}catch{t=""}return t}var vi=function(){this.names=nm();var t=[],i=new nl(t,0,-1,!0,!1);t[0]=i,this.states=t,this.rootState=i};vi.prototype.add=function(t,i){for(var o=this.rootState,s="^",u=[0,0,0],d=new Array(t.length),m=[],v=!0,_=0,z=0;z<t.length;z++){for(var F=t[z],N=b7(m,F.path,u),H=N.names,k=N.shouldDecodes;_<m.length;_++){var ae=m[_];ae.type!==4&&(v=!1,o=o.put(47,!1,!1),s+="/",o=Tu[ae.type](ae,o),s+=Au[ae.type](ae))}d[z]={handler:F.handler,names:H,shouldDecodes:k}}v&&(o=o.put(47,!1,!1),s+="/"),o.handlers=d,o.pattern=s+"$",o.types=u;var te;typeof i=="object"&&i!==null&&i.as&&(te=i.as),te&&(this.names[te]={segments:m,handlers:d})};vi.prototype.handlersFor=function(t){var i=this.names[t];if(!i)throw new Error("There is no route named "+t);for(var o=new Array(i.handlers.length),s=0;s<i.handlers.length;s++){var u=i.handlers[s];o[s]=u}return o};vi.prototype.hasRoute=function(t){return!!this.names[t]};vi.prototype.generate=function(t,i){var o=this.names[t],s="";if(!o)throw new Error("There is no route named "+t);for(var u=o.segments,d=0;d<u.length;d++){var m=u[d];m.type!==4&&(s+="/",s+=Pu[m.type](m,i))}return s.charAt(0)!=="/"&&(s="/"+s),i&&i.queryParams&&(s+=this.generateQueryString(i.queryParams)),s};vi.prototype.generateQueryString=function(t){var i=[],o=Object.keys(t);o.sort();for(var s=0;s<o.length;s++){var u=o[s],d=t[u];if(d!=null){var m=encodeURIComponent(u);if(jh(d))for(var v=0;v<d.length;v++){var _=u+"[]="+encodeURIComponent(d[v]);i.push(_)}else m+="="+encodeURIComponent(d),i.push(m)}}return i.length===0?"":"?"+i.join("&")};vi.prototype.parseQueryString=function(t){for(var i=t.split("&"),o={},s=0;s<i.length;s++){var u=i[s].split("="),d=sF(u[0]),m=d.length,v=!1,_=void 0;u.length===1?_="true":(m>2&&d.slice(m-2)==="[]"&&(v=!0,d=d.slice(0,m-2),o[d]||(o[d]=[])),_=u[1]?sF(u[1]):""),v?o[d].push(_):o[d]=_}return o};vi.prototype.recognize=function(t){var i,o=[this.rootState],s={},u=!1,d=t.indexOf("#");d!==-1&&(t=t.substr(0,d));var m=t.indexOf("?");if(m!==-1){var v=t.substr(m+1,t.length);t=t.substr(0,m),s=this.parseQueryString(v)}t.charAt(0)!=="/"&&(t="/"+t);var _=t;vi.ENCODE_AND_DECODE_PATH_SEGMENTS?t=uF(t):(t=decodeURI(t),_=decodeURI(_));var z=t.length;z>1&&t.charAt(z-1)==="/"&&(t=t.substr(0,z-1),_=_.substr(0,_.length-1),u=!0);for(var F=0;F<t.length&&(o=F7(o,t.charCodeAt(F)),!!o.length);F++);for(var N=[],H=0;H<o.length;H++)o[H].handlers&&N.push(o[H]);o=z7(N);var k=N[0];return k&&k.handlers&&(u&&k.pattern&&k.pattern.slice(-5)==="(.+)$"&&(_=_+"/"),i=S7(k,_,s)),i};vi.VERSION="0.3.4";vi.ENCODE_AND_DECODE_PATH_SEGMENTS=!0;vi.Normalizer={normalizeSegment:rm,normalizePath:uF,encodePathSegment:cF};vi.prototype.map=v7;var Yo=vi;var Jo=function(t,i,o,s){this.type=t,this.bubbles=i,this.cancelable=o,this.target=s};Jo.prototype={stopPropagation:function(){},preventDefault:function(){this.defaultPrevented=!0}};var T7={100:"Continue",101:"Switching Protocols",200:"OK",201:"Created",202:"Accepted",203:"Non-Authoritative Information",204:"No Content",205:"Reset Content",206:"Partial Content",300:"Multiple Choice",301:"Moved Permanently",302:"Found",303:"See Other",304:"Not Modified",305:"Use Proxy",307:"Temporary Redirect",400:"Bad Request",401:"Unauthorized",402:"Payment Required",403:"Forbidden",404:"Not Found",405:"Method Not Allowed",406:"Not Acceptable",407:"Proxy Authentication Required",408:"Request Timeout",409:"Conflict",410:"Gone",411:"Length Required",412:"Precondition Failed",413:"Request Entity Too Large",414:"Request-URI Too Long",415:"Unsupported Media Type",416:"Requested Range Not Satisfiable",417:"Expectation Failed",422:"Unprocessable Entity",500:"Internal Server Error",501:"Not Implemented",502:"Bad Gateway",503:"Service Unavailable",504:"Gateway Timeout",505:"HTTP Version Not Supported"};function A7(e){var t;if(typeof DOMParser<"u"){var i=new DOMParser;t=i.parseFromString(e,"text/xml")}else t=new ActiveXObject("Microsoft.XMLDOM"),t.async="false",t.loadXML(e);return t}var P7={"Accept-Charset":!0,"Accept-Encoding":!0,Connection:!0,"Content-Length":!0,Cookie:!0,Cookie2:!0,"Content-Transfer-Encoding":!0,Date:!0,Expect:!0,Host:!0,"Keep-Alive":!0,Referer:!0,TE:!0,Trailer:!0,"Transfer-Encoding":!0,Upgrade:!0,"User-Agent":!0,Via:!0};function I7(e,t){t.addEventListener(e,function(i){var o=t["on"+e];o&&typeof o=="function"&&o.call(i.target,i)})}function Hh(){this._eventListeners={};for(var e=["loadstart","progress","load","abort","loadend"],t=e.length-1;t>=0;t--)I7(e[t],this)}Hh.prototype={addEventListener:function(t,i){this._eventListeners[t]=this._eventListeners[t]||[],this._eventListeners[t].push(i)},removeEventListener:function(t,i){for(var o=this._eventListeners[t]||[],s=0,u=o.length;s<u;++s)if(o[s]==i)return o.splice(s,1)},dispatchEvent:function(t){for(var i=t.type,o=this._eventListeners[i]||[],s=0;s<o.length;s++)typeof o[s]=="function"?o[s].call(this,t):o[s].handleEvent(t);return!!t.defaultPrevented},_progress:function(t,i,o){var s=new Jo("progress");s.target=this,s.lengthComputable=t,s.loaded=i,s.total=o,this.dispatchEvent(s)}};function qt(){Hh.call(this),this.readyState=qt.UNSENT,this.requestHeaders={},this.requestBody=null,this.status=0,this.statusText="",this.upload=new Hh,this.onabort=null,this.onerror=null,this.onload=null,this.onloadend=null,this.onloadstart=null,this.onprogress=null,this.onreadystatechange=null,this.ontimeout=null}qt.prototype=new Hh;qt.UNSENT=0;qt.OPENED=1;qt.HEADERS_RECEIVED=2;qt.LOADING=3;qt.DONE=4;var dF={UNSENT:0,OPENED:1,HEADERS_RECEIVED:2,LOADING:3,DONE:4,async:!0,withCredentials:!1,open:function(t,i,o,s,u){this.method=t,this.url=i,this.async=typeof o=="boolean"?o:!0,this.username=s,this.password=u,this.responseText=null,this.response=this.responseText,this.responseXML=null,this.responseURL=i,this.requestHeaders={},this.sendFlag=!1,this._readyStateChange(qt.OPENED)},setRequestHeader:function(t,i){if(fF(this),P7[t]||/^(Sec-|Proxy-)/.test(t))throw new Error('Refused to set unsafe header "'+t+'"');this.requestHeaders[t]?this.requestHeaders[t]+=","+i:this.requestHeaders[t]=i},send:function(t){if(fF(this),!/^(get|head)$/i.test(this.method)){var i=!1;Object.keys(this.requestHeaders).forEach(function(o){o.toLowerCase()==="content-type"&&(i=!0)}),!i&&!(t||"").toString().match("FormData")&&(this.requestHeaders["Content-Type"]="text/plain;charset=UTF-8"),this.requestBody=t}this.errorFlag=!1,this.sendFlag=this.async,this._readyStateChange(qt.OPENED),typeof this.onSend=="function"&&this.onSend(this),this.dispatchEvent(new Jo("loadstart",!1,!1,this))},abort:function(){this.aborted=!0,this.responseText=null,this.response=this.responseText,this.errorFlag=!0,this.requestHeaders={},this.dispatchEvent(new Jo("abort",!1,!1,this)),this.readyState>qt.UNSENT&&this.sendFlag&&(this._readyStateChange(qt.UNSENT),this.sendFlag=!1),typeof this.onerror=="function"&&this.onerror()},getResponseHeader:function(t){if(this.readyState<qt.HEADERS_RECEIVED||/^Set-Cookie2?$/i.test(t))return null;t=t.toLowerCase();for(var i in this.responseHeaders)if(i.toLowerCase()==t)return this.responseHeaders[i];return null},getAllResponseHeaders:function(){if(this.readyState<qt.HEADERS_RECEIVED)return"";var t="";for(var i in this.responseHeaders)this.responseHeaders.hasOwnProperty(i)&&!/^Set-Cookie2?$/i.test(i)&&(t+=i+": "+this.responseHeaders[i]+`\r
`);return t},overrideMimeType:function(t){typeof t=="string"&&(this.forceMimeType=t.toLowerCase())},_readyStateChange:function(t){this.readyState=t,typeof this.onreadystatechange=="function"&&this.onreadystatechange(new Jo("readystatechange")),this.dispatchEvent(new Jo("readystatechange")),this.readyState==qt.DONE&&this.dispatchEvent(new Jo("load",!1,!1,this)),(this.readyState==qt.UNSENT||this.readyState==qt.DONE)&&this.dispatchEvent(new Jo("loadend",!1,!1,this))},_setResponseHeaders:function(t){this.responseHeaders={};for(var i in t)t.hasOwnProperty(i)&&(this.responseHeaders[i]=t[i]);this.forceMimeType&&(this.responseHeaders["Content-Type"]=this.forceMimeType),this.async?this._readyStateChange(qt.HEADERS_RECEIVED):this.readyState=qt.HEADERS_RECEIVED},_setResponseBody:function(t){E7(this),O7(this),M7(t);var i=this.chunkSize||10,o=0;this.responseText="",this.response=this.responseText;do this.async&&this._readyStateChange(qt.LOADING),this.responseText+=t.substring(o,o+i),this.response=this.responseText,o+=i;while(o<t.length);var s=this.getResponseHeader("Content-Type");if(this.responseText&&(!s||/(text\/xml)|(application\/xml)|(\+xml)/.test(s)))try{this.responseXML=A7(this.responseText)}catch{}this.async?this._readyStateChange(qt.DONE):this.readyState=qt.DONE},respond:function(t,i,o){this._setResponseHeaders(i||{}),this.status=typeof t=="number"?t:200,this.statusText=T7[this.status],this._setResponseBody(o||"")}};for(om in dF)qt.prototype[om]=dF[om];var om;function fF(e){if(e.readyState!==qt.OPENED)throw new Error("INVALID_STATE_ERR");if(e.sendFlag)throw new Error("INVALID_STATE_ERR")}function E7(e){if(e.readyState==qt.DONE)throw new Error("Request done")}function O7(e){if(e.async&&e.readyState!=qt.HEADERS_RECEIVED)throw new Error("No headers received")}function M7(e){if(typeof e!="string"){var t=new Error("Attempted to respond to fake XMLHttpRequest with "+e+", which is not a string.");throw t.name="InvalidBodyException",t}}var Iu=qt;var pF=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},CF=function(t,i){if(i=i.split(":")[0],t=+t,!t)return!1;switch(i){case"http":case"ws":return t!==80;case"https":case"wss":return t!==443;case"ftp":return t!==21;case"gopher":return t!==70;case"file":return!1}return t!==0},D7=Object.prototype.hasOwnProperty,L7;function mF(e){try{return decodeURIComponent(e.replace(/\+/g," "))}catch{return null}}function N7(e){for(var t=/([^=?&]+)=?([^&]*)/g,i={},o;o=t.exec(e);){var s=mF(o[1]),u=mF(o[2]);s===null||u===null||s in i||(i[s]=u)}return i}function R7(e,t){t=t||"";var i=[],o,s;typeof t!="string"&&(t="?");for(s in e)if(D7.call(e,s)){if(o=e[s],!o&&(o===null||o===L7||isNaN(o))&&(o=""),s=encodeURIComponent(s),o=encodeURIComponent(o),s===null||o===null)continue;i.push(s+"="+o)}return i.length?t+i.join("&"):""}var B7=R7,k7=N7,Wh={stringify:B7,parse:k7},q7=/^[A-Za-z][A-Za-z0-9+-.]*:\/\//,$7=/^([a-z][a-z0-9.+-]*:)?(\/\/)?([\\/]+)?([\S\s]*)/i,Z7=/^[a-zA-Z]:/,j7="[\\x09\\x0A\\x0B\\x0C\\x0D\\x20\\xA0\\u1680\\u180E\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200A\\u202F\\u205F\\u3000\\u2028\\u2029\\uFEFF]",U7=new RegExp("^"+j7+"+");function cm(e){return(e||"").toString().replace(U7,"")}var lm=[["#","hash"],["?","query"],function(t,i){return mo(i.protocol)?t.replace(/\\/g,"/"):t},["/","pathname"],["@","auth",1],[NaN,"host",void 0,1,1],[/:(\d+)$/,"port",void 0,1],[NaN,"hostname",void 0,1,1]],gF={hash:1,query:1};function wF(e){var t;typeof window<"u"?t=window:typeof pF<"u"?t=pF:typeof self<"u"?t=self:t={};var i=t.location||{};e=e||i;var o={},s=typeof e,u;if(e.protocol==="blob:")o=new Wr(unescape(e.pathname),{});else if(s==="string"){o=new Wr(e,{});for(u in gF)delete o[u]}else if(s==="object"){for(u in e)u in gF||(o[u]=e[u]);o.slashes===void 0&&(o.slashes=q7.test(e.href))}return o}function mo(e){return e==="file:"||e==="ftp:"||e==="http:"||e==="https:"||e==="ws:"||e==="wss:"}function bF(e,t){e=cm(e),t=t||{};var i=$7.exec(e),o=i[1]?i[1].toLowerCase():"",s=!!i[2],u=!!i[3],d=0,m;return s?u?(m=i[2]+i[3]+i[4],d=i[2].length+i[3].length):(m=i[2]+i[4],d=i[2].length):u?(m=i[3]+i[4],d=i[3].length):m=i[4],o==="file:"?d>=2&&(m=m.slice(2)):mo(o)?m=i[4]:o?s&&(m=m.slice(2)):d>=2&&mo(t.protocol)&&(m=i[4]),{protocol:o,slashes:s||mo(o),slashesCount:d,rest:m}}function H7(e,t){if(e==="")return t;for(var i=(t||"/").split("/").slice(0,-1).concat(e.split("/")),o=i.length,s=i[o-1],u=!1,d=0;o--;)i[o]==="."?i.splice(o,1):i[o]===".."?(i.splice(o,1),d++):d&&(o===0&&(u=!0),i.splice(o,1),d--);return u&&i.unshift(""),(s==="."||s==="..")&&i.push(""),i.join("/")}function Wr(e,t,i){if(e=cm(e),!(this instanceof Wr))return new Wr(e,t,i);var o,s,u,d,m,v,_=lm.slice(),z=typeof t,F=this,N=0;for(z!=="object"&&z!=="string"&&(i=t,t=null),i&&typeof i!="function"&&(i=Wh.parse),t=wF(t),s=bF(e||"",t),o=!s.protocol&&!s.slashes,F.slashes=s.slashes||o&&t.slashes,F.protocol=s.protocol||t.protocol||"",e=s.rest,(s.protocol==="file:"&&(s.slashesCount!==2||Z7.test(e))||!s.slashes&&(s.protocol||s.slashesCount<2||!mo(F.protocol)))&&(_[3]=[/(.*)/,"pathname"]);N<_.length;N++){if(d=_[N],typeof d=="function"){e=d(e,F);continue}u=d[0],v=d[1],u!==u?F[v]=e:typeof u=="string"?~(m=e.indexOf(u))&&(typeof d[2]=="number"?(F[v]=e.slice(0,m),e=e.slice(m+d[2])):(F[v]=e.slice(m),e=e.slice(0,m))):(m=u.exec(e))&&(F[v]=m[1],e=e.slice(0,m.index)),F[v]=F[v]||o&&d[3]&&t[v]||"",d[4]&&(F[v]=F[v].toLowerCase())}i&&(F.query=i(F.query)),o&&t.slashes&&F.pathname.charAt(0)!=="/"&&(F.pathname!==""||t.pathname!=="")&&(F.pathname=H7(F.pathname,t.pathname)),F.pathname.charAt(0)!=="/"&&mo(F.protocol)&&(F.pathname="/"+F.pathname),CF(F.port,F.protocol)||(F.host=F.hostname,F.port=""),F.username=F.password="",F.auth&&(d=F.auth.split(":"),F.username=d[0]||"",F.password=d[1]||""),F.origin=F.protocol!=="file:"&&mo(F.protocol)&&F.host?F.protocol+"//"+F.host:"null",F.href=F.toString()}function W7(e,t,i){var o=this;switch(e){case"query":typeof t=="string"&&t.length&&(t=(i||Wh.parse)(t)),o[e]=t;break;case"port":o[e]=t,CF(t,o.protocol)?t&&(o.host=o.hostname+":"+t):(o.host=o.hostname,o[e]="");break;case"hostname":o[e]=t,o.port&&(t+=":"+o.port),o.host=t;break;case"host":o[e]=t,/:\d+$/.test(t)?(t=t.split(":"),o.port=t.pop(),o.hostname=t.join(":")):(o.hostname=t,o.port="");break;case"protocol":o.protocol=t.toLowerCase(),o.slashes=!i;break;case"pathname":case"hash":if(t){var s=e==="pathname"?"/":"#";o[e]=t.charAt(0)!==s?s+t:t}else o[e]=t;break;default:o[e]=t}for(var u=0;u<lm.length;u++){var d=lm[u];d[4]&&(o[d[1]]=o[d[1]].toLowerCase())}return o.origin=o.protocol!=="file:"&&mo(o.protocol)&&o.host?o.protocol+"//"+o.host:"null",o.href=o.toString(),o}function V7(e){(!e||typeof e!="function")&&(e=Wh.stringify);var t,i=this,o=i.protocol;o&&o.charAt(o.length-1)!==":"&&(o+=":");var s=o+(i.slashes||mo(i.protocol)?"//":"");return i.username&&(s+=i.username,i.password&&(s+=":"+i.password),s+="@"),s+=i.host+i.pathname,t=typeof i.query=="object"?e(i.query):i.query,t&&(s+=t.charAt(0)!=="?"?"?"+t:t),i.hash&&(s+=i.hash),s}Wr.prototype={set:W7,toString:V7};Wr.extractProtocol=bF;Wr.location=wF;Wr.trimLeft=cm;Wr.qs=Wh;var G7=Wr;function il(e){var t=new G7(e);t.host||(t.href=t.href);var i=t.pathname;i.charAt(0)!=="/"&&(i="/"+i);var o=t.host;return(t.port==="80"||t.port==="443")&&(o=t.hostname),{host:o,protocol:t.protocol,search:t.query,hash:t.hash,href:t.href,pathname:i,fullpath:i+(t.query||"")+(t.hash||"")}}var hm=function(){function e(){this.verbs={GET:new Yo,PUT:new Yo,POST:new Yo,DELETE:new Yo,PATCH:new Yo,HEAD:new Yo,OPTIONS:new Yo}}return e}(),um=function(){function e(){this.registries={}}return e.prototype.forURL=function(t){var i=il(t).host,o=this.registries[i];return o===void 0&&(o=this.registries[i]=new hm),o.verbs},e}(),si=typeof globalThis<"u"&&globalThis||typeof self<"u"&&self||typeof si<"u"&&si,Pi={searchParams:"URLSearchParams"in si,iterable:"Symbol"in si&&"iterator"in Symbol,blob:"FileReader"in si&&"Blob"in si&&function(){try{return new Blob,!0}catch{return!1}}(),formData:"FormData"in si,arrayBuffer:"ArrayBuffer"in si};function K7(e){return e&&DataView.prototype.isPrototypeOf(e)}Pi.arrayBuffer&&(_F=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],zF=ArrayBuffer.isView||function(e){return e&&_F.indexOf(Object.prototype.toString.call(e))>-1});var _F,zF;function Eu(e){if(typeof e!="string"&&(e=String(e)),/[^a-z0-9\-#$%&'*+.^_`|~!]/i.test(e)||e==="")throw new TypeError('Invalid character in header field name: "'+e+'"');return e.toLowerCase()}function dm(e){return typeof e!="string"&&(e=String(e)),e}function fm(e){var t={next:function(){var i=e.shift();return{done:i===void 0,value:i}}};return Pi.iterable&&(t[Symbol.iterator]=function(){return t}),t}function Tn(e){this.map={},e instanceof Tn?e.forEach(function(t,i){this.append(i,t)},this):Array.isArray(e)?e.forEach(function(t){this.append(t[0],t[1])},this):e&&Object.getOwnPropertyNames(e).forEach(function(t){this.append(t,e[t])},this)}Tn.prototype.append=function(e,t){e=Eu(e),t=dm(t);var i=this.map[e];this.map[e]=i?i+", "+t:t};Tn.prototype.delete=function(e){delete this.map[Eu(e)]};Tn.prototype.get=function(e){return e=Eu(e),this.has(e)?this.map[e]:null};Tn.prototype.has=function(e){return this.map.hasOwnProperty(Eu(e))};Tn.prototype.set=function(e,t){this.map[Eu(e)]=dm(t)};Tn.prototype.forEach=function(e,t){for(var i in this.map)this.map.hasOwnProperty(i)&&e.call(t,this.map[i],i,this)};Tn.prototype.keys=function(){var e=[];return this.forEach(function(t,i){e.push(i)}),fm(e)};Tn.prototype.values=function(){var e=[];return this.forEach(function(t){e.push(t)}),fm(e)};Tn.prototype.entries=function(){var e=[];return this.forEach(function(t,i){e.push([i,t])}),fm(e)};Pi.iterable&&(Tn.prototype[Symbol.iterator]=Tn.prototype.entries);function sm(e){if(e.bodyUsed)return Promise.reject(new TypeError("Already read"));e.bodyUsed=!0}function FF(e){return new Promise(function(t,i){e.onload=function(){t(e.result)},e.onerror=function(){i(e.error)}})}function Y7(e){var t=new FileReader,i=FF(t);return t.readAsArrayBuffer(e),i}function J7(e){var t=new FileReader,i=FF(t);return t.readAsText(e),i}function Q7(e){for(var t=new Uint8Array(e),i=new Array(t.length),o=0;o<t.length;o++)i[o]=String.fromCharCode(t[o]);return i.join("")}function vF(e){if(e.slice)return e.slice(0);var t=new Uint8Array(e.byteLength);return t.set(new Uint8Array(e)),t.buffer}function SF(){return this.bodyUsed=!1,this._initBody=function(e){this.bodyUsed=this.bodyUsed,this._bodyInit=e,e?typeof e=="string"?this._bodyText=e:Pi.blob&&Blob.prototype.isPrototypeOf(e)?this._bodyBlob=e:Pi.formData&&FormData.prototype.isPrototypeOf(e)?this._bodyFormData=e:Pi.searchParams&&URLSearchParams.prototype.isPrototypeOf(e)?this._bodyText=e.toString():Pi.arrayBuffer&&Pi.blob&&K7(e)?(this._bodyArrayBuffer=vF(e.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):Pi.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(e)||zF(e))?this._bodyArrayBuffer=vF(e):this._bodyText=e=Object.prototype.toString.call(e):this._bodyText="",this.headers.get("content-type")||(typeof e=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):Pi.searchParams&&URLSearchParams.prototype.isPrototypeOf(e)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},Pi.blob&&(this.blob=function(){var e=sm(this);if(e)return e;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){if(this._bodyArrayBuffer){var e=sm(this);return e||(ArrayBuffer.isView(this._bodyArrayBuffer)?Promise.resolve(this._bodyArrayBuffer.buffer.slice(this._bodyArrayBuffer.byteOffset,this._bodyArrayBuffer.byteOffset+this._bodyArrayBuffer.byteLength)):Promise.resolve(this._bodyArrayBuffer))}else return this.blob().then(Y7)}),this.text=function(){var e=sm(this);if(e)return e;if(this._bodyBlob)return J7(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(Q7(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},Pi.formData&&(this.formData=function(){return this.text().then(t$)}),this.json=function(){return this.text().then(JSON.parse)},this}var X7=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function e$(e){var t=e.toUpperCase();return X7.indexOf(t)>-1?t:e}function Xo(e,t){if(!(this instanceof Xo))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');t=t||{};var i=t.body;if(e instanceof Xo){if(e.bodyUsed)throw new TypeError("Already read");this.url=e.url,this.credentials=e.credentials,t.headers||(this.headers=new Tn(e.headers)),this.method=e.method,this.mode=e.mode,this.signal=e.signal,!i&&e._bodyInit!=null&&(i=e._bodyInit,e.bodyUsed=!0)}else this.url=String(e);if(this.credentials=t.credentials||this.credentials||"same-origin",(t.headers||!this.headers)&&(this.headers=new Tn(t.headers)),this.method=e$(t.method||this.method||"GET"),this.mode=t.mode||this.mode||null,this.signal=t.signal||this.signal,this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&i)throw new TypeError("Body not allowed for GET or HEAD requests");if(this._initBody(i),(this.method==="GET"||this.method==="HEAD")&&(t.cache==="no-store"||t.cache==="no-cache")){var o=/([?&])_=[^&]*/;if(o.test(this.url))this.url=this.url.replace(o,"$1_="+new Date().getTime());else{var s=/\?/;this.url+=(s.test(this.url)?"&":"?")+"_="+new Date().getTime()}}}Xo.prototype.clone=function(){return new Xo(this,{body:this._bodyInit})};function t$(e){var t=new FormData;return e.trim().split("&").forEach(function(i){if(i){var o=i.split("="),s=o.shift().replace(/\+/g," "),u=o.join("=").replace(/\+/g," ");t.append(decodeURIComponent(s),decodeURIComponent(u))}}),t}function n$(e){var t=new Tn,i=e.replace(/\r?\n[\t ]+/g," ");return i.split("\r").map(function(o){return o.indexOf(`
`)===0?o.substr(1,o.length):o}).forEach(function(o){var s=o.split(":"),u=s.shift().trim();if(u){var d=s.join(":").trim();t.append(u,d)}}),t}SF.call(Xo.prototype);function pr(e,t){if(!(this instanceof pr))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');t||(t={}),this.type="default",this.status=t.status===void 0?200:t.status,this.ok=this.status>=200&&this.status<300,this.statusText=t.statusText===void 0?"":""+t.statusText,this.headers=new Tn(t.headers),this.url=t.url||"",this._initBody(e)}SF.call(pr.prototype);pr.prototype.clone=function(){return new pr(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new Tn(this.headers),url:this.url})};pr.error=function(){var e=new pr(null,{status:0,statusText:""});return e.type="error",e};var i$=[301,302,303,307,308];pr.redirect=function(e,t){if(i$.indexOf(t)===-1)throw new RangeError("Invalid status code");return new pr(null,{status:t,headers:{location:e}})};var Qo=si.DOMException;try{new Qo}catch{Qo=function(t,i){this.message=t,this.name=i;var o=Error(t);this.stack=o.stack},Qo.prototype=Object.create(Error.prototype),Qo.prototype.constructor=Qo}function pm(e,t){return new Promise(function(i,o){var s=new Xo(e,t);if(s.signal&&s.signal.aborted)return o(new Qo("Aborted","AbortError"));var u=new XMLHttpRequest;function d(){u.abort()}u.onload=function(){var v={status:u.status,statusText:u.statusText,headers:n$(u.getAllResponseHeaders()||"")};v.url="responseURL"in u?u.responseURL:v.headers.get("X-Request-URL");var _="response"in u?u.response:u.responseText;setTimeout(function(){i(new pr(_,v))},0)},u.onerror=function(){setTimeout(function(){o(new TypeError("Network request failed"))},0)},u.ontimeout=function(){setTimeout(function(){o(new TypeError("Network request failed"))},0)},u.onabort=function(){setTimeout(function(){o(new Qo("Aborted","AbortError"))},0)};function m(v){try{return v===""&&si.location.href?si.location.href:v}catch{return v}}u.open(s.method,m(s.url),!0),s.credentials==="include"?u.withCredentials=!0:s.credentials==="omit"&&(u.withCredentials=!1),"responseType"in u&&(Pi.blob?u.responseType="blob":Pi.arrayBuffer&&s.headers.get("Content-Type")&&s.headers.get("Content-Type").indexOf("application/octet-stream")!==-1&&(u.responseType="arraybuffer")),t&&typeof t.headers=="object"&&!(t.headers instanceof Tn)?Object.getOwnPropertyNames(t.headers).forEach(function(v){u.setRequestHeader(v,dm(t.headers[v]))}):s.headers.forEach(function(v,_){u.setRequestHeader(_,v)}),s.signal&&(s.signal.addEventListener("abort",d),u.onreadystatechange=function(){u.readyState===4&&s.signal.removeEventListener("abort",d)}),u.send(typeof s._bodyInit>"u"?null:s._bodyInit)})}pm.polyfill=!0;si.fetch||(si.fetch=pm,si.Headers=Tn,si.Request=Xo,si.Response=pr);var yF=Object.freeze({__proto__:null,Headers:Tn,Request:Xo,Response:pr,get DOMException(){return Qo},fetch:pm});function r$(e,t){var i=["error","timeout","abort","readystatechange"],o=[],s=["readyState","responseText","response","responseXML","responseURL","status","statusText"],u=e._passthroughRequest=new t;u.open(e.method,e.url,e.async,e.username,e.password),e.responseType==="arraybuffer"&&(s=["readyState","response","status","statusText"],u.responseType=e.responseType),"onload"in u&&i.push("load"),e.async&&e.responseType!=="arraybuffer"&&(i.push("progress"),o.push("progress"));function d(N,H,k){for(var ae=0;ae<N.length;ae++){var te=N[ae];te in H&&(k[te]=H[te])}}function m(N,H,k){N.dispatchEvent(k),N["on"+H]&&N["on"+H](k)}function v(N){u["on"+N]=function(H){d(s,u,e),m(e,N,H)}}function _(N){u.upload&&e.upload&&e.upload["on"+N]&&(u.upload["on"+N]=function(H){m(e.upload,N,H)})}var z;for(z=0;z<i.length;z++)v(i[z]);for(z=0;z<o.length;z++)_(o[z]);e.async&&(u.timeout=e.timeout,u.withCredentials=e.withCredentials),!u.timeout&&u.timeout!==0&&(u.timeout=0);for(var F in e.requestHeaders)u.setRequestHeader(F,e.requestHeaders[F]);return u}function o$(e){function t(){Iu.call(this)}return t.prototype=Object.create(Iu.prototype),t.prototype.constructor=t,t.prototype.send=function(){if(this.sendArguments=arguments,!e.pretender.running)throw new Error("You shut down a Pretender instance while there was a pending request. That request just tried to complete. Check to see if you accidentally shut down a pretender earlier than you intended to");Iu.prototype.send.apply(this,arguments),e.pretender.checkPassthrough(this)?this.passthrough():e.pretender.handleRequest(this)},t.prototype.passthrough=function(){if(!this.sendArguments)throw new Error("You attempted to passthrough a FakeRequest that was never sent. Call `.send()` on the original request first");var o=r$(this,e.pretender._nativeXMLHttpRequest);return o.send.apply(o,this.sendArguments),o},t.prototype._passthroughCheck=function(i,o){return this._passthroughRequest?this._passthroughRequest[i].apply(this._passthroughRequest,o):Iu.prototype[i].apply(this,o)},t.prototype.abort=function(){return this._passthroughCheck("abort",arguments)},t.prototype.getResponseHeader=function(){return this._passthroughCheck("getResponseHeader",arguments)},t.prototype.getAllResponseHeaders=function(){return this._passthroughCheck("getAllResponseHeaders",arguments)},e.pretender._nativeXMLHttpRequest.prototype._passthroughCheck&&console.warn("You created a second Pretender instance while there was already one running. Running two Pretender servers at once will lead to unexpected results and will be removed entirely in a future major version.Please call .shutdown() on your instances when you no longer need them to respond."),t}var am=function(){function e(){this.length=0}return e.prototype.push=function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];return 0},e}();function TF(e,t,i){var o=0,s=e.requestBody;s&&(s instanceof FormData?s.forEach(function(u){u instanceof File?o+=u.size:o+=u.length}):o=s.byteLength||s.size||s.length||0),setTimeout(function(){if(!e.aborted&&!e.status){var u=new Date().getTime()-t.getTime(),d=i<=0?0:u/i*o;e.upload._progress(!0,d,o),e._progress(!0,d,o),TF(e,t,i)}else e.status&&(e.upload._progress(!0,o,o),e._progress(!0,o,o))},50)}function s$(e){return Object.prototype.toString.call(e)==="[object Array]"}var xF={};function Zs(e){return function(t,i,o){return this.register(e,t,i,o)}}var Vh=function(){function e(){var t=this;this.hosts=new um,this.handlers=[],this.get=Zs("GET"),this.post=Zs("POST"),this.put=Zs("PUT"),this.delete=Zs("DELETE"),this.patch=Zs("PATCH"),this.head=Zs("HEAD"),this.options=Zs("OPTIONS"),this.passthrough=xF;var i=arguments[arguments.length-1],o=typeof i=="object"?i:null,s=o&&o.trackRequests===!1;this.handledRequests=s?new am:[],this.passthroughRequests=s?new am:[],this.unhandledRequests=s?new am:[],this.requestReferences=[],this.forcePassthrough=o&&o.forcePassthrough===!0,this.disableUnhandled=o&&o.disableUnhandled===!0,this._nativeXMLHttpRequest=self.XMLHttpRequest,this.running=!1;var u={pretender:this};this.ctx=u,self.XMLHttpRequest=o$(u),this._fetchProps=yF?["fetch","Headers","Request","Response"]:[],this._fetchProps.forEach(function(v){t["_native"+v]=self[v],self[v]=yF[v]},this),this.running=!0;for(var d=o?arguments.length-1:arguments.length,m=0;m<d;m++)this.map(arguments[m])}return e.prototype.map=function(t){t.call(this)},e.prototype.register=function(t,i,o,s){if(!o)throw new Error("The function you tried passing to Pretender to handle "+t+" "+i+" is undefined or missing.");var u=o;u.numberOfCalls=0,u.async=s,this.handlers.push(u);var d=this.hosts.forURL(i)[t];return d.add([{path:il(i).fullpath,handler:u}]),u},e.prototype.checkPassthrough=function(t){var i=t.method.toUpperCase(),o=il(t.url).fullpath,s=this.hosts.forURL(t.url)[i].recognize(o),u=s&&s[0];return u&&u.handler===xF||this.forcePassthrough?(this.passthroughRequests.push(t),this.passthroughRequest(i,o,t),!0):!1},e.prototype.handleRequest=function(t){var i=t.method.toUpperCase(),o=t.url,s=this._handlerFor(i,o,t);if(s){s.handler.numberOfCalls++;var u=s.handler.async;this.handledRequests.push(t);var d=this,m=function(_){if(!s$(_)){var z="Remember to `return [status, headers, body];` in your route handler.";throw new Error("Nothing returned by handler for "+o+". "+z)}var F=_[0],N=d.prepareHeaders(_[1]),H=d.prepareBody(_[2],N);d.handleResponse(t,u,function(){t.respond(F,N,H),d.handledRequest(i,o,t)})};try{var v=s.handler(t);v&&typeof v.then=="function"?v.then(function(_){m(_)}):m(v)}catch(_){this.erroredRequest(i,o,t,_),this.resolve(t)}}else this.disableUnhandled||(this.unhandledRequests.push(t),this.unhandledRequest(i,o,t))},e.prototype.handleResponse=function(t,i,o){var s=typeof i=="function"?i():i;if(s=typeof s=="boolean"||typeof s=="number"?s:0,s===!1)o();else{var u=this;u.requestReferences.push({request:t,callback:o}),s!==!0&&(TF(t,new Date,s),setTimeout(function(){u.resolve(t)},s))}},e.prototype.resolve=function(t){for(var i=0,o=this.requestReferences.length;i<o;i++){var s=this.requestReferences[i];if(s.request===t){s.callback(),this.requestReferences.splice(i,1);break}}},e.prototype.requiresManualResolution=function(t,i){var o=this._handlerFor(t.toUpperCase(),i,{});if(!o)return!1;var s=o.handler.async;return typeof s=="function"?s()===!0:s===!0},e.prototype.prepareBody=function(t,i){return t},e.prototype.prepareHeaders=function(t){return t},e.prototype.handledRequest=function(t,i,o){},e.prototype.passthroughRequest=function(t,i,o){},e.prototype.unhandledRequest=function(t,i,o){throw new Error("Pretender intercepted "+t+" "+i+" but no handler was defined for this type of request")},e.prototype.erroredRequest=function(t,i,o,s){throw s.message="Pretender intercepted "+t+" "+i+" but encountered an error: "+s.message,s},e.prototype.shutdown=function(){var t=this;self.XMLHttpRequest=this._nativeXMLHttpRequest,this._fetchProps.forEach(function(i){self[i]=t["_native"+i]},this),this.ctx.pretender=void 0,this.running=!1},e.prototype._handlerFor=function(t,i,o){var s=this.hosts.forURL(i)[t],u=s.recognize(il(i).fullpath),d=u?u[0]:null;return d&&(o.params=d.params,o.queryParams=u.queryParams),d},e.parseURL=il,e.Hosts=um,e.Registry=hm,e}();Vh.parseURL=il;Vh.Hosts=um;Vh.Registry=hm;var AF=Vh;typeof global<"u"&&global.__pretenderNodePolyfill&&(delete global.self,delete global.__pretenderNodePolyfill);function a$(e){for(var t=(0,DF.default)((0,ld.default)(e)),i=t.length,o=new Array(i),s={},u=i,d=function m(v,_,z){if(z.indexOf(v)>=0)throw new Error("Cyclic dependency in properties ".concat(JSON.stringify(z)));if(!s[_]){s[_]=!0;var F=e.filter(function(ae){return ae&&ae[0]===v});if(_=F.length,_){var N=z.concat(v);do{var H=F[--_],k=H[1];k&&m(k,t.indexOf(k),N)}while(_)}o[--i]=v}};u--;)s[u]||d(t[u],u,[]);return o.reverse()}var js=function e(){this.build=function(t){var i={},o=Object.assign({},this.attrs);delete o.afterCreate,Object.keys(o).forEach(u=>{e.isTrait.call(this,u)&&delete o[u]});var s=l$(o,t);return s.forEach(function(u){var d,m;d=function(z){return(0,MF.default)(z,m)},m=_=>Array.isArray(_)?_.map(m):(0,sl.default)(_)?d(_):(0,Ou.default)(_)?_.call(o,t):_;var v=o[u];(0,Ou.default)(v)?i[u]=v.call(i,t):i[u]=m(v)}),i}};js.extend=function(e){var t=Object.assign({},this.attrs,e),i=function(){this.attrs=t,js.call(this)};return i.extend=js.extend,i.extractAfterCreateCallbacks=js.extractAfterCreateCallbacks,i.isTrait=js.isTrait,i.attrs=t,i};js.extractAfterCreateCallbacks=function(){var{traits:e}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=[],i=this.attrs||{},o;return i.afterCreate&&t.push(i.afterCreate),Array.isArray(e)?o=e:o=Object.keys(i),o.filter(s=>this.isTrait(s)&&i[s].extension.afterCreate).forEach(s=>{t.push(i[s].extension.afterCreate)}),t};js.isTrait=function(e){var{attrs:t}=this;return(0,sl.default)(t[e])&&t[e].__isTrait__===!0};function l$(e,t){var i=function(){},o=new i,s=[],u;return Object.keys(e).forEach(function(d){var m;Object.defineProperty(o.constructor.prototype,d,{get(){return s.push([u,d]),m},set(v){m=v},enumerable:!1,configurable:!0})}),Object.keys(e).forEach(function(d){var m=e[d];typeof m!="function"&&(o[d]=m)}),Object.keys(e).forEach(function(d){var m=e[d];u=d,typeof m=="function"&&(o[d]=m.call(o,t)),s.push([d])}),a$(s)}function u$(e){return(+e).toString()===e.toString()}var Fm=class{constructor(){this._nextId=1,this._ids={}}get(){return this._nextId}set(t){if(this._ids[t])throw new Error("Attempting to use the ID ".concat(t,", but it's already been used"));u$(t)&&+t>=this._nextId&&(this._nextId=+t+1),this._ids[t]=!0}inc(){var t=this.get()+1;return this._nextId=t,t}fetch(){var t=this.get();return this._ids[t]=!0,this.inc(),t.toString()}reset(){this._nextId=1,this._ids={}}};var c$=console.warn,Xn=class{constructor(t){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},o=arguments.length>2?arguments[2]:void 0;this.code=t,this.headers=i,t===204?o!==void 0&&o!==""?c$(`Mirage: One of your route handlers is returning a custom
          204 Response that has data, but this is a violation of the HTTP spec
          and could lead to unexpected behavior. 204 responses should have no
          content (an empty string) as their body.`):this.data="":(o===void 0||o==="")&&!Object.prototype.hasOwnProperty.call(this.headers,"Content-Type")?this.data={}:this.data=o,t!==204&&!Object.prototype.hasOwnProperty.call(this.headers,"Content-Type")&&(this.headers["Content-Type"]="application/json")}toRackResponse(){return[this.code,this.headers,this.data]}};function PF(e,t,i,o,s,u,d){try{var m=e[u](d),v=m.value}catch(_){return void i(_)}m.done?t(v):Promise.resolve(v).then(o,s)}function h$(e){return function(){var t=this,i=arguments;return new Promise(function(o,s){var u=e.apply(t,i);function d(v){PF(u,o,s,d,m,"next",v)}function m(v){PF(u,o,s,d,m,"throw",v)}d(void 0)})}}function es(e,t,i){return(t=p$(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function IF(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),i.push.apply(i,o)}return i}function d$(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?IF(Object(i),!0).forEach(function(o){es(e,o,i[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):IF(Object(i)).forEach(function(o){Object.defineProperty(e,o,Object.getOwnPropertyDescriptor(i,o))})}return e}function f$(e,t){if(typeof e!="object"||!e)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var o=i.call(e,t||"default");if(typeof o!="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function p$(e){var t=f$(e,"string");return typeof t=="symbol"?t:t+""}var mm={},gm={},_m={},vm={};function De(e){if(typeof mm[e]!="string"){var t=UC(Vr(e),!1),i=t.split("/").map(LF.default).join("/");mm[e]=i}return mm[e]}function $t(e){if(typeof gm[e]!="string"){var t=WC(Vr(e));gm[e]=t}return gm[e]}function Vr(e){if(typeof _m[e]!="string"){var t=HC(e);_m[e]=t}return _m[e]}function Xh(e){if(typeof vm[e]!="string"){var t=Rh(e);vm[e]=t}return vm[e]}function m$(e){return(0,sl.default)(e)&&e.__isAssociation__===!0}var EF=["description","fileName","lineNumber","message","name","number","stack"];function Me(e,t){if(typeof e=="string"&&!t)throw new ed(e);if(!e)throw new ed(t.replace(/^ +/gm,"")||"Assertion failed")}function ed(e,t){var i=Error(e);t&&(i.stack=t);for(var o=0;o<EF.length;o++){var s=EF[o];["description","message","stack"].indexOf(s)>-1?this[s]="Mirage: ".concat(i[s]):this[s]=i[s]}}ed.prototype=Object.create(Error.prototype);var Ws=class{constructor(t,i){this.modelName=void 0,typeof t=="object"?(this.modelName=void 0,this.opts=t):(this.modelName=t?$t(t):"",this.opts=i||{}),this.name="",this.ownerModelName=""}setSchema(t){this.schema=t}isReflexive(){var t=!!(this.modelName===this.ownerModelName&&this.opts.inverse),i=this.opts.inverse===void 0&&this.ownerModelName===this.modelName;return t||i}get isPolymorphic(){return this.opts.polymorphic}get type(){throw new Error("Subclasses of Association must implement a getter for type")}get foreignKey(){return this.getForeignKey()}get identifier(){throw new Error("Subclasses of Association must implement a getter for identifier")}},rl={},Hs=class extends Ws{get identifier(){if(typeof rl[this.name]!="string"){var t="".concat(De(this.name),"Id");rl[this.name]=t}return rl[this.name]}get type(){return"belongsTo"}getForeignKeyArray(){return[De(this.ownerModelName),this.getForeignKey()]}getForeignKey(){if(typeof rl[this.name]!="string"){var t="".concat(De(this.name),"Id");rl[this.name]=t}return rl[this.name]}addMethodsToModelClass(t,i){var o=t.prototype,s=this,u=this.getForeignKey(),d={[i]:this};o.belongsToAssociations=Object.assign(o.belongsToAssociations,d),Object.keys(o.belongsToAssociations).forEach(m=>{var v=o.belongsToAssociations[m];o.belongsToAssociationFks[v.getForeignKey()]=v}),this.schema.addDependentAssociation(this,this.modelName),o.associationKeys.add(i),o.associationIdKeys.add(u),Object.defineProperty(o,u,{get(){this._tempAssociations=this._tempAssociations||{};var m=this._tempAssociations[i],v;return m===null?v=null:s.isPolymorphic?m?v={id:m.id,type:m.modelName}:v=this.attrs[u]:m?v=m.id:v=this.attrs[u],v},set(m){var v;m===null?v=null:m!==void 0&&(s.isPolymorphic?(Me(typeof m=="object","You're setting an ID on the polymorphic association '".concat(s.name,"' but you didn't pass in an object. Polymorphic IDs need to be in the form { type, id }.")),v=s.schema[s.schema.toCollectionName(m.type)].find(m.id)):(v=s.schema[s.schema.toCollectionName(s.modelName)].find(m),Me(v,"Couldn't find ".concat(s.modelName," with id = ").concat(m)))),this[i]=v}}),Object.defineProperty(o,i,{get(){this._tempAssociations=this._tempAssociations||{};var m=this._tempAssociations[i],v=this[u],_=null;return m?_=m:v!==null&&(s.isPolymorphic?_=s.schema[s.schema.toCollectionName(v.type)].find(v.id):_=s.schema[s.schema.toCollectionName(s.modelName)].find(v)),_},set(m){if(this._tempAssociations=this._tempAssociations||{},this._tempAssociations[i]=m,m&&m.hasInverseFor(s)){var v=m.inverseFor(s);m.associate(this,v)}}}),o["new".concat(Xh(i))]=function(){var m,v;s.isPolymorphic?(m=arguments.length<=0?void 0:arguments[0],v=arguments.length<=1?void 0:arguments[1]):(m=s.modelName,v=arguments.length<=0?void 0:arguments[0]);var _=s.schema[s.schema.toCollectionName(m)].new(v);return this[i]=_,_},o["create".concat(Xh(i))]=function(){var m,v;s.isPolymorphic?(m=arguments.length<=0?void 0:arguments[0],v=arguments.length<=1?void 0:arguments[1]):(m=s.modelName,v=arguments.length<=0?void 0:arguments[0]);var _=s.schema[s.schema.toCollectionName(m)].create(v);return this[i]=_,this.save(),_.reload()}}disassociateAllDependentsFromTarget(t){var i=this.ownerModelName,o;this.isPolymorphic?o={type:t.modelName,id:t.id}:o=t.id;var s=this.schema[this.schema.toCollectionName(i)].where(u=>{var d=u[this.getForeignKey()];return d?typeof d=="object"?d.type===o.type&&d.id===o.id:d===o:!1});s.models.forEach(u=>{u.disassociate(t,this),u.save()})}};function ts(e){return Array.isArray(e)?e.map(ts):Object.assign({},e)}var Sm=class{constructor(t,i,o){this.name=t,this._records=[],this.identityManager=new o,i&&this.insert(i)}all(){return ts(this._records)}insert(t){return Array.isArray(t)?(0,NF.default)(t,i=>this._insertRecord(i)):this._insertRecord(t)}find(t){if(Array.isArray(t)){var i=this._findRecords(t).filter(Boolean).map(ts);return i}else{var o=this._findRecord(t);return o?ts(o):null}}findBy(t){var i=this._findRecordBy(t);return i?ts(i):null}where(t){return this._findRecordsWhere(t).map(ts)}firstOrCreate(t){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},o=this.where(t),[s]=o;if(s)return s;var u=Object.assign(i,t),d=this.insert(u);return d}update(t,i){var o;if(typeof i>"u"){i=t;var s=[];return this._records.forEach(_=>{var z=Object.assign({},_);this._updateRecord(_,i),(0,Yh.default)(z,_)||s.push(_)}),s}else if(typeof t=="number"||typeof t=="string"){var u=t,d=this._findRecord(u);return this._updateRecord(d,i),d}else if(Array.isArray(t)){var m=t;return o=this._findRecords(m),o.forEach(_=>{this._updateRecord(_,i)}),o}else if(typeof t=="object"){var v=t;return o=this._findRecordsWhere(v),o.forEach(_=>{this._updateRecord(_,i)}),o}}remove(t){var i;if(typeof t>"u")this._records=[],this.identityManager.reset();else if(typeof t=="number"||typeof t=="string"){var o=this._findRecord(t),s=this._records.indexOf(o);this._records.splice(s,1)}else Array.isArray(t)?(i=this._findRecords(t),i.forEach(u=>{var d=this._records.indexOf(u);this._records.splice(d,1)})):typeof t=="object"&&(i=this._findRecordsWhere(t),i.forEach(u=>{var d=this._records.indexOf(u);this._records.splice(d,1)}))}_findRecord(t){return t=t.toString(),this._records.find(i=>i.id===t)}_findRecordBy(t){return this._findRecordsWhere(t)[0]}_findRecords(t){return t.map(this._findRecord,this)}_findRecordsWhere(t){var i=this._records;function o(u){var d=Object.keys(t);return d.every(function(m){return String(u[m])===String(t[m])})}var s=typeof t=="object"?o:t;return i.filter(s)}_insertRecord(t){var i=ts(t);return i&&(i.id===void 0||i.id===null)?i.id=this.identityManager.fetch(i):(i.id=i.id.toString(),this.identityManager.set(i.id)),this._records.push(i),ts(i)}_updateRecord(t,i){var o=i&&Object.prototype.hasOwnProperty.call(i,"id")?i.id.toString():null,s=t.id;if(o&&s!==o)throw new Error("Updating the ID of a record is not permitted");for(var u in i)u!=="id"&&(t[u]=i[u])}},td=class{constructor(t,i){this._collections=[],this.registerIdentityManagers(i),t&&this.loadData(t)}loadData(t){for(var i in t)this.createCollection(i,(0,RF.default)(t[i]))}dump(){return this._collections.reduce((t,i)=>(t[i.name]=i.all(),t),{})}createCollection(t,i){if(this[t])i&&this[t].insert(i);else{var o=this.identityManagerFor(t),s=new Sm(t,i,o);Object.defineProperty(this,t,{get(){var u=s.all();return["insert","find","findBy","where","update","remove","firstOrCreate"].forEach(function(d){u[d]=function(){return s[d](...arguments)}}),u}}),Object.defineProperty(this,"_".concat(t),{get(){var u=[];return["insert","find","findBy","where","update","remove","firstOrCreate"].forEach(function(d){u[d]=function(){return s[d](...arguments)}}),u}}),this._collections.push(s)}return this}createCollections(){for(var t=arguments.length,i=new Array(t),o=0;o<t;o++)i[o]=arguments[o];i.forEach(s=>this.createCollection(s))}emptyData(){this._collections.forEach(t=>t.remove())}identityManagerFor(t){return this._identityManagers[this._container.inflector.singularize(t)]||this._identityManagers.application||Fm}registerIdentityManagers(t){this._identityManagers=t||{}}},er=class e{constructor(t){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];Me(t&&typeof t=="string","You must pass a `modelName` into a Collection"),this.modelName=t,this.models=i}get length(){return this.models.length}update(){for(var t=arguments.length,i=new Array(t),o=0;o<t;o++)i[o]=arguments[o];return(0,go.default)(this.models,"update",...i),this}save(){return(0,go.default)(this.models,"save"),this}reload(){return(0,go.default)(this.models,"reload"),this}destroy(){return(0,go.default)(this.models,"destroy"),this}add(t){return this.models.push(t),this}remove(t){var i=this.models.find(s=>s.toString()===t.toString());if(i){var o=this.models.indexOf(i);this.models.splice(o,1)}return this}includes(t){return this.models.some(i=>i.toString()===t.toString())}filter(t){var i=this.models.filter(t);return new e(this.modelName,i)}sort(t){var i=this.models.concat().sort(t);return new e(this.modelName,i)}slice(){var t=this.models.slice(...arguments);return new e(this.modelName,t)}mergeCollection(t){return this.models=this.models.concat(t.models),this}toString(){return"collection:".concat(this.modelName,"(").concat(this.models.map(t=>t.id).join(","),")")}},yi=class e{constructor(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];this.models=t}get length(){return this.models.length}update(){for(var t=arguments.length,i=new Array(t),o=0;o<t;o++)i[o]=arguments[o];return(0,go.default)(this.models,"update",...i),this}destroy(){return(0,go.default)(this.models,"destroy"),this}save(){return(0,go.default)(this.models,"save"),this}reload(){return(0,go.default)(this.models,"reload"),this}add(t){return this.models.push(t),this}remove(t){var i=this.models.find(s=>(0,Yh.default)(s.attrs,t.attrs));if(i){var o=this.models.indexOf(i);this.models.splice(o,1)}return this}includes(t){return this.models.some(i=>(0,Yh.default)(i.attrs,t.attrs))}filter(t){var i=this.models.filter(t);return new e(i)}sort(t){var i=this.models.concat().sort(t);return new e(i)}slice(){var t=this.models.slice(...arguments);return new e(t)}mergeCollection(t){return this.models=this.models.concat(t.models),this}toString(){return"collection:".concat(this.modelName,"(").concat(this.models.map(t=>t.id).join(","),")")}},ol={},Us=class extends Ws{get identifier(){if(typeof ol[this.name]!="string"){var t="".concat(De(this._container.inflector.singularize(this.name)),"Ids");ol[this.name]=t}return ol[this.name]}get type(){return"hasMany"}getForeignKeyArray(){return[De(this.ownerModelName),this.getForeignKey()]}getForeignKey(){if(typeof ol[this.name]!="string"){var t="".concat(this._container.inflector.singularize(De(this.name)),"Ids");ol[this.name]=t}return ol[this.name]}addMethodsToModelClass(t,i){var o=t.prototype,s=this,u=this.getForeignKey(),d={[i]:this};o.hasManyAssociations=Object.assign(o.hasManyAssociations,d),Object.keys(o.hasManyAssociations).forEach(m=>{var v=o.hasManyAssociations[m];o.hasManyAssociationFks[v.getForeignKey()]=v}),this.schema.addDependentAssociation(this,this.modelName),o.associationKeys.add(i),o.associationIdKeys.add(u),Object.defineProperty(o,u,{get(){this._tempAssociations=this._tempAssociations||{};var m=this._tempAssociations[i],v=[];return m?s.isPolymorphic?v=m.models.map(_=>({type:_.modelName,id:_.id})):v=m.models.map(_=>_.id):v=this.attrs[u]||[],v},set(m){var v;if(m===null)v=[];else if(m!==void 0)if(Me(Array.isArray(m),"You must pass an array in when setting ".concat(u," on ").concat(this)),s.isPolymorphic){Me(m.every(z=>typeof z=="object"&&typeof z.type<"u"&&typeof z.id<"u"),"You must pass in an array of polymorphic identifiers (objects of shape { type, id }) when setting ".concat(u," on ").concat(this));var _=m.map(z=>{var{type:F,id:N}=z;return s.schema[s.schema.toCollectionName(F)].find(N)});v=new yi(_)}else v=s.schema[s.schema.toCollectionName(s.modelName)].find(m);this[i]=v}}),Object.defineProperty(o,i,{get(){this._tempAssociations=this._tempAssociations||{};var m=null;if(this._tempAssociations[i])m=this._tempAssociations[i];else{if(s.isPolymorphic)if(this[u]){var v=this[u],_=v.map(z=>{var{type:F,id:N}=z;return s.schema[s.schema.toCollectionName(F)].find(N)});m=new yi(_)}else m=new yi(s.modelName);else this[u]?m=s.schema[s.schema.toCollectionName(s.modelName)].find(this[u]):m=new er(s.modelName);this._tempAssociations[i]=m}return m},set(m){(m instanceof er||m instanceof yi)&&(m=m.models),m=m?(0,Mu.default)(m):[],this._tempAssociations=this._tempAssociations||{};var v;s.isPolymorphic?v=new yi(m):v=new er(s.modelName,m),this._tempAssociations[i]=v,m.forEach(_=>{if(_.hasInverseFor(s)){var z=_.inverseFor(s);_.associate(this,z)}})}}),o["new".concat(Xh(De(this._container.inflector.singularize(s.name))))]=function(){var m,v;s.isPolymorphic?(m=arguments.length<=0?void 0:arguments[0],v=arguments.length<=1?void 0:arguments[1]):(m=s.modelName,v=arguments.length<=0?void 0:arguments[0]);var _=s.schema[s.schema.toCollectionName(m)].new(v),z=this[i].models;return z.push(_),this[i]=z,_},o["create".concat(Xh(De(this._container.inflector.singularize(s.name))))]=function(){var m,v;s.isPolymorphic?(m=arguments.length<=0?void 0:arguments[0],v=arguments.length<=1?void 0:arguments[1]):(m=s.modelName,v=arguments.length<=0?void 0:arguments[0]);var _=s.schema[s.schema.toCollectionName(m)].create(v),z=this[i].models;return z.push(_),this[i]=z,this.save(),_.reload()}}disassociateAllDependentsFromTarget(t){var i=this.ownerModelName,o;this.isPolymorphic?o={type:t.modelName,id:t.id}:o=t.id;var s=this.schema[this.schema.toCollectionName(i)].where(u=>{var d=u[this.getForeignKey()];return d&&d.find(m=>typeof m=="object"?m.type===o.type&&m.id===o.id:m===o)});s.models.forEach(u=>{u.disassociate(t,this),u.save()})}},ym={},al=class{getModelClassFromPath(t){if(t){if(typeof ym[t]!="string"){for(var i=t.split("/"),o,s=i.length-1;s>=0;s--){var u=i[s];if(u.length&&u[0]!==":"){o=u;break}}ym[t]=$t(De(this._container.inflector.singularize(o)))}return ym[t]}}_getIdForRequest(t,i){var o;return t&&t.params&&t.params.id?o=t.params.id:i&&i.data&&i.data.id&&(o=i.data.id),o}_getJsonApiDocForRequest(t,i){var o;return t&&t.requestBody&&(o=JSON.parse(t.requestBody)),this.serializerOrRegistry.normalize(o,i)}_getAttrsForRequest(t,i){var o=this._getJsonApiDocForRequest(t,i),s=this._getIdForRequest(t,o),u={};return Me(o.data&&(o.data.attributes||o.data.type||o.data.relationships),"You're using a shorthand or #normalizedRequestAttrs, but your serializer's normalize function did not return a valid JSON:API document. Consult the docs for the normalize hook on the Serializer class."),o.data.attributes&&(u=Object.keys(o.data.attributes).reduce((d,m)=>(d[De(m)]=o.data.attributes[m],d),{})),o.data.relationships&&Object.keys(o.data.relationships).forEach(d=>{var m=o.data.relationships[d],v=this.schema.modelClassFor(i),_=v.associationFor(De(d)),z;Me(_,"You're passing the relationship '".concat(d,"' to the '").concat(i,"' model via a ").concat(t.method," to '").concat(t.url,"', but you did not define the '").concat(d,"' association on the '").concat(i,"' model.")),_.isPolymorphic?z=m.data:_ instanceof Us?z=m.data&&m.data.map(F=>F.id):z=m.data&&m.data.id,u[_.identifier]=z},{}),s&&(u.id=s),u}_getAttrsForFormRequest(t){var{requestBody:i}=t,o,s=[];return Me(i&&typeof i=="string","You're using the helper method #normalizedFormData, but the request body is empty or not a valid url encoded string."),s=i.split("&"),o=s.reduce((u,d)=>{var[m,v]=d.split("=");return u[m]=decodeURIComponent(v.replace(/\+/g," ")),u},{}),o}},nd=class extends al{constructor(t,i,o,s,u){super(u),this.schema=t,this.serializerOrRegistry=i,this.userFunction=o,this.path=s}handle(t){return this.userFunction(this.schema,t)}setRequest(t){this.request=t}serialize(t,i){var o;return i?o=this.serializerOrRegistry.serializerFor(i,{explicit:!0}):o=this.serializerOrRegistry,o.serialize(t,this.request)}normalizedRequestAttrs(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,{path:i,request:o,request:{requestHeaders:s}}=this,u,d={};for(var m in s)d[m.toLowerCase()]=s[m];return/x-www-form-urlencoded/.test(d["content-type"])?u=this._getAttrsForFormRequest(o):(t?Me($t(t)===t,"You called normalizedRequestAttrs('".concat(t,"'), but normalizedRequestAttrs was intended to be used with the dasherized version of the model type. Please change this to normalizedRequestAttrs('").concat($t(t),"').")):t=this.getModelClassFromPath(i),Me(this.schema.hasModelForModelName(t),"You're using a shorthand or the #normalizedRequestAttrs helper but the detected model of '".concat(t,"' does not exist. You might need to pass in the correct modelName as the first argument to #normalizedRequestAttrs.")),u=this._getAttrsForRequest(o,t)),u}},Tm=class{constructor(t,i,o){this.schema=t,this.serializerOrRegistry=i,this.object=o}handle(){return this.object}},Vs=class extends al{constructor(t,i,o,s){var u=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{};super(),o=o||this.getModelClassFromPath(s),this.schema=t,this.serializerOrRegistry=i,this.shorthand=o,this.options=u;var d=Array.isArray(o)?"array":typeof o;if(d==="string"){var m=this.schema[this.schema.toCollectionName(o)];this.handle=_=>this.handleStringShorthand(_,m)}else if(d==="array"){var v=o.map(_=>this.schema[this.schema.toCollectionName(_)]);this.handle=_=>this.handleArrayShorthand(_,v)}}},Am=class extends Vs{handleStringShorthand(t,i){var o=this.shorthand,s=De(o);Me(i,"The route handler for ".concat(t.url," is trying to access the ").concat(s," model, but that model doesn't exist."));var u=this._getIdForRequest(t);if(u){var d=i.find(u);return d||new Xn(404)}else if(this.options.coalesce){var m=this.serializerOrRegistry.getCoalescedIds(t,s);if(m)return i.find(m)}return i.all()}handleArrayShorthand(t,i){var o=this.shorthand,s=this._getIdForRequest(t);return Me(!s||this._container.inflector.singularize(o[0])!==o[0],`It looks like you're using the "Single record with
      related records" version of the array shorthand, in addition to opting
      in to the model layer. This shorthand was made when there was no
      serializer layer. Now that you're using models, please ensure your
      relationships are defined, and create a serializer for the parent
      model, adding the relationships there.`),i.map(u=>u.all())}},Pm=class extends Vs{handleStringShorthand(t,i){var o=this.shorthand,s=De(o);Me(i,"The route handler for ".concat(t.url," is trying to access the ").concat(s," model, but that model doesn't exist."));var u=this._getAttrsForRequest(t,i.camelizedModelName);return i.create(u)}},Im=class extends Vs{handleStringShorthand(t,i){var o=this.shorthand,s=De(o);Me(i,"The route handler for ".concat(t.url," is trying to access the ").concat(s," model, but that model doesn't exist."));var u=this._getIdForRequest(t),d=i.find(u);if(!d)return new Xn(404);var m=this._getAttrsForRequest(t,i.camelizedModelName);return d.update(m)}},Em=class extends Vs{handleStringShorthand(t,i){var o=this.shorthand,s=De(o);Me(i,"The route handler for ".concat(t.url," is trying to access the ").concat(s," model, but that model doesn't exist."));var u=this._getIdForRequest(t),d=i.find(u);if(!d)return new Xn(404);d.destroy()}handleArrayShorthand(t,i){var o=this._getIdForRequest(t),s=i[0].find(o),u=i.slice(1).map(d=>this._container.inflector.pluralize(d.camelizedModelName));u.forEach(d=>s[d].destroy()),s.destroy()}},Om=class extends Vs{handleStringShorthand(t,i){var o=this.shorthand,s=De(o);Me(i,"The route handler for ".concat(t.url," is trying to access the ").concat(s," model, but that model doesn't exist."));var u=this._getIdForRequest(t);if(u){var d=i.find(u);return d?new Xn(204):new Xn(404)}else if(this.options.coalesce&&t.queryParams&&t.queryParams.ids){var m=i.find(t.queryParams.ids);return m?new Xn(204):new Xn(404)}else return new Xn(204)}},g$={get:200,put:204,post:201,delete:204};function _$(e){var{verb:t,schema:i,serializerOrRegistry:o,path:s,rawHandler:u,options:d,middleware:m}=e,v,_=[i,o,u,s,d,m],z=typeof u;return z==="function"?v=new nd(..._):z==="object"&&u?v=new Tm(..._):t==="get"?v=new Am(..._):t==="post"?v=new Pm(..._):t==="put"||t==="patch"?v=new Im(..._):t==="delete"?v=new Em(..._):t==="head"&&(v=new Om(..._)),v}var id=class{constructor(t){var{schema:i,verb:o,rawHandler:s,customizedCode:u,options:d,path:m,serializerOrRegistry:v,middleware:_}=t;this.verb=o,this.customizedCode=u,this.serializerOrRegistry=v,this.middleware=_||[],this.handler=_$({verb:o,schema:i,path:m,serializerOrRegistry:v,rawHandler:s,options:d})}handle(t){return this._getMirageResponseForRequest(t,this.middleware).then(i=>this.serialize(i,t)).then(i=>i.toRackResponse())}_getMirageResponseForRequest(t){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],o;try{this.handler instanceof nd&&this.handler.setRequest(t),o=this.handleWithMiddleware(t,[...i,(u,d)=>this.handler.handle(d)])}catch(u){if(u instanceof ed)o=new Xn(500,{},u);else{var s=u.message||u;o=new Xn(500,{},{message:s,stack:"Mirage: Your ".concat(t.method," handler for the url ").concat(t.url,` threw an error:

`).concat(u.stack||u)})}}return this._toMirageResponse(o)}handleWithMiddleware(t,i){var o=this,[s,...u]=i;return s(this.schema,t,function(){var d=arguments.length>0&&arguments[0]!==void 0?arguments[0]:t;return o.handleWithMiddleware(d,u)})}_toMirageResponse(t){var i;return new Promise((o,s)=>{Promise.resolve(t).then(u=>{if(u instanceof Xn)i=t;else{var d=this._getCodeForResponse(u);i=new Xn(d,{},u)}o(i)}).catch(s)})}_getCodeForResponse(t){var i;return this.customizedCode?i=this.customizedCode:(i=g$[this.verb],i===204&&t!==void 0&&t!==""&&(i=200)),i}serialize(t,i){return t.data=this.serializerOrRegistry.serialize(t.data,i),t}};function $F(e,t){class i extends this{constructor(){for(var s=arguments.length,u=new Array(s),d=0;d<s;d++)u[d]=arguments[d];super(...u),e&&(0,BF.default)(e,"constructor")&&e.constructor.call(this,...u)}}return Object.assign(i,this,t),e&&Object.assign(i.prototype,e),i}var ZF=(()=>{class e{constructor(i,o,s,u){return Me(i,"A model requires a schema"),Me(o,"A model requires a modelName"),this._schema=i,this.modelName=o,this.fks=u||[],this.attrs={},s=s||{},this.fks.forEach(d=>{this.attrs[d]=s[d]!==void 0?s[d]:null}),Object.keys(s).forEach(d=>{var m=s[d];this._validateAttr(d,m),this._setupAttr(d,m),this._setupRelationship(d,m)}),this}save(){var i=this._schema.toInternalCollectionName(this.modelName);return this.isNew()?(this.attrs=this._schema.db[i].insert(this.attrs),this._definePlainAttribute("id")):(this._schema.isSaving[this.toString()]=!0,this._schema.db[i].update(this.attrs.id,this.attrs)),this._saveAssociations(),this._schema.isSaving[this.toString()]=!1,this}update(i,o){var s;return i==null?this:(typeof i=="object"?s=i:(s={})[i]=o,Object.keys(s).forEach(function(u){!this.associationKeys.has(u)&&!this.associationIdKeys.has(u)&&this._definePlainAttribute(u),this[u]=s[u]},this),this.save(),this)}destroy(){if(this.isSaved()){this._disassociateFromDependents();var i=this._schema.toInternalCollectionName(this.modelName);this._schema.db[i].remove(this.attrs.id)}}isNew(){var i=!1,o=this.attrs.id!==void 0&&this.attrs.id!==null;if(o){var s=this._schema.toInternalCollectionName(this.modelName),u=this._schema.db[s].find(this.attrs.id);u&&(i=!0)}return!i}isSaved(){return!this.isNew()}reload(){if(this.id){var i=this._schema.toInternalCollectionName(this.modelName),o=this._schema.db[i].find(this.id);Object.keys(o).filter(function(s){return s!=="id"}).forEach(function(s){this.attrs[s]=o[s]},this)}return this._tempAssociations={},this}toJSON(){return d$({},this.attrs)}get associations(){return this._schema.associationsFor(this.modelName)}associationFor(i){return this.associations[i]}inverseFor(i){return this._explicitInverseFor(i)||this._implicitInverseFor(i)}_explicitInverseFor(i){this._checkForMultipleExplicitInverses(i);var o=this._schema.associationsFor(this.modelName),s=i.opts.inverse,u=s?o[s]:null,d=u&&u.isPolymorphic,m=u&&u.modelName===i.ownerModelName,v=u&&u.opts.inverse;return v&&u.opts.inverse!==i.name&&Me(!1,"You specified an inverse of ".concat(s," for ").concat(i.name,", but it does not match ").concat(u.modelName," ").concat(u.name,"'s inverse")),d||m?u:null}_checkForMultipleExplicitInverses(i){var o=this._schema.associationsFor(this.modelName),s=Object.keys(o).filter(u=>{var d=o[u],m=i.ownerModelName===d.modelName,v=i.name===d.opts.inverse;return m&&v});Me(s.length<=1,"The ".concat(this.modelName," model has defined multiple explicit inverse associations for the ").concat(i.ownerModelName,".").concat(i.name," association."))}_implicitInverseFor(i){var o=this._schema.associationsFor(this.modelName),s=i.ownerModelName;return(0,Gh.default)(o).filter(u=>u.modelName===s).reduce((u,d)=>{var m=d.opts.inverse,v=m===void 0,_=m===i.name,z=v||_;return z&&(Me(!u,"The ".concat(this.modelName," model has multiple possible inverse associations for the ").concat(i.ownerModelName,".").concat(i.name," association.")),u=d),u},null)}hasInverseFor(i){return!!this.inverseFor(i)}alreadyAssociatedWith(i,o){var s=this[o.name];if(s&&i)return s instanceof e?s.isSaved()&&i.isSaved()?s.toString()===i.toString():s===i:s.includes(i)}associate(i,o){if(!this.alreadyAssociatedWith(i,o)){var{name:s}=o;o instanceof Us?this[s].includes(i)||this[s].add(i):this[s]=i}}disassociate(i,o){var s=o.getForeignKey();if(o instanceof Us){var u;if(o.isPolymorphic){var d=this[s].find(m=>{var{type:v,id:_}=m;return v===i.modelName&&_===i.id});u=d&&this[s].indexOf(d)}else u=this[s].map(m=>m.toString()).indexOf(i.id.toString());u>-1&&this.attrs[s].splice(u,1)}else this.attrs[s]=null}get isSaving(){return this._schema.isSaving[this.toString()]}_setupAttr(i,o){var s=this.associationKeys.has(i)||this.associationIdKeys.has(i);s||(this.attrs[i]=o,this._definePlainAttribute(i))}_definePlainAttribute(i){var o=Object.getOwnPropertyDescriptor(this,i);o&&o.get||(Object.prototype.hasOwnProperty.call(this.attrs,i)||(this.attrs[i]=null),Object.defineProperty(this,i,{get(){return this.attrs[i]},set(s){this.attrs[i]=s}}))}_setupRelationship(i,o){var s=this.associationIdKeys.has(i)||this.fks.includes(i),u=this.associationKeys.has(i);s&&(o!=null&&this._validateForeignKeyExistsInDatabase(i,o),this.attrs[i]=o),u&&(this[i]=o)}_validateAttr(i,o){if(this.associationKeys.has(i)){var s=this.associationFor(i),u=o===null;if(s instanceof Us){var d=o instanceof er||o instanceof yi,m=Array.isArray(o)&&o.every(H=>H instanceof e);Me(d||m||u,"You're trying to create a ".concat(this.modelName,' model and you passed in "').concat(o,'" under the ').concat(i," key, but that key is a HasMany relationship. You must pass in a Collection, PolymorphicCollection, array of Models, or null."))}else s instanceof Hs&&Me(o instanceof e||u,"You're trying to create a ".concat(this.modelName,' model and you passed in "').concat(o,'" under the ').concat(i," key, but that key is a BelongsTo relationship. You must pass in a Model or null."))}if(this.associationIdKeys.has(i)&&i.endsWith("Ids")){var v=Array.isArray(o),_=o===null;Me(v||_,"You're trying to create a ".concat(this.modelName,' model and you passed in "').concat(o,'" under the ').concat(i," key, but that key is a foreign key for a HasMany relationship. You must pass in an array of ids or null."))}{var z=o instanceof e||o instanceof er||o instanceof yi,F=Array.isArray(o)&&o.length&&o.every(H=>H instanceof e);if(z||F){var N=o;Me(this.associationKeys.has(i),"You're trying to create a ".concat(this.modelName," model and you passed in a ").concat(N.toString()," under the ").concat(i," key, but you haven't defined that key as an association on your model."))}}}_validateForeignKeyExistsInDatabase(i,o){if(Array.isArray(o)){var s=this.hasManyAssociationFks[i],u;s.isPolymorphic?(u=o.map(z=>{var{type:F,id:N}=z;return this._schema.db[this._schema.toInternalCollectionName(F)].find(N)}),u=(0,Mu.default)(u)):u=this._schema.db[this._schema.toInternalCollectionName(s.modelName)].find(o);var d=s.isPolymorphic?o.map(z=>"".concat(z.type,":").concat(z.id)).join(","):o;Me(u.length===o.length,"You're instantiating a ".concat(this.modelName," that has a ").concat(i," of ").concat(d,", but some of those records don't exist in the database."))}else{var m=this.belongsToAssociationFks[i],v;m.isPolymorphic?v=this._schema.db[this._schema.toInternalCollectionName(o.type)].find(o.id):v=this._schema.db[this._schema.toInternalCollectionName(m.modelName)].find(o);var _=m.isPolymorphic?"".concat(o.type,":").concat(o.id):o;Me(v,"You're instantiating a ".concat(this.modelName," that has a ").concat(i," of ").concat(_,", but that record doesn't exist in the database."))}}_saveAssociations(){this._saveBelongsToAssociations(),this._saveHasManyAssociations()}_saveBelongsToAssociations(){(0,Gh.default)(this.belongsToAssociations).forEach(i=>{this._disassociateFromOldInverses(i),this._saveNewAssociates(i),this._associateWithNewInverses(i)})}_saveHasManyAssociations(){(0,Gh.default)(this.hasManyAssociations).forEach(i=>{this._disassociateFromOldInverses(i),this._saveNewAssociates(i),this._associateWithNewInverses(i)})}_disassociateFromOldInverses(i){i instanceof Us?this._disassociateFromHasManyInverses(i):i instanceof Hs&&this._disassociateFromBelongsToInverse(i)}_disassociateFromHasManyInverses(i){var o=i.getForeignKey(),s=this._tempAssociations&&this._tempAssociations[i.name],u=this.attrs[o];if(s&&u){var d;i.isPolymorphic?d=u.map(m=>{var{type:v,id:_}=m;return this._schema[this._schema.toCollectionName(v)].find(_)}):d=this._schema[this._schema.toCollectionName(i.modelName)].find(u||[]).models,d.filter(m=>!m.isSaving&&!s.includes(m)&&m.hasInverseFor(i)).forEach(m=>{var v=m.inverseFor(i);m.disassociate(this,v),m.save()})}}_disassociateFromBelongsToInverse(i){var o=i.getForeignKey(),s=this._tempAssociations&&this._tempAssociations[i.name],u=this.attrs[o];if(s!==void 0&&u){var d;if(i.isPolymorphic?d=this._schema[this._schema.toCollectionName(u.type)].find(u.id):d=this._schema[this._schema.toCollectionName(i.modelName)].find(u),d.hasInverseFor(i)){var m=d.inverseFor(i);d.disassociate(this,m),d._updateInDb(d.attrs)}}}_disassociateFromDependents(){this._schema.dependentAssociationsFor(this.modelName).forEach(i=>{i.disassociateAllDependentsFromTarget(this)})}_saveNewAssociates(i){var o=i.getForeignKey(),s=this._tempAssociations&&this._tempAssociations[i.name];if(s!==void 0){if(this.__isSavingNewChildren=!0,delete this._tempAssociations[i.name],s instanceof er)s.models.filter(d=>!d.isSaving).forEach(d=>{d.save()}),this._updateInDb({[o]:s.models.map(d=>d.id)});else if(s instanceof yi)s.models.filter(d=>!d.isSaving).forEach(d=>{d.save()}),this._updateInDb({[o]:s.models.map(d=>({type:d.modelName,id:d.id}))});else if(s===null)this._updateInDb({[o]:null});else if(this.equals(s))this._updateInDb({[o]:this.id});else if(!s.isSaving){s.save(),this._syncTempAssociations(s);var u;i.isPolymorphic?u={id:s.id,type:s.modelName}:u=s.id,this._updateInDb({[o]:u})}this.__isSavingNewChildren=!1}}_associateWithNewInverses(i){if(!this.__isSavingNewChildren){var o=this[i.name];o instanceof e?this._associateModelWithInverse(o,i):(o instanceof er||o instanceof yi)&&o.models.forEach(s=>{this._associateModelWithInverse(s,i)}),delete this._tempAssociations[i.name]}}_associateModelWithInverse(i,o){if(i.hasInverseFor(o)){var s=i.inverseFor(o),u=s.getForeignKey(),d=this.id;if(s instanceof Hs){var m;s.isPolymorphic?m={type:this.modelName,id:d}:m=d,this._schema.db[this._schema.toInternalCollectionName(i.modelName)].update(i.id,{[u]:m})}else{var v=this._schema.db[this._schema.toInternalCollectionName(i.modelName)],_=v.find(i.id)[s.getForeignKey()]||[],z=Object.assign([],_),F,N;s.isPolymorphic?(F={type:this.modelName,id:d},N=z.some(H=>H.type==this.modelName&&H.id==d)):(F=d,N=z.includes(d)),N||z.push(F),v.update(i.id,{[u]:z})}}}_updateInDb(i){this.attrs=this._schema.db[this._schema.toInternalCollectionName(this.modelName)].update(this.attrs.id,i)}_syncTempAssociations(i){Object.keys(this._tempAssociations).forEach(o=>{this._tempAssociations[o]&&this._tempAssociations[o].toString()===i.toString()&&(this._tempAssociations[o]=i)})}toString(){var i=this.id?"(".concat(this.id,")"):"";return"model:".concat(this.modelName).concat(i)}equals(i){return this.toString()===i.toString()}}return e.extend=$F,e.findBelongsToAssociation=function(t){return this.prototype.belongsToAssociations[t]},e})(),Ii=class{constructor(t,i){var o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};this.registry=t,this.type=i,this.request=o,this.attrs=this.attrs||void 0,this.include=this.include||[],this.root=this.root||void 0,this.embed=this.embed||void 0,this._embedFn=(0,Ou.default)(this.embed)?this.embed:()=>!!this.embed,this.serializeIds=this.serializeIds||void 0,this.primaryKey=this.primaryKey||void 0}serialize(t){return this.primaryResource=t,this.buildPayload(t)}normalize(t){return t}buildPayload(t,i,o,s){if(!t&&(0,Jh.default)(i))return s;if(t){var[u,d]=this.getHashForPrimaryResource(t),m=this.isCollection(t)?t.models:[t];return this.buildPayload(void 0,d,m,u)}else{var v=i.shift(),[_,z]=this.getHashForIncludedResource(v),F=z.filter(k=>!o.map(ae=>ae.toString()).includes(k.toString())).concat(i),N=(this.isCollection(v)?v.models:[v]).concat(o),H=this.mergePayloads(s,_);return this.buildPayload(void 0,F,N,H)}}getHashForPrimaryResource(t){var[i,o]=this.getHashForResource(t),s;if(this.root){Me(!(t instanceof yi),"The base Serializer class cannot serialize a top-level PolymorphicCollection when root is true, since PolymorphicCollections have no type.");var u=this.serializerFor(t.modelName),d=u.keyForResource(t);s={[d]:i}}else s=i;return[s,o]}getHashForIncludedResource(t){var i,o;if(t instanceof yi)i={},o=t.models;else{var s=this.serializerFor(t.modelName),[u,d]=s.getHashForResource(t),m=s.keyForRelationship(t.modelName);i=Array.isArray(u)?{[m]:u}:{[m]:[u]},o=d}return[i,o]}getHashForResource(t){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1,u=this,d;s&&t.modelName&&(u=this.serializerFor(t.modelName)),this.isModel(t)?d=u._hashForModel(t,i,o):d=t.models.map(v=>{var _=u;return _||(_=this.serializerFor(v.modelName)),_._hashForModel(v,i,o)});var m=(0,Rm.default)((0,Mu.default)((0,ld.default)(u.getKeysForIncluded().map(v=>this.isCollection(t)?t.models.map(_=>_[v]):t[v]))),v=>v.toString());return[d,m]}mergePayloads(t,i){var o,[s]=Object.keys(i);return t[s]?(o=t,o[s]=t[s].concat(i[s])):o=Object.assign(t,i),o}keyForResource(t){var{modelName:i}=t;return this.isModel(t)?this.keyForModel(i):this.keyForCollection(i)}keyForModel(t){return De(t)}keyForCollection(t){return this._container.inflector.pluralize(this.keyForModel(t))}_hashForModel(t,i){var o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},s=this._attrsForModel(t);if(i&&t.fks.forEach(d=>{delete s[d]}),this.embed){var u=Object.assign({},o);u[t.modelName]=u[t.modelName]||{},u[t.modelName][t.id]=!0,this.getKeysForEmbedded().forEach(d=>{var m=t[d];if(m&&!(0,Nm.default)(u,"".concat(m.modelName,".").concat(m.id))){var[v]=this.getHashForResource(m,!0,u,!0),_=this.keyForEmbeddedRelationship(d);if(s[_]=v,this.isModel(m)){var z="".concat(De(d),"Id");delete s[z]}}})}return this._maybeAddAssociationIds(t,s)}_attrsForModel(t){var i={};return this.attrs?i=this.attrs.reduce((o,s)=>(o[s]=t[s],o),{}):i=Object.assign(i,t.attrs),t.fks.forEach(o=>delete i[o]),this._formatAttributeKeys(i)}_maybeAddAssociationIds(t,i){var o=Object.assign({},i);return this.serializeIds==="always"?[...t.associationKeys].filter(s=>!this._embedFn(s)).forEach(s=>{var u=t[s],d=t.associationFor(s);if(this.isCollection(u)){var m=this.keyForRelationshipIds(s);o[m]=t["".concat(this._container.inflector.singularize(s),"Ids")]}else if(this.isModel(u)&&d.isPolymorphic){var v=this.keyForPolymorphicForeignKeyType(s),_=this.keyForPolymorphicForeignKeyId(s);o[v]=t["".concat(s,"Id")].type,o[_]=t["".concat(s,"Id")].id}else if(u){var z=this.keyForForeignKey(s);o[z]=t["".concat(s,"Id")]}}):this.serializeIds==="included"&&this.getKeysForIncluded().forEach(s=>{var u=t[s],d=t.associationFor(s);if(this.isCollection(u)){var m=this.keyForRelationshipIds(s);o[m]=t["".concat(this._container.inflector.singularize(s),"Ids")]}else if(this.isModel(u)&&d.isPolymorphic){var v=this.keyForPolymorphicForeignKeyType(s),_=this.keyForPolymorphicForeignKeyId(s);o[v]=t["".concat(s,"Id")].type,o[_]=t["".concat(s,"Id")].id}else if(this.isModel(u)){var z=this.keyForForeignKey(s);o[z]=t["".concat(s,"Id")]}}),o}keyForAttribute(t){return t==="id"?this.keyForId():t}keyForRelationship(t){return De(this._container.inflector.pluralize(t))}keyForEmbeddedRelationship(t){return De(t)}keyForRelationshipIds(t){return"".concat(this._container.inflector.singularize(De(t)),"Ids")}keyForForeignKey(t){return"".concat(De(t),"Id")}keyForPolymorphicForeignKeyId(t){return"".concat(De(t),"Id")}keyForPolymorphicForeignKeyType(t){return"".concat(De(t),"Type")}isModel(t){return t instanceof ZF}isCollection(t){return t instanceof er||t instanceof yi}isModelOrCollection(t){return this.isModel(t)||this.isCollection(t)}serializerFor(t){return this.registry.serializerFor(t)}getAssociationKeys(){return(0,Ou.default)(this.include)?this.include(this.request,this.primaryResource):this.include}getKeysForEmbedded(){return this.getAssociationKeys().filter(t=>this._embedFn(t))}getKeysForIncluded(){return this.getAssociationKeys().filter(t=>!this._embedFn(t))}get schema(){return this.registry.schema}keyForId(){return this.primaryKey}valueForId(t){return t}_formatAttributeKeys(t){var i={};for(var o in t){var s=t[o];o==="id"&&(s=this.valueForId(s));var u=this.keyForAttribute(o);i[u]=s}return i}getCoalescedIds(){}};Ii.prototype.include=[];Ii.prototype.root=!0;Ii.prototype.embed=!1;Ii.prototype.primaryKey="id";Ii.prototype.serializeIds="included";Ii.extend=$F;var rd=class extends Ii{constructor(){super(...arguments),this.alwaysIncludeLinkageData=this.alwaysIncludeLinkageData||void 0}keyForModel(t){return $t(t)}keyForCollection(t){return $t(t)}keyForAttribute(t){return $t(t)}keyForRelationship(t){return $t(t)}links(){}getHashForPrimaryResource(t){this._createRequestedIncludesGraph(t);var i=this.getHashForResource(t),o={data:i},s=this.getAddToIncludesForResource(t);return[o,s]}getHashForIncludedResource(t){var i=this.serializerFor(t.modelName),o=i.getHashForResource(t),s={included:this.isModel(t)?[o]:o},u=[];return this.hasQueryParamIncludes()||(u=this.getAddToIncludesForResource(t)),[s,u]}getHashForResource(t){var i;return this.isModel(t)?i=this.getResourceObjectForModel(t):i=t.models.map(o=>this.getResourceObjectForModel(o)),i}getAddToIncludesForResource(t){var i;if(this.hasQueryParamIncludes())i=this.getQueryParamIncludes();else{var o=this.serializerFor(t.modelName);i=o.getKeysForIncluded()}return this.getAddToIncludesForResourceAndPaths(t,i)}getAddToIncludesForResourceAndPaths(t,i){var o=[];return i.forEach(s=>{var u=s.split("."),d=this.getIncludesForResourceAndPath(t,...u);o.push(d)}),(0,Rm.default)((0,Mu.default)((0,ld.default)(o)),s=>s.toString())}getIncludesForResourceAndPath(t){for(var i=arguments.length,o=new Array(i>1?i-1:0),s=1;s<i;s++)o[s-1]=arguments[s];var u=De(o.shift()),d=[],m=[];if(this.isModel(t)){var v=t[u];this.isModel(v)?m=[v]:this.isCollection(v)&&(m=v.models)}else t.models.forEach(_=>{var z=_[u];this.isModel(z)?m.push(z):this.isCollection(z)&&(m=m.concat(z.models))});return d=d.concat(m),o.length&&m.forEach(_=>{d=d.concat(this.getIncludesForResourceAndPath(_,...o))}),d}getResourceObjectForModel(t){var i=this._attrsForModel(t,!0);delete i.id;var o={type:this.typeKeyForModel(t),id:t.id,attributes:i};return this._maybeAddRelationshipsToResourceObjectForModel(o,t)}_maybeAddRelationshipsToResourceObjectForModel(t,i){var o={};return i.associationKeys.forEach(s=>{var u=i[s],d=this.keyForRelationship(s),m={};if(this.hasLinksForRelationship(i,s)){var v=this.serializerFor(i.modelName),_=v.links(i);m.links=_[s]}if(this.alwaysIncludeLinkageData||this.shouldIncludeLinkageData(s,i)||this._relationshipIsIncludedForModel(s,i)){var z=null;this.isModel(u)?z={type:this.typeKeyForModel(u),id:u.id}:this.isCollection(u)&&(z=u.models.map(F=>({type:this.typeKeyForModel(F),id:F.id}))),m.data=z}(0,Jh.default)(m)||(o[d]=m)}),(0,Jh.default)(o)||(t.relationships=o),t}hasLinksForRelationship(t,i){var o=this.serializerFor(t.modelName),s=o.links&&o.links(t);return s&&s[i]!=null}_relationshipIsIncludedForModel(t,i){if(this.hasQueryParamIncludes()){var o=this.request._includesGraph,s=this._graphKeyForModel(i),u;return o.data[s]?u=o.data[s]:o.included[this._container.inflector.pluralize(i.modelName)]&&(u=o.included[this._container.inflector.pluralize(i.modelName)][s]),u&&u.relationships&&Object.prototype.hasOwnProperty.call(u.relationships,$t(t))}else{var d=this.getKeysForIncluded();return d.includes(t)}}_createRequestedIncludesGraph(t){var i={data:{}};if(this.isModel(t)){var o=this._graphKeyForModel(t);i.data[o]={},this._addPrimaryModelToRequestedIncludesGraph(i,t)}else this.isCollection(t)&&t.models.forEach(s=>{var u=this._graphKeyForModel(s);i.data[u]={},this._addPrimaryModelToRequestedIncludesGraph(i,s)});this.request._includesGraph=i}_addPrimaryModelToRequestedIncludesGraph(t,i){if(this.hasQueryParamIncludes()){var o=this._graphKeyForModel(i);this.getQueryParamIncludes().filter(s=>!!s.trim()).forEach(s=>{t.data[o].relationships=t.data[o].relationships||{};var u=s.split(".").map($t),d=u[0],m=d,v=De(d),_=i.associationKeys.has(v);Me(_,'You tried to include "'.concat(d,'" with ').concat(i,' but no association named "').concat(v,'" is defined on the model.'));var z=i[v],F;this.isModel(z)?F=this._graphKeyForModel(z):this.isCollection(z)?F=z.models.map(this._graphKeyForModel):F=null,t.data[o].relationships[m]=F,z&&this._addResourceToRequestedIncludesGraph(t,z,u.slice(1))})}}_addResourceToRequestedIncludesGraph(t,i,o){t.included=t.included||{};var s=this.isCollection(i)?i.models:[i];s.forEach(u=>{var d=this._container.inflector.pluralize(u.modelName);t.included[d]=t.included[d]||{},this._addModelToRequestedIncludesGraph(t,u,o)})}_addModelToRequestedIncludesGraph(t,i,o){var s=this._container.inflector.pluralize(i.modelName),u=this._graphKeyForModel(i);t.included[s][u]=t.included[s][u]||{},o.length&&this._addResourceRelationshipsToRequestedIncludesGraph(t,s,u,i,o)}_addResourceRelationshipsToRequestedIncludesGraph(t,i,o,s,u){t.included[i][o].relationships=t.included[i][o].relationships||{};var d=u[0],m=s[De(d)],v;this.isModel(m)?v=this._graphKeyForModel(m):this.isCollection(m)&&(v=m.models.map(this._graphKeyForModel)),t.included[i][o].relationships[d]=v,m&&this._addResourceToRequestedIncludesGraph(t,m,u.slice(1))}_graphKeyForModel(t){return"".concat(t.modelName,":").concat(t.id)}getQueryParamIncludes(){var t=(0,Nm.default)(this,"request.queryParams.include");return t&&!Array.isArray(t)&&(t=t.split(",")),t}hasQueryParamIncludes(){return!!this.getQueryParamIncludes()}typeKeyForModel(t){return $t(this._container.inflector.pluralize(t.modelName))}getCoalescedIds(t){var i=t.queryParams&&t.queryParams["filter[id]"];return typeof i=="string"?i.split(","):i}shouldIncludeLinkageData(t,i){return!1}};rd.prototype.alwaysIncludeLinkageData=!1;var od=class{constructor(t){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.schema=t,this._serializerMap=i}normalize(t,i){return this.serializerFor(i).normalize(t)}serialize(t,i){if(this.request=i,this._isModelOrCollection(t)){var o=this.serializerFor(t.modelName);return o.serialize(t,i)}else return Array.isArray(t)&&t.some(this._isCollection)?t.reduce((s,u)=>{var d=this.serializerFor(u.modelName);return d.embed?s[this._container.inflector.pluralize(u.modelName)]=d.serialize(u,i):s=Object.assign(s,d.serialize(u,i)),s},{}):t}serializerFor(t){var{explicit:i=!1}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},o=t&&this._serializerMap&&this._serializerMap[De(t)];return i?Me(!!o,"You passed in ".concat(t," as an explicit serializer type but that serializer doesn't exist.")):(o=o||this._serializerMap.application||Ii,Me(!o||o.prototype.embed||o.prototype.root||new o instanceof rd,"You cannot have a serializer that sideloads (embed: false) and disables the root (root: false).")),new o(this,t,this.request)}_isModel(t){return t instanceof ZF}_isCollection(t){return t instanceof er||t instanceof yi}_isModelOrCollection(t){return this._isModel(t)||this._isCollection(t)}registerSerializers(t){var i=this._serializerMap||{};this._serializerMap=Object.assign(i,t)}getCoalescedIds(t,i){return this.serializerFor(i).getCoalescedIds(t)}},xm={},Cm={},wm={},sd=class{constructor(t){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};Me(t,"A schema requires a db"),this.db=t,this._registry={},this._dependentAssociations={polymorphic:[]},this.registerModels(i),this.isSaving={}}registerModels(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};(0,kF.default)(t,(i,o)=>{this.registerModel(o,t[o])})}registerModel(t,i){var o=De(t),s=$t(o);i=i.extend(),this._registry[o]=this._registry[o]||{class:null,foreignKeys:[]},this._registry[o].class=i,i.prototype._schema=this,i.prototype.modelName=s,i.prototype.hasManyAssociations={},i.prototype.hasManyAssociationFks={},i.prototype.belongsToAssociations={},i.prototype.belongsToAssociationFks={},i.prototype.associationKeys=new Set,i.prototype.associationIdKeys=new Set,i.prototype.dependentAssociations=[];var u={};for(var d in i.prototype)if(i.prototype[d]instanceof Ws){var m=i.prototype[d];m.name=d,m.modelName=m.modelName||this.toModelName(d),m.ownerModelName=s,m.setSchema(this);var[v,_]=m.getForeignKeyArray();u[v]=u[v]||[],Me(!u[v].includes(_),"Your '".concat(t,"' model definition has multiple possible inverse relationships of type '").concat(v,"'. Please use explicit inverses.")),u[v].push(_),this._addForeignKeyToRegistry(v,_),m.addMethodsToModelClass(i,d)}var z=this.toCollectionName(s);return this.db[z]||this.db.createCollection(z),this[z]={camelizedModelName:o,new:F=>this.new(o,F),create:F=>this.create(o,F),all:F=>this.all(o,F),find:F=>this.find(o,F),findBy:F=>this.findBy(o,F),findOrCreateBy:F=>this.findOrCreateBy(o,F),where:F=>this.where(o,F),none:F=>this.none(o,F),first:F=>this.first(o,F)},this}modelFor(t){return this._registry[t]}new(t,i){return this._instantiateModel($t(t),i)}create(t,i){return this.new(t,i).save()}all(t){var i=this.collectionForType(t);return this._hydrate(i,$t(t))}none(t){return this._hydrate([],$t(t))}find(t,i){var o=this.collectionForType(t),s=o.find(i);return Array.isArray(i)&&Me(s.length===i.length,"Couldn't find all ".concat(this._container.inflector.pluralize(t)," with ids: (").concat(i.join(","),") (found ").concat(s.length," results, but was looking for ").concat(i.length,")")),this._hydrate(s,$t(t))}findBy(t,i){var o=this.collectionForType(t),s=o.findBy(i);return this._hydrate(s,$t(t))}findOrCreateBy(t,i){var o=this.collectionForType(t),s=o.findBy(i),u;return s?u=this._hydrate(s,$t(t)):u=this.create(t,i),u}where(t,i){var o=this.collectionForType(t),s=o.where(i);return this._hydrate(s,$t(t))}first(t){var i=this.collectionForType(t),o=i[0];return this._hydrate(o,$t(t))}modelClassFor(t){var i=this._registry[De(t)];return Me(i,"Model not registered: ".concat(t)),i.class.prototype}addDependentAssociation(t,i){t.isPolymorphic?this._dependentAssociations.polymorphic.push(t):(this._dependentAssociations[i]=this._dependentAssociations[i]||[],this._dependentAssociations[i].push(t))}dependentAssociationsFor(t){var i=this._dependentAssociations[t]||[],o=this._dependentAssociations.polymorphic||[];return i.concat(o)}associationsFor(t){var i=this.modelClassFor(t);return Object.assign({},i.belongsToAssociations,i.hasManyAssociations)}hasModelForModelName(t){return this.modelFor(De(t))}collectionForType(t){var i=this.toCollectionName(t);return Me(this.db[i],"You're trying to find model(s) of type ".concat(t," but this collection doesn't exist in the database.")),this.db[i]}toCollectionName(t){if(typeof xm[t]!="string"){var i=$t(t),o=De(this._container.inflector.pluralize(i));xm[t]=o}return xm[t]}toInternalCollectionName(t){if(typeof Cm[t]!="string"){var i="_".concat(this.toCollectionName(t));Cm[t]=i}return Cm[t]}toModelName(t){if(typeof wm[t]!="string"){var i=$t(t),o=this._container.inflector.singularize(i);wm[t]=o}return wm[t]}_addForeignKeyToRegistry(t,i){this._registry[t]=this._registry[t]||{class:null,foreignKeys:[]};var o=this._registry[t].foreignKeys;o.includes(i)||o.push(i)}_instantiateModel(t,i){var o=this._modelFor(t),s=this._foreignKeysFor(t);return new o(this,t,i,s)}_modelFor(t){return this._registry[De(t)].class}_foreignKeysFor(t){return this._registry[De(t)].foreignKeys}_hydrate(t,i){if(Array.isArray(t)){var o=t.map(function(s){return this._instantiateModel(i,s)},this);return new er(i,o)}else return t?this._instantiateModel(i,t):null}},v$={Db:td,Association:Ws,RouteHandler:id,BaseRouteHandler:al,Serializer:Ii,SerializerRegistry:od,Schema:sd},y$={singularize:Hp,pluralize:Up},ad=class{constructor(){this.inflector=y$}register(t,i){this[t]=i}create(t){var i=v$[t];i.prototype._container=this;for(var o=arguments.length,s=new Array(o>1?o-1:0),u=1;u<o;u++)s[u-1]=arguments[u];return new i(...s)}},Gs=new ad;td.prototype._container=Gs;Ws.prototype._container=Gs;al.prototype._container=Gs;id.prototype._container=Gs;Ii.prototype._container=Gs;od.prototype._container=Gs;sd.prototype._container=Gs;var x$=["http://localhost:0/chromecheckurl","http://localhost:30820/socket.io",e=>/.+\.hot-update.json$/.test(e.url)],Mm={coalesce:!1,timing:void 0};function C$(e){if(!e||typeof e!="object")return!1;for(var t=Object.keys(Mm),i=Object.keys(e),o=0;o<i.length;o++){var s=i[o];if(t.indexOf(s)>-1)return!0}return!1}function w$(e){var[t]=e.splice(-1);C$(t)?t=(0,Qh.default)({},Mm,t):(e.push(t),t=Mm);for(var i=2-e.length;i-- >0;)e.push(void 0);return e.push(t),e}var Dm=class{constructor(){es(this,"urlPrefix",void 0),es(this,"namespace",void 0),es(this,"timing",void 0),es(this,"passthroughChecks",void 0),es(this,"pretender",void 0),es(this,"mirageServer",void 0),es(this,"trackRequests",void 0)}create(t,i){var o=this;this.mirageServer=t,this.pretender=this._create(t,i),t.pretender=this.pretender,this.passthroughChecks=this.passthroughChecks||[],this.config(i),[["get"],["post"],["put"],["delete","del"],["patch"],["head"],["options"]].forEach(s=>{var[u,d]=s;this[u]=function(m){for(var v,_=arguments.length,z=new Array(_>1?_-1:0),F=1;F<_;F++)z[F-1]=arguments[F];var[N,H,k]=w$(z),ae=t.registerRouteHandler(u,m,N,H,k),te=o._getFullPath(m),de=k.timing!==void 0?k.timing:()=>o.timing;return(v=o.pretender)===null||v===void 0?void 0:v[u](te,ae,de)},t[u]=this[u],d&&(this[d]=this[u],t[d]=this[u])})}config(t){var i,o,s=typeof t.useDefaultPassthroughs<"u"?t.useDefaultPassthroughs:!0;s&&this._configureDefaultPassthroughs();var u=t.trackRequests!==void 0&&t.trackRequests!==this.trackRequests;Me(!u,"You cannot modify Pretender's request tracking once the server is created"),this.timing=(i=(o=t.timing)!==null&&o!==void 0?o:this.timing)!==null&&i!==void 0?i:400,this.urlPrefix=this.urlPrefix||t.urlPrefix||"",this.namespace=this.namespace||t.namespace||""}_configureDefaultPassthroughs(){x$.forEach(t=>{this.passthrough(t)})}_create(t,i){if(typeof window<"u")return this.trackRequests=i.trackRequests||!1,new AF(function(){this.passthroughRequest=function(s,u,d){t.shouldLog()&&console.log("Mirage: Passthrough request for ".concat(s.toUpperCase()," ").concat(d.url))},this.handledRequest=function(s,u,d){if(t.shouldLog()){console.groupCollapsed("Mirage: [".concat(d.status,"] ").concat(s.toUpperCase()," ").concat(d.url));var{requestBody:m,responseText:v}=d,_,z;try{_=JSON.parse(m)}catch{_=m}try{z=JSON.parse(v)}catch{z=v}console.groupCollapsed("Response"),console.log(z),console.groupEnd(),console.groupCollapsed("Request (data)"),console.log(_),console.groupEnd(),console.groupCollapsed("Request (raw)"),console.log(d),console.groupEnd(),console.groupEnd()}};var o=this.checkPassthrough;this.checkPassthrough=function(s){var u=t.passthroughChecks.some(m=>m(s));if(u){var d=s.url.includes("?")?s.url.substr(0,s.url.indexOf("?")):s.url;this[s.method.toLowerCase()](d,this.passthrough)}return o.apply(this,arguments)},this.unhandledRequest=function(s,u){u=decodeURI(u);var d="";this.namespace===""?d="There is no existing namespace defined. Please define one":d="The existing namespace is ".concat(this.namespace),Me("Your app tried to ".concat(s," '").concat(u,"', but there was no route defined to handle this request. Define a route for this endpoint in your routes() config. Did you forget to define a namespace? ").concat(d))}},{trackRequests:this.trackRequests})}passthrough(){for(var t=arguments.length,i=new Array(t),o=0;o<t;o++)i[o]=arguments[o];if(typeof window<"u"){var s=["get","post","put","delete","patch","options","head"],u=i[i.length-1];i.length===0?i=["/**","/"]:i.length>1&&Array.isArray(u)&&(s=i.pop()),i.forEach(d=>{typeof d=="function"?this.passthroughChecks.push(d):s.forEach(m=>{var v=this._getFullPath(d);this.pretender[m](v,this.pretender.passthrough)})})}}_getFullPath(t){t=t[0]==="/"?t.slice(1):t;var i="",o=this.urlPrefix?this.urlPrefix.trim():"",s="";if(this.urlPrefix&&this.namespace&&(this.namespace[0]==="/"&&this.namespace[this.namespace.length-1]==="/"&&(s=this.namespace.substring(0,this.namespace.length-1).substring(1)),this.namespace[0]==="/"&&this.namespace[this.namespace.length-1]!=="/"&&(s=this.namespace.substring(1)),this.namespace[0]!=="/"&&this.namespace[this.namespace.length-1]==="/"&&(s=this.namespace.substring(0,this.namespace.length-1)),this.namespace[0]!=="/"&&this.namespace[this.namespace.length-1]!=="/"&&(s=this.namespace)),this.namespace&&!this.urlPrefix){if(this.namespace[0]==="/"&&this.namespace[this.namespace.length-1]==="/"&&(s=this.namespace.substring(0,this.namespace.length-1)),this.namespace[0]==="/"&&this.namespace[this.namespace.length-1]!=="/"&&(s=this.namespace),this.namespace[0]!=="/"&&this.namespace[this.namespace.length-1]==="/"){var u=this.namespace.substring(0,this.namespace.length-1);s="/".concat(u)}this.namespace[0]!=="/"&&this.namespace[this.namespace.length-1]!=="/"&&(s="/".concat(this.namespace))}return this.namespace||(s=""),/^https?:\/\//.test(t)?i+=t:(o.length&&(i+=o[o.length-1]==="/"?o:"".concat(o,"/")),i+=s,i[i.length-1]!=="/"&&(i+="/"),i+=t,/^https?:\/\//.test(i)||(i="/".concat(i),i=i.replace(/\/+/g,"/"))),i}start(){}shutdown(){this.pretender.shutdown()}},bm={},b$={singularize:Hp,pluralize:Up};function jF(e){var t=new Lm(e);return t}var Lm=class{constructor(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this._container=new ad,this.config(t),this.db=this.db||void 0,this.schema=this.schema||void 0,this.middleware=[]}get namespace(){return this.interceptor.namespace}set namespace(t){this.interceptor.namespace=t}get urlPrefix(){return this.interceptor.urlPrefix}set urlPrefix(t){this.interceptor.urlPrefix=t}get timing(){return this.interceptor.timing}set timing(t){this.interceptor.timing=t}get passthroughChecks(){return this.interceptor.passthroughChecks}set passthroughChecks(t){this.interceptor.passthroughChecks=t}config(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};t.interceptor||(t.interceptor=new Dm),this.interceptor?this.interceptor.config(t):(this.interceptor=t.interceptor,this.interceptor.create(this,t));var i=t.environment&&this.environment&&this.environment!==t.environment;Me(!i,"You cannot modify Mirage's environment once the server is created"),this.environment=t.environment||this.environment||"development",t.routes&&(Me(!t.baseConfig,"The routes option is an alias for the baseConfig option. You can't pass both options into your server definition."),t.baseConfig=t.routes),t.seeds&&(Me(!t.scenarios,"The seeds option is an alias for the scenarios.default option. You can't pass both options into your server definition."),t.scenarios={default:t.seeds}),this._config=t,this.inflector=t.inflector||b$,this._container.register("inflector",this.inflector),this.logging=t.logging!==void 0?this.logging:void 0,this.testConfig=this.testConfig||void 0,this.trackRequests=t.trackRequests,this.db?this.db.registerIdentityManagers(t.identityManagers):this.db=this._container.create("Db",void 0,t.identityManagers),this.schema?(this.schema.registerModels(t.models),this.serializerOrRegistry.registerSerializers(t.serializers||{})):(this.schema=this._container.create("Schema",this.db,t.models),this.serializerOrRegistry=this._container.create("SerializerRegistry",this.schema,t.serializers));var o=this._hasModulesOfType(t,"factories"),s=t.scenarios&&Object.prototype.hasOwnProperty.call(t.scenarios,"default");t.baseConfig&&this.loadConfig(t.baseConfig),this.isTest()&&(this.loadConfig(t.testConfig),typeof window<"u"&&(window.server=this)),this.isTest()&&o?this.loadFactories(t.factories):!this.isTest()&&s?(this.loadFactories(t.factories),t.scenarios.default(this)):this.loadFixtures()}start(){var t=this;return h$(function*(){var i,o;yield(i=(o=t.interceptor).start)===null||i===void 0?void 0:i.call(o)})()}isTest(){return this.environment==="test"}shouldLog(){return typeof this.logging<"u"?this.logging:!this.isTest()}loadConfig(t){t?.call(this),this.timing=this.isTest()?0:this.timing||0}passthrough(){for(var t,i,o=arguments.length,s=new Array(o),u=0;u<o;u++)s[u]=arguments[u];(t=(i=this.interceptor).passthrough)===null||t===void 0||t.call(i,...s)}loadFixtures(){for(var{fixtures:t}=this._config,i=arguments.length,o=new Array(i),s=0;s<i;s++)o[s]=arguments[s];if(o.length){var u=o.map(De),d=u.filter(m=>!t[m]);if(d.length)throw new Error("Fixtures not found: ".concat(d.join(", ")));t=(0,qF.default)(t,...u)}this.db.loadData(t)}loadFactories(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},i=this._factoryMap||{};this._factoryMap=(0,Qh.default)(i,t),Object.keys(t).forEach(o=>{var s=this.schema.toCollectionName(o);this.db.createCollection(s)})}factoryFor(t){var i=De(t);if(this._factoryMap&&this._factoryMap[i])return this._factoryMap[i]}build(t){for(var i=arguments.length,o=new Array(i>1?i-1:0),s=1;s<i;s++)o[s-1]=arguments[s];var u=o.filter(k=>k&&typeof k=="string"),d=(0,Kh.default)(o,k=>(0,sl.default)(k)),m=De(t);this.factorySequences=this.factorySequences||{},this.factorySequences[m]=this.factorySequences[m]+1||0;var v=this.factoryFor(t);if(v){v=v.extend({});var _=v.attrs||{};this._validateTraits(u,v,t);var z=this._mergeExtensions(_,u,d);this._mapAssociationsFromAttributes(t,_,d),this._mapAssociationsFromAttributes(t,z);var F=v.extend(z),N=new F,H=this.factorySequences[m];return N.build(H)}else return d}buildList(t,i){Me((0,zm.default)(i),"second argument has to be an integer, you passed: ".concat(typeof i));for(var o=[],s=arguments.length,u=new Array(s>2?s-2:0),d=2;d<s;d++)u[d-2]=arguments[d];for(var m=[t,...u],v=0;v<i;v++)o.push(this.build.apply(this,m));return o}create(t){Me(this._modelOrFactoryExistsForType(t),"You called server.create('".concat(t,"') but no model or factory was found. Make sure you're passing in the singularized version of the model or factory name."));for(var i=arguments.length,o=new Array(i>1?i-1:0),s=1;s<i;s++)o[s-1]=arguments[s];var u=o.filter(k=>k&&typeof k=="string"),d=(0,Kh.default)(o,k=>(0,sl.default)(k)),m=(0,Kh.default)(o,k=>k&&Array.isArray(k)),v=this.build(t,...u,d),_;if(this.schema&&this.schema[this.schema.toCollectionName(t)]){var z=this.schema[this.schema.toCollectionName(t)];_=z.create(v)}else{var F,N;m?F=m:(N=this.schema?this.schema.toInternalCollectionName(t):"_".concat(this.inflector.pluralize(t)),F=this.db[N]),Me(F,"You called server.create('".concat(t,"') but no model or factory was found.")),_=F.insert(v)}var H=this.factoryFor(t);return H&&H.extractAfterCreateCallbacks({traits:u}).forEach(k=>{k(_,this)}),_}createList(t,i){Me(this._modelOrFactoryExistsForType(t),"You called server.createList('".concat(t,"') but no model or factory was found. Make sure you're passing in the singularized version of the model or factory name.")),Me((0,zm.default)(i),"second argument has to be an integer, you passed: ".concat(typeof i));for(var o=[],s=this.schema?this.schema.toInternalCollectionName(t):"_".concat(this.inflector.pluralize(t)),u=this.db[s],d=arguments.length,m=new Array(d>2?d-2:0),v=2;v<d;v++)m[v-2]=arguments[v];for(var _=[t,...m,u],z=0;z<i;z++)o.push(this.create.apply(this,_));return o}shutdown(){typeof window<"u"&&this.interceptor.shutdown(),typeof window<"u"&&this.environment==="test"&&(window.server=void 0)}resource(t){var{only:i,except:o,path:s}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t=this.inflector.pluralize(t),s=s||"/".concat(t),i=i||[],o=o||[],i.length>0&&o.length>0)throw"cannot use both :only and :except options";var u={index:{methods:["get"],path:"".concat(s)},show:{methods:["get"],path:"".concat(s,"/:id")},create:{methods:["post"],path:"".concat(s)},update:{methods:["put","patch"],path:"".concat(s,"/:id")},delete:{methods:["del"],path:"".concat(s,"/:id")}},d=Object.keys(u),m=i.length>0&&i||o.length>0&&d.filter(v=>o.indexOf(v)===-1)||d;m.forEach(v=>{var _=u[v];_.methods.forEach(z=>s===t?this[z](_.path):this[z](_.path,t))})}_serialize(t){return typeof t=="string"||t instanceof Blob||t instanceof ArrayBuffer||t instanceof FormData||t instanceof ReadableStream||t instanceof URLSearchParams||t&&typeof t=="object"&&"isView"in t&&t.isView()?t:JSON.stringify(t)}registerRouteHandler(t,i,o,s,u){var d=arguments.length>5&&arguments[5]!==void 0?arguments[5]:this.middleware,m=this._container.create("RouteHandler",{schema:this.schema,verb:t,rawHandler:o,customizedCode:s,options:u,path:i,serializerOrRegistry:this.serializerOrRegistry,middleware:d});return v=>m.handle(v).then(_=>{var[z,F,N]=_;return[z,F,this._serialize(N)]})}_hasModulesOfType(t,i){var o=t[i];return o?Object.keys(o).length>0:!1}_typeIsPluralForModel(t){if(typeof bm[t]!="boolean"){var i=this._modelOrFactoryExistsForTypeOrCollectionName(t),o=t===this.inflector.pluralize(t),s=this.inflector.singularize(t)===this.inflector.pluralize(t),u=o&&!s&&i;bm[t]=u}return bm[t]}_modelOrFactoryExistsForType(t){var i=this.schema&&this.schema.modelFor(De(t)),o=this.db[this.schema.toInternalCollectionName(t)];return(i||o)&&!this._typeIsPluralForModel(t)}_modelOrFactoryExistsForTypeOrCollectionName(t){var i=this.schema&&this.schema.modelFor(De(t)),o=this.db[this.schema.toInternalCollectionName(t)];return i||o}_validateTraits(t,i,o){t.forEach(s=>{if(!i.isTrait(s))throw new Error("'".concat(s,"' trait is not registered in '").concat(o,"' factory"))})}_mergeExtensions(t,i,o){var s=i.map(u=>t[u].extension);return s.push(o||{}),s.reduce((u,d)=>(0,Qh.default)(u,d),{})}_mapAssociationsFromAttributes(t,i){var o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.keys(i||{}).filter(s=>m$(i[s])).forEach(s=>{var u=this.schema.modelClassFor(t),d=u.associationFor(s);Me(d&&d instanceof Hs,"You're using the `association` factory helper on the '".concat(s,"' attribute of your ").concat(t," factory, but that attribute is not a `belongsTo` association."));var m=d&&d instanceof Hs&&d.modelName===t;Me(!m,"You're using the association() helper on your ".concat(t," factory for ").concat(s,", which is a belongsTo self-referential relationship. You can't do this as it will lead to infinite recursion. You can move the helper inside of a trait and use it selectively."));var v=d&&d.opts&&d.opts.polymorphic;Me(!v,"You're using the association() helper on your ".concat(t," factory for ").concat(s,", which is a polymorphic relationship. This is not currently supported."));var _=i[s],z="".concat(De(s),"Id");o[s]||(i[z]=this.create(d.modelName,..._.traitsAndOverrides).id),delete i[s]})}},OF=Ii.extend({serializeIds:"always",normalizeIds:!0,keyForModel(e){return Vr(e)},keyForAttribute(e){return e=Ii.prototype.keyForAttribute.apply(this,arguments),Vr(e)},keyForRelationship(e){return this._container.inflector.pluralize(Vr(e))},keyForEmbeddedRelationship(e){return Vr(e)},keyForRelationshipIds(e){return"".concat(Vr(this._container.inflector.singularize(e)),"_ids")},keyForForeignKey(e){return"".concat(Vr(e),"_id")},keyForPolymorphicForeignKeyId(e){return"".concat(Vr(e),"_id")},keyForPolymorphicForeignKeyType(e){return"".concat(Vr(e),"_type")},normalize(e){var t=Object.keys(e)[0],i=e[t],o=De(t),s=this.schema.modelClassFor(o),{belongsToAssociations:u,hasManyAssociations:d}=s,m=Object.keys(u),v=Object.keys(d);this.primaryKey!=="id"&&(i.id=i[this.primaryKey],delete i[this.primaryKey]);var _={data:{type:this._container.inflector.pluralize(t),attributes:{}}};i.id&&(_.data.id=i.id);var z={};return Object.keys(i).forEach(F=>{if(F!=="id")if(this.normalizeIds)if(m.includes(F)){var N=u[F],H=N.modelName;z[$t(F)]={data:{type:H,id:i[F]}}}else if(v.includes(F)){var k=d[F],ae=k.modelName,te=i[F].map(de=>({type:ae,id:de}));z[$t(F)]={data:te}}else _.data.attributes[$t(F)]=i[F];else _.data.attributes[$t(F)]=i[F]}),Object.keys(z).length&&(_.data.relationships=z),_},getCoalescedIds(e){return e.queryParams&&e.queryParams.ids}}),hK=OF.extend({serializeIds:"always",keyForModel(e){return De(e)},keyForAttribute(e){return e=OF.prototype.keyForAttribute.apply(this,arguments),De(e)},keyForRelationship(e){return De(this._container.inflector.pluralize(e))},keyForEmbeddedRelationship(e){return De(e)},keyForRelationshipIds(e){return De(this._container.inflector.pluralize(e))},keyForForeignKey(e){return De(this._container.inflector.singularize(e))},getCoalescedIds(e){return e.queryParams&&e.queryParams.ids}});var qm=(e,t)=>t.some(i=>e instanceof i),UF,HF;function z$(){return UF||(UF=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function F$(){return HF||(HF=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var $m=new WeakMap,Bm=new WeakMap,ud=new WeakMap;function S$(e){let t=new Promise((i,o)=>{let s=()=>{e.removeEventListener("success",u),e.removeEventListener("error",d)},u=()=>{i(Ks(e.result)),s()},d=()=>{o(e.error),s()};e.addEventListener("success",u),e.addEventListener("error",d)});return ud.set(t,e),t}function T$(e){if($m.has(e))return;let t=new Promise((i,o)=>{let s=()=>{e.removeEventListener("complete",u),e.removeEventListener("error",d),e.removeEventListener("abort",d)},u=()=>{i(),s()},d=()=>{o(e.error||new DOMException("AbortError","AbortError")),s()};e.addEventListener("complete",u),e.addEventListener("error",d),e.addEventListener("abort",d)});$m.set(e,t)}var Zm={get(e,t,i){if(e instanceof IDBTransaction){if(t==="done")return $m.get(e);if(t==="store")return i.objectStoreNames[1]?void 0:i.objectStore(i.objectStoreNames[0])}return Ks(e[t])},set(e,t,i){return e[t]=i,!0},has(e,t){return e instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in e}};function KF(e){Zm=e(Zm)}function A$(e){return F$().includes(e)?function(...t){return e.apply(jm(this),t),Ks(this.request)}:function(...t){return Ks(e.apply(jm(this),t))}}function P$(e){return typeof e=="function"?A$(e):(e instanceof IDBTransaction&&T$(e),qm(e,z$())?new Proxy(e,Zm):e)}function Ks(e){if(e instanceof IDBRequest)return S$(e);if(Bm.has(e))return Bm.get(e);let t=P$(e);return t!==e&&(Bm.set(e,t),ud.set(t,e)),t}var jm=e=>ud.get(e);function YF(e,t,{blocked:i,upgrade:o,blocking:s,terminated:u}={}){let d=indexedDB.open(e,t),m=Ks(d);return o&&d.addEventListener("upgradeneeded",v=>{o(Ks(d.result),v.oldVersion,v.newVersion,Ks(d.transaction),v)}),i&&d.addEventListener("blocked",v=>i(v.oldVersion,v.newVersion,v)),m.then(v=>{u&&v.addEventListener("close",()=>u()),s&&v.addEventListener("versionchange",_=>s(_.oldVersion,_.newVersion,_))}).catch(()=>{}),m}var I$=["get","getKey","getAll","getAllKeys","count"],E$=["put","add","delete","clear"],km=new Map;function WF(e,t){if(!(e instanceof IDBDatabase&&!(t in e)&&typeof t=="string"))return;if(km.get(t))return km.get(t);let i=t.replace(/FromIndex$/,""),o=t!==i,s=E$.includes(i);if(!(i in(o?IDBIndex:IDBObjectStore).prototype)||!(s||I$.includes(i)))return;let u=function(d,...m){return ct(this,null,function*(){let v=this.transaction(d,s?"readwrite":"readonly"),_=v.store;return o&&(_=_.index(m.shift())),(yield Promise.all([_[i](...m),s&&v.done]))[0]})};return km.set(t,u),u}KF(e=>Fi(Yn({},e),{get:(t,i,o)=>WF(t,i)||e.get(t,i,o),has:(t,i)=>!!WF(t,i)||e.has(t,i)}));var O$=["continue","continuePrimaryKey","advance"],VF={},Um=new WeakMap,JF=new WeakMap,M$={get(e,t){if(!O$.includes(t))return e[t];let i=VF[t];return i||(i=VF[t]=function(...o){Um.set(this,JF.get(this)[t](...o))}),i}};function D$(...e){return jg(this,null,function*(){let t=this;if(t instanceof IDBCursor||(t=yield new Qf(t.openCursor(...e))),!t)return;t=t;let i=new Proxy(t,M$);for(JF.set(i,t),ud.set(i,jm(t));t;)yield i,t=yield new Qf(Um.get(i)||t.continue()),Um.delete(i)})}function GF(e,t){return t===Symbol.asyncIterator&&qm(e,[IDBIndex,IDBObjectStore,IDBCursor])||t==="iterate"&&qm(e,[IDBIndex,IDBObjectStore])}KF(e=>Fi(Yn({},e),{get(t,i,o){return GF(t,i)?D$:e.get(t,i,o)},has(t,i){return GF(t,i)||e.has(t,i)}}));var me=Nt(QF()),Vm=Nt(XF());var L$=6371;function hd(e){return e*(Math.PI/180)}function Gm(e,t,i,o){let s=hd(i-e),u=hd(o-t),d=Math.sin(s/2)*Math.sin(s/2)+Math.cos(hd(e))*Math.cos(hd(i))*Math.sin(u/2)*Math.sin(u/2),m=2*Math.atan2(Math.sqrt(d),Math.sqrt(1-d));return L$*m}function pd(e){return(0,Vm.sha512)(e)}function tS(e,t,i){let o=[],s=(0,me.keyBy)(i,"carriageCode");for(let u=0;u<e.departureTime.length;u++){let d=t.reduce((m,v)=>(m[v]=s[v].price[u],m),{});o.push({time:[e.departureTime[u],e.arrivalTime[u]],price:d})}return o}function N$(e){return(0,Vm.sha512)(`-user:${e.email}:${Date.now()}`)}var Lu=function(e){return e.active="active",e.canceled="canceled",e.completed="completed",e.rejected="rejected",e}(Lu||{}),ul=function(e){return e.manager="manager",e.user="user",e}(ul||{}),Tt=YF("rsschool@train-a",1,{upgrade(e,t,i){let o=e.createObjectStore("users",{keyPath:"id",autoIncrement:!0}),s=e.createObjectStore("stations",{keyPath:"id",autoIncrement:!0}),u=e.createObjectStore("carriages",{keyPath:"code"}),d=e.createObjectStore("railways",{keyPath:"id",autoIncrement:!0}),m=e.createObjectStore("routes",{keyPath:"id",autoIncrement:!0}),v=e.createObjectStore("schedule",{keyPath:"id",autoIncrement:!0}),_=e.createObjectStore("price",{keyPath:"id",autoIncrement:!0}),z=e.createObjectStore("order",{keyPath:"id",autoIncrement:!0});o.createIndex("email","email",{unique:!0}),o.createIndex("token","accessToken",{unique:!0}),s.createIndex("city","city",{unique:!0}),s.createIndex("geolocation",["latitude","longitude"],{unique:!0}),s.createIndex("latitude","latitude"),s.createIndex("longitude","longitude"),d.createIndex("stations",["station1","station2"],{unique:!0}),d.createIndex("station1","station1"),d.createIndex("station2","station2"),m.createIndex("carriage","carriages",{multiEntry:!0}),m.createIndex("station","path",{multiEntry:!0}),v.createIndex("route","routeId"),v.createIndex("ride",["routeId","id"],{unique:!0}),v.createIndex("arrivalTime","arrivalTime",{multiEntry:!0}),v.createIndex("departureTime","departureTime",{multiEntry:!0}),_.createIndex("carriage","carriageCode"),_.createIndex("ride","rideId"),_.createIndex("carriage_ride",["carriageCode","rideId"],{unique:!0}),_.createIndex("price","price",{multiEntry:!0}),z.createIndex("userId","userId"),z.createIndex("rideId","rideId"),z.createIndex("stationStart","stationStart"),z.createIndex("stationEnd","stationEnd"),z.createIndex("status","status"),z.createIndex("trip",["userId","rideId"]),z.createIndex("user_ride_status",["userId","rideId","status"],{unique:!0}),o.add({email:"admin@admin.com",name:"Admin",role:ul.manager,passHash:pd("my-password"),accessToken:null});let F=[],N=new Map,H=new Map,k=new Map,ae=new Map;(0,me.range)(1,(0,me.random)(60,200)).forEach(ke=>{let ge={city:`city${ke}`,latitude:(0,me.random)(-90,90,!0),longitude:(0,me.random)(-180,180,!0)};k.set(ge,new Map);for(let rt of F){let At=rt.latitude,R=rt.longitude,X=ge.latitude,fe=ge.longitude,re=Math.ceil(Gm(At,R,X,fe));H.has(re)||H.set(re,[]),k.has(rt)||k.set(rt,new Map),H.get(re).push([rt,ge]),k.get(ge).set(rt,re),k.get(rt).set(ge,re)}s.add(ge),F.push(ge),N.set(ge,ke)});let te=Array.from(H.keys()).sort((ke,ge)=>ke-ge),de=te.slice(0,Math.floor(te.length/5));for(let ke of de)for(let[ge,rt]of H.get(ke))ae.has(ge)||ae.set(ge,[]),ae.has(rt)||ae.set(rt,[]),ae.get(ge).push(rt),ae.get(rt).push(ge),d.add({station1:N.get(ge),station2:N.get(rt),distance:ke});let ht=[];(0,me.range)(1,(0,me.random)(4,7)).forEach(ke=>{let ge={code:`carriage${ke}`,name:`carriage${ke}`,rows:(0,me.random)(8,20),leftSeats:(0,me.random)(1,4),rightSeats:(0,me.random)(1,3)};ht.push(ge),u.add(ge)});let Ve=60,Ct=1;(0,me.range)(1,(0,me.random)(500,700)).forEach(ke=>{let ge=(0,me.range)((0,me.random)(8,25)).map(()=>ht[(0,me.random)(0,ht.length-1)].code),rt=Array.from(new Set(ge)),At=(0,me.random)(10,30),R=[],X=[],fe=0,re=F[(0,me.random)(0,F.length-1)];for(;fe<At&&re;){let Le=N.get(re);R.push(re),X.push(Le);let ee=ae.get(re),Te=(0,me.differenceWith)(ee,R,(j,Re)=>j.city===Re.city);Te.length>0?re=Te[(0,me.random)(Te.length-1)]:re=null,fe++}m.add({path:X,carriages:ge}),(0,me.range)(1,(0,me.random)(2,7)).forEach(()=>{let Le=[],ee=[];ee.push(new Date(Date.now()+(0,me.random)(-864e6,1296e6)));for(let Te=1;Te<R.length;Te++){let j=R[Te],Re=R[Te-1],ce=k.get(j).get(Re),xe=ee[Te-1],Ke=new Date(xe.getTime()+Math.floor(ce/Ve*36e5));if(Le.push(Ke),Te<R.length-1){let lt=(0,me.random)(5,60),je=new Date(Ke.getTime()+lt*6e4);ee.push(je)}}v.add({routeId:ke,arrivalTime:Le,departureTime:ee});for(let Te of rt){let j=(0,me.range)(X.length-1).map(()=>(0,me.random)(100,2500));_.add({rideId:Ct,carriageCode:Te,price:j})}Ct++})})}}),R$=(e,t,i)=>ct(void 0,null,function*(){yield(yield Tt).put("users",Fi(Yn({},i),{accessToken:null}))}),nS=/^Bearer\s+([\w\d]{5,})$/,Km=/^[\w\d\._]+@[\w\d_]+\.\w{2,7}$/,iS=function(e){return e.token="invalidAccessToken",e}(iS||{}),md=function(e){return e.recordNotFound="recordNotFound",e}(md||{}),Nu=function(e){return e.orderNotFound="orderNotFound",e.alreadyBooked="alreadyBooked",e.orderNotActive="orderNotActive",e}(Nu||{}),ns=function(e){return e.stationNotFound="stationNotFound",e.rideNotFound="rideNotFound",e.invalidStations="invalidStations",e}(ns||{}),dd=function(e){return e.notFound="userNotFound",e.alreadyLoggedIn="alreadyLoggedIn",e}(dd||{}),_o=function(e){return e.invalidFields="invalidFields",e.invalidEmail="invalidEmail",e.invalidPassword="invalidPassword",e.invalidUniqueKey="invalidUniqueKey",e}(_o||{}),rS=function(e){return e.invalidStationData="invalidStationData",e}(rS||{}),Hm=class extends Xn{constructor(t,i){super(400,{},{message:t,reason:i})}};function Zt(e,t){return new Hm(e,t)}var Wm=class extends Xn{constructor(){super(401,{},{message:"Access is not granted",reason:iS.token})}};function fd(){return new Wm}var B$=(e,t)=>ct(void 0,null,function*(){let{email:i,password:o}=JSON.parse(t.requestBody),{Authorization:s=""}=t.requestHeaders;if(nS.test(s))return Zt("Authorization error",dd.alreadyLoggedIn);if(!i||!o)return Zt("Fields are empty",_o.invalidFields);if(!Km.test(i))return Zt("Email is wrong",_o.invalidEmail);let u=yield Tt,d=yield u.getFromIndex("users","email",i);if(d){if(pd(o)!==d.passHash)return Zt("User is not found",dd.notFound)}else return Zt("User is not found",dd.notFound);let m=N$(d);return yield u.put("users",Fi(Yn({},d),{accessToken:m})),{token:m}}),k$=(e,t)=>ct(void 0,null,function*(){let{email:i,password:o}=JSON.parse(t.requestBody);if(i&&o)if(Km.test(i)){if(o.length<8)return Zt("Password is wrong",_o.invalidPassword)}else return Zt("Email is wrong",_o.invalidEmail);else return Zt("Fields are empty",_o.invalidFields);let s=pd(o),u=yield Tt;try{yield u.add("users",{name:null,accessToken:null,email:i,passHash:s,role:ul.user})}catch(d){if(d instanceof Error&&(d.name==="ConstraintError"||(d.message?.toLowerCase()).includes("already exist")))return Zt("User already exists",_o.invalidUniqueKey);throw d}}),q$=(e,t,i)=>ct(void 0,null,function*(){let o=JSON.parse(t.requestBody),s=(0,me.toInteger)(o.stationStart),u=(0,me.toInteger)(o.stationEnd),d=(0,me.toInteger)(o.rideId),m=(0,me.toInteger)(o.seat),v=yield Tt,_=yield v.get("schedule",d);if(!_)return Zt("Ride not found",ns.rideNotFound);let z=yield v.get("routes",_.routeId);if(!z)return Zt("Ride not found",ns.rideNotFound);let F=z.path.indexOf(s),N=z.path.indexOf(u);if(F>=0&&N>F)try{return{id:yield v.add("order",{userId:i.id,rideId:d,seatId:(0,me.toInteger)(m),stationStart:s,stationEnd:u,status:Lu.active})}}catch(H){if(H.name==="ConstraintError")return Zt("Ride is already booked",Nu.alreadyBooked);throw H}else return Zt("Invalid stations",ns.invalidStations)}),$$=(e,t,i)=>ct(void 0,null,function*(){let o=Number(t.params.rideId),s=yield Tt;if(!o||o<1)return Zt("Order is not found",Nu.orderNotFound);let u=yield s.getAllFromIndex("order","rideId",o);if(!u.length)return Zt("Order is not found",Nu.orderNotFound);let d=u.find(v=>v.status===Lu.active),m=i.role===ul.manager;return!d||!m&&d.userId!==i.id?Zt("Order is not active",Nu.orderNotActive):(yield s.put("order",Fi(Yn({},d),{status:m?Lu.rejected:Lu.canceled})),null)}),Z$=(e,t)=>ct(void 0,null,function*(){return(yield Tt).getAll("carriages")}),j$=(e,t)=>ct(void 0,null,function*(){let{name:i,rows:o,leftSeats:s,rightSeats:u}=JSON.parse(t.requestBody),d=yield Tt,m=(0,me.kebabCase)(i),v={code:m,name:i,rows:o,leftSeats:s,rightSeats:u};return yield d.add("carriages",v),{code:m}}),U$=(e,t)=>ct(void 0,null,function*(){let i=t.params.code;return yield(yield Tt).delete("carriages",i),null}),H$=(e,t)=>ct(void 0,null,function*(){let i=JSON.parse(t.requestBody),o=t.params.code,s=yield Tt,u=yield s.get("carriages",o);if(u){let d=Fi(Yn({},u),{name:i.name,rows:i.rows,leftSeats:i.leftSeats,rightSeats:i.rightSeats});return{code:yield s.put("carriages",d)}}else return Zt("Carriage not found",md.recordNotFound)}),W$=(e,t,i)=>ct(void 0,null,function*(){let o=i.role===ul.manager&&t.queryParams.all&&t.queryParams.all!=="false",s=yield Tt,u=s.getAllFromIndex("order","userId",i.id);o&&(u=s.getAll("order"));let d=yield u,m=Array.from(new Set(d.map(te=>te.rideId))),v=yield Promise.all(m.map(te=>s.get("schedule",te))),_=(0,me.keyBy)(v,"id"),z=Array.from(new Set(v.map(te=>te.routeId))),F=yield Promise.all(z.map(te=>s.get("routes",te))),N=(0,me.keyBy)(F,"id"),H=yield Promise.all(m.map(te=>s.getAllFromIndex("price","ride",te))),k=(0,me.keyBy)(H,te=>te[0].rideId);return d.map(te=>Fi(Yn({},te),{routeId:_[te.rideId].routeId,carriages:N[_[te.rideId].routeId].carriages,path:N[_[te.rideId].routeId].path,schedule:{segments:tS(_[te.rideId],Array.from(new Set(N[_[te.rideId].routeId].carriages)),k[te.rideId])}})).map(te=>(0,me.pick)(te,["id","userId","routeId","rideId","seatId","path","carriages","stationStart","stationEnd","schedule","status"]))}),V$=(e,t,i)=>(0,me.pick)(i,["name","email","role"]),G$=(e,t,i)=>ct(void 0,null,function*(){let{name:o,email:s}=JSON.parse(t.requestBody),u=Yn({},i);o&&o!==i.name&&(u.name=o),s&&s!==i.email&&Km.test(s)&&(u.email=s);let d=yield Tt;try{yield d.put("users",u)}catch(m){if(m instanceof Error&&(m.name==="ConstraintError"||(m.message?.toLowerCase()).includes("Unable to add key to index")))return Zt("Email already exists",_o.invalidUniqueKey);throw m}return(0,me.pick)(u,["name","email","role"])}),K$=(e,t,i)=>ct(void 0,null,function*(){let{password:o}=JSON.parse(t.requestBody);if(o.length<8)return Zt("Password is wrong",_o.invalidPassword);let s=pd(o);yield(yield Tt).put("users",Fi(Yn({},i),{passHash:s}))}),Y$=(e,t)=>ct(void 0,null,function*(){let i=Number(t.params.id),o=yield Tt,s=yield o.get("schedule",i);if(!s)return Zt("Ride not found",ns.rideNotFound);let u=yield o.get("routes",s.routeId),d=yield o.getAllFromIndex("price","ride",i),m=(0,me.keyBy)(d,"carriageCode"),v=yield o.getAllFromIndex("order","rideId",i),_=u.path,z=u.carriages,F=Array.from(new Set(z)),N=[],H=(0,me.range)(_.length-1).map(()=>[]);for(let k of v){let ae=_.indexOf(k.stationStart),te=_.indexOf(k.stationEnd);for(let de of(0,me.range)(ae,te))H[de].push(k.seatId)}for(let k=0;k<_.length-1;k++){let ae=[s.departureTime[k],s.arrivalTime[k]],te=F.reduce((de,ht)=>(de[ht]=m[ht].price[k],de),{});N.push({time:ae,price:te,occupiedSeats:H[k]})}return{rideId:i,path:_,carriages:z,schedule:{segments:N}}}),J$=(e,t)=>ct(void 0,null,function*(){return(yield Tt).getAll("routes")}),Q$=(e,t)=>ct(void 0,null,function*(){let{path:i,carriages:o}=JSON.parse(t.requestBody);return{id:yield(yield Tt).add("routes",{path:i.map(me.toInteger),carriages:o})}}),X$=(e,t)=>ct(void 0,null,function*(){let i=Number(t.params.id);return yield(yield Tt).delete("routes",i),null}),e9=(e,t)=>ct(void 0,null,function*(){let i=Number(t.params.id),o=yield Tt,[s,u]=yield Promise.all([o.get("routes",i),o.getAllFromIndex("schedule","route",i)]);if(!s)return Zt("Ride not found",ns.rideNotFound);let d=yield Promise.all(u.map(({id:z})=>o.getAllFromIndex("price","ride",z))),m=(0,me.keyBy)(d,z=>z[0].rideId),v=Array.from(new Set(s.carriages)),_=u.map(z=>{let F=tS(z,v,m[z.id]);return{rideId:z.id,segments:F}});return{id:s.id,path:s.path,carriages:s.carriages,schedule:_}}),t9=(e,t)=>ct(void 0,null,function*(){let i=JSON.parse(t.requestBody),o=Number(t.params.routeId),s=yield Tt,u=yield s.get("routes",o);if(!u)return Zt("Route not found",md.recordNotFound);let d=Array.from(new Set(u.carriages)),m=[],v=[],_={};for(let k of i.segments){let[ae,te]=k.time;m.push(te),v.push(ae);for(let de of d)_[de]||(_[de]=[]),_[de].push((0,me.toInteger)(k.price[de]))}let z=s.transaction(["schedule","price"],"readwrite"),F=z.objectStore("schedule"),N=z.objectStore("price"),H=yield F.add({routeId:o,arrivalTime:m,departureTime:v});return yield Promise.all([...d.map(k=>N.add({rideId:H,carriageCode:k,price:_[k]})),z.done]),{id:H}}),n9=(e,t)=>ct(void 0,null,function*(){let i=JSON.parse(t.requestBody),o=(0,me.toInteger)(t.params.routeId),s=(0,me.toInteger)(t.params.rideId),u=yield Tt,[d,m]=yield Promise.all([u.get("routes",o),u.getFromIndex("schedule","ride",[o,s])]);if(!m||!d)return Zt("Ride not found",md.recordNotFound);let v=Array.from(new Set(d.carriages)),_=[],z=[],F={};for(let de of i.segments){let[ht,Ve]=de.time;_.push(Ve),z.push(ht);for(let Ct of v)F[Ct]||(F[Ct]=[]),F[Ct].push((0,me.toInteger)(de.price[Ct]))}let N=u.transaction(["schedule","price"],"readwrite"),H=N.objectStore("schedule"),k=N.objectStore("price"),ae=yield k.index("ride").getAll(s),te=(0,me.keyBy)(ae,"carriageCode");return yield Promise.all([H.put(Fi(Yn({},m),{arrivalTime:_,departureTime:z})),...v.map(de=>k.put(Fi(Yn({},te[de]),{price:F[de]}))),N.done]),null}),i9=(e,t)=>ct(void 0,null,function*(){let{path:i,carriages:o}=JSON.parse(t.requestBody),s=(0,me.toInteger)(t.params.id),d=yield(yield Tt).put("routes",{id:s,path:i.map(me.toInteger),carriages:o});if(s===d)return{id:s}}),r9=50,o9=(e,t)=>ct(void 0,null,function*(){let i=t.queryParams,o=yield Tt,s=yield eS(i.fromCity,i.fromLatitude,i.fromLongitude);if(!s)return Zt("Start station not found",ns.stationNotFound);let u=yield eS(i.toCity,i.toLatitude,i.toLongitude);if(!u)return Zt("End station not found",ns.stationNotFound);let d=yield o.getAllFromIndex("routes","station",s.id),m=yield o.getAllFromIndex("routes","station",u.id),v=(0,me.intersectionBy)(d,m,"id").filter(N=>{let H=N.path.indexOf(s.id);return H>=0&&H<N.path.indexOf(u.id)}),_=i.time?new Date(i.time):new Date;return{routes:(yield Promise.all(v.map(N=>o.getAllFromIndex("schedule","route",N.id).then(H=>{let k=N.path.indexOf(s.id);return H.filter(ae=>ae.departureTime[k]>=_)}).then(H=>Promise.all(H.map(k=>Promise.all([o.getAllFromIndex("price","ride",k.id).then(ae=>(0,me.keyBy)(ae,"carriageCode")),o.getAllFromIndex("order","rideId",k.id)]).then(([ae,te])=>Fi(Yn({},k),{prices:ae,orders:te})))).then(k=>{let ae=Array.from(new Set(N.carriages));return Fi(Yn({},N),{schedule:k.map(te=>{let de=[],ht=(0,me.range)(N.path.length-1).map(()=>[]);for(let Ve of te.orders){let Ct=N.path.indexOf(Ve.stationStart),ke=N.path.indexOf(Ve.stationEnd);for(let ge of(0,me.range)(Ct,ke+1))ht[ge].push(Ve.seatId)}for(let Ve=0;Ve<N.path.length-1;Ve++){let Ct=[te.departureTime[Ve],te.arrivalTime[Ve]],ke=ae.reduce((ge,rt)=>(ge[rt]=te.prices[rt].price[Ve],ge),{});de.push({time:Ct,price:ke,occupiedSeats:ht[Ve]})}return{rideId:te.id,segments:de}})})}))))).filter(({schedule:N})=>N.length>0),from:{stationId:s.id,city:s.city,geolocation:{latitude:s.latitude,longitude:s.longitude}},to:{stationId:u.id,city:u.city,geolocation:{latitude:u.latitude,longitude:u.longitude}}}});function s9(e,t){return ct(this,null,function*(){let i=new Map,s=yield(yield Tt).transaction("stations").store.openCursor();for(;s;){let d=s.value,m=Gm(e,t,d.latitude,d.longitude);i.set(m,d),s=yield s.continue()}let u=Math.min(...i.keys());return u<r9?i.get(u)??null:null})}function eS(e,t,i){return ct(this,null,function*(){let o=yield Tt;if(e=e?.trim(),e){let s=yield o.getFromIndex("stations","city",e);if(s)return s;if(t&&i&&(s=yield o.getFromIndex("stations","geolocation",IDBKeyRange.only([t,i])),s))return s}return t&&i?s9(t,i):null})}var a9=(e,t)=>ct(void 0,null,function*(){let i=yield Tt,o=yield i.getAll("stations"),s=[];for(let{id:u,city:d,latitude:m,longitude:v}of o){let _=yield i.getAllFromIndex("railways","station1",IDBKeyRange.only(u)),z=yield i.getAllFromIndex("railways","station2",IDBKeyRange.only(u)),F=[];for(let{station2:N,distance:H}of _)F.push({id:N,distance:H});for(let{station1:N,distance:H}of z)F.push({id:N,distance:H});s.push({id:u,city:d,latitude:m,longitude:v,connectedTo:F})}return s}),l9=(e,t)=>ct(void 0,null,function*(){let{city:i,latitude:o,longitude:s,relations:u}=JSON.parse(t.requestBody);if(!i||!(0,me.inRange)(o,-90,90.01)||!(0,me.inRange)(s,-90,90.01)||!Array.isArray(u))return Zt("Invalid station data",rS.invalidStationData);let d=(yield Tt).transaction(["stations","railways"],"readwrite"),m=d.objectStore("stations"),v=d.objectStore("railways"),_=yield m.add({city:i,latitude:o,longitude:s});return yield Promise.all(u.map(z=>m.get(z).then(F=>{if(!F)return;let N=F.latitude,H=F.longitude,te=Math.ceil(Gm(N,H,o,s));return v.add({station1:Number(z),station2:Number(_),distance:te})})).concat(d.done)),{id:_}}),u9=(e,t)=>ct(void 0,null,function*(){let i=Number(t.params.id),s=(yield Tt).transaction(["stations","railways"],"readwrite"),u=s.objectStore("railways"),d=yield u.index("station1").getAllKeys(i),m=yield u.index("station2").getAllKeys(i),v=[s.objectStore("stations").delete(i),s.done];return d.length>0&&v.push(...d.map(_=>u.delete(_))),m.length>0&&v.push(...m.map(_=>u.delete(_))),yield Promise.all(v),null}),c9=(e,t)=>ct(void 0,null,function*(){return(yield(yield Tt).getAll("users")).map(s=>(0,me.pick)(s,["id","email","role","name"]))});function Ys(e){return(t,i)=>ct(this,null,function*(){let{Authorization:o=""}=i.requestHeaders,u=o.match(nS)?.[1];if(!u)return fd();let d=yield(yield Tt).getFromIndex("users","token",u);return d?e(t,i,d):fd()})}function tr(e){return(t,i)=>ct(this,null,function*(){let{Authorization:o}=i.requestHeaders,u=o.match(/^Bearer\s+([\w\d]+)$/)?.[1];if(!u)return fd();let d=yield(yield Tt).getFromIndex("users","token",u);return d?.role===ul.manager?e(t,i,d):fd()})}var h9=jF({routes(){this.namespace="api",this.post("/signin",B$),this.post("/signup",k$),this.delete("/logout",Ys(R$)),this.get("/profile",Ys(V$)),this.put("/profile",Ys(G$)),this.put("/profile/password",Ys(K$)),this.get("/station",a9),this.post("/station",tr(l9)),this.delete("/station/:id",tr(u9)),this.get("/carriage",Z$),this.post("/carriage",tr(j$)),this.put("/carriage/:code",tr(H$)),this.delete("/carriage/:code",tr(U$)),this.get("/route",J$),this.post("/route",tr(Q$)),this.get("/route/:id",tr(e9)),this.put("/route/:id",tr(i9)),this.delete("/route/:id",tr(X$)),this.post("/route/:routeId/ride",tr(t9)),this.put("/route/:routeId/ride/:rideId",tr(n9)),this.get("/search",o9),this.get("/search/:id",Y$),this.get("/order",Ys(W$)),this.post("/order",Ys(q$)),this.delete("/order/:id",Ys($$)),this.get("/users",tr(c9)),this.passthrough(e=>!/^\/api\//.test(e.url)&&!new RegExp(`^${document.location.origin}/api/`).test(e.url))}});function oS(){return h9.start()}function d9(e){let t=e,i=Math.floor(Math.abs(e)),o=e.toString().replace(/^[^.]*\.?/,"").length;return i===1&&o===0?1:5}var sS=["en",[["a","p"],["AM","PM"],void 0],[["AM","PM"],void 0,void 0],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],void 0,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],void 0,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",void 0,"{1} 'at' {0}",void 0],[".",",",";","%","+","-","E","\xD7","\u2030","\u221E","NaN",":"],["#,##0.###","#,##0%","\xA4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",d9];var f9="@",p9=(()=>{let t=class t{constructor(o,s,u,d,m){this.doc=o,this.delegate=s,this.zone=u,this.animationType=d,this.moduleImpl=m,this._rendererFactoryPromise=null,this.scheduler=Rt(o_,{optional:!0})}ngOnDestroy(){this._engine?.flush()}loadImpl(){return(this.moduleImpl??import("./chunk-A6G72VP6.js").then(s=>s)).catch(s=>{throw new nu(5300,!1)}).then(({\u0275createEngine:s,\u0275AnimationRendererFactory:u})=>{this._engine=s(this.animationType,this.doc);let d=new u(this.delegate,this._engine,this.zone);return this.delegate=d,d})}createRenderer(o,s){let u=this.delegate.createRenderer(o,s);if(u.\u0275type===0)return u;typeof u.throwOnSyntheticProps=="boolean"&&(u.throwOnSyntheticProps=!1);let d=new Ym(u);return s?.data?.animation&&!this._rendererFactoryPromise&&(this._rendererFactoryPromise=this.loadImpl()),this._rendererFactoryPromise?.then(m=>{let v=m.createRenderer(o,s);d.use(v),this.scheduler?.notify(9)}).catch(m=>{d.use(u)}),d}begin(){this.delegate.begin?.()}end(){this.delegate.end?.()}whenRenderingDone(){return this.delegate.whenRenderingDone?.()??Promise.resolve()}};t.\u0275fac=function(s){r_()},t.\u0275prov=wn({token:t,factory:t.\u0275fac});let e=t;return e})(),Ym=class{constructor(t){this.delegate=t,this.replay=[],this.\u0275type=1}use(t){if(this.delegate=t,this.replay!==null){for(let i of this.replay)i(t);this.replay=null}}get data(){return this.delegate.data}destroy(){this.replay=null,this.delegate.destroy()}createElement(t,i){return this.delegate.createElement(t,i)}createComment(t){return this.delegate.createComment(t)}createText(t){return this.delegate.createText(t)}get destroyNode(){return this.delegate.destroyNode}appendChild(t,i){this.delegate.appendChild(t,i)}insertBefore(t,i,o,s){this.delegate.insertBefore(t,i,o,s)}removeChild(t,i,o){this.delegate.removeChild(t,i,o)}selectRootElement(t,i){return this.delegate.selectRootElement(t,i)}parentNode(t){return this.delegate.parentNode(t)}nextSibling(t){return this.delegate.nextSibling(t)}setAttribute(t,i,o,s){this.delegate.setAttribute(t,i,o,s)}removeAttribute(t,i,o){this.delegate.removeAttribute(t,i,o)}addClass(t,i){this.delegate.addClass(t,i)}removeClass(t,i){this.delegate.removeClass(t,i)}setStyle(t,i,o,s){this.delegate.setStyle(t,i,o,s)}removeStyle(t,i,o){this.delegate.removeStyle(t,i,o)}setProperty(t,i,o){this.shouldReplay(i)&&this.replay.push(s=>s.setProperty(t,i,o)),this.delegate.setProperty(t,i,o)}setValue(t,i){this.delegate.setValue(t,i)}listen(t,i,o){return this.shouldReplay(i)&&this.replay.push(s=>s.listen(t,i,o)),this.delegate.listen(t,i,o)}shouldReplay(t){return this.replay!==null&&t.startsWith(f9)}};function aS(e="animations"){return a_("NgAsyncAnimations"),Qg([{provide:s_,useFactory:(t,i,o)=>new p9(t,i,o,e),deps:[Ia,x_,hr]},{provide:i_,useValue:e==="noop"?"NoopAnimations":"BrowserAnimations"}])}var lS=new Wc("nz-after-next-render",{providedIn:"root",factory:()=>{let e=Rt(Ds);return new Ug(t=>{let i=l_(()=>{t.next(),t.complete()},{injector:e});return()=>i.destroy()})}});var _9=[[["nz-auto-option"]]],v9=["nz-auto-option"];function y9(e,t){if(e&1&&(st(0),U(1),at()),e&2){let i=q();S(),yt(i.nzLabel)}}var cS=["*"],x9=["panel"],C9=["content"];function w9(e,t){}function b9(e,t){e&1&&K(0,w9,0,0,"ng-template")}function z9(e,t){e&1&&mi(0)}function F9(e,t){if(e&1&&(E(0,"nz-auto-option",8),U(1),I()),e&2){let i=t.$implicit;B("nzValue",i.value)("nzLabel",i.label),S(),We(" ",i.label," ")}}function S9(e,t){if(e&1&&K(0,F9,2,3,"nz-auto-option",7),e&2){let i=q(2);B("ngForOf",i.normalizedDataSource)}}function T9(e,t){if(e&1){let i=Ft();E(0,"div",3,0),it("@slideMotion.done",function(s){Xe(i);let u=q();return et(u.onAnimationEvent(s))}),E(2,"div",4)(3,"div",5),K(4,b9,1,0,null,6),I()()(),K(5,z9,1,0,"ng-template",null,1,tt)(7,S9,1,1,"ng-template",null,2,tt)}if(e&2){let i=He(6),o=He(8),s=q();Bt("ant-select-dropdown-hidden",!s.showPanel)("ant-select-dropdown-rtl",s.dir==="rtl"),B("ngClass",s.nzOverlayClassName)("ngStyle",s.nzOverlayStyle)("nzNoAnimation",s.noAnimation==null?null:s.noAnimation.nzNoAnimation)("@slideMotion",void 0)("@.disabled",!!(s.noAnimation!=null&&s.noAnimation.nzNoAnimation)),S(4),B("ngTemplateOutlet",s.nzDataSource?o:i)}}var hS=(()=>{let t=class t{constructor(){}};t.\u0275fac=function(s){return new(s||t)},t.\u0275cmp=Ee({type:t,selectors:[["nz-auto-optgroup"]],inputs:{nzLabel:"nzLabel"},exportAs:["nzAutoOptgroup"],standalone:!0,features:[Oe],ngContentSelectors:v9,decls:3,vars:1,consts:[[1,"ant-select-item","ant-select-item-group"],[4,"nzStringTemplateOutlet"]],template:function(s,u){s&1&&(pi(_9),E(0,"div",0),K(1,y9,2,1,"ng-container",1),I(),mi(2)),s&2&&(S(),B("nzStringTemplateOutlet",u.nzLabel))},dependencies:[_i,gi],encapsulation:2,changeDetection:0});let e=t;return e})(),Jm=class{constructor(t,i=!1){this.source=t,this.isUserInput=i}},Js=(()=>{let t=class t{constructor(o,s,u){this.ngZone=o,this.changeDetectorRef=s,this.element=u,this.nzDisabled=!1,this.selectionChange=new Bn,this.mouseEntered=new Bn,this.active=!1,this.selected=!1,this.nzAutocompleteOptgroupComponent=Rt(hS,{optional:!0}),this.destroy$=new Rn}ngOnInit(){this.ngZone.runOutsideAngular(()=>{Es(this.element.nativeElement,"mouseenter").pipe(Bo(()=>this.mouseEntered.observers.length>0),wt(this.destroy$)).subscribe(()=>{this.ngZone.run(()=>this.mouseEntered.emit(this))}),Es(this.element.nativeElement,"mousedown").pipe(wt(this.destroy$)).subscribe(o=>o.preventDefault())})}ngOnDestroy(){this.destroy$.next()}select(o=!0){this.selected=!0,this.changeDetectorRef.markForCheck(),o&&this.emitSelectionChangeEvent()}deselect(){this.selected=!1,this.changeDetectorRef.markForCheck(),this.emitSelectionChangeEvent()}getLabel(){return this.nzLabel||this.nzValue.toString()}setActiveStyles(){this.active||(this.active=!0,this.changeDetectorRef.markForCheck())}setInactiveStyles(){this.active&&(this.active=!1,this.changeDetectorRef.markForCheck())}scrollIntoViewIfNeeded(){S_(this.element.nativeElement)}selectViaInteraction(){this.nzDisabled||(this.selected=!this.selected,this.selected?this.setActiveStyles():this.setInactiveStyles(),this.emitSelectionChangeEvent(!0),this.changeDetectorRef.markForCheck())}emitSelectionChangeEvent(o=!1){this.selectionChange.emit(new Jm(this,o))}};t.\u0275fac=function(s){return new(s||t)(Q(hr),Q(cn),Q(qo))},t.\u0275cmp=Ee({type:t,selectors:[["nz-auto-option"]],hostAttrs:["role","menuitem",1,"ant-select-item","ant-select-item-option"],hostVars:10,hostBindings:function(s,u){s&1&&it("click",function(){return u.selectViaInteraction()}),s&2&&(Qi("aria-selected",u.selected.toString())("aria-disabled",u.nzDisabled.toString()),Bt("ant-select-item-option-grouped",u.nzAutocompleteOptgroupComponent)("ant-select-item-option-selected",u.selected)("ant-select-item-option-active",u.active)("ant-select-item-option-disabled",u.nzDisabled))},inputs:{nzValue:"nzValue",nzLabel:"nzLabel",nzDisabled:[2,"nzDisabled","nzDisabled",pt]},outputs:{selectionChange:"selectionChange",mouseEntered:"mouseEntered"},exportAs:["nzAutoOption"],standalone:!0,features:[kn,Oe],ngContentSelectors:cS,decls:2,vars:0,consts:[[1,"ant-select-item-option-content"]],template:function(s,u){s&1&&(pi(),E(0,"div",0),mi(1),I())},encapsulation:2,changeDetection:0});let e=t;return e})(),A9={provide:I_,useExisting:Jg(()=>Ru),multi:!0};function P9(){return Error("Attempting to open an undefined instance of `nz-autocomplete`. Make sure that the id passed to the `nzAutocomplete` is correct and that you're attempting to open it after the ngAfterContentInit hook.")}var Ru=(()=>{let t=class t{get activeOption(){return this.nzAutocomplete&&this.nzAutocomplete.options.length?this.nzAutocomplete.activeItem:null}constructor(o,s,u,d){this.ngZone=o,this.elementRef=s,this.overlay=u,this.viewContainerRef=d,this.onChange=()=>{},this.onTouched=()=>{},this.panelOpen=!1,this.destroy$=new Rn,this.overlayRef=null,this.portal=null,this.previousValue=null,this.document=Rt(Ia),this.nzInputGroupWhitSuffixOrPrefixDirective=Rt(Ra,{optional:!0})}ngAfterViewInit(){this.nzAutocomplete&&this.nzAutocomplete.animationStateChange.pipe(wt(this.destroy$)).subscribe(o=>{o.toState==="void"&&this.overlayRef&&(this.overlayRef.dispose(),this.overlayRef=null)})}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete(),this.destroyPanel()}writeValue(o){this.ngZone.runOutsideAngular(()=>Promise.resolve(null).then(()=>this.setTriggerValue(o)))}registerOnChange(o){this.onChange=o}registerOnTouched(o){this.onTouched=o}setDisabledState(o){let s=this.elementRef.nativeElement;s.disabled=o,this.closePanel()}openPanel(){this.previousValue=this.elementRef.nativeElement.value,this.attachOverlay(),this.updateStatus()}closePanel(){this.panelOpen&&(this.nzAutocomplete.isOpen=this.panelOpen=!1,this.overlayRef&&this.overlayRef.hasAttached()&&(this.overlayRef.detach(),this.selectionChangeSubscription.unsubscribe(),this.overlayOutsideClickSubscription.unsubscribe(),this.optionsChangeSubscription.unsubscribe(),this.portal=null))}handleKeydown(o){let s=o.keyCode,u=s===38||s===40;s===27&&o.preventDefault(),this.panelOpen&&(s===27||s===9)?(this.activeOption&&this.activeOption.getLabel()!==this.previousValue&&this.setTriggerValue(this.previousValue),this.closePanel()):this.panelOpen&&s===13?this.nzAutocomplete.showPanel&&(o.preventDefault(),this.activeOption?this.activeOption.selectViaInteraction():this.closePanel()):this.panelOpen&&u&&this.nzAutocomplete.showPanel&&(o.stopPropagation(),o.preventDefault(),s===38?this.nzAutocomplete.setPreviousItemActive():this.nzAutocomplete.setNextItemActive(),this.activeOption&&this.activeOption.scrollIntoViewIfNeeded(),this.doBackfill())}handleInput(o){let s=o.target,u=this.document,d=s.value;s.type==="number"&&(d=d===""?null:parseFloat(d)),this.previousValue!==d&&(this.previousValue=d,this.onChange(d),this.canOpen()&&u.activeElement===o.target&&this.openPanel())}handleFocus(){this.canOpen()&&this.openPanel()}handleBlur(){this.onTouched()}subscribeOptionsChange(){return this.nzAutocomplete.options.changes.pipe(Hc(()=>this.positionStrategy.reapplyLastPosition()),Gg(0)).subscribe(()=>{this.resetActiveItem(),this.panelOpen&&this.overlayRef.updatePosition()})}subscribeSelectionChange(){return this.nzAutocomplete.selectionChange.subscribe(o=>{this.setValueAndClose(o)})}subscribeOverlayOutsideClick(){return this.overlayRef.outsidePointerEvents().pipe(Bo(o=>!this.elementRef.nativeElement.contains(o.target))).subscribe(()=>{this.closePanel()})}attachOverlay(){if(!this.nzAutocomplete)throw P9();!this.portal&&this.nzAutocomplete.template&&(this.portal=new lh(this.nzAutocomplete.template,this.viewContainerRef)),this.overlayRef||(this.overlayRef=this.overlay.create(this.getOverlayConfig())),this.overlayRef&&!this.overlayRef.hasAttached()&&(this.overlayRef.attach(this.portal),this.selectionChangeSubscription=this.subscribeSelectionChange(),this.optionsChangeSubscription=this.subscribeOptionsChange(),this.overlayOutsideClickSubscription=this.subscribeOverlayOutsideClick(),this.overlayRef.detachments().pipe(wt(this.destroy$)).subscribe(()=>{this.closePanel()})),this.nzAutocomplete.isOpen=this.panelOpen=!0}updateStatus(){this.overlayRef&&this.overlayRef.updateSize({width:this.nzAutocomplete.nzWidth||this.getHostWidth()}),this.nzAutocomplete.setVisibility(),this.resetActiveItem(),this.activeOption&&this.activeOption.scrollIntoViewIfNeeded()}destroyPanel(){this.overlayRef&&this.closePanel()}getOverlayConfig(){return new ch({positionStrategy:this.getOverlayPosition(),disposeOnNavigation:!0,scrollStrategy:this.overlay.scrollStrategies.reposition(),width:this.nzAutocomplete.nzWidth||this.getHostWidth()})}getConnectedElement(){return this.nzInputGroupWhitSuffixOrPrefixDirective?this.nzInputGroupWhitSuffixOrPrefixDirective.elementRef:this.elementRef}getHostWidth(){return this.getConnectedElement().nativeElement.getBoundingClientRect().width}getOverlayPosition(){let o=[new ip({originX:"start",originY:"bottom"},{overlayX:"start",overlayY:"top"}),new ip({originX:"start",originY:"top"},{overlayX:"start",overlayY:"bottom"})];return this.positionStrategy=this.overlay.position().flexibleConnectedTo(this.getConnectedElement()).withFlexibleDimensions(!1).withPush(!1).withPositions(o).withTransformOriginOn(".ant-select-dropdown"),this.positionStrategy}resetActiveItem(){let o=this.nzAutocomplete.getOptionIndex(this.previousValue);this.nzAutocomplete.clearSelectedOptions(null,!0),o!==-1?(this.nzAutocomplete.setActiveItem(o),this.nzAutocomplete.activeItem.select(!1)):this.nzAutocomplete.setActiveItem(this.nzAutocomplete.nzDefaultActiveFirstOption?0:-1)}setValueAndClose(o){let s=o.nzValue;this.setTriggerValue(o.getLabel()),this.onChange(s),this.elementRef.nativeElement.focus(),this.closePanel()}setTriggerValue(o){let s=this.nzAutocomplete.getOption(o),u=s?s.getLabel():o;this.elementRef.nativeElement.value=u??"",this.nzAutocomplete.nzBackfill||(this.previousValue=u)}doBackfill(){this.nzAutocomplete.nzBackfill&&this.nzAutocomplete.activeItem&&this.setTriggerValue(this.nzAutocomplete.activeItem.getLabel())}canOpen(){let o=this.elementRef.nativeElement;return!o.readOnly&&!o.disabled}};t.\u0275fac=function(s){return new(s||t)(Q(hr),Q(qo),Q(lu),Q(Gc))},t.\u0275dir=iu({type:t,selectors:[["input","nzAutocomplete",""],["textarea","nzAutocomplete",""]],hostAttrs:["autocomplete","off","aria-autocomplete","list"],hostBindings:function(s,u){s&1&&it("focusin",function(){return u.handleFocus()})("blur",function(){return u.handleBlur()})("input",function(m){return u.handleInput(m)})("keydown",function(m){return u.handleKeydown(m)})},inputs:{nzAutocomplete:"nzAutocomplete"},exportAs:["nzAutocompleteTrigger"],standalone:!0,features:[Fr([A9])]});let e=t;return e})();function I9(e){return e?.map(t=>typeof t=="number"||typeof t=="string"?{label:t.toString(),value:t.toString()}:t)}var gd=(()=>{let t=class t{get options(){return this.nzDataSource?this.fromDataSourceOptions:this.fromContentOptions}constructor(o,s){this.changeDetectorRef=o,this.directionality=s,this.nzOverlayClassName="",this.nzOverlayStyle={},this.nzDefaultActiveFirstOption=!0,this.nzBackfill=!1,this.compareWith=(u,d)=>u===d,this.selectionChange=new Bn,this.showPanel=!0,this.isOpen=!1,this.activeItem=null,this.dir="ltr",this.normalizedDataSource=[],this.destroy$=new Rn,this.animationStateChange=new Bn,this.activeItemIndex=-1,this.selectionChangeSubscription=Sa.EMPTY,this.optionMouseEnterSubscription=Sa.EMPTY,this.dataSourceChangeSubscription=Sa.EMPTY,this.optionSelectionChanges=Xf(()=>this.options?tu(...this.options.map(u=>u.selectionChange)):this.afterNextRender$.pipe(ko(()=>this.optionSelectionChanges))),this.optionMouseEnter=Xf(()=>this.options?tu(...this.options.map(u=>u.mouseEntered)):this.afterNextRender$.pipe(ko(()=>this.optionMouseEnter))),this.afterNextRender$=Rt(lS),this.noAnimation=Rt(qr,{host:!0,optional:!0})}ngOnInit(){this.directionality.change?.pipe(wt(this.destroy$)).subscribe(o=>{this.dir=o,this.changeDetectorRef.detectChanges()}),this.dir=this.directionality.value}ngOnChanges(o){let{nzDataSource:s}=o;s&&(this.normalizedDataSource=I9(s.currentValue))}onAnimationEvent(o){this.animationStateChange.emit(o)}ngAfterContentInit(){this.nzDataSource||this.optionsInit()}ngAfterViewInit(){this.nzDataSource&&this.optionsInit()}ngOnDestroy(){this.dataSourceChangeSubscription.unsubscribe(),this.selectionChangeSubscription.unsubscribe(),this.optionMouseEnterSubscription.unsubscribe(),this.dataSourceChangeSubscription=this.selectionChangeSubscription=this.optionMouseEnterSubscription=null,this.destroy$.next(),this.destroy$.complete()}setVisibility(){this.showPanel=!!this.options.length,this.changeDetectorRef.markForCheck()}setActiveItem(o){let s=this.options.get(o);s&&!s.active?(this.activeItem=s,this.activeItemIndex=o,this.clearSelectedOptions(this.activeItem),this.activeItem.setActiveStyles()):(this.activeItem=null,this.activeItemIndex=-1,this.clearSelectedOptions()),this.changeDetectorRef.markForCheck()}setNextItemActive(){let o=this.activeItemIndex+1<=this.options.length-1?this.activeItemIndex+1:0;this.setActiveItem(o)}setPreviousItemActive(){let o=this.activeItemIndex-1<0?this.options.length-1:this.activeItemIndex-1;this.setActiveItem(o)}getOptionIndex(o){return this.options.reduce((s,u,d)=>s===-1?this.compareWith(o,u.nzValue)?d:-1:s,-1)}getOption(o){return this.options.find(s=>this.compareWith(o,s.nzValue))||null}optionsInit(){this.setVisibility(),this.subscribeOptionChanges();let o=this.nzDataSource?this.fromDataSourceOptions.changes:this.fromContentOptions.changes;this.dataSourceChangeSubscription=o.subscribe(s=>{!s.dirty&&this.isOpen&&setTimeout(()=>this.setVisibility()),this.subscribeOptionChanges()})}clearSelectedOptions(o,s=!1){this.options.forEach(u=>{u!==o&&(s&&u.deselect(),u.setInactiveStyles())})}subscribeOptionChanges(){this.selectionChangeSubscription.unsubscribe(),this.selectionChangeSubscription=this.optionSelectionChanges.pipe(Bo(o=>o.isUserInput)).subscribe(o=>{o.source.select(),o.source.setActiveStyles(),this.activeItem=o.source,this.activeItemIndex=this.getOptionIndex(this.activeItem.nzValue),this.clearSelectedOptions(o.source,!0),this.selectionChange.emit(o.source)}),this.optionMouseEnterSubscription.unsubscribe(),this.optionMouseEnterSubscription=this.optionMouseEnter.subscribe(o=>{o.setActiveStyles(),this.activeItem=o,this.activeItemIndex=this.getOptionIndex(this.activeItem.nzValue),this.clearSelectedOptions(o)})}};t.\u0275fac=function(s){return new(s||t)(Q(cn),Q(Ti))},t.\u0275cmp=Ee({type:t,selectors:[["nz-autocomplete"]],contentQueries:function(s,u,d){if(s&1&&Zo(d,Js,5),s&2){let m;Yt(m=Jt())&&(u.fromContentOptions=m)}},viewQuery:function(s,u){if(s&1&&(qn(co,5),qn(x9,5),qn(C9,5),qn(Js,5)),s&2){let d;Yt(d=Jt())&&(u.template=d.first),Yt(d=Jt())&&(u.panel=d.first),Yt(d=Jt())&&(u.content=d.first),Yt(d=Jt())&&(u.fromDataSourceOptions=d)}},inputs:{nzWidth:[2,"nzWidth","nzWidth",Ma],nzOverlayClassName:"nzOverlayClassName",nzOverlayStyle:"nzOverlayStyle",nzDefaultActiveFirstOption:[2,"nzDefaultActiveFirstOption","nzDefaultActiveFirstOption",pt],nzBackfill:[2,"nzBackfill","nzBackfill",pt],compareWith:"compareWith",nzDataSource:"nzDataSource"},outputs:{selectionChange:"selectionChange"},exportAs:["nzAutocomplete"],standalone:!0,features:[kn,bn,Oe],ngContentSelectors:cS,decls:1,vars:0,consts:[["panel",""],["contentTemplate",""],["optionsTemplate",""],[1,"ant-select-dropdown","ant-select-dropdown-placement-bottomLeft",3,"ngClass","ngStyle","nzNoAnimation"],[2,"max-height","256px","overflow-y","auto","overflow-anchor","none"],[2,"display","flex","flex-direction","column"],[4,"ngTemplateOutlet"],[3,"nzValue","nzLabel",4,"ngFor","ngForOf"],[3,"nzValue","nzLabel"]],template:function(s,u){s&1&&(pi(),K(0,T9,9,10,"ng-template"))},dependencies:[Ea,Xc,jo,Tr,Js,qr],encapsulation:2,data:{animation:[G_]},changeDetection:0});let e=t;return e})(),_d=(()=>{let t=class t{};t.\u0275fac=function(s){return new(s||t)},t.\u0275mod=Wn({type:t}),t.\u0275inj=Hn({imports:[hS]});let e=t;return e})();var xd=Nt(yd(),1);var pS=(()=>{let t=class t{};t.\u0275fac=function(s){return new(s||t)},t.\u0275mod=Wn({type:t}),t.\u0275inj=Hn({});let e=t;return e})();var bd=Nt(yd());var Bu=Nt(yd());var dl=(()=>{let t=class t{constructor(){this.markers={},this.selectedFromMarker=null,this.selectedToMarker=null,this.defaultIcon=new Bu.Icon({iconUrl:"https://raw.githubusercontent.com/pointhi/leaflet-color-markers/master/img/marker-icon-green.png",shadowUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/0.7.7/images/marker-shadow.png"}),this.selectedIcon=new Bu.Icon({iconUrl:"https://raw.githubusercontent.com/pointhi/leaflet-color-markers/master/img/marker-icon-red.png",shadowUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/0.7.7/images/marker-shadow.png"})}addMarkerToMap(o,s,u){let d=Bu.default.marker([s.latitude,s.longitude],{icon:this.defaultIcon}).bindPopup(`<b>${s.city}</b><br>ID: ${s.id}`).addTo(o);return d.on("click",()=>u(s,d)),this.markers[s.city]=d,d}toggleMarker(o,s,u,d){let m=this.markers[o.city];m&&(s&&this.isMarkerSelected(o,s)?this.resetMarker("from",d):u&&this.isMarkerSelected(o,u)?this.resetMarker("to",d):this.setMarker(o,m,d))}isMarkerSelected(o,s){return s&&s.lat===o.latitude&&s.lon===o.longitude}selectMarkerByCity(o,s,u){let d=this.markers[o];d&&(s==="from"?(this.selectedFromMarker&&this.selectedFromMarker.setIcon(this.defaultIcon),this.selectedFromMarker=d,u("fromCoords",{lat:d.getLatLng().lat,lon:d.getLatLng().lng})):s==="to"&&(this.selectedToMarker&&this.selectedToMarker.setIcon(this.defaultIcon),this.selectedToMarker=d,u("toCoords",{lat:d.getLatLng().lat,lon:d.getLatLng().lng})),d.setIcon(this.selectedIcon))}setMarker(o,s,u){this.selectedFromMarker?this.selectedToMarker||(this.resetMarker("to",u),u("to",o.city),u("toCoords",{lat:o.latitude,lon:o.longitude}),s.setIcon(this.selectedIcon),this.selectedToMarker=s):(this.resetMarker("from",u),u("from",o.city),u("fromCoords",{lat:o.latitude,lon:o.longitude}),s.setIcon(this.selectedIcon),this.selectedFromMarker=s)}resetMarker(o,s){o==="from"&&this.selectedFromMarker&&(this.selectedFromMarker.setIcon(this.defaultIcon),this.selectedFromMarker=null,s("from",""),s("fromCoords","")),o==="to"&&this.selectedToMarker&&(this.selectedToMarker.setIcon(this.defaultIcon),this.selectedToMarker=null,s("to",""),s("toCoords",""))}};t.\u0275fac=function(s){return new(s||t)},t.\u0275prov=wn({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();var mS=(()=>{let t=class t{haversine(o,s,u,d){let v=this.degreesToRadians(u-o),_=this.degreesToRadians(d-s),z=Math.sin(v/2)**2+Math.cos(this.degreesToRadians(o))*Math.cos(this.degreesToRadians(u))*Math.sin(_/2)**2;return 6371*(2*Math.atan2(Math.sqrt(z),Math.sqrt(1-z)))}degreesToRadians(o){return o*(Math.PI/180)}};t.\u0275fac=function(s){return new(s||t)},t.\u0275prov=wn({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();var is=(()=>{let t=class t{constructor(o,s){this.http=o,this.geoUtils=s,this.apiUrlSearch="/api/search",this.apiUrlStation="/api/station"}searchRoutes(o,s,u,d,m){let v=new __().set("fromLatitude",o).set("fromLongitude",s).set("toLatitude",u).set("toLongitude",d);return m&&(v=v.set("time",m)),this.http.get(this.apiUrlSearch,{params:v}).pipe(Aa(this.handleError))}getStations(){return this.http.get(this.apiUrlStation).pipe(Aa(this.handleError))}findClosestStation(o,s){return this.getStations().pipe(Ta(u=>this.findNearest(o,s,u)),Aa(()=>Zc(null)))}findNearest(o,s,u){let d=null,m=Number.MAX_VALUE;return u.forEach(v=>{let _=this.geoUtils.haversine(o,s,v.latitude,v.longitude);_<m&&(m=_,d=v)}),d}handleError(o){let s="An unknown error occurred!";return o.error instanceof ErrorEvent&&(s=`Client-side error: ${o.error.message}`),o.status&&(s=`Server-side error: ${o.status}`),o.status===400&&o.error&&(s=`Error: ${o.error.message}`),jc(()=>new Error(s))}addStation(o){return this.http.post(this.apiUrlStation,o)}deleteStation(o){return this.http.delete(`${this.apiUrlStation}/${o}`)}};t.\u0275fac=function(s){return new(s||t)(oi(Pr),oi(mS))},t.\u0275prov=wn({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();var O9=["map"],fl=(()=>{let t=class t{constructor(o,s){this.markerService=o,this.searchService=s,this.markerClicked=new Bn,this.mapTitleLayer="https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",this.mapAttribution='&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',this.stations=[],this.markers=[]}ngAfterViewInit(){this.initMap(),this.loadStations()}ngOnDestroy(){this.map&&this.map.remove()}initMap(){let o=this.mapElement.nativeElement;o&&!this.map&&(this.map=bd.default.map(o).setView([51.505,-.09],4),bd.default.tileLayer(this.mapTitleLayer,{attribution:this.mapAttribution}).addTo(this.map))}addMarkersToMap(){this.map.eachLayer(o=>{o instanceof bd.default.Marker&&this.map.removeLayer(o)}),this.stations.forEach(o=>{this.markerService.addMarkerToMap(this.map,o,this.handleMarkerClick.bind(this))})}loadStations(){this.searchService.getStations().subscribe(o=>{this.stations=o,this.addMarkersToMap()})}handleMarkerClick(o){this.markerClicked.emit(o)}};t.\u0275fac=function(s){return new(s||t)(Q(dl),Q(is))},t.\u0275cmp=Ee({type:t,selectors:[["app-map"]],viewQuery:function(s,u){if(s&1&&qn(O9,5),s&2){let d;Yt(d=Jt())&&(u.mapElement=d.first)}},outputs:{markerClicked:"markerClicked"},standalone:!0,features:[Oe],decls:2,vars:0,consts:[["map",""],[2,"height","400px","width","100%","min-width","320px"]],template:function(s,u){s&1&&se(0,"div",1,0)},styles:["[_nghost-%COMP%]{display:flex;flex-basis:100%}"]});let e=t;return e})();var M9=e=>({$implicit:e});function D9(e,t){if(e&1&&se(0,"span",4),e&2){let i=q(3);B("nzType",i.icon)}}function L9(e,t){if(e&1&&(st(0),U(1),at()),e&2){let i=t.$implicit,o=q(4);S(),We(" ",i(o.nzPercent)," ")}}function N9(e,t){if(e&1&&K(0,L9,2,1,"ng-container",5),e&2){let i=q(3);B("nzStringTemplateOutlet",i.formatter)("nzStringTemplateOutletContext",p_(2,M9,i.nzPercent))}}function R9(e,t){if(e&1&&(E(0,"span",3),K(1,D9,1,1,"span",4)(2,N9,1,4,"ng-container"),I()),e&2){let i=q(2);S(),pe((i.status==="exception"||i.status==="success")&&!i.nzFormat?1:2)}}function B9(e,t){if(e&1&&K(0,R9,3,1,"span",3),e&2){let i=q();pe(i.nzShowInfo?0:-1)}}function k9(e,t){if(e&1&&se(0,"div",7),e&2){let i=t.$implicit;B("ngStyle",i)}}function q9(e,t){}function $9(e,t){if(e&1&&(E(0,"div",6),ln(1,k9,1,1,"div",7,Si),K(3,q9,0,0,"ng-template",8),I()),e&2){let i=q(2),o=He(1);S(),un(i.steps),S(2),B("ngTemplateOutlet",o)}}function Z9(e,t){if(e&1&&se(0,"div",13),e&2){let i=q(3);Jn("width",i.nzSuccessPercent,"%")("border-radius",i.nzStrokeLinecap==="round"?"100px":"0")("height",i.strokeWidth,"px")}}function j9(e,t){}function U9(e,t){if(e&1&&(E(0,"div",9)(1,"div",10),se(2,"div",11),K(3,Z9,1,6,"div",12),I()(),K(4,j9,0,0,"ng-template",8)),e&2){let i=q(2),o=He(1);S(2),Jn("width",i.nzPercent,"%")("border-radius",i.nzStrokeLinecap==="round"?"100px":"0")("background",i.isGradient?null:i.nzStrokeColor)("background-image",i.isGradient?i.lineGradient:null)("height",i.strokeWidth,"px"),S(),pe(i.nzSuccessPercent||i.nzSuccessPercent===0?3:-1),S(),B("ngTemplateOutlet",o)}}function H9(e,t){if(e&1&&(E(0,"div"),K(1,$9,4,1,"div",6)(2,U9,5,12),I()),e&2){let i=q();S(),pe(i.isSteps?1:2)}}function W9(e,t){if(e&1&&(Ms(),se(0,"stop")),e&2){let i=t.$implicit;Qi("offset",i.offset)("stop-color",i.color)}}function V9(e,t){if(e&1&&(Ms(),E(0,"defs")(1,"linearGradient",17),ln(2,W9,1,2,":svg:stop",null,Si),I()()),e&2){let i=q(2);S(),B("id","gradient-"+i.gradientId),S(),un(i.circleGradient)}}function G9(e,t){if(e&1&&(Ms(),se(0,"path",16)),e&2){let i=t.$implicit,o=q(2);B("ngStyle",i.strokePathStyle),Qi("d",o.pathString)("stroke-linecap",o.nzStrokeLinecap)("stroke",i.stroke)("stroke-width",o.nzPercent?o.strokeWidth:0)}}function K9(e,t){}function Y9(e,t){if(e&1&&(E(0,"div",10),Ms(),E(1,"svg",14),K(2,V9,4,1,":svg:defs"),se(3,"path",15),ln(4,G9,1,5,":svg:path",16,Si),I(),K(6,K9,0,0,"ng-template",8),I()),e&2){let i=q(),o=He(1);Jn("width",i.nzWidth,"px")("height",i.nzWidth,"px")("font-size",i.nzWidth*.15+6,"px"),Bt("ant-progress-circle-gradient",i.isGradient),S(2),pe(i.isGradient?2:-1),S(),B("ngStyle",i.trailPathStyle),Qi("stroke-width",i.strokeWidth)("d",i.pathString),S(),un(i.progressCirclePath),S(2),B("ngTemplateOutlet",o)}}function J9(e){return+e.replace("%","")}var _S=e=>{let t=[];return Object.keys(e).forEach(i=>{let o=e[i],s=J9(i);isNaN(s)||t.push({key:s,value:o})}),t=t.sort((i,o)=>i.key-o.key),t},Q9=e=>_S(e).map(({key:t,value:i})=>({offset:`${t}%`,color:i})),X9=e=>{let u=e,{from:t="#1890ff",to:i="#1890ff",direction:o="to right"}=u,s=$c(u,["from","to","direction"]);if(Object.keys(s).length!==0){let d=_S(s).map(({key:m,value:v})=>`${v} ${m}%`).join(", ");return`linear-gradient(${o}, ${d})`}return`linear-gradient(${o}, ${t}, ${i})`},eZ=0,gS="progress",tZ=new Map([["success","check"],["exception","close"]]),nZ=new Map([["normal","#108ee9"],["exception","#ff5500"],["success","#87d068"]]),iZ=e=>`${e}%`,Xm=(()=>{let t=class t{get formatter(){return this.nzFormat||iZ}get status(){return this.nzStatus||this.inferredStatus}get strokeWidth(){return this.nzStrokeWidth||(this.nzType==="line"&&this.nzSize!=="small"?8:6)}get isCircleStyle(){return this.nzType==="circle"||this.nzType==="dashboard"}constructor(o,s,u){this.cdr=o,this.nzConfigService=s,this.directionality=u,this._nzModuleName=gS,this.nzShowInfo=!0,this.nzWidth=132,this.nzStrokeColor=void 0,this.nzSize="default",this.nzPercent=0,this.nzType="line",this.nzGapPosition="top",this.nzStrokeLinecap="round",this.nzSteps=0,this.steps=[],this.lineGradient=null,this.isGradient=!1,this.isSteps=!1,this.gradientId=eZ++,this.progressCirclePath=[],this.trailPathStyle=null,this.dir="ltr",this.cachedStatus="normal",this.inferredStatus="normal",this.destroy$=new Rn}ngOnChanges(o){let{nzSteps:s,nzGapPosition:u,nzStrokeLinecap:d,nzStrokeColor:m,nzGapDegree:v,nzType:_,nzStatus:z,nzPercent:F,nzSuccessPercent:N,nzStrokeWidth:H}=o;z&&(this.cachedStatus=this.nzStatus||this.cachedStatus),(F||N)&&(parseInt(this.nzPercent.toString(),10)>=100?(tp(this.nzSuccessPercent)&&this.nzSuccessPercent>=100||this.nzSuccessPercent===void 0)&&(this.inferredStatus="success"):this.inferredStatus=this.cachedStatus),(z||F||N||m)&&this.updateIcon(),m&&this.setStrokeColor(),(u||d||v||_||F||m||m)&&this.getCirclePaths(),(F||s||H)&&(this.isSteps=this.nzSteps>0,this.isSteps&&this.getSteps())}ngOnInit(){this.nzConfigService.getConfigChangeEventForComponent(gS).pipe(wt(this.destroy$)).subscribe(()=>{this.updateIcon(),this.setStrokeColor(),this.getCirclePaths()}),this.directionality.change?.pipe(wt(this.destroy$)).subscribe(o=>{this.dir=o,this.cdr.detectChanges()}),this.dir=this.directionality.value}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}updateIcon(){let o=tZ.get(this.status);this.icon=o?o+(this.isCircleStyle?"-o":"-circle-fill"):""}getSteps(){let o=Math.floor(this.nzSteps*(this.nzPercent/100)),s=this.nzSize==="small"?2:14,u=[];for(let d=0;d<this.nzSteps;d++){let m;d<=o-1&&(m=this.nzStrokeColor);let v={backgroundColor:`${m}`,width:`${s}px`,height:`${this.strokeWidth}px`};u.push(v)}this.steps=u}getCirclePaths(){if(!this.isCircleStyle)return;let o=tp(this.nzSuccessPercent)?[this.nzSuccessPercent,this.nzPercent]:[this.nzPercent],s=50-this.strokeWidth/2,u=this.nzGapPosition||(this.nzType==="circle"?"top":"bottom"),d=Math.PI*2*s,m=this.nzGapDegree||(this.nzType==="circle"?0:75),v=0,_=-s,z=0,F=s*-2;switch(u){case"left":v=-s,_=0,z=s*2,F=0;break;case"right":v=s,_=0,z=s*-2,F=0;break;case"bottom":_=s,F=s*2;break;default:}this.pathString=`M 50,50 m ${v},${_}
       a ${s},${s} 0 1 1 ${z},${-F}
       a ${s},${s} 0 1 1 ${-z},${F}`,this.trailPathStyle={strokeDasharray:`${d-m}px ${d}px`,strokeDashoffset:`-${m/2}px`,transition:"stroke-dashoffset .3s ease 0s, stroke-dasharray .3s ease 0s, stroke .3s"},this.progressCirclePath=o.map((N,H)=>{let k=o.length===2&&H===0;return{stroke:this.isGradient&&!k?`url(#gradient-${this.gradientId})`:null,strokePathStyle:{stroke:this.isGradient?null:k?nZ.get("success"):this.nzStrokeColor,transition:"stroke-dashoffset .3s ease 0s, stroke-dasharray .3s ease 0s, stroke .3s, stroke-width .06s ease .3s",strokeDasharray:`${(N||0)/100*(d-m)}px ${d}px`,strokeDashoffset:`-${m/2}px`}}}).reverse()}setStrokeColor(){let o=this.nzStrokeColor,s=this.isGradient=!!o&&typeof o!="string";s&&!this.isCircleStyle?this.lineGradient=X9(o):s&&this.isCircleStyle?this.circleGradient=Q9(this.nzStrokeColor):(this.lineGradient=null,this.circleGradient=[])}};t.\u0275fac=function(s){return new(s||t)(Q(cn),Q(dr),Q(Ti))},t.\u0275cmp=Ee({type:t,selectors:[["nz-progress"]],inputs:{nzShowInfo:"nzShowInfo",nzWidth:"nzWidth",nzStrokeColor:"nzStrokeColor",nzSize:"nzSize",nzFormat:"nzFormat",nzSuccessPercent:[2,"nzSuccessPercent","nzSuccessPercent",Ma],nzPercent:[2,"nzPercent","nzPercent",au],nzStrokeWidth:[2,"nzStrokeWidth","nzStrokeWidth",Ma],nzGapDegree:[2,"nzGapDegree","nzGapDegree",Ma],nzStatus:"nzStatus",nzType:"nzType",nzGapPosition:"nzGapPosition",nzStrokeLinecap:"nzStrokeLinecap",nzSteps:[2,"nzSteps","nzSteps",au]},exportAs:["nzProgress"],standalone:!0,features:[kn,bn,Oe],decls:5,vars:17,consts:[["progressInfoTemplate",""],[3,"ngClass"],[1,"ant-progress-inner",3,"width","height","fontSize","ant-progress-circle-gradient"],[1,"ant-progress-text"],["nz-icon","",3,"nzType"],[4,"nzStringTemplateOutlet","nzStringTemplateOutletContext"],[1,"ant-progress-steps-outer"],[1,"ant-progress-steps-item",3,"ngStyle"],[3,"ngTemplateOutlet"],[1,"ant-progress-outer"],[1,"ant-progress-inner"],[1,"ant-progress-bg"],[1,"ant-progress-success-bg",3,"width","border-radius","height"],[1,"ant-progress-success-bg"],["viewBox","0 0 100 100",1,"ant-progress-circle"],["stroke","#f3f3f3","fill-opacity","0",1,"ant-progress-circle-trail",3,"ngStyle"],["fill-opacity","0",1,"ant-progress-circle-path",3,"ngStyle"],["x1","100%","y1","0%","x2","0%","y2","0%",3,"id"]],template:function(s,u){s&1&&(K(0,B9,1,1,"ng-template",null,0,tt),E(2,"div",1),K(3,H9,3,1,"div")(4,Y9,7,13,"div",2),I()),s&2&&(S(2),Bt("ant-progress-line",u.nzType==="line")("ant-progress-small",u.nzSize==="small")("ant-progress-default",u.nzSize==="default")("ant-progress-show-info",u.nzShowInfo)("ant-progress-circle",u.isCircleStyle)("ant-progress-steps",u.isSteps)("ant-progress-rtl",u.dir==="rtl"),B("ngClass","ant-progress ant-progress-status-"+u.status),S(),pe(u.nzType==="line"?3:-1),S(),pe(u.isCircleStyle?4:-1))},dependencies:[Sn,Fn,_i,gi,Ea,Tr,jo],encapsulation:2,changeDetection:0});let e=t;return Kt([Qt()],e.prototype,"nzShowInfo",void 0),Kt([Qt()],e.prototype,"nzStrokeColor",void 0),Kt([Qt()],e.prototype,"nzSize",void 0),Kt([Qt()],e.prototype,"nzStrokeWidth",void 0),Kt([Qt()],e.prototype,"nzGapDegree",void 0),Kt([Qt()],e.prototype,"nzGapPosition",void 0),Kt([Qt()],e.prototype,"nzStrokeLinecap",void 0),e})(),vS=(()=>{let t=class t{};t.\u0275fac=function(s){return new(s||t)},t.\u0275mod=Wn({type:t}),t.\u0275inj=Hn({imports:[Xm]});let e=t;return e})();var oZ=["processDotTemplate"],sZ=["itemContainer"],aZ=(e,t,i)=>({$implicit:e,status:t,index:i});function lZ(e,t){e&1&&se(0,"div",11)}function uZ(e,t){if(e&1&&(E(0,"div",14),se(1,"nz-progress",15),I()),e&2){let i=q(2);S(),B("nzPercent",i.nzPercentage)("nzWidth",i.nzSize==="small"?32:40)("nzFormat",i.nullProcessFormat)("nzStrokeWidth",4)}}function cZ(e,t){e&1&&(E(0,"span",16),se(1,"span",17),I())}function hZ(e,t){e&1&&(E(0,"span",16),se(1,"span",18),I())}function dZ(e,t){if(e&1&&(E(0,"span",16),U(1),I()),e&2){let i=q(2);S(),We(" ",i.index+1," ")}}function fZ(e,t){if(e&1&&(st(0),se(1,"span",19),at()),e&2){let i=t.$implicit,o=q(3);S(),B("nzType",!o.oldAPIIcon&&i)("ngClass",o.oldAPIIcon&&i)}}function pZ(e,t){if(e&1&&(E(0,"span",16),K(1,fZ,2,2,"ng-container",8),I()),e&2){let i=q(2);S(),B("nzStringTemplateOutlet",i.nzIcon)}}function mZ(e,t){if(e&1&&K(0,uZ,2,4,"div",12)(1,cZ,2,0,"span",13)(2,hZ,2,0,"span",13)(3,dZ,2,1,"span",13)(4,pZ,2,1,"span",13),e&2){let i=q();B("ngIf",i.showProgress),S(),B("ngIf",i.nzStatus==="finish"&&!i.nzIcon),S(),B("ngIf",i.nzStatus==="error"),S(),B("ngIf",(i.nzStatus==="process"||i.nzStatus==="wait")&&!i.nzIcon),S(),B("ngIf",i.nzIcon)}}function gZ(e,t){e&1&&se(0,"span",21)}function _Z(e,t){}function vZ(e,t){if(e&1&&(E(0,"span",16),K(1,gZ,1,0,"ng-template",null,1,tt)(3,_Z,0,0,"ng-template",20),I()),e&2){let i=He(2),o=q();S(3),B("ngTemplateOutlet",o.customProcessTemplate||i)("ngTemplateOutletContext",m_(2,aZ,i,o.nzStatus,o.index))}}function yZ(e,t){if(e&1&&(st(0),U(1),at()),e&2){let i=q();S(),yt(i.nzTitle)}}function xZ(e,t){if(e&1&&(st(0),U(1),at()),e&2){let i=q(2);S(),yt(i.nzSubtitle)}}function CZ(e,t){if(e&1&&(E(0,"div",22),K(1,xZ,2,1,"ng-container",8),I()),e&2){let i=q();S(),B("nzStringTemplateOutlet",i.nzSubtitle)}}function wZ(e,t){if(e&1&&(st(0),U(1),at()),e&2){let i=q();S(),yt(i.nzDescription)}}var bZ=["*"],pl=(()=>{let t=class t{get nzStatus(){return this._status}set nzStatus(o){this._status=o,this.isCustomStatus=!0}get nzIcon(){return this._icon}set nzIcon(o){o instanceof co||(this.oldAPIIcon=typeof o=="string"&&o.indexOf("anticon")>-1),this._icon=o}get showProgress(){return this.nzPercentage!==null&&!this.nzIcon&&this.nzStatus==="process"&&this.nzPercentage>=0&&this.nzPercentage<=100}get currentIndex(){return this._currentIndex}set currentIndex(o){this._currentIndex=o,this.isCustomStatus||(this._status=o>this.index?"finish":o===this.index?this.outStatus||"":"wait")}constructor(o,s,u){this.cdr=o,this.ngZone=s,this.destroy$=u,this.nzDisabled=!1,this.nzPercentage=null,this.nzSize="default",this.isCustomStatus=!1,this._status="wait",this.oldAPIIcon=!0,this.direction="horizontal",this.index=0,this.last=!1,this.outStatus="process",this.showProcessDot=!1,this.clickable=!1,this.clickOutsideAngular$=new Rn,this.nullProcessFormat=()=>null,this._currentIndex=0}ngOnInit(){this.ngZone.runOutsideAngular(()=>Es(this.itemContainer.nativeElement,"click").pipe(Bo(()=>this.clickable&&this.currentIndex!==this.index&&!this.nzDisabled),wt(this.destroy$)).subscribe(()=>{this.clickOutsideAngular$.next(this.index)}))}enable(){this.nzDisabled=!1,this.cdr.markForCheck()}disable(){this.nzDisabled=!0,this.cdr.markForCheck()}markForCheck(){this.cdr.markForCheck()}};t.\u0275fac=function(s){return new(s||t)(Q(cn),Q(hr),Q(Xi))},t.\u0275cmp=Ee({type:t,selectors:[["nz-step"]],viewQuery:function(s,u){if(s&1&&(qn(oZ,5),qn(sZ,7)),s&2){let d;Yt(d=Jt())&&(u.processDotTemplate=d.first),Yt(d=Jt())&&(u.itemContainer=d.first)}},hostAttrs:[1,"ant-steps-item"],hostVars:16,hostBindings:function(s,u){s&2&&Bt("ant-steps-item-wait",u.nzStatus==="wait")("ant-steps-item-process",u.nzStatus==="process")("ant-steps-item-finish",u.nzStatus==="finish")("ant-steps-item-error",u.nzStatus==="error")("ant-steps-item-active",u.currentIndex===u.index)("ant-steps-item-disabled",u.nzDisabled)("ant-steps-item-custom",!!u.nzIcon)("ant-steps-next-error",u.outStatus==="error"&&u.currentIndex===u.index+1)},inputs:{nzTitle:"nzTitle",nzSubtitle:"nzSubtitle",nzDescription:"nzDescription",nzDisabled:[2,"nzDisabled","nzDisabled",pt],nzPercentage:"nzPercentage",nzSize:"nzSize",nzStatus:"nzStatus",nzIcon:"nzIcon"},exportAs:["nzStep"],standalone:!0,features:[Fr([Xi]),kn,Oe],decls:12,vars:8,consts:[["itemContainer",""],["processDotTemplate",""],[1,"ant-steps-item-container",3,"tabindex"],["class","ant-steps-item-tail",4,"ngIf"],[1,"ant-steps-item-icon"],[3,"ngIf"],[1,"ant-steps-item-content"],[1,"ant-steps-item-title"],[4,"nzStringTemplateOutlet"],["class","ant-steps-item-subtitle",4,"ngIf"],[1,"ant-steps-item-description"],[1,"ant-steps-item-tail"],["class","ant-steps-progress-icon",4,"ngIf"],["class","ant-steps-icon",4,"ngIf"],[1,"ant-steps-progress-icon"],["nzType","circle",3,"nzPercent","nzWidth","nzFormat","nzStrokeWidth"],[1,"ant-steps-icon"],["nz-icon","","nzType","check"],["nz-icon","","nzType","close"],["nz-icon","",3,"nzType","ngClass"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"ant-steps-icon-dot"],[1,"ant-steps-item-subtitle"]],template:function(s,u){s&1&&(E(0,"div",2,0),K(2,lZ,1,0,"div",3),E(3,"div",4),K(4,mZ,5,5,"ng-template",5)(5,vZ,4,6,"ng-template",5),I(),E(6,"div",6)(7,"div",7),K(8,yZ,2,1,"ng-container",8)(9,CZ,2,1,"div",9),I(),E(10,"div",10),K(11,wZ,2,1,"ng-container",8),I()()()),s&2&&(B("tabindex",u.clickable&&!u.nzDisabled?0:null),Qi("role",u.clickable&&!u.nzDisabled?"button":null),S(2),B("ngIf",u.last!==!0),S(2),B("ngIf",!u.showProcessDot),S(),B("ngIf",u.showProcessDot),S(3),B("nzStringTemplateOutlet",u.nzTitle),S(),B("ngIf",u.nzSubtitle),S(2),B("nzStringTemplateOutlet",u.nzDescription))},dependencies:[eh,vS,Xm,Sn,Fn,_i,gi,Ea,Tr],encapsulation:2,changeDetection:0});let e=t;return e})(),Fd=(()=>{let t=class t{set nzProgressDot(o){o instanceof co?(this.showProcessDot=!0,this.customProcessDotTemplate=o):this.showProcessDot=F_(o),this.updateChildrenSteps()}constructor(o,s,u,d){this.ngZone=o,this.cdr=s,this.directionality=u,this.destroy$=d,this.nzCurrent=0,this.nzDirection="horizontal",this.nzLabelPlacement="horizontal",this.nzType="default",this.nzSize="default",this.nzStartIndex=0,this.nzStatus="process",this.nzIndexChange=new Bn,this.indexChangeSubscription=Sa.EMPTY,this.showProcessDot=!1,this.showProgress=!1,this.dir="ltr"}ngOnChanges(o){(o.nzStartIndex||o.nzDirection||o.nzStatus||o.nzCurrent||o.nzSize)&&this.updateChildrenSteps()}ngOnInit(){this.directionality.change?.pipe(wt(this.destroy$)).subscribe(o=>{this.dir=o,this.cdr.detectChanges()}),this.dir=this.directionality.value,this.updateChildrenSteps()}ngAfterContentInit(){this.steps&&this.steps.changes.pipe(Yg(null),wt(this.destroy$)).subscribe(()=>{this.updateHostProgressClass(),this.updateChildrenSteps()})}updateHostProgressClass(){this.steps&&!this.showProcessDot&&(this.showProgress=!!this.steps.toArray().find(o=>o.nzPercentage!==null))}updateChildrenSteps(){if(this.steps){let o=this.steps.length;this.steps.toArray().forEach((s,u)=>{Promise.resolve().then(()=>{s.nzSize=this.nzSize,s.outStatus=this.nzStatus,s.showProcessDot=this.showProcessDot,this.customProcessDotTemplate&&(s.customProcessTemplate=this.customProcessDotTemplate),s.clickable=this.nzIndexChange.observers.length>0,s.direction=this.nzDirection,s.index=u+this.nzStartIndex,s.currentIndex=this.nzCurrent,s.last=o===u+1,s.markForCheck()})}),this.indexChangeSubscription.unsubscribe(),this.indexChangeSubscription=tu(...this.steps.map(s=>s.clickOutsideAngular$)).pipe(wt(this.destroy$)).subscribe(s=>{this.nzIndexChange.observers.length&&this.ngZone.run(()=>this.nzIndexChange.emit(s))})}}};t.\u0275fac=function(s){return new(s||t)(Q(hr),Q(cn),Q(Ti),Q(Xi))},t.\u0275cmp=Ee({type:t,selectors:[["nz-steps"]],contentQueries:function(s,u,d){if(s&1&&Zo(d,pl,4),s&2){let m;Yt(m=Jt())&&(u.steps=m)}},hostAttrs:[1,"ant-steps"],hostVars:18,hostBindings:function(s,u){s&2&&Bt("ant-steps-horizontal",u.nzDirection==="horizontal")("ant-steps-vertical",u.nzDirection==="vertical")("ant-steps-label-horizontal",u.nzDirection==="horizontal")("ant-steps-label-vertical",(u.showProcessDot||u.nzLabelPlacement==="vertical")&&u.nzDirection==="horizontal")("ant-steps-dot",u.showProcessDot)("ant-steps-small",u.nzSize==="small")("ant-steps-navigation",u.nzType==="navigation")("ant-steps-rtl",u.dir==="rtl")("ant-steps-with-progress",u.showProgress)},inputs:{nzCurrent:"nzCurrent",nzDirection:"nzDirection",nzLabelPlacement:"nzLabelPlacement",nzType:"nzType",nzSize:"nzSize",nzStartIndex:"nzStartIndex",nzStatus:"nzStatus",nzProgressDot:"nzProgressDot"},outputs:{nzIndexChange:"nzIndexChange"},exportAs:["nzSteps"],standalone:!0,features:[Fr([Xi]),bn,Oe],ngContentSelectors:bZ,decls:1,vars:0,template:function(s,u){s&1&&(pi(),mi(0))},encapsulation:2,changeDetection:0});let e=t;return e})(),Sd=(()=>{let t=class t{};t.\u0275fac=function(s){return new(s||t)},t.\u0275mod=Wn({type:t}),t.\u0275inj=Hn({imports:[pl]});let e=t;return e})();var zZ=()=>({padding:"0px"});function FZ(e,t){if(e&1&&(E(0,"div",24)(1,"p"),U(2),Qn(3,"date"),I(),se(4,"span",25),I(),E(5,"div",26),U(6),Qn(7,"date"),I(),E(8,"div",27),U(9),I()),e&2){let i=q().$implicit;S(2),yt(Sr(3,3,i.timeStarted,"HH:mm")),S(4),yt(Sr(7,6,i.timeStarted,"MMMM dd")),S(3),yt(i.cityFrom)}}function SZ(e,t){if(e&1&&(E(0,"div",28),U(1),I()),e&2){let i=q().$implicit;S(),yt(i.duration)}}function TZ(e,t){if(e&1&&(E(0,"div",24),se(1,"span",29),U(2),Qn(3,"date"),I(),E(4,"div",26),U(5),Qn(6,"date"),I(),E(7,"div",30),U(8),I()),e&2){let i=q().$implicit;S(2),We(" ",Sr(3,3,i.timeArrived,"HH:mm")," "),S(3),yt(Sr(6,6,i.timeArrived,"MMMM dd")),S(3),yt(i.cityTo)}}function AZ(e,t){}function PZ(e,t){if(e&1&&(E(0,"div",23)(1,"p"),U(2),I(),E(3,"p"),U(4),Qn(5,"currency"),I()()),e&2){let i=t.$implicit,o=q().$implicit;S(2),We(" ",i,": "),S(2),We(" ",ho(5,2,o.carriages[i])," ")}}function IZ(e,t){if(e&1&&(E(0,"nz-card",6)(1,"div",7)(2,"div",8)(3,"nz-steps",9),se(4,"nz-step",10)(5,"nz-step",10)(6,"nz-step",10),K(7,FZ,10,9,"ng-template",null,0,tt)(9,SZ,2,1,"ng-template",null,1,tt)(11,TZ,9,9,"ng-template",null,2,tt)(13,AZ,0,0,"ng-template",11,3,tt),I(),E(15,"div",12)(16,"div",13)(17,"span",14),Ms(),E(18,"svg",15),se(19,"g",16)(20,"g",17),E(21,"g",18),se(22,"path",19),I()()(),U(23),I(),n_(),E(24,"div",20)(25,"a",21),U(26,"Route"),I()()()(),E(27,"div",22),ln(28,PZ,6,4,"div",23,Si),I()()()),e&2){let i=t.$implicit,o=He(8),s=He(10),u=He(12),d=He(14),m=q(3);B("nzBodyStyle",Jc(10,zZ)),S(3),B("nzCurrent",3),S(),B("nzTitle",o)("nzIcon",d),S(),B("nzTitle",s)("nzIcon",d),S(),B("nzTitle",u)("nzIcon",d),S(17),f_(" ",i.startStationId," -> ",i.endStationId," "),S(5),un(m.getCarriageKeys(i.carriages))}}function EZ(e,t){if(e&1&&(E(0,"nz-tab",4)(1,"div",5),ln(2,IZ,30,11,"nz-card",6,Si),I()()),e&2){let i=t.$implicit;B("nzTitle",i.date),S(2),un(i.routes)}}function OZ(e,t){if(e&1&&(E(0,"nz-tabset"),ln(1,EZ,4,1,"nz-tab",4,Si),I()),e&2){let i=q();S(),un(i.groupTabs)}}var wS=(()=>{let t=class t{constructor(o){this.datePipe=o,this.groupTabs=[]}ngOnChanges(){this.response&&this.getRoute(this.response)}calculateDuration(o,s){let u=s.getTime()-o.getTime(),d=Math.floor(u/(1e3*60*60*24)),m=Math.floor(u%(1e3*60*60*24)/(1e3*60*60)),v=Math.floor(u%(1e3*60*60)/(1e3*60));return`${d}d ${m}h ${v}m`}getCarriageKeys(o){return Object.keys(o)}getRoute(o){let{stationId:s,city:u}=o.from,{stationId:d,city:m}=o.to,v=[];return o.routes.forEach((_,z)=>{let{path:F,id:N,schedule:H}=_,[k,ae]=[F[0],F[F.length-1]],te=F.indexOf(s),de=F.indexOf(d);H&&H.length>0&&H.forEach(ht=>{let{segments:Ve,rideId:Ct}=ht,ke=Ve[te],ge=Ve[de];if(ke&&ge){let[rt]=ke.time,[At]=ge.time,R=this.datePipe.transform(new Date(rt),"EEE, MMMM dd"),X=this.datePipe.transform(new Date(At),"EEE, MMMM dd"),fe=new Date(rt),re=new Date(At),Le=this.calculateDuration(fe,re);if(R&&X){let ee=v.find(j=>j.date===R);ee||(ee={date:R,routes:[]},v.push(ee));let Te=ke.price;ee.routes.push({rideId:Ct,routeIndex:z,id:N,indexFrom:te,route:_,carriages:Te,timeStarted:rt,timeArrived:At,departureTime:R,arrivedTime:X,stationIdFrom:s,cityFrom:u,cityTo:m,startStationId:k,endStationId:ae,duration:Le})}}})}),this.groupTabs=v,v}};t.\u0275fac=function(s){return new(s||t)(Q(Ns))},t.\u0275cmp=Ee({type:t,selectors:[["app-route-tabs"]],inputs:{response:"response"},standalone:!0,features:[bn,Oe],decls:1,vars:1,consts:[["nzFrom",""],["nzDur",""],["nzTo",""],["custom1",""],[1,"tab",3,"nzTitle"],[1,"tab-holder"],["nzHoverable","",1,"card-holder",3,"nzBodyStyle"],[1,"card"],[1,"left-container"],["nzSize","small",3,"nzCurrent"],[3,"nzTitle","nzIcon"],[2,"display","none"],[1,"route"],[1,"route__city"],[1,"choo-choo-mf"],["fill","#000000","height","30px","width","30px","version","1.1","id","Capa_1","xmlns","http://www.w3.org/2000/svg",0,"xmlns","xlink","http://www.w3.org/1999/xlink","viewBox","0 0 480 480",0,"xml","space","preserve"],["id","SVGRepo_bgCarrier","stroke-width","0"],["id","SVGRepo_tracerCarrier","stroke-linecap","round","stroke-linejoin","round"],["id","SVGRepo_iconCarrier"],["id","XMLID_1707_","d","M10,210.001c-5.523,0-10-4.477-10-10s4.477-10,10-10h2c5.523,0,10,4.477,10,10s-4.477,10-10,10H10z M0,287.647V260c0-16.542,13.458-30,30-30h109.836l-18.182-99.999H30c-5.514,0-10,5.541-10,12.353v17.647c0,5.523-4.477,10-10,10 s-10-4.477-10-10v-20c0-0.926,0.126-1.823,0.362-2.675C2.608,121.866,15.043,110.001,30,110.001h99.828 c0.122-0.002,0.245-0.002,0.368,0h89.632c0.122-0.002,0.245-0.002,0.368,0h89.631c0.123-0.002,0.247-0.002,0.368,0h11.898 c47.757,0,91.209,29.101,113.399,75.946l41.192,86.961c5.003,10.562,4.256,23.214-1.949,33.021 C469.16,314.74,459.902,320,449.973,320H30C13.458,320,0,305.487,0,287.647z M231.982,130.001l17.857,98.21 c0.109,0.601,0.162,1.199,0.163,1.789h69.834l-18.182-99.999H231.982z M141.982,130.001l17.857,98.21 c0.109,0.601,0.162,1.199,0.163,1.789h69.834l-18.182-99.999H141.982z M20,287.647C20,294.459,24.486,300,30,300h419.973 c4.217,0,6.736-2.987,7.863-4.767c2.017-3.187,3.279-8.477,0.775-13.764l-41.192-86.961c-18.849-39.79-55.375-64.507-95.325-64.507 h-0.111l17.856,98.21c0.109,0.601,0.162,1.199,0.163,1.789H390c5.522,0,10,4.477,10,10s-4.478,10-10,10H30c-5.514,0-10,4.486-10,10 V287.647z M470,350H10c-5.523,0-10,4.477-10,10s4.477,10,10,10h460c5.522,0,10-4.477,10-10S475.522,350,470,350z M100,210.001 c5.523,0,10-4.477,10-10s-4.477-10-10-10H40c-5.523,0-10,4.477-10,10s4.477,10,10,10H100z"],[1,"route__link"],["href",""],[1,"carriage"],[1,"carriage__content"],[1,"card__time"],["nz-icon","","nzType","environment","nzTheme","outline"],[1,"card__time__date"],[1,"card__time__city"],[1,"card__duration"],["nz-icon","","nzType","environment","nzTheme","fill"],[1,"card__city"]],template:function(s,u){s&1&&K(0,OZ,3,0,"nz-tabset"),s&2&&pe(u.groupTabs.length>0?0:-1)},dependencies:[Ar,nh,Ns,ka,ev,X_,$a,qa,Sd,Fd,pl,Sn,Fn],styles:[".tab[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:10px}.tab-holder[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:20px;margin-bottom:20px}.card[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.card-holder[_ngcontent-%COMP%]{border-radius:8px}.left-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;padding:24px;min-width:460px;max-width:40%}.route[_ngcontent-%COMP%]{display:flex;gap:1rem}.route__city[_ngcontent-%COMP%]{display:flex;border:solid 1px;border-radius:9px;gap:4px;padding:0 5px;align-items:center}.choo-choo-mf[_ngcontent-%COMP%]{height:20px;display:flex}.carriage[_ngcontent-%COMP%]{display:flex;gap:1rem}.carriage__content[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;border-left:1px solid #f0f0f0;padding:24px;align-items:center}.card__time[_ngcontent-%COMP%]{font-size:1.5em;font-weight:600;display:flex;justify-content:space-between}@media screen and (max-width: 1024px){.card[_ngcontent-%COMP%]{flex-direction:column}.left-container[_ngcontent-%COMP%]{max-width:100%}.carriage[_ngcontent-%COMP%]{width:100%;justify-content:space-between;border-top:1px solid #f0f0f0}.carriage__content[_ngcontent-%COMP%]{flex-grow:1}.carriage__content[_ngcontent-%COMP%]:first-child{border:0}}@media screen and (max-width: 720px){.left-container[_ngcontent-%COMP%]{min-width:100%;padding:8px}.carriage__content[_ngcontent-%COMP%]{padding:8px}}"]});let e=t;return e})();var ml=(()=>{let t=class t{constructor(o,s){this.http=o,this.searchService=s,this.apiUrl="https://nominatim.openstreetmap.org/search"}searchCity(o){let s={q:o,format:"json",limit:"5"};return this.http.get(this.apiUrl,{params:s}).pipe(Ta(u=>u.map(d=>({name:d.name,lat:d.lat,lon:d.lon}))))}findClosestStation(o,s){return this.searchService.findClosestStation(parseFloat(o),parseFloat(s))}};t.\u0275fac=function(s){return new(s||t)(oi(Pr),oi(is))},t.\u0275prov=wn({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();var Ad=(()=>{let t=class t{constructor(o){this.geoService=o}createSearchObservable(o,s,u){return o.valueChanges.pipe(Uc(300),Kg(),ko(d=>this.geoService.searchCity(d)),Hc(d=>{d.length>0&&u.get(s)?.setValue({lat:d[0].lat,lon:d[0].lon})}))}};t.\u0275fac=function(s){return new(s||t)(oi(ml))},t.\u0275prov=wn({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();function MZ(e,t){if(e&1&&(E(0,"nz-auto-option",11),U(1),I()),e&2){let i=t.$implicit;B("nzValue",i.name),S(),We(" ",i.name," ")}}function DZ(e,t){if(e&1&&(E(0,"nz-auto-option",11),U(1),I()),e&2){let i=t.$implicit;B("nzValue",i.name),S(),We(" ",i.name," ")}}function LZ(e,t){e&1&&se(0,"span",23)}function NZ(e,t){e&1&&se(0,"span",24)}var zS=(()=>{let t=class t{constructor(o,s,u,d,m){this.fb=o,this.formUtilsService=s,this.geoService=u,this.searchService=d,this.markerService=m,this.searchForm=this.fb.group({from:["",zn.required],to:["",[zn.required,this.notSameAsStart.bind(this)]],tripDate:["",[zn.required]],fromCoords:["",zn.required],toCoords:["",zn.required]}),this.closestStationFrom=null,this.closestStationTo=null,this.fromOptions$=this.formUtilsService.createSearchObservable(this.startCity,"fromCoords",this.searchForm),this.toOptions$=this.formUtilsService.createSearchObservable(this.endCity,"toCoords",this.searchForm)}handleMarkerClick(o){let s=this.searchForm.get("fromCoords")?.value,u=this.searchForm.get("toCoords")?.value;this.markerService.toggleMarker(o,s,u,this.setFormValue.bind(this))}setFormValue(o,s){this.searchForm.patchValue({[o]:s})}resetForm(){this.searchForm.reset()}get startCity(){return this.searchForm.get("from")}get endCity(){return this.searchForm.get("to")}get tripDate(){return this.searchForm.get("tripDate")}notSameAsStart(o){let s=this.searchForm?.get("from")?.value;return o.value===s?{notSameAsStart:!0}:null}submitForm(){if(this.searchForm.valid){let o=this.searchForm.get("fromCoords")?.value,s=this.searchForm.get("toCoords")?.value,u=this.searchForm.get("tripDate")?.value,d=new Date(u).toISOString();this.geoService.findClosestStation(o.lat,o.lon).pipe(ko(m=>(this.markerService.selectMarkerByCity(m.city,"from",this.setFormValue.bind(this)),this.geoService.findClosestStation(s.lat,s.lon).pipe(ko(v=>{if(this.markerService.selectMarkerByCity(v.city,"to",this.setFormValue.bind(this)),m&&v)return this.searchService.searchRoutes(m.latitude,m.longitude,v.latitude,v.longitude,d);throw new Error("Can`t finde stations")}))))).subscribe({next:m=>{console.log(m),this.response=m}})}}disabledDates(o){let s=new Date;return s.setHours(0,0,0,0),o.getTime()<s.getTime()}};t.\u0275fac=function(s){return new(s||t)(Q(oh),Q(Ad),Q(ml),Q(is),Q(dl))},t.\u0275cmp=Ee({type:t,selectors:[["app-main"]],viewQuery:function(s,u){if(s&1&&qn(fl,5),s&2){let d;Yt(d=Jt())&&(u.mapComponent=d.first)}},standalone:!0,features:[Fr([Ns]),Oe],decls:36,vars:14,consts:[["autoFrom",""],["autoTo",""],["from",""],["to",""],["nz-form","",1,"ant-advanced-search-form",3,"ngSubmit","formGroup"],[1,"form"],[1,"form_dest"],["nzErrorTip","Please select start stattion"],[3,"nzPrefix"],["formControlName","from","placeholder","From","nz-input","",3,"nzAutocomplete"],["nzBackfill",""],[3,"nzValue"],[1,"icon-swap"],["nz-icon","","nzType","swap","nzTheme","outline"],["nzErrorTip","Please select end station"],["formControlName","to","placeholder","To","nz-input","",3,"nzAutocomplete"],[1,"form_date"],[3,"nzSm","nzXs","nzErrorTip"],["formControlName","tripDate","nzFormat","MMMM dd",1,"input_date",3,"nzDisabledDate"],[1,"form_submit"],["nz-button","","nzType","primary"],[3,"response"],[3,"markerClicked"],["nz-icon","","nzType","environment","nzTheme","outline"],["nz-icon","","nzType","environment","nzTheme","fill"]],template:function(s,u){if(s&1){let d=Ft();E(0,"form",4),it("ngSubmit",function(){return Xe(d),et(u.submitForm())}),E(1,"div",5)(2,"div",6)(3,"nz-form-item")(4,"nz-form-control",7)(5,"nz-input-group",8),se(6,"input",9),I(),E(7,"nz-autocomplete",10,0),ln(9,MZ,2,2,"nz-auto-option",11,Si),Qn(11,"async"),I()()(),E(12,"div",12),se(13,"span",13),I(),E(14,"nz-form-item")(15,"nz-form-control",14)(16,"nz-input-group",8),se(17,"input",15),I(),E(18,"nz-autocomplete",10,1),ln(20,DZ,2,2,"nz-auto-option",11,Si),Qn(22,"async"),I()()(),K(23,LZ,1,0,"ng-template",null,2,tt)(25,NZ,1,0,"ng-template",null,3,tt),I(),E(27,"div",16)(28,"nz-form-item")(29,"nz-form-control",17),se(30,"nz-date-picker",18),I()()(),E(31,"div",19)(32,"button",20),U(33,"Submit"),I()()(),se(34,"app-route-tabs",21),E(35,"app-map",22),it("markerClicked",function(v){return Xe(d),et(u.handleMarkerClick(v))}),I()()}if(s&2){let d=He(8),m=He(19),v=He(24),_=He(26);B("formGroup",u.searchForm),S(5),B("nzPrefix",v),S(),B("nzAutocomplete",d),S(3),un(ho(11,10,u.fromOptions$)),S(7),B("nzPrefix",_),S(),B("nzAutocomplete",m),S(3),un(ho(22,12,u.toOptions$)),S(9),B("nzSm",24)("nzXs",24)("nzErrorTip","Please select date"),S(),B("nzDisabledDate",u.disabledDates),S(4),B("response",u.response)}},dependencies:[Ar,th,rh,Dr,Mr,Ir,Er,Or,Uo,Ho,$r,Zr,Ba,Vo,Wo,Ra,Ai,dh,kr,Br,ph,fh,Y_,_d,gd,Js,Ru,ka,Sn,Fn,pS,fl,wS],styles:["[_nghost-%COMP%]{display:flex;justify-content:flex-start;flex-direction:column;align-items:center;min-height:calc(100vh - 118px)}.ant-advanced-search-form[_ngcontent-%COMP%]{padding:24px;background:#fbfbfb;border:1px solid #d9d9d9;border-radius:6px;width:80%;display:flex;justify-content:center;flex-direction:column}.form[_ngcontent-%COMP%]{display:flex;width:100%;gap:10px;justify-content:space-between}.form_dest[_ngcontent-%COMP%]{position:relative;display:flex;flex:0 0 50%;max-width:50%;flex-direction:row;column-gap:10px}.icon-swap[_ngcontent-%COMP%]{min-width:30px;width:30px;height:30px;border:1px solid #e9e9e9;border-radius:50%;display:flex;align-items:center;justify-content:center;position:absolute;left:0;right:0;top:calc(50% - 12px);transform:translateY(-50%);z-index:999;margin:0 auto;background-color:#ffffff8a;-webkit-backdrop-filter:blur(1px);backdrop-filter:blur(1px)}.form_date[_ngcontent-%COMP%]{display:flex;width:100%}.form_submit[_ngcontent-%COMP%]{display:flex}.input_date[_ngcontent-%COMP%]{height:32px;width:100%}.ant-form-item[_ngcontent-%COMP%]{display:flex;width:100%}.ant-form-button[_ngcontent-%COMP%]{display:flex;width:100%;justify-content:center}.form_item[_ngcontent-%COMP%]{display:flex;flex:0 0 25%;max-width:25%}.form_item_button[_ngcontent-%COMP%]{display:flex;flex:0 0 20%;max-width:20%}.search-result-list[_ngcontent-%COMP%]{margin-top:16px;border:1px dashed #e9e9e9;border-radius:6px;background-color:#fafafa;min-height:200px;text-align:center;padding-top:80px}[nz-form-label][_ngcontent-%COMP%]{overflow:visible}.collapse[_ngcontent-%COMP%]{margin-left:8px;font-size:12px}.search-area[_ngcontent-%COMP%]{text-align:right}@media screen and (max-width: 1024px){.ant-advanced-search-form[_ngcontent-%COMP%]{width:100%}.form[_ngcontent-%COMP%]{flex-direction:column;gap:0;margin-bottom:20px}.form_dest[_ngcontent-%COMP%]{max-width:100%}.ant-btn-primary[_ngcontent-%COMP%]{width:100%}}@media screen and (max-width: 720px){.form_dest[_ngcontent-%COMP%]{flex-direction:column}.ant-form-item[_ngcontent-%COMP%]{display:flex}.icon-swap[_ngcontent-%COMP%]{top:calc(50% - 12px);transform:translate(-50%);left:90%;rotate:90deg;width:38px;height:38px}}"]});let e=t;return e})();function RZ(e,t){e&1&&Yc(0)}function BZ(e,t){if(e&1&&K(0,RZ,1,0,"ng-container",7),e&2){let i=q(3);B("nzStringTemplateOutlet",i.nzIcon)}}function kZ(e,t){if(e&1&&se(0,"span",6),e&2){let i=q(3);B("nzType",i.nzIconType||i.inferredIconType)("nzTheme",i.iconTheme)}}function qZ(e,t){if(e&1&&(E(0,"div",2),K(1,BZ,1,1,"ng-container")(2,kZ,1,2,"span",6),I()),e&2){let i=q(2);S(),pe(i.nzIcon?1:2)}}function $Z(e,t){if(e&1&&(st(0),U(1),at()),e&2){let i=q(4);S(),yt(i.nzMessage)}}function ZZ(e,t){if(e&1&&(E(0,"span",8),K(1,$Z,2,1,"ng-container",7),I()),e&2){let i=q(3);S(),B("nzStringTemplateOutlet",i.nzMessage)}}function jZ(e,t){if(e&1&&(st(0),U(1),at()),e&2){let i=q(4);S(),yt(i.nzDescription)}}function UZ(e,t){if(e&1&&(E(0,"span",9),K(1,jZ,2,1,"ng-container",7),I()),e&2){let i=q(3);S(),B("nzStringTemplateOutlet",i.nzDescription)}}function HZ(e,t){if(e&1&&(E(0,"div",3),K(1,ZZ,2,1,"span",8)(2,UZ,2,1,"span",9),I()),e&2){let i=q(2);S(),pe(i.nzMessage?1:-1),S(),pe(i.nzDescription?2:-1)}}function WZ(e,t){if(e&1&&(st(0),U(1),at()),e&2){let i=q(3);S(),yt(i.nzAction)}}function VZ(e,t){if(e&1&&(E(0,"div",4),K(1,WZ,2,1,"ng-container",7),I()),e&2){let i=q(2);S(),B("nzStringTemplateOutlet",i.nzAction)}}function GZ(e,t){if(e&1&&(st(0),E(1,"span",12),U(2),I(),at()),e&2){let i=q(4);S(2),yt(i.nzCloseText)}}function KZ(e,t){if(e&1&&K(0,GZ,3,1,"ng-container",7),e&2){let i=q(3);B("nzStringTemplateOutlet",i.nzCloseText)}}function YZ(e,t){e&1&&se(0,"span",11)}function JZ(e,t){if(e&1){let i=Ft();E(0,"button",10),it("click",function(){Xe(i);let s=q(2);return et(s.closeAlert())}),K(1,KZ,1,1,"ng-container")(2,YZ,1,0,"span",11),I()}if(e&2){let i=q(2);S(),pe(i.nzCloseText?1:2)}}function QZ(e,t){if(e&1){let i=Ft();E(0,"div",1),it("@slideAlertMotion.done",function(){Xe(i);let s=q();return et(s.onFadeAnimationDone())}),K(1,qZ,3,1,"div",2)(2,HZ,3,2,"div",3)(3,VZ,2,1,"div",4)(4,JZ,3,1,"button",5),I()}if(e&2){let i=q();Bt("ant-alert-rtl",i.dir==="rtl")("ant-alert-success",i.nzType==="success")("ant-alert-info",i.nzType==="info")("ant-alert-warning",i.nzType==="warning")("ant-alert-error",i.nzType==="error")("ant-alert-no-icon",!i.nzShowIcon)("ant-alert-banner",i.nzBanner)("ant-alert-closable",i.nzCloseable)("ant-alert-with-description",!!i.nzDescription),B("@.disabled",i.nzNoAnimation)("@slideAlertMotion",void 0),S(),pe(i.nzShowIcon?1:-1),S(),pe(i.nzMessage||i.nzDescription?2:-1),S(),pe(i.nzAction?3:-1),S(),pe(i.nzCloseable||i.nzCloseText?4:-1)}}var FS="alert",XZ=(()=>{let t=class t{constructor(o,s,u){this.nzConfigService=o,this.cdr=s,this.directionality=u,this._nzModuleName=FS,this.nzAction=null,this.nzCloseText=null,this.nzIconType=null,this.nzMessage=null,this.nzDescription=null,this.nzType="info",this.nzCloseable=!1,this.nzShowIcon=!1,this.nzBanner=!1,this.nzNoAnimation=!1,this.nzIcon=null,this.nzOnClose=new Bn,this.closed=!1,this.iconTheme="fill",this.inferredIconType="info-circle",this.dir="ltr",this.isTypeSet=!1,this.isShowIconSet=!1,this.destroy$=new Rn,this.nzConfigService.getConfigChangeEventForComponent(FS).pipe(wt(this.destroy$)).subscribe(()=>{this.cdr.markForCheck()})}ngOnInit(){this.directionality.change?.pipe(wt(this.destroy$)).subscribe(o=>{this.dir=o,this.cdr.detectChanges()}),this.dir=this.directionality.value}closeAlert(){this.closed=!0}onFadeAnimationDone(){this.closed&&this.nzOnClose.emit(!0)}ngOnChanges(o){let{nzShowIcon:s,nzDescription:u,nzType:d,nzBanner:m}=o;if(s&&(this.isShowIconSet=!0),d)switch(this.isTypeSet=!0,this.nzType){case"error":this.inferredIconType="close-circle";break;case"success":this.inferredIconType="check-circle";break;case"info":this.inferredIconType="info-circle";break;case"warning":this.inferredIconType="exclamation-circle";break}u&&(this.iconTheme=this.nzDescription?"outline":"fill"),m&&(this.isTypeSet||(this.nzType="warning"),this.isShowIconSet||(this.nzShowIcon=!0))}ngOnDestroy(){this.destroy$.next(!0),this.destroy$.complete()}};t.\u0275fac=function(s){return new(s||t)(Q(dr),Q(cn),Q(Ti))},t.\u0275cmp=Ee({type:t,selectors:[["nz-alert"]],inputs:{nzAction:"nzAction",nzCloseText:"nzCloseText",nzIconType:"nzIconType",nzMessage:"nzMessage",nzDescription:"nzDescription",nzType:"nzType",nzCloseable:[2,"nzCloseable","nzCloseable",pt],nzShowIcon:[2,"nzShowIcon","nzShowIcon",pt],nzBanner:[2,"nzBanner","nzBanner",pt],nzNoAnimation:[2,"nzNoAnimation","nzNoAnimation",pt],nzIcon:"nzIcon"},outputs:{nzOnClose:"nzOnClose"},exportAs:["nzAlert"],standalone:!0,features:[kn,bn,Oe],decls:1,vars:1,consts:[[1,"ant-alert",3,"ant-alert-rtl","ant-alert-success","ant-alert-info","ant-alert-warning","ant-alert-error","ant-alert-no-icon","ant-alert-banner","ant-alert-closable","ant-alert-with-description"],[1,"ant-alert"],[1,"ant-alert-icon"],[1,"ant-alert-content"],[1,"ant-alert-action"],["type","button","tabindex","0",1,"ant-alert-close-icon"],["nz-icon","",3,"nzType","nzTheme"],[4,"nzStringTemplateOutlet"],[1,"ant-alert-message"],[1,"ant-alert-description"],["type","button","tabindex","0",1,"ant-alert-close-icon",3,"click"],["nz-icon","","nzType","close"],[1,"ant-alert-close-text"]],template:function(s,u){s&1&&K(0,QZ,5,24,"div",0),s&2&&pe(u.closed?-1:0)},dependencies:[Sn,Fn,_i,gi],encapsulation:2,data:{animation:[K_]},changeDetection:0});let e=t;return Kt([Qt()],e.prototype,"nzCloseable",void 0),Kt([Qt()],e.prototype,"nzShowIcon",void 0),e})(),SS=(()=>{let t=class t{};t.\u0275fac=function(s){return new(s||t)},t.\u0275mod=Wn({type:t}),t.\u0275inj=Hn({imports:[XZ]});let e=t;return e})();var TS=(()=>{let t=class t{constructor(o){this.http=o,this.apiUrl="/api/signup"}signUp(o,s){let u={email:o,password:s};return this.http.post(this.apiUrl,u).pipe(Aa(this.handleError))}handleError(o){let s="An unknown error occurred!";return o.error instanceof ErrorEvent&&(s=`Client-side error: ${o.error.message}`),o.status&&(s=`Server-side error: ${o.status}`),o.status===400&&o.error&&(s=`Error: ${o.error.message}`),jc(()=>new Error(s))}};t.\u0275fac=function(s){return new(s||t)(oi(Pr))},t.\u0275prov=wn({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();function tj(e,t){e&1&&U(0," Please enter your email! ")}function nj(e,t){e&1&&U(0," The input is not valid E-mail! ")}function ij(e,t){if(e&1&&U(0),e&2){let i=q(2);We(" ",i.errorMessage," ")}}function rj(e,t){if(e&1&&K(0,tj,1,0)(1,nj,1,0)(2,ij,1,1),e&2){let i=t.$implicit;pe(i.errors!=null&&i.errors.required?0:-1),S(),pe(i.errors!=null&&i.errors.email?1:-1),S(),pe(i.errors!=null&&i.errors.serverError?2:-1)}}function oj(e,t){e&1&&U(0," Please enter your password! ")}function sj(e,t){e&1&&U(0," Passwort must be at least 8 characters! ")}function aj(e,t){if(e&1&&K(0,oj,1,0)(1,sj,1,0),e&2){let i=t.$implicit;pe(i.errors!=null&&i.errors.required?0:-1),S(),pe(i.errors!=null&&i.errors.minlength?1:-1)}}function lj(e,t){e&1&&U(0," Please confirm your password! ")}function uj(e,t){e&1&&U(0," Passwords do not match! ")}function cj(e,t){if(e&1&&K(0,lj,1,0)(1,uj,1,0),e&2){let i=t.$implicit;pe(i.errors!=null&&i.errors.required?0:-1),S(),pe(i.errors!=null&&i.errors.confirm?1:-1)}}var IS=(()=>{let t=class t{constructor(o,s,u){this.nnfb=o,this.signupService=s,this.router=u,this.errorMessage="",this.imageUrl=`assets/images/signup-train-${new Date().getTime()%3+1}.jpg`,this.checkPasswordValidator=d=>(this.errorMessage="",d.value?d.value!==this.signupForm.get("password")?.value?{confirm:!0}:{}:{required:!0}),this.signupForm=this.nnfb.group({email:["",[zn.required,zn.email]],password:["",[zn.required,zn.minLength(8)]],checkPassword:["",[zn.required,this.checkPasswordValidator]]})}submitForm(){this.signupForm.valid&&this.signupService.signUp(this.signupForm.get("email")?.value,this.signupForm.get("password")?.value).pipe(Os(1)).subscribe({next:()=>{this.router.navigate(["/signin"])},error:o=>{this.errorMessage=o.message,this.signupForm.get("email")?.setErrors({serverError:!0})}})}};t.\u0275fac=function(s){return new(s||t)(Q(sh),Q(TS),Q(Oa))},t.\u0275cmp=Ee({type:t,selectors:[["app-signup"]],standalone:!0,features:[Oe],decls:29,vars:6,consts:[["errorEmail",""],["errorPassword",""],["errorCheckPassword",""],["nz-form","",3,"ngSubmit","formGroup"],["nzFor","email","nzRequired",""],[3,"nzErrorTip"],["nz-input","","formControlName","email","id","email"],["nzFor","password","nzRequired",""],["nz-input","","type","password","formControlName","password","id","password"],["nzFor","checkPassword","nzRequired",""],["nz-input","","type","password","formControlName","checkPassword","id","checkPassword"],[1,"register-area"],["nz-button","","nzType","primary",3,"disabled"],["nz-button","","nzType","default"],[1,"image"],["nz-image","","nzDisablePreview","","alt","",3,"nzSrc"]],template:function(s,u){if(s&1){let d=Ft();E(0,"form",3),it("ngSubmit",function(){return Xe(d),et(u.submitForm())}),E(1,"nz-form-item")(2,"nz-form-label",4),U(3,"E-mail"),I(),E(4,"nz-form-control",5),se(5,"input",6),I()(),E(6,"nz-form-item")(7,"nz-form-label",7),U(8,"Password"),I(),E(9,"nz-form-control",5),se(10,"input",8),I()(),E(11,"nz-form-item")(12,"nz-form-label",9),U(13,"Confirm Password"),I(),E(14,"nz-form-control",5),se(15,"input",10),I()(),E(16,"div",11)(17,"button",12),U(18,"Register"),I(),E(19,"button",13),U(20,"Sign In"),I()()(),E(21,"div",14),se(22,"img",15),I(),K(23,rj,3,3,"ng-template",null,0,tt)(25,aj,2,2,"ng-template",null,1,tt)(27,cj,2,2,"ng-template",null,2,tt)}if(s&2){let d=He(24),m=He(26),v=He(28);B("formGroup",u.signupForm),S(4),B("nzErrorTip",d),S(5),B("nzErrorTip",m),S(5),B("nzErrorTip",v),S(3),B("disabled",!u.signupForm.valid),S(5),B("nzSrc",u.imageUrl)}},dependencies:[Dr,Mr,Ir,Er,Or,Uo,Ho,Na,kr,Br,Da,$r,La,Zr,SS,Vo,Wo,Rr,Ai,Lr,Nr,nv,tv],styles:["[_nghost-%COMP%]{display:flex;column-gap:20px;width:fit-content;margin:0 auto;background-color:#d6e4ff;padding:20px;border-radius:8px}form[_ngcontent-%COMP%]{width:240px}@media (max-width: 575px){form[_ngcontent-%COMP%]{width:340px}}nz-form-item[_ngcontent-%COMP%]{display:flex;align-items:flex-start;flex-wrap:wrap;flex-direction:column;margin-bottom:24px;height:65px}nz-form-label[_ngcontent-%COMP%], nz-form-control[_ngcontent-%COMP%]{width:100%;text-align:start;flex:1 1!important}.register-area[_ngcontent-%COMP%]{display:flex;justify-content:space-between;margin:0 auto}.image[_ngcontent-%COMP%]{height:300px}.image[_ngcontent-%COMP%] > img[_ngcontent-%COMP%]{height:300px;object-fit:contain;border-radius:8px}@media (max-width: 575px){form[_ngcontent-%COMP%]{width:300px}.image[_ngcontent-%COMP%]{display:none}}"],changeDetection:0});let e=t;return e})();function dj(e,t){e&1&&U(0," Incorrect email! ")}function fj(e,t){e&1&&U(0," Required! ")}function pj(e,t){if(e&1&&U(0),e&2){let i=q(2);We(" ",i.errorMessage," ")}}function mj(e,t){if(e&1&&K(0,dj,1,0)(1,fj,1,0)(2,pj,1,1),e&2){let i=t.$implicit,o=q();pe(i.errors!=null&&i.errors.invalidEmail?0:-1),S(),pe(i.errors!=null&&i.errors.required?1:-1),S(),pe(o.loginForm.controls.userName.hasError("invalidEmail")?2:-1)}}function gj(e,t){e&1&&U(0," Required! ")}function _j(e,t){e&1&&U(0," Password has to be not less 8 symbols! ")}function vj(e,t){if(e&1&&U(0),e&2){let i=q(2);We(" ",i.errorMessage," ")}}function yj(e,t){if(e&1&&K(0,gj,1,0)(1,_j,1,0)(2,vj,1,1),e&2){let i=t.$implicit,o=q();pe(i.errors!=null&&i.errors.required?0:-1),S(),pe(i.errors!=null&&i.errors.minlength?1:-1),S(),pe(o.loginForm.controls.password.hasError("userNotFound")?2:-1)}}var ES=(()=>{let t=class t{constructor(o,s,u){this.router=o,this.formBuilder=s,this.loginService=u,this.errorMessage="",this.loginForm=this.formBuilder.group({userName:["",[ov.emailValidation(),zn.required]],password:["",[zn.required,zn.minLength(8)]]})}submitForm(){if(this.loginForm.valid){let o=this.loginForm.controls.userName.value,s=this.loginForm.controls.password.value;this.loginService.login(o,s).pipe(Os(1)).subscribe({next:()=>{this.router.navigate(["/"])},error:u=>{this.handleLoginError(u)}})}}handleLoginError(o){this.errorMessage=o.message,o.message.includes("Incorrect email or password")?this.loginForm.controls.password.setErrors({userNotFound:!0}):o.message.includes("Email is wrong")?this.loginForm.controls.userName.setErrors({invalidEmail:!0}):(this.loginForm.controls.userName.setErrors({serverError:!0}),this.loginForm.controls.password.setErrors({serverError:!0}))}};t.\u0275fac=function(s){return new(s||t)(Q(Oa),Q(sh),Q(jr))},t.\u0275cmp=Ee({type:t,selectors:[["app-login-page"]],standalone:!0,features:[Oe],decls:18,vars:5,consts:[["emailErrorTpl",""],["passwordErrorTpl",""],["nz-form","",1,"login-form",3,"ngSubmit","formGroup"],["nzErrorTip","Please input your username!","nzHasFeedback","",3,"nzErrorTip"],["nzPrefixIcon","user"],["type","text","nz-input","","formControlName","userName","placeholder","Username"],[3,"nzErrorTip"],["nzPrefixIcon","lock"],["type","password","nz-input","","formControlName","password","placeholder","Password"],["nz-button","",1,"login-form-button","login-form-margin",3,"nzType","disabled"],["routerLink","/signup"]],template:function(s,u){if(s&1){let d=Ft();E(0,"form",2),it("ngSubmit",function(){return Xe(d),et(u.submitForm())}),E(1,"nz-form-item")(2,"nz-form-control",3)(3,"nz-input-group",4),se(4,"input",5),I()()(),E(5,"nz-form-item")(6,"nz-form-control",6)(7,"nz-input-group",7),se(8,"input",8),I()()(),E(9,"button",9),U(10," Log in "),I(),U(11," Or "),E(12,"a",10),U(13,"register now!"),I()(),K(14,mj,3,3,"ng-template",null,0,tt)(16,yj,3,3,"ng-template",null,1,tt)}if(s&2){let d=He(15),m=He(17);B("formGroup",u.loginForm),S(2),B("nzErrorTip",d),S(4),B("nzErrorTip",m),S(3),B("nzType","primary")("disabled",!u.loginForm.valid)}},dependencies:[iv,Na,kr,Br,Da,$r,Zr,Vo,Wo,Ba,Rr,Ai,Lr,Nr,Dr,Mr,Ir,Er,Or,Uo,Ho,ih],styles:["[_nghost-%COMP%]{display:flex;column-gap:20px;width:fit-content;margin:0 auto;background-color:#d6e4ff;padding:20px;border-radius:8px}.login-form-margin[_ngcontent-%COMP%]{margin-bottom:16px}.login-form-button[_ngcontent-%COMP%]{width:100%}"],changeDetection:0});let e=t;return e})();var n0=(e,t)=>{let i=Rt(jr),o=Rt(Oa),s=i.isAuthenticated();return t.url==="/signin"&&s?(o.navigate(["/"]),!1):t.url==="/orders"&&!s?(o.navigate(["/"]),!1):!0};var ku=()=>ct(void 0,null,function*(){return(yield Rt(jr).getProfile()).role==="manager"});var OS=()=>Rt(jr).isAuthenticated();function xj(e,t){if(e&1&&(E(0,"p",3),U(1),I()),e&2){let i=t.$implicit,o=q(2).$index,s=q(2);Bt("current",i===s.countArray[o]),S(),We(" ",i," ")}}function Cj(e,t){if(e&1&&ln(0,xj,2,3,"p",2,Si),e&2){let i=q(3);un(i.countSingleArray)}}function wj(e,t){if(e&1&&(E(0,"span",1),K(1,Cj,2,0),I()),e&2){let i=t.$index,o=q(2);Jn("transform","translateY("+-o.countArray[i]*100+"%)"),B("nzNoAnimation",o.noAnimation),S(),pe(!o.nzDot&&o.countArray[i]!==void 0?1:-1)}}function bj(e,t){if(e&1&&ln(0,wj,2,4,"span",0,Si),e&2){let i=q();un(i.maxNumberArray)}}function zj(e,t){if(e&1&&U(0),e&2){let i=q();We(" ",i.nzOverflowCount,"+ ")}}var MS=["*"];function Fj(e,t){if(e&1&&(st(0),U(1),at()),e&2){let i=q(2);S(),yt(i.nzText)}}function Sj(e,t){if(e&1&&(se(0,"span",1),E(1,"span",2),K(2,Fj,2,1,"ng-container",0),I()),e&2){let i=q();Kc("ant-badge-status-dot ant-badge-status-",i.nzStatus||i.presetColor,""),Jn("background",!i.presetColor&&i.nzColor),B("ngStyle",i.nzStyle),S(2),B("nzStringTemplateOutlet",i.nzText)}}function Tj(e,t){if(e&1&&se(0,"nz-badge-sup",3),e&2){let i=q(2);B("nzOffset",i.nzOffset)("nzSize",i.nzSize)("nzTitle",i.nzTitle)("nzStyle",i.nzStyle)("nzDot",i.nzDot)("nzOverflowCount",i.nzOverflowCount)("disableAnimation",!!(i.nzStandalone||i.nzStatus||i.nzColor||i.noAnimation!=null&&i.noAnimation.nzNoAnimation))("nzCount",i.nzCount)("noAnimation",!!(i.noAnimation!=null&&i.noAnimation.nzNoAnimation))}}function Aj(e,t){if(e&1&&(st(0),K(1,Tj,1,9,"nz-badge-sup",3),at()),e&2){let i=q();S(),pe(i.showSup?1:-1)}}function Pj(e,t){if(e&1&&(st(0),E(1,"span",3),U(2),I(),at()),e&2){let i=q();S(2),yt(i.nzText)}}var Ij=(()=>{let t=class t{constructor(){this.nzStyle=null,this.nzDot=!1,this.nzOverflowCount=99,this.disableAnimation=!1,this.noAnimation=!1,this.nzSize="default",this.maxNumberArray=[],this.countArray=[],this.count=0,this.countSingleArray=[0,1,2,3,4,5,6,7,8,9]}generateMaxNumberArray(){this.maxNumberArray=this.nzOverflowCount.toString().split("")}ngOnInit(){this.generateMaxNumberArray()}ngOnChanges(o){let{nzOverflowCount:s,nzCount:u}=o;u&&typeof u.currentValue=="number"&&(this.count=Math.max(0,u.currentValue),this.countArray=this.count.toString().split("").map(d=>+d)),s&&this.generateMaxNumberArray()}};t.\u0275fac=function(s){return new(s||t)},t.\u0275cmp=Ee({type:t,selectors:[["nz-badge-sup"]],hostAttrs:[1,"ant-scroll-number"],hostVars:17,hostBindings:function(s,u){s&2&&(d_("@.disabled",u.disableAnimation)("@zoomBadgeMotion",void 0),Qi("title",u.nzTitle===null?"":u.nzTitle||u.nzCount),c_(u.nzStyle),Jn("right",u.nzOffset&&u.nzOffset[0]?-u.nzOffset[0]:null,"px")("margin-top",u.nzOffset&&u.nzOffset[1]?u.nzOffset[1]:null,"px"),Bt("ant-badge-count",!u.nzDot)("ant-badge-count-sm",u.nzSize==="small")("ant-badge-dot",u.nzDot)("ant-badge-multiple-words",u.countArray.length>=2))},inputs:{nzOffset:"nzOffset",nzTitle:"nzTitle",nzStyle:"nzStyle",nzDot:"nzDot",nzOverflowCount:[2,"nzOverflowCount","nzOverflowCount",au],disableAnimation:"disableAnimation",nzCount:"nzCount",noAnimation:"noAnimation",nzSize:"nzSize"},exportAs:["nzBadgeSup"],standalone:!0,features:[kn,bn,Oe],decls:2,vars:1,consts:[[1,"ant-scroll-number-only",3,"nzNoAnimation","transform"],[1,"ant-scroll-number-only",3,"nzNoAnimation"],[1,"ant-scroll-number-only-unit",3,"current"],[1,"ant-scroll-number-only-unit"]],template:function(s,u){s&1&&K(0,bj,2,0)(1,zj,1,1),s&2&&pe(u.count<=u.nzOverflowCount?0:1)},dependencies:[qr],encapsulation:2,data:{animation:[rp]},changeDetection:0});let e=t;return e})(),DS=["pink","red","yellow","orange","cyan","green","blue","purple","geekblue","magenta","volcano","gold","lime"],Ej="badge",Oj=(()=>{let t=class t{constructor(o,s,u,d,m){this.nzConfigService=o,this.renderer=s,this.cdr=u,this.elementRef=d,this.directionality=m,this._nzModuleName=Ej,this.showSup=!1,this.presetColor=null,this.dir="ltr",this.destroy$=new Rn,this.nzShowZero=!1,this.nzShowDot=!0,this.nzStandalone=!1,this.nzDot=!1,this.nzOverflowCount=99,this.nzColor=void 0,this.nzStyle=null,this.nzText=null,this.nzSize="default",this.noAnimation=Rt(qr,{host:!0,optional:!0})}ngOnInit(){this.directionality.change?.pipe(wt(this.destroy$)).subscribe(o=>{this.dir=o,this.prepareBadgeForRtl(),this.cdr.detectChanges()}),this.dir=this.directionality.value,this.prepareBadgeForRtl()}ngOnChanges(o){let{nzColor:s,nzShowDot:u,nzDot:d,nzCount:m,nzShowZero:v}=o;s&&(this.presetColor=this.nzColor&&DS.indexOf(this.nzColor)!==-1?this.nzColor:null),(u||d||m||v)&&(this.showSup=this.nzShowDot&&this.nzDot||typeof this.nzCount=="number"&&this.nzCount>0||typeof this.nzCount=="number"&&this.nzCount<=0&&this.nzShowZero)}prepareBadgeForRtl(){this.isRtlLayout?this.renderer.addClass(this.elementRef.nativeElement,"ant-badge-rtl"):this.renderer.removeClass(this.elementRef.nativeElement,"ant-badge-rtl")}get isRtlLayout(){return this.dir==="rtl"}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}};t.\u0275fac=function(s){return new(s||t)(Q(dr),Q(Pa),Q(cn),Q(qo),Q(Ti))},t.\u0275cmp=Ee({type:t,selectors:[["nz-badge"]],hostAttrs:[1,"ant-badge"],hostVars:4,hostBindings:function(s,u){s&2&&Bt("ant-badge-status",u.nzStatus)("ant-badge-not-a-wrapper",!!(u.nzStandalone||u.nzStatus||u.nzColor))},inputs:{nzShowZero:[2,"nzShowZero","nzShowZero",pt],nzShowDot:[2,"nzShowDot","nzShowDot",pt],nzStandalone:[2,"nzStandalone","nzStandalone",pt],nzDot:[2,"nzDot","nzDot",pt],nzOverflowCount:"nzOverflowCount",nzColor:"nzColor",nzStyle:"nzStyle",nzText:"nzText",nzTitle:"nzTitle",nzStatus:"nzStatus",nzCount:"nzCount",nzOffset:"nzOffset",nzSize:"nzSize"},exportAs:["nzBadge"],standalone:!0,features:[kn,bn,Oe],ngContentSelectors:MS,decls:3,vars:2,consts:[[4,"nzStringTemplateOutlet"],[3,"ngStyle"],[1,"ant-badge-status-text"],[3,"nzOffset","nzSize","nzTitle","nzStyle","nzDot","nzOverflowCount","disableAnimation","nzCount","noAnimation"]],template:function(s,u){s&1&&(pi(),K(0,Sj,3,7),mi(1),K(2,Aj,2,1,"ng-container",0)),s&2&&(pe(u.nzStatus||u.nzColor?0:-1),S(2),B("nzStringTemplateOutlet",u.nzCount))},dependencies:[jo,Ij,_i,gi],encapsulation:2,data:{animation:[rp]},changeDetection:0});let e=t;return Kt([Qt()],e.prototype,"nzOverflowCount",void 0),Kt([Qt()],e.prototype,"nzColor",void 0),e})(),Mj=(()=>{let t=class t{constructor(){this.nzPlacement="end",this.nzText=null,this.presetColor=null}ngOnChanges(o){let{nzColor:s}=o;s&&(this.presetColor=this.nzColor&&DS.indexOf(this.nzColor)!==-1?this.nzColor:null)}};t.\u0275fac=function(s){return new(s||t)},t.\u0275cmp=Ee({type:t,selectors:[["nz-ribbon"]],hostAttrs:[1,"ant-ribbon-wrapper"],inputs:{nzColor:"nzColor",nzPlacement:"nzPlacement",nzText:"nzText"},exportAs:["nzRibbon"],standalone:!0,features:[bn,Oe],ngContentSelectors:MS,decls:4,vars:11,consts:[[1,"ant-ribbon"],[4,"nzStringTemplateOutlet"],[1,"ant-ribbon-corner"],[1,"ant-ribbon-text"]],template:function(s,u){s&1&&(pi(),mi(0),E(1,"div",0),K(2,Pj,3,1,"ng-container",1),se(3,"div",2),I()),s&2&&(S(),h_(u.presetColor&&"ant-ribbon-color-"+u.presetColor),Jn("background-color",!u.presetColor&&u.nzColor),Bt("ant-ribbon-placement-end",u.nzPlacement==="end")("ant-ribbon-placement-start",u.nzPlacement==="start"),S(),B("nzStringTemplateOutlet",u.nzText),S(),Jn("color",!u.presetColor&&u.nzColor))},dependencies:[_i,gi],encapsulation:2,changeDetection:0});let e=t;return e})(),LS=(()=>{let t=class t{};t.\u0275fac=function(s){return new(s||t)},t.\u0275mod=Wn({type:t}),t.\u0275inj=Hn({imports:[Oj,Mj]});let e=t;return e})();var NS=[{id:1,rideId:101,routeId:201,seatId:11,carId:3,userId:1,status:"active",path:[33,5,62,11,48],carriages:["Economy","Economy","Business","FirstClass","FirstClass"],schedule:{segments:[{departure:"2024-10-20T10:00:00",arrival:"2024-10-20T12:30:00"},{departure:"2024-10-20T12:45:00",arrival:"2024-10-20T15:00:00"},{departure:"2024-10-20T15:30:00",arrival:"2024-10-20T18:00:00"},{departure:"2024-10-20T18:15:00",arrival:"2024-10-20T20:45:00"}]},price:{Economy:50,Business:100,FirstClass:150}},{id:2,rideId:102,routeId:202,seatId:21,carId:6,userId:2,status:"completed",path:[44,7,67,13],carriages:["Economy","Business","Business","FirstClass"],schedule:{segments:[{departure:"2024-08-10T08:00:00",arrival:"2024-08-10T10:45:00"},{departure:"2024-08-10T11:00:00",arrival:"2024-08-10T13:30:00"},{departure:"2024-08-10T14:00:00",arrival:"2024-08-10T17:15:00"}]},price:{Economy:40,Business:90,FirstClass:140}},{id:3,rideId:103,routeId:203,seatId:31,carId:9,userId:3,status:"rejected",path:[12,15,25,42],carriages:["Economy","Business","Business","Economy"],schedule:{segments:[{departure:"2024-08-15T09:30:00",arrival:"2024-08-15T12:00:00"},{departure:"2024-08-15T12:15:00",arrival:"2024-08-15T14:45:00"},{departure:"2024-08-15T15:00:00",arrival:"2024-08-15T18:30:00"}]},price:{Economy:35,Business:85}},{id:4,rideId:104,routeId:204,seatId:41,carId:2,userId:4,status:"canceled",path:[51,19,73,32],carriages:["FirstClass","FirstClass","Business","Economy"],schedule:{segments:[{departure:"2024-08-18T07:45:00",arrival:"2024-08-18T10:15:00"},{departure:"2024-08-18T10:30:00",arrival:"2024-08-18T12:45:00"},{departure:"2024-08-18T13:00:00",arrival:"2024-08-18T15:45:00"}]},price:{Economy:45,Business:95,FirstClass:145}},{id:5,rideId:105,routeId:205,seatId:51,carId:11,userId:5,status:"active",path:[9,25,38],carriages:["Economy","Business","Business"],schedule:{segments:[{departure:"2024-11-21T06:30:00",arrival:"2024-11-21T09:00:00"},{departure:"2024-11-21T09:15:00",arrival:"2024-11-21T11:45:00"}]},price:{Economy:30,Business:80}},{id:6,rideId:106,routeId:206,seatId:61,carId:7,userId:6,status:"completed",path:[3,12,27,45],carriages:["Economy","Business","Economy","FirstClass"],schedule:{segments:[{departure:"2024-08-17T05:00:00",arrival:"2024-08-17T07:30:00"},{departure:"2024-08-17T07:45:00",arrival:"2024-08-17T10:15:00"},{departure:"2024-08-17T10:30:00",arrival:"2024-08-17T12:45:00"}]},price:{Economy:55,Business:105,FirstClass:155}}];var RS=(()=>{let t=class t{constructor(o){this.http=o}getOrders(o=!1){return console.log(o),this.http.get("/api/order",{})}cancelOrder(o){return this.http.delete(`/api/order/${o}`)}};t.\u0275fac=function(s){return new(s||t)(oi(Pr))},t.\u0275prov=wn({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();var Rj=()=>({padding:"0px"});function Bj(e,t){if(e&1&&(E(0,"div")(1,"div",11),U(2),Qn(3,"date"),I(),E(4,"div",12),U(5),Qn(6,"date"),I(),E(7,"div",13),U(8),I()()),e&2){let i=q().$implicit;S(2),We(" ",Sr(3,3,i.schedule.segments[0].departure,"HH:mm")," "),S(3),We(" ",Sr(6,6,i.schedule.segments[0].departure,"MMMM dd")," "),S(3),We("City ",i.path[0],"")}}function kj(e,t){if(e&1&&(E(0,"div",14),U(1),I()),e&2){let i=q().$implicit,o=q();S(),yt(o.getTripDuration(i))}}function qj(e,t){if(e&1&&(E(0,"div",11),U(1),Qn(2,"date"),I(),E(3,"div",12),U(4),Qn(5,"date"),I(),E(6,"div",15),U(7),I()),e&2){let i=q().$implicit;S(),We(" ",Sr(2,3,i.schedule.segments[i.schedule.segments.length-1].arrival,"HH:mm")," "),S(3),We(" ",Sr(5,6,i.schedule.segments[i.schedule.segments.length-1].arrival,"MMMM dd")," "),S(3),We("City ",i.path[i.path.length-1],"")}}function $j(e,t){}function Zj(e,t){if(e&1){let i=Ft();E(0,"button",16),it("click",function(){Xe(i);let s=q().$implicit,u=q();return et(u.onCancelOrder(s))}),U(1," Cancel "),I()}}function jj(e,t){if(e&1&&(E(0,"nz-card",5)(1,"div",6)(2,"p")(3,"strong"),U(4,"Carriage type:"),I(),U(5),I(),E(6,"p")(7,"strong"),U(8,"Price:"),I(),U(9),Qn(10,"currency"),I(),E(11,"p")(12,"strong"),U(13,"Car number:"),I(),U(14),I(),E(15,"p")(16,"strong"),U(17,"Seat number:"),I(),U(18),I(),se(19,"nz-divider"),E(20,"p")(21,"strong"),U(22,"Status:"),I(),U(23),I()(),se(24,"nz-divider"),E(25,"nz-steps",7),se(26,"nz-step",8)(27,"nz-step",8)(28,"nz-step",8),K(29,Bj,9,9,"ng-template",null,0,tt)(31,kj,2,1,"ng-template",null,1,tt)(33,qj,8,9,"ng-template",null,2,tt)(35,$j,0,0,"ng-template",9,3,tt),I(),K(37,Zj,2,0,"button",10),I()),e&2){let i=t.$implicit,o=He(30),s=He(32),u=He(34),d=He(36),m=q();B("nzBodyStyle",Jc(16,Rj)),S(5),We(" ",m.getCarriageType(i),""),S(4),We(" ",ho(10,14,m.getTotalPrice(i)),""),S(5),We(" ",i.carId,""),S(4),We(" ",i.seatId,""),S(5),We(" ",i.status,""),S(2),B("nzCurrent",3),S(),B("nzTitle",o)("nzIcon",d),S(),B("nzTitle",s)("nzIcon",d),S(),B("nzTitle",u)("nzIcon",d),S(9),pe(i.status==="active"?37:-1)}}var BS=(()=>{let t=class t{constructor(o,s,u,d){this.orderService=o,this.message=s,this.modal=u,this.cdr=d,this.orders=NS,this.errorMessage=""}ngOnInit(){this.orders.sort((o,s)=>{let u=new Date(o.schedule.segments[0].departure).getTime(),d=new Date(s.schedule.segments[0].departure).getTime();return u-d})}getCarriageType(o){let s=o.schedule.segments.length-1;return o.carriages[s]||"Unknown"}getTotalPrice(o){return o.carriages.reduce((s,u)=>s+(o.price[u]||0),0)}getTripDuration(o){let s=new Date(o.schedule.segments[0].departure).getTime(),d=new Date(o.schedule.segments[o.schedule.segments.length-1].arrival).getTime()-s,m=Math.floor(d/(1e3*60*60)),v=Math.floor(d/(1e3*60)%60);return`${m}h ${v}m`}onCancelOrder(o){this.modal.confirm({nzTitle:"Are you sure you want to cancel this order?",nzOnOk:()=>{try{let s=this.orders.find(u=>u.id===o.id);s&&(s.status="canceled",this.cdr.detectChanges()),this.message.success("Order successfully cancelled")}catch{this.message.error("Error while cancelling the order")}}})}};t.\u0275fac=function(s){return new(s||t)(Q(RS),Q(rv),Q(hh),Q(cn))},t.\u0275cmp=Ee({type:t,selectors:[["app-order-list"]],standalone:!0,features:[Oe],decls:3,vars:0,consts:[["nzFrom",""],["nzDur",""],["nzTo",""],["custom1",""],[1,"orders-list"],["nzHoverable","",1,"order-card",3,"nzBodyStyle"],[1,"order-header"],["nzSize","small",3,"nzCurrent"],[3,"nzTitle","nzIcon"],[2,"display","none"],["nz-button","","nzType","primary",1,"cancel-btn"],[1,"card__time"],[1,"card__time__date"],[1,"card__time__city"],[1,"card__duration"],[1,"card__city"],["nz-button","","nzType","primary",1,"cancel-btn",3,"click"]],template:function(s,u){s&1&&(E(0,"div",4),ln(1,jj,38,17,"nz-card",5,$o),I()),s&2&&(S(),un(u.orders))},dependencies:[$a,qa,av,_h,gh,Rr,Ai,Lr,Nr,Sd,Fd,pl,LS,Ar,nh,Ns],styles:[".orders-list[_ngcontent-%COMP%]{display:flex;justify-content:center;flex-wrap:wrap;gap:20px;margin-bottom:20px;padding:0 1rem}.order-card[_ngcontent-%COMP%]{width:390px;border:1px solid #b5acac;border-radius:8px;padding:1rem}.card-holder[_ngcontent-%COMP%]{border-radius:8px}.left-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;padding:24px;min-width:460px;max-width:40%}.card__time[_ngcontent-%COMP%]{font-size:1.5em;font-weight:600}.carriage[_ngcontent-%COMP%]{display:flex;gap:1rem}.trip-details[_ngcontent-%COMP%]{padding:10px 0}.nz-card[_ngcontent-%COMP%]{padding:10px;margin:10px 0}.cancel-btn[_ngcontent-%COMP%]{margin-top:1rem}nz-divider[_ngcontent-%COMP%]{border-top:1px solid rgba(0,0,0,.2)}"],changeDetection:0});let e=t;return e})();var kS=(()=>{let t=class t{};t.\u0275fac=function(s){return new(s||t)},t.\u0275cmp=Ee({type:t,selectors:[["app-orders"]],standalone:!0,features:[Oe],decls:1,vars:0,template:function(s,u){s&1&&se(0,"app-order-list")},dependencies:[BS],changeDetection:0});let e=t;return e})();function i0(e,t){let i=!t?.manualCleanup;i&&!t?.injector&&e_(i0);let o=i?t?.injector?.get(ep)??Rt(ep):null,s=Uj(t?.equal),u;t?.requireSync?u=Ls({kind:0},{equal:s}):u=Ls({kind:1,value:t?.initialValue},{equal:s});let d=e.subscribe({next:m=>u.set({kind:1,value:m}),error:m=>{if(t?.rejectErrors)throw m;u.set({kind:2,error:m})}});if(t?.requireSync&&u().kind===0)throw new nu(601,!1);return o?.onDestroy(d.unsubscribe.bind(d)),Qc(()=>{let m=u();switch(m.kind){case 1:return m.value;case 2:throw m.error;case 0:throw new nu(601,!1)}},{equal:t?.equal})}function Uj(e=Object.is){return(t,i)=>t.kind===1&&i.kind===1&&e(t.value,i.value)}var ZS=["*"],Hj=["collapseHeader"];function Wj(e,t){if(e&1&&(st(0),se(1,"span",7),at()),e&2){let i=t.$implicit,o=q(2);S(),B("nzType",i||"right")("nzRotate",o.nzActive?90:0)}}function Vj(e,t){if(e&1&&(E(0,"div"),K(1,Wj,2,2,"ng-container",3),I()),e&2){let i=q();S(),B("nzStringTemplateOutlet",i.nzExpandedIcon)}}function Gj(e,t){if(e&1&&(st(0),U(1),at()),e&2){let i=q();S(),yt(i.nzHeader)}}function Kj(e,t){if(e&1&&(st(0),U(1),at()),e&2){let i=q(2);S(),yt(i.nzExtra)}}function Yj(e,t){if(e&1&&(E(0,"div",4),K(1,Kj,2,1,"ng-container",3),I()),e&2){let i=q();S(),B("nzStringTemplateOutlet",i.nzExtra)}}var qS="collapse",r0=(()=>{let t=class t{constructor(o,s,u,d){this.nzConfigService=o,this.cdr=s,this.directionality=u,this.destroy$=d,this._nzModuleName=qS,this.nzAccordion=!1,this.nzBordered=!0,this.nzGhost=!1,this.nzExpandIconPosition="start",this.dir="ltr",this.listOfNzCollapsePanelComponent=[],this.nzConfigService.getConfigChangeEventForComponent(qS).pipe(wt(this.destroy$)).subscribe(()=>{this.cdr.markForCheck()})}ngOnInit(){this.directionality.change?.pipe(wt(this.destroy$)).subscribe(o=>{this.dir=o,this.cdr.detectChanges()}),this.dir=this.directionality.value}addPanel(o){this.listOfNzCollapsePanelComponent.push(o)}removePanel(o){this.listOfNzCollapsePanelComponent.splice(this.listOfNzCollapsePanelComponent.indexOf(o),1)}click(o){this.nzAccordion&&!o.nzActive&&this.listOfNzCollapsePanelComponent.filter(s=>s!==o).forEach(s=>{s.nzActive&&(s.nzActive=!1,s.nzActiveChange.emit(s.nzActive),s.markForCheck())}),o.nzActive=!o.nzActive,o.nzActiveChange.emit(o.nzActive)}};t.\u0275fac=function(s){return new(s||t)(Q(dr),Q(cn),Q(Ti),Q(Xi))},t.\u0275cmp=Ee({type:t,selectors:[["nz-collapse"]],hostAttrs:[1,"ant-collapse"],hostVars:10,hostBindings:function(s,u){s&2&&Bt("ant-collapse-icon-position-start",u.nzExpandIconPosition==="start")("ant-collapse-icon-position-end",u.nzExpandIconPosition==="end")("ant-collapse-ghost",u.nzGhost)("ant-collapse-borderless",!u.nzBordered)("ant-collapse-rtl",u.dir==="rtl")},inputs:{nzAccordion:[2,"nzAccordion","nzAccordion",pt],nzBordered:[2,"nzBordered","nzBordered",pt],nzGhost:[2,"nzGhost","nzGhost",pt],nzExpandIconPosition:"nzExpandIconPosition"},exportAs:["nzCollapse"],standalone:!0,features:[Fr([Xi]),kn,Oe],ngContentSelectors:ZS,decls:1,vars:0,template:function(s,u){s&1&&(pi(),mi(0))},encapsulation:2,changeDetection:0});let e=t;return Kt([Qt()],e.prototype,"nzAccordion",void 0),Kt([Qt()],e.prototype,"nzBordered",void 0),Kt([Qt()],e.prototype,"nzGhost",void 0),e})(),$S="collapsePanel",o0=(()=>{let t=class t{markForCheck(){this.cdr.markForCheck()}constructor(o,s,u,d){this.nzConfigService=o,this.ngZone=s,this.cdr=u,this.destroy$=d,this._nzModuleName=$S,this.nzActive=!1,this.nzDisabled=!1,this.nzShowArrow=!0,this.nzActiveChange=new Bn,this.nzCollapseComponent=Rt(r0,{host:!0}),this.noAnimation=Rt(qr,{optional:!0}),this.nzConfigService.getConfigChangeEventForComponent($S).pipe(wt(this.destroy$)).subscribe(()=>{this.cdr.markForCheck()})}ngOnInit(){this.nzCollapseComponent.addPanel(this),this.ngZone.runOutsideAngular(()=>Es(this.collapseHeader.nativeElement,"click").pipe(Bo(()=>!this.nzDisabled),wt(this.destroy$)).subscribe(()=>{this.ngZone.run(()=>{this.nzCollapseComponent.click(this),this.cdr.markForCheck()})}))}ngOnDestroy(){this.nzCollapseComponent.removePanel(this)}};t.\u0275fac=function(s){return new(s||t)(Q(dr),Q(hr),Q(cn),Q(Xi))},t.\u0275cmp=Ee({type:t,selectors:[["nz-collapse-panel"]],viewQuery:function(s,u){if(s&1&&qn(Hj,7),s&2){let d;Yt(d=Jt())&&(u.collapseHeader=d.first)}},hostAttrs:[1,"ant-collapse-item"],hostVars:6,hostBindings:function(s,u){s&2&&Bt("ant-collapse-no-arrow",!u.nzShowArrow)("ant-collapse-item-active",u.nzActive)("ant-collapse-item-disabled",u.nzDisabled)},inputs:{nzActive:[2,"nzActive","nzActive",pt],nzDisabled:[2,"nzDisabled","nzDisabled",pt],nzShowArrow:[2,"nzShowArrow","nzShowArrow",pt],nzExtra:"nzExtra",nzHeader:"nzHeader",nzExpandedIcon:"nzExpandedIcon"},outputs:{nzActiveChange:"nzActiveChange"},exportAs:["nzCollapsePanel"],standalone:!0,features:[Fr([Xi]),kn,Oe],ngContentSelectors:ZS,decls:9,vars:8,consts:[["collapseHeader",""],["role","button",1,"ant-collapse-header"],[1,"ant-collapse-header-text"],[4,"nzStringTemplateOutlet"],[1,"ant-collapse-extra"],[1,"ant-collapse-content"],[1,"ant-collapse-content-box"],["nz-icon","",1,"ant-collapse-arrow",3,"nzType","nzRotate"]],template:function(s,u){s&1&&(pi(),E(0,"div",1,0),K(2,Vj,2,1,"div"),E(3,"span",2),K(4,Gj,2,1,"ng-container",3),I(),K(5,Yj,2,1,"div",4),I(),E(6,"div",5)(7,"div",6),mi(8),I()()),s&2&&(Qi("aria-expanded",u.nzActive),S(2),pe(u.nzShowArrow?2:-1),S(2),B("nzStringTemplateOutlet",u.nzHeader),S(),pe(u.nzExtra?5:-1),S(),Bt("ant-collapse-content-active",u.nzActive),B("@.disabled",!!(u.noAnimation!=null&&u.noAnimation.nzNoAnimation))("@collapseMotion",u.nzActive?"expanded":"hidden"))},dependencies:[_i,gi,Sn,Fn],encapsulation:2,data:{animation:[W_]},changeDetection:0});let e=t;return Kt([Qt()],e.prototype,"nzShowArrow",void 0),e})(),jS=(()=>{let t=class t{};t.\u0275fac=function(s){return new(s||t)},t.\u0275mod=Wn({type:t}),t.\u0275inj=Hn({imports:[o0]});let e=t;return e})();function Qj(e,t){if(e&1&&(E(0,"div",3),U(1),I()),e&2){let i=t.$index,o=q().$index,s=q();S(),yt(s.getSeatNumber(o,i))}}function Xj(e,t){if(e&1&&(E(0,"div",3),U(1),I()),e&2){let i=t.$index,o=q().$index,s=q();S(),yt(s.getSeatNumber(o,s.carriage.leftSeats+i))}}function eU(e,t){if(e&1&&(E(0,"div",1)(1,"div",2),ln(2,Qj,2,1,"div",3,$o),I(),E(4,"div",4),U(5,"Aisle"),I(),E(6,"div",5),ln(7,Xj,2,1,"div",3,$o),I()()),e&2){let i=q();S(2),un(i.leftSeatsArray),S(5),un(i.rightSeatsArray)}}var US=(()=>{let t=class t{getSeatNumber(o,s){let u=this.carriage.leftSeats+this.carriage.rightSeats;return o*u+s+1}get rowsArray(){return Array.from({length:this.carriage.rows},(o,s)=>s)}get leftSeatsArray(){return Array.from({length:this.carriage.leftSeats},(o,s)=>s)}get rightSeatsArray(){return Array.from({length:this.carriage.rightSeats},(o,s)=>s)}};t.\u0275fac=function(s){return new(s||t)},t.\u0275cmp=Ee({type:t,selectors:[["app-carriage-prototype"]],inputs:{carriage:"carriage"},standalone:!0,features:[Oe],decls:3,vars:0,consts:[[1,"carriage"],[1,"row"],[1,"left-seats"],[1,"seat"],[1,"aisle"],[1,"right-seats"]],template:function(s,u){s&1&&(E(0,"div",0),ln(1,eU,9,0,"div",1,$o),I()),s&2&&(S(),un(u.rowsArray))},styles:[".carriage[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center}.row[_ngcontent-%COMP%]{display:flex;justify-content:center;margin:10px 0}.left-seats[_ngcontent-%COMP%], .right-seats[_ngcontent-%COMP%]{display:flex}.seat[_ngcontent-%COMP%]{width:30px;height:30px;background-color:#d3d3d3;border:1px solid #000;display:flex;justify-content:center;align-items:center;margin:2px}.aisle[_ngcontent-%COMP%]{width:50px;text-align:center;line-height:30px;margin:0 10px}"],changeDetection:0});let e=t;return e})();var HS=(()=>{let t=class t{constructor(o){this.http=o,this.apiUrl="/api/carriage",this.carriageSubject=new Hg([]),this.carriages$=this.carriageSubject.asObservable()}getCarriages(){return this.http.get(this.apiUrl)}createCarriage(o){return this.http.post(this.apiUrl,o)}updateCarriage(o,s){return this.http.put(`${this.apiUrl}/${o}`,s)}setCarriages(o){this.carriageSubject.next(o)}};t.\u0275fac=function(s){return new(s||t)(oi(Pr))},t.\u0275prov=wn({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();function nU(e,t){if(e&1&&(E(0,"h2",9),U(1),I()),e&2){let i=q().$implicit;S(),yt(i.name)}}function iU(e,t){if(e&1){let i=Ft();se(0,"nz-divider",5),E(1,"button",1),it("click",function(){let s=Xe(i).$implicit,u=q(2);return et(u.onEdit(s))}),U(2,"Update"),I(),K(3,nU,2,1,"ng-template",null,0,tt),E(5,"nz-collapse",6)(6,"nz-collapse-panel",7),it("nzActiveChange",function(){Xe(i);let s=q(2);return et(s.toggleCollapse(s.isCollapsed))}),se(7,"app-carriage-prototype",8),I()()}if(e&2){let i=t.$implicit,o=He(4),s=q(2);B("nzText",o),S(6),B("nzHeader",s.isCollapsed?"Show Seat Map":"Hide Seat Map")("nzShowArrow",!1)("nzActive",!s.isCollapsed),S(),B("carriage",i)}}function rU(e,t){if(e&1){let i=Ft();st(0),E(1,"form",10)(2,"nz-form-item")(3,"nz-form-label",11),U(4,"Rows"),I(),E(5,"nz-form-control",11)(6,"input",12),su("ngModelChange",function(s){Xe(i);let u=q(2);return ou(u.carriageForm.rows,s)||(u.carriageForm.rows=s),et(s)}),I()()(),E(7,"nz-form-item")(8,"nz-form-label",11),U(9,"Left Seats"),I(),E(10,"nz-form-control",11)(11,"input",13),su("ngModelChange",function(s){Xe(i);let u=q(2);return ou(u.carriageForm.leftSeats,s)||(u.carriageForm.leftSeats=s),et(s)}),I()()(),E(12,"nz-form-item")(13,"nz-form-label",11),U(14,"Right Seats"),I(),E(15,"nz-form-control",11)(16,"input",14),su("ngModelChange",function(s){Xe(i);let u=q(2);return ou(u.carriageForm.rightSeats,s)||(u.carriageForm.rightSeats=s),et(s)}),I()()()(),se(17,"app-carriage-prototype",8),at()}if(e&2){let i=q(2);S(3),B("nzSpan",6),S(2),B("nzSpan",14),S(),ru("ngModel",i.carriageForm.rows),S(2),B("nzSpan",6),S(2),B("nzSpan",14),S(),ru("ngModel",i.carriageForm.leftSeats),S(2),B("nzSpan",6),S(2),B("nzSpan",14),S(),ru("ngModel",i.carriageForm.rightSeats),S(),B("carriage",i.carriageForm)}}function oU(e,t){if(e&1){let i=Ft();E(0,"div",2),ln(1,iU,8,5,null,null,$o),I(),E(3,"nz-modal",3),su("nzVisibleChange",function(s){Xe(i);let u=q();return ou(u.isModalVisible,s)||(u.isModalVisible=s),et(s)}),it("nzOnCancel",function(){Xe(i);let s=q();return et(s.onCancel())})("nzOnOk",function(){Xe(i);let s=q();return et(s.onSave())}),K(4,rU,18,10,"ng-container",4),I()}if(e&2){let i=q();S(),un(i.carriages()),S(2),ru("nzVisible",i.isModalVisible)}}var WS=(()=>{let t=class t{constructor(o){this.carriageService=o,this.carriages=i0(this.carriageService.carriages$,{initialValue:[]}),this.carriageForm={name:"",rows:16,leftSeats:2,rightSeats:3},this.isModalVisible=!1,this.isCollapsed=!0}ngOnInit(){this.loadCarriages()}loadCarriages(){this.carriageService.getCarriages().subscribe(o=>{this.carriageService.setCarriages(o)})}onCreate(){this.carriageForm={name:"",rows:16,leftSeats:2,rightSeats:3},this.isModalVisible=!0}onEdit(o){this.carriageForm=Yn({},o),this.isModalVisible=!0}onSave(){this.isModalVisible=!1}onCancel(){this.isModalVisible=!1}toggleCollapse(o){this.isCollapsed=!o}};t.\u0275fac=function(s){return new(s||t)(Q(HS))},t.\u0275cmp=Ee({type:t,selectors:[["app-carriages"]],standalone:!0,features:[Oe],decls:3,vars:1,consts:[["titleTemplate",""],["nz-button","",3,"click"],[1,"carriages-list"],["nzTitle","Carriage Form",3,"nzVisibleChange","nzOnCancel","nzOnOk","nzVisible"],[4,"nzModalContent"],[3,"nzText"],[1,"seat-map-collapse"],[3,"nzActiveChange","nzHeader","nzShowArrow","nzActive"],[3,"carriage"],["nz-typography",""],["nz-form",""],[3,"nzSpan"],["nz-input","","name","rows",3,"ngModelChange","ngModel"],["nz-input","","name","leftSeats",3,"ngModelChange","ngModel"],["nz-input","","name","rightSeats",3,"ngModelChange","ngModel"]],template:function(s,u){s&1&&(E(0,"button",1),it("click",function(){return u.onCreate()}),U(1,"Create"),I(),K(2,oU,5,1)),s&2&&(S(2),pe(u.carriages().length>0?2:-1))},dependencies:[US,Rr,Ai,Lr,Nr,H_,U_,j_,Na,kr,Br,Da,$r,La,Zr,jS,o0,r0,_h,gh,ah,Mr,Ir,Er,Or,O_,E_,Dr],styles:[".carriages-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:flex-start;gap:1rem}.seat-map-collapse[_ngcontent-%COMP%]{align-self:normal;background-color:#ececec;text-align:center}"],changeDetection:0});let e=t;return e})();function sU(e,t){if(e&1&&(E(0,"nz-auto-option",23),U(1),I()),e&2){let i=t.$implicit;B("nzValue",i.name),S(),We(" ",i.name," ")}}function aU(e,t){if(e&1&&(E(0,"nz-auto-option",23),U(1),I()),e&2){let i=t.$implicit;B("nzValue",i.city),S(),We(" ",i.city," ")}}function lU(e,t){if(e&1){let i=Ft();E(0,"button",27),it("click",function(){Xe(i);let s=q().index,u=q();return et(u.removeRelation(s))}),se(1,"i",28),I()}}function uU(e,t){if(e&1&&(E(0,"div",24)(1,"nz-input-group",25),se(2,"input",26),E(3,"nz-autocomplete",null,0),K(5,aU,2,2,"nz-auto-option",8),I(),K(6,lU,2,0,"ng-template",null,1,tt),I()()),e&2){let i=t.index,o=He(4),s=He(7),u=q();B("formGroupName",i),S(),B("nzSuffix",s),S(),B("nzAutocomplete",o),S(3),B("ngForOf",u.stations)}}function cU(e,t){if(e&1&&(E(0,"li"),U(1),I()),e&2){let i=t.$implicit,o=q(3);S(),We(" ",o.getNameById(i.id)," ")}}function hU(e,t){if(e&1&&(E(0,"h4"),U(1,"Connected To:"),I(),E(2,"ul",31),K(3,cU,2,1,"li",22),I()),e&2){let i=q().$implicit;S(3),B("ngForOf",i.connectedTo)}}function dU(e,t){if(e&1&&(E(0,"li"),U(1),I()),e&2){let i=t.$implicit,o=q(4);S(),We(" City: ",o.getNameById(i.id)," ")}}function fU(e,t){if(e&1&&(E(0,"h4"),U(1,"Connected To:"),I(),E(2,"ul"),K(3,dU,2,1,"li",22),I()),e&2){let i=q(2).$implicit;S(3),B("ngForOf",i.connectedTo)}}function pU(e,t){if(e&1){let i=Ft();E(0,"div",30)(1,"h3"),U(2),I(),E(3,"button",27),it("click",function(){Xe(i);let s=q().$implicit,u=q();return et(u.deleteStation(s.id))}),se(4,"i",28),I()(),E(5,"p"),U(6),I(),E(7,"p"),U(8),I(),K(9,fU,4,1)}if(e&2){let i=q().$implicit;S(2),yt(i.city),S(4),We("Latitude: ",i.latitude,""),S(2),We("Longitude: ",i.longitude,""),S(),pe(i.connectedTo.length>0?9:-1)}}function mU(e,t){if(e&1){let i=Ft();E(0,"div")(1,"nz-card",29)(2,"div")(3,"div",30)(4,"p"),U(5),I(),E(6,"button",27),it("click",function(){let s=Xe(i).$implicit,u=q();return et(u.deleteStation(s.id))}),se(7,"i",28),I()(),E(8,"p"),U(9),I(),E(10,"p"),U(11),I(),K(12,hU,4,1),I()(),K(13,pU,10,4,"ng-template",null,2,tt),I()}if(e&2){let i=t.$implicit;S(5),yt(i.city),S(4),We("Latitude: ",i.latitude,""),S(2),We("Longitude: ",i.longitude,""),S(),pe(i.connectedTo.length>0?12:-1)}}var VS=(()=>{let t=class t{constructor(o,s,u,d,m){this.fb=o,this.geoService=s,this.searchService=u,this.markerService=d,this.formUtilsService=m,this.stations=[],this.relatedCities=[],this.stations$=Zc([]),this.stationForm=this.fb.group({city:["",zn.required],latitude:["",zn.required],longitude:["",zn.required],relations:this.fb.array([])}),this.cityOptions$=this.formUtilsService.createSearchObservable(this.city,"coord",this.stationForm),this.updateStation(),this.city.valueChanges.pipe(Uc(300),Vg(v=>this.geoService.searchCity(v))).subscribe(v=>{if(v.length>0){let{lat:_,lon:z}=v[0];this.stationForm.patchValue({latitude:_,longitude:z}),this.updateRelatedStations(v[0].name)}})}updateRelatedStations(o){this.stations.length===0&&this.updateStation(),this.setRelatedCities(o)}setRelatedCities(o){let s=this.stations.find(u=>u.city===o);if(s){let u=s.connectedTo.map(m=>m.id),d=this.stations.filter(m=>u.includes(m.id));this.relations.clear(),d.forEach(m=>{this.relations.push(this.fb.group({cityName:[m.city],cityId:[m.id]}))})}}get city(){return this.stationForm.get("city")}get relations(){return this.stationForm.get("relations")}updateStation(){this.searchService.getStations().pipe(Os(1)).subscribe(o=>{this.stations=o})}createRelation(){return this.fb.group({cityName:[""],cityId:[""]})}addRelation(){this.relations.push(this.createRelation())}removeRelation(o){this.relations.removeAt(o)}searchCity(o){o&&this.geoService.searchCity(o).subscribe(s=>{if(s.length>0){let{lat:u,lon:d}=s[0];this.stationForm.patchValue({latitude:u,longitude:d})}})}getIdByName(o){return this.stations.find(s=>s.city===o)?.id??0}getNameById(o){return this.stations.find(s=>s.id===o)?.city??""}addStation(){if(this.stationForm.valid){let o=this.stationForm.value,s={city:o.city,latitude:o.latitude,longitude:o.longitude,relations:this.relations.controls.map(u=>this.getIdByName(u.value.cityName))};this.searchService.addStation(s).pipe(Os(1)).subscribe(()=>{this.mapComponent.loadStations(),this.relations.push(this.createRelation()),this.stationForm.reset(),this.relations.clear(),this.updateStation()})}}deleteStation(o){this.searchService.deleteStation(o).subscribe(()=>{this.mapComponent.loadStations(),this.updateStation()})}onMarkerClick(o){this.stationForm.get("city")?.setValue(o.city),this.stationForm.get("latitude")?.setValue(o.latitude),this.stationForm.get("longitude")?.setValue(o.longitude),this.markerService.selectMarkerByCity(o.city,"from",this.setFormValue.bind(this))}setFormValue(o,s){this.stationForm.get(o)?.setValue(s)}};t.\u0275fac=function(s){return new(s||t)(Q(oh),Q(ml),Q(is),Q(dl),Q(Ad))},t.\u0275cmp=Ee({type:t,selectors:[["app-station-form"]],viewQuery:function(s,u){if(s&1&&qn(fl,5),s&2){let d;Yt(d=Jt())&&(u.mapComponent=d.first)}},standalone:!0,features:[Oe],decls:39,vars:18,consts:[["auto",""],["suffixButton",""],["coverTemplate",""],[1,"station-form"],[1,"ant-advanced-station-form",3,"ngSubmit","formGroup"],["nzFor","city",3,"nzSpan"],[3,"nzSpan"],["nz-input","","id","city","formControlName","city","placeholder","Enter city name",3,"nzAutocomplete"],[3,"nzValue",4,"ngFor","ngForOf"],["nzFor","latitude",3,"nzSpan"],["nz-input","","id","latitude","formControlName","latitude","placeholder","Latitude"],["nzFor","longitude",3,"nzSpan"],["nz-input","","id","longitude","formControlName","longitude","placeholder","Longitude"],["formArrayName","relations"],[3,"formGroupName",4,"ngFor","ngForOf"],["nz-button","","nzType","dashed","type","button",1,"add-relation",3,"click"],["nz-icon","","nzType","plus"],[3,"nzSpan","nzOffset"],["nz-button","","nzType","primary",3,"disabled"],[1,"map-cont"],[3,"markerClicked"],[1,"stations-list"],[4,"ngFor","ngForOf"],[3,"nzValue"],[3,"formGroupName"],[3,"nzSuffix"],["nz-input","","formControlName","cityName","placeholder","Enter related city",3,"nzAutocomplete"],["nz-button","","nzType","text",3,"click"],["nz-icon","","nzType","delete","nzTheme","outline"],["nzHoverable","",2,"width","100%","height","100%"],[1,"title-controller"],[1,"ul-line"]],template:function(s,u){if(s&1){let d=Ft();E(0,"div",3)(1,"form",4),it("ngSubmit",function(){return Xe(d),et(u.addStation())}),E(2,"nz-form-item")(3,"nz-form-label",5),U(4,"City"),I(),E(5,"nz-form-control",6)(6,"nz-input-group"),se(7,"input",7),E(8,"nz-autocomplete",null,0),K(10,sU,2,2,"nz-auto-option",8),Qn(11,"async"),I()()()(),E(12,"nz-form-item")(13,"nz-form-label",9),U(14,"Latitude"),I(),E(15,"nz-form-control",6),se(16,"input",10),I()(),E(17,"nz-form-item")(18,"nz-form-label",11),U(19,"Longitude"),I(),E(20,"nz-form-control",6),se(21,"input",12),I()(),E(22,"nz-form-item")(23,"nz-form-label",6),U(24,"Relations"),I(),E(25,"nz-form-control",6)(26,"div",13),K(27,uU,8,4,"div",14),I(),E(28,"button",15),it("click",function(){return Xe(d),et(u.addRelation())}),se(29,"i",16),U(30," Add Relation "),I()()(),E(31,"nz-form-item")(32,"nz-form-control",17)(33,"button",18),U(34,"Add Station"),I()()()(),E(35,"div",19)(36,"app-map",20),it("markerClicked",function(v){return Xe(d),et(u.onMarkerClick(v))}),I()()(),E(37,"div",21),K(38,mU,15,4,"div",22),I()}if(s&2){let d=He(9);S(),B("formGroup",u.stationForm),S(2),B("nzSpan",6),S(2),B("nzSpan",14),S(2),B("nzAutocomplete",d),S(3),B("ngForOf",ho(11,16,u.cityOptions$)),S(3),B("nzSpan",6),S(2),B("nzSpan",14),S(3),B("nzSpan",6),S(2),B("nzSpan",14),S(3),B("nzSpan",6),S(2),B("nzSpan",14),S(2),B("ngForOf",u.relations.controls),S(5),B("nzSpan",14)("nzOffset",6),S(),B("disabled",u.stationForm.invalid),S(5),B("ngForOf",u.stations)}},dependencies:[Ar,Xc,th,Dr,Mr,Ir,Er,Or,Uo,Ho,M_,D_,fl,$r,La,Zr,Ba,Vo,Wo,Ra,Ai,dh,kr,Br,ph,fh,_d,gd,Js,Ru,ka,Sn,Fn,$a,qa],styles:[".station-form[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:center;padding:20px}.ant-advanced-station-form[_ngcontent-%COMP%]{display:flex;flex-direction:column;width:40%}.map-cont[_ngcontent-%COMP%]{display:flex;min-width:300px;flex-basis:60%}.stations-list[_ngcontent-%COMP%]{gap:10px;padding:20px;display:grid;grid-template-columns:repeat(3,1fr);grid-template-rows:repeat(3,1fr)}.title-controller[_ngcontent-%COMP%]{display:flex;justify-content:space-between;font-size:1.5em;font-weight:600}.ul-line[_ngcontent-%COMP%]{display:flex;gap:10px;flex-wrap:wrap}@media (min-width: 601px) and (max-width: 900px){.stations-list[_ngcontent-%COMP%]{grid-template-columns:repeat(2,1fr);grid-template-rows:repeat(2,1fr)}}@media (max-width: 600px){.ant-advanced-station-form[_ngcontent-%COMP%]{display:flex;flex-direction:column;width:100%;padding:20px}.station-form[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center}.stations-list[_ngcontent-%COMP%]{grid-template-columns:repeat(1,1fr);grid-template-rows:repeat(1,1fr)}}"]});let e=t;return e})();var GS=[{path:"",component:zS},{path:"stations",component:VS,canActivate:[ku]},{path:"signup",component:IS,title:"Sign-Up Page"},{path:"signin",component:ES,title:"Sign-In Page",canActivate:[n0]},{path:"routes",loadComponent:()=>import("./chunk-5EM7YAEL.js").then(e=>e.RoutesComponent),title:"Routes",canActivate:[ku]},{path:"routes/:id",loadComponent:()=>import("./chunk-Z5HPFLM3.js").then(e=>e.RouteComponent),title:"Ride",canActivate:[ku]},{path:"orders",component:kS,canActivate:[n0]},{path:"carriages",component:WS,canActivate:[ku]},{path:"profile",loadComponent:()=>import("./chunk-WEWEBZN6.js").then(e=>e.ProfileComponent),title:"Profile Page",canActivate:[OS]},{path:"**",loadComponent:()=>import("./chunk-QUILNADH.js").then(e=>e.NotFoundComponent),title:"404 Page"}];var KS=(e,t)=>{let i=localStorage.getItem("token");if(i){let o=e.clone({headers:e.headers.set("Authorization",`Bearer ${i}`)});return t(o)}return t(e)};g_(sS);var YS={providers:[b_(GS),P_(A_),Xg(ah),aS(),v_(y_([KS])),hh]};var gU=["drawerTemplate"];function _U(e,t){if(e&1){let i=Ft();E(0,"div",9),it("click",function(){Xe(i);let s=q(2);return et(s.maskClick())}),I()}if(e&2){let i=q(2);B("@drawerMaskMotion",void 0)("ngStyle",i.nzMaskStyle)}}function vU(e,t){if(e&1&&(st(0),se(1,"span",17),at()),e&2){let i=t.$implicit;S(),B("nzType",i)}}function yU(e,t){if(e&1){let i=Ft();E(0,"button",15),it("click",function(){Xe(i);let s=q(3);return et(s.closeClick())}),K(1,vU,2,1,"ng-container",16),I()}if(e&2){let i=q(3);S(),B("nzStringTemplateOutlet",i.nzCloseIcon)}}function xU(e,t){if(e&1&&(st(0),se(1,"div",18),at()),e&2){let i=q(4);S(),B("innerHTML",i.nzTitle,Vc)}}function CU(e,t){if(e&1&&(E(0,"div",13),K(1,xU,2,1,"ng-container",16),I()),e&2){let i=q(3);S(),B("nzStringTemplateOutlet",i.nzTitle)}}function wU(e,t){if(e&1&&(st(0),se(1,"div",18),at()),e&2){let i=q(4);S(),B("innerHTML",i.nzExtra,Vc)}}function bU(e,t){if(e&1&&(E(0,"div",14),K(1,wU,2,1,"ng-container",16),I()),e&2){let i=q(3);S(),B("nzStringTemplateOutlet",i.nzExtra)}}function zU(e,t){if(e&1&&(E(0,"div",10)(1,"div",11),K(2,yU,2,1,"button",12)(3,CU,2,1,"div",13),I(),K(4,bU,2,1,"div",14),I()),e&2){let i=q(2);Bt("ant-drawer-header-close-only",!i.nzTitle),S(2),pe(i.nzClosable?2:-1),S(),pe(i.nzTitle?3:-1),S(),pe(i.nzExtra?4:-1)}}function FU(e,t){}function SU(e,t){e&1&&Yc(0)}function TU(e,t){if(e&1&&K(0,SU,1,0,"ng-container",19),e&2){let i=q(3);B("ngTemplateOutlet",i.nzContent)("ngTemplateOutletContext",i.templateContext)}}function AU(e,t){if(e&1&&K(0,TU,1,2,"ng-container"),e&2){let i=q(2);pe(i.isNzContentTemplateRef?0:-1)}}function PU(e,t){}function IU(e,t){if(e&1&&K(0,PU,0,0,"ng-template",20),e&2){let i=q(3);B("ngTemplateOutlet",i.contentFromContentChild)}}function EU(e,t){if(e&1&&K(0,IU,1,1,null,20),e&2){let i=q(2);pe(i.contentFromContentChild&&(i.isOpen||i.inAnimation)?0:-1)}}function OU(e,t){if(e&1&&(st(0),se(1,"div",18),at()),e&2){let i=q(3);S(),B("innerHTML",i.nzFooter,Vc)}}function MU(e,t){if(e&1&&(E(0,"div",8),K(1,OU,2,1,"ng-container",16),I()),e&2){let i=q(2);S(),B("nzStringTemplateOutlet",i.nzFooter)}}function DU(e,t){if(e&1&&(E(0,"div",1),K(1,_U,1,2,"div",2),E(2,"div")(3,"div",3)(4,"div",4),K(5,zU,5,5,"div",5),E(6,"div",6),K(7,FU,0,0,"ng-template",7)(8,AU,1,1)(9,EU,1,1),I(),K(10,MU,2,1,"div",8),I()()()()),e&2){let i=q();Jn("transform",i.offsetTransform)("transition",i.placementChanging?"none":null)("z-index",i.nzZIndex),Bt("ant-drawer-rtl",i.dir==="rtl")("ant-drawer-open",i.isOpen)("no-mask",!i.nzMask)("ant-drawer-top",i.nzPlacement==="top")("ant-drawer-bottom",i.nzPlacement==="bottom")("ant-drawer-right",i.nzPlacement==="right")("ant-drawer-left",i.nzPlacement==="left"),B("nzNoAnimation",i.nzNoAnimation),S(),pe(i.nzMask&&i.isOpen?1:-1),S(),Kc("ant-drawer-content-wrapper ",i.nzWrapClassName,""),Jn("width",i.width)("height",i.height)("transform",i.transform)("transition",i.placementChanging?"none":null),S(2),Jn("height",i.isLeftOrRight?"100%":null),S(),pe(i.nzTitle||i.nzClosable?5:-1),S(),B("ngStyle",i.nzBodyStyle),S(2),pe(i.nzContent?8:9),S(2),pe(i.nzFooter?10:-1)}}var a0=(()=>{let t=class t{constructor(o){this.templateRef=o}};t.\u0275fac=function(s){return new(s||t)(Q(co))},t.\u0275dir=iu({type:t,selectors:[["","nzDrawerContent",""]],exportAs:["nzDrawerContent"],standalone:!0});let e=t;return e})(),JS=378,QS=736,LU=new Wc("NZ_DRAWER_DATA"),Dd=class{},NU=300,RU="drawer",Ld=(()=>{let t=class t extends Dd{set nzVisible(o){this.isOpen=o}get nzVisible(){return this.isOpen}get offsetTransform(){if(!this.isOpen||this.nzOffsetX+this.nzOffsetY===0)return null;switch(this.nzPlacement){case"left":return`translateX(${this.nzOffsetX}px)`;case"right":return`translateX(-${this.nzOffsetX}px)`;case"top":return`translateY(${this.nzOffsetY}px)`;case"bottom":return`translateY(-${this.nzOffsetY}px)`}}get transform(){if(this.isOpen)return null;switch(this.nzPlacement){case"left":return"translateX(-100%)";case"right":return"translateX(100%)";case"top":return"translateY(-100%)";case"bottom":return"translateY(100%)"}}get width(){if(this.isLeftOrRight){let o=this.nzSize==="large"?QS:JS;return this.nzWidth===void 0?Rs(o):Rs(this.nzWidth)}return null}get height(){if(!this.isLeftOrRight){let o=this.nzSize==="large"?QS:JS;return this.nzHeight===void 0?Rs(o):Rs(this.nzHeight)}return null}get isLeftOrRight(){return this.nzPlacement==="left"||this.nzPlacement==="right"}get afterOpen(){return this.nzAfterOpen.asObservable()}get afterClose(){return this.nzAfterClose.asObservable()}get isNzContentTemplateRef(){return z_(this.nzContent)}constructor(o,s,u,d,m,v,_,z,F,N){super(),this.cdr=o,this.nzConfigService=s,this.renderer=u,this.overlay=d,this.injector=m,this.changeDetectorRef=v,this.focusTrapFactory=_,this.viewContainerRef=z,this.overlayKeyboardDispatcher=F,this.directionality=N,this._nzModuleName=RU,this.nzCloseIcon="close",this.nzClosable=!0,this.nzMaskClosable=!0,this.nzMask=!0,this.nzCloseOnNavigation=!0,this.nzNoAnimation=!1,this.nzKeyboard=!0,this.nzPlacement="right",this.nzSize="default",this.nzMaskStyle={},this.nzBodyStyle={},this.nzZIndex=1e3,this.nzOffsetX=0,this.nzOffsetY=0,this.componentInstance=null,this.componentRef=null,this.nzOnViewInit=new Bn,this.nzOnClose=new Bn,this.nzVisibleChange=new Bn,this.destroy$=new Rn,this.placementChanging=!1,this.isOpen=!1,this.inAnimation=!1,this.templateContext={$implicit:void 0,drawerRef:this},this.nzAfterOpen=new Rn,this.nzAfterClose=new Rn,this.nzDirection=void 0,this.dir="ltr",this.document=Rt(Ia)}ngOnInit(){this.directionality.change?.pipe(wt(this.destroy$)).subscribe(o=>{this.dir=o,this.cdr.detectChanges()}),this.dir=this.nzDirection||this.directionality.value,this.attachOverlay(),this.updateOverlayStyle(),this.updateBodyOverflow(),this.templateContext={$implicit:this.nzData||this.nzContentParams,drawerRef:this},this.changeDetectorRef.detectChanges()}ngAfterViewInit(){this.attachBodyContent(),this.nzOnViewInit.observers.length&&setTimeout(()=>{this.nzOnViewInit.emit()})}ngOnChanges(o){let{nzPlacement:s,nzVisible:u}=o;u&&(o.nzVisible.currentValue?this.open():this.close()),s&&!s.isFirstChange()&&this.triggerPlacementChangeCycleOnce()}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete(),clearTimeout(this.placementChangeTimeoutId),this.disposeOverlay()}getAnimationDuration(){return this.nzNoAnimation?0:NU}triggerPlacementChangeCycleOnce(){this.nzNoAnimation||(this.placementChanging=!0,this.changeDetectorRef.markForCheck(),clearTimeout(this.placementChangeTimeoutId),this.placementChangeTimeoutId=setTimeout(()=>{this.placementChanging=!1,this.changeDetectorRef.markForCheck()},this.getAnimationDuration()))}close(o){this.isOpen=!1,this.inAnimation=!0,this.nzVisibleChange.emit(!1),this.updateOverlayStyle(),this.overlayKeyboardDispatcher.remove(this.overlayRef),this.changeDetectorRef.detectChanges(),setTimeout(()=>{this.updateBodyOverflow(),this.restoreFocus(),this.inAnimation=!1,this.nzAfterClose.next(o),this.nzAfterClose.complete(),this.componentInstance=null,this.componentRef=null},this.getAnimationDuration())}open(){this.attachOverlay(),this.isOpen=!0,this.inAnimation=!0,this.nzVisibleChange.emit(!0),this.overlayKeyboardDispatcher.add(this.overlayRef),this.updateOverlayStyle(),this.updateBodyOverflow(),this.savePreviouslyFocusedElement(),this.trapFocus(),this.changeDetectorRef.detectChanges(),setTimeout(()=>{this.inAnimation=!1,this.changeDetectorRef.detectChanges(),this.nzAfterOpen.next()},this.getAnimationDuration())}getContentComponent(){return this.componentInstance}getContentComponentRef(){return this.componentRef}closeClick(){this.nzOnClose.emit()}maskClick(){this.nzMaskClosable&&this.nzMask&&this.nzOnClose.emit()}attachBodyContent(){if(this.bodyPortalOutlet.dispose(),this.nzContent instanceof t_){let o=Ds.create({parent:this.injector,providers:[{provide:Dd,useValue:this},{provide:LU,useValue:this.nzData}]}),s=new np(this.nzContent,null,o);this.componentRef=this.bodyPortalOutlet.attachComponentPortal(s),this.componentInstance=this.componentRef.instance,Object.assign(this.componentRef.instance,this.nzData||this.nzContentParams),this.componentRef.changeDetectorRef.detectChanges()}}attachOverlay(){this.overlayRef||(this.portal=new lh(this.drawerTemplate,this.viewContainerRef),this.overlayRef=this.overlay.create(this.getOverlayConfig()),$_(this.overlayRef,this.nzZIndex)),this.overlayRef&&!this.overlayRef.hasAttached()&&(this.overlayRef.attach(this.portal),this.overlayRef.keydownEvents().pipe(wt(this.destroy$)).subscribe(o=>{o.keyCode===27&&this.isOpen&&this.nzKeyboard&&this.nzOnClose.emit()}),this.overlayRef.detachments().pipe(wt(this.destroy$)).subscribe(()=>{this.disposeOverlay()}))}disposeOverlay(){this.overlayRef?.dispose(),this.overlayRef=null}getOverlayConfig(){return new ch({disposeOnNavigation:this.nzCloseOnNavigation,positionStrategy:this.overlay.position().global(),scrollStrategy:this.overlay.scrollStrategies.block()})}updateOverlayStyle(){this.overlayRef&&this.overlayRef.overlayElement&&this.renderer.setStyle(this.overlayRef.overlayElement,"pointer-events",this.isOpen?"auto":"none")}updateBodyOverflow(){this.overlayRef&&(this.isOpen?this.overlayRef.getConfig().scrollStrategy.enable():this.overlayRef.getConfig().scrollStrategy.disable())}savePreviouslyFocusedElement(){this.document&&!this.previouslyFocusedElement&&(this.previouslyFocusedElement=this.document.activeElement,this.previouslyFocusedElement&&typeof this.previouslyFocusedElement.blur=="function"&&this.previouslyFocusedElement.blur())}trapFocus(){!this.focusTrap&&this.overlayRef&&this.overlayRef.overlayElement&&(this.focusTrap=this.focusTrapFactory.create(this.overlayRef.overlayElement),this.focusTrap.focusInitialElement())}restoreFocus(){this.previouslyFocusedElement&&typeof this.previouslyFocusedElement.focus=="function"&&this.previouslyFocusedElement.focus(),this.focusTrap&&this.focusTrap.destroy()}};t.\u0275fac=function(s){return new(s||t)(Q(cn),Q(dr),Q(Pa),Q(lu),Q(Ds),Q(cn),Q(Z_),Q(Gc),Q(R_),Q(Ti))},t.\u0275cmp=Ee({type:t,selectors:[["nz-drawer"]],contentQueries:function(s,u,d){if(s&1&&Zo(d,a0,7,co),s&2){let m;Yt(m=Jt())&&(u.contentFromContentChild=m.first)}},viewQuery:function(s,u){if(s&1&&(qn(gU,7),qn(uh,5)),s&2){let d;Yt(d=Jt())&&(u.drawerTemplate=d.first),Yt(d=Jt())&&(u.bodyPortalOutlet=d.first)}},inputs:{nzContent:"nzContent",nzCloseIcon:"nzCloseIcon",nzClosable:[2,"nzClosable","nzClosable",pt],nzMaskClosable:[2,"nzMaskClosable","nzMaskClosable",pt],nzMask:[2,"nzMask","nzMask",pt],nzCloseOnNavigation:[2,"nzCloseOnNavigation","nzCloseOnNavigation",pt],nzNoAnimation:[2,"nzNoAnimation","nzNoAnimation",pt],nzKeyboard:[2,"nzKeyboard","nzKeyboard",pt],nzTitle:"nzTitle",nzExtra:"nzExtra",nzFooter:"nzFooter",nzPlacement:"nzPlacement",nzSize:"nzSize",nzMaskStyle:"nzMaskStyle",nzBodyStyle:"nzBodyStyle",nzWrapClassName:"nzWrapClassName",nzWidth:"nzWidth",nzHeight:"nzHeight",nzZIndex:"nzZIndex",nzOffsetX:"nzOffsetX",nzOffsetY:"nzOffsetY",nzVisible:[2,"nzVisible","nzVisible",pt]},outputs:{nzOnViewInit:"nzOnViewInit",nzOnClose:"nzOnClose",nzVisibleChange:"nzVisibleChange"},exportAs:["nzDrawer"],standalone:!0,features:[kn,u_,bn,Oe],decls:2,vars:0,consts:[["drawerTemplate",""],[1,"ant-drawer",3,"nzNoAnimation"],[1,"ant-drawer-mask",3,"ngStyle"],[1,"ant-drawer-content"],[1,"ant-drawer-wrapper-body"],[1,"ant-drawer-header",3,"ant-drawer-header-close-only"],[1,"ant-drawer-body",3,"ngStyle"],["cdkPortalOutlet",""],[1,"ant-drawer-footer"],[1,"ant-drawer-mask",3,"click","ngStyle"],[1,"ant-drawer-header"],[1,"ant-drawer-header-title"],["aria-label","Close",1,"ant-drawer-close"],[1,"ant-drawer-title"],[1,"ant-drawer-extra"],["aria-label","Close",1,"ant-drawer-close",3,"click"],[4,"nzStringTemplateOutlet"],["nz-icon","",3,"nzType"],[3,"innerHTML"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[3,"ngTemplateOutlet"]],template:function(s,u){s&1&&K(0,DU,11,39,"ng-template",null,0,tt)},dependencies:[qr,jo,_i,gi,Sn,Fn,N_,uh,Tr],encapsulation:2,data:{animation:[V_]},changeDetection:0});let e=t;return Kt([Qt()],e.prototype,"nzMaskClosable",void 0),Kt([Qt()],e.prototype,"nzMask",void 0),Kt([Qt()],e.prototype,"nzCloseOnNavigation",void 0),Kt([Qt()],e.prototype,"nzDirection",void 0),e})(),s0=class{constructor(t,i){this.overlay=t,this.options=i,this.unsubscribe$=new Rn;let u=this.options,{nzOnCancel:o}=u,s=$c(u,["nzOnCancel"]);this.overlayRef=this.overlay.create(),this.drawerRef=this.overlayRef.attach(new np(Ld)).instance,this.updateOptions(s),this.drawerRef.savePreviouslyFocusedElement(),this.drawerRef.nzOnViewInit.pipe(wt(this.unsubscribe$)).subscribe(()=>{this.drawerRef.open()}),this.drawerRef.nzOnClose.subscribe(()=>{o?o().then(d=>{d!==!1&&this.drawerRef.close()}):this.drawerRef.close()}),this.drawerRef.afterClose.pipe(wt(this.unsubscribe$)).subscribe(()=>{this.overlayRef.dispose(),this.drawerRef=null,this.unsubscribe$.next(),this.unsubscribe$.complete()})}getInstance(){return this.drawerRef}updateOptions(t){Object.assign(this.drawerRef,t)}},BU=(()=>{let t=class t{constructor(o){this.overlay=o}create(o){return new s0(this.overlay,o).getInstance()}};t.\u0275fac=function(s){return new(s||t)(oi(lu))},t.\u0275prov=wn({token:t,factory:t.\u0275fac});let e=t;return e})(),XS=(()=>{let t=class t{};t.\u0275fac=function(s){return new(s||t)},t.\u0275mod=Wn({type:t}),t.\u0275inj=Hn({providers:[BU],imports:[Ld]});let e=t;return e})();function qU(e,t){e&1&&(st(0),E(1,"li",8)(2,"a",13),U(3,"Profile"),I()(),E(4,"li",8)(5,"a",14),U(6,"My Orders"),I()(),at())}function $U(e,t){e&1&&(st(0),E(1,"li",8)(2,"a",15),U(3,"Routes"),I()(),E(4,"li",8)(5,"a",16),U(6,"Stations"),I()(),E(7,"li",8)(8,"a",17),U(9,"Carriages"),I()(),at())}function ZU(e,t){if(e&1&&(st(0),E(1,"ul",7)(2,"li",8)(3,"a",9),U(4,"Home"),I()(),K(5,qU,7,0,"ng-container",10)(6,$U,10,0,"ng-container",10),st(7),E(8,"li",8)(9,"a",11),U(10,"Sign In"),I()(),E(11,"li",8)(12,"a",12),U(13,"Sign Up"),I()(),at(),I(),at()),e&2){let i=q(2);S(5),B("ngIf",i.role()==="user"||i.role()==="manager"),S(),B("ngIf",i.role()==="manager")}}function jU(e,t){if(e&1){let i=Ft();E(0,"div",2)(1,"button",3),it("click",function(){Xe(i);let s=q();return et(s.open())}),se(2,"span",4),I(),E(3,"nz-drawer",5),it("nzOnClose",function(){Xe(i);let s=q();return et(s.close())}),K(4,ZU,14,2,"ng-container",6),I()()}if(e&2){let i=q();S(3),B("nzVisible",i.visible)}}function UU(e,t){if(e&1){let i=Ft();st(0),E(1,"li",8)(2,"a",13),U(3,"Profile"),I()(),E(4,"li",8)(5,"a",14),U(6,"My Orders"),I()(),E(7,"button",19),it("click",function(){Xe(i);let s=q(2);return et(s.logout())}),U(8," Log out "),I(),at()}e&2&&(S(7),B("nzType","primary"))}function HU(e,t){e&1&&(st(0),E(1,"li",8)(2,"a",15),U(3,"Routes"),I()(),E(4,"li",8)(5,"a",16),U(6,"Stations"),I()(),E(7,"li",8)(8,"a",17),U(9,"Carriages"),I()(),at())}function WU(e,t){if(e&1&&(E(0,"ul",18)(1,"li",8)(2,"a",9),U(3,"Home"),I()(),K(4,UU,9,1,"ng-container",10)(5,HU,10,0,"ng-container",10),st(6),E(7,"li",8)(8,"a",11),U(9,"Sign In"),I()(),E(10,"li",8)(11,"a",12),U(12,"Sign Up"),I()(),at(),I()),e&2){let i=q();S(4),B("ngIf",i.role()==="user"||i.role()==="manager"),S(),B("ngIf",i.role()==="manager")}}var e2=(()=>{let t=class t{constructor(o,s,u){this.breakpointObserver=o,this.loginService=s,this.apiSer=u,this.isMobile=!1,this.isDesktop=!1,this.visible=!1,this.userName=Ls(""),this.email=Ls(""),this.role=Ls("guest"),this.profile=Qc(()=>({name:this.userName(),email:this.email(),role:this.role()}));let d=["(max-width: 600px)","(min-width: 601px) and (max-width: 900px)","(min-width: 901px)"],m=this.breakpointObserver.observe(d[0]),v=this.breakpointObserver.observe(d[2]);Wg([m,v]).pipe(Ta(([_,z])=>({isMobile:_.matches,isDesktop:z.matches}))).subscribe(({isMobile:_,isDesktop:z})=>{this.isMobile=_,this.isDesktop=z})}ngOnInit(){this.loginService.role$.subscribe(o=>{this.role.set(o)}),this.getProfile()}getProfile(){return ct(this,null,function*(){try{let o=yield this.apiSer.fetchProfile();this.userName.set(o.name),this.email.set(o.email),this.role.set(o.role)}catch(o){console.error("Error fetching profile:",o),this.role.set("")}})}logout(){this.loginService.logout(),this.role.set("")}open(){this.visible=!0}close(){this.visible=!1}};t.\u0275fac=function(s){return new(s||t)(Q(B_),Q(jr),Q(sv))},t.\u0275cmp=Ee({type:t,selectors:[["app-header"]],standalone:!0,features:[Oe],decls:3,vars:2,consts:[["desktopMenu",""],["class","burger",4,"ngIf","ngIfElse"],[1,"burger"],["nz-button","","nzType","text","nzSize","large",3,"click"],["nz-icon","","nzType","menu","nzTheme","outline"],["nzPlacement","left",3,"nzOnClose","nzVisible"],[4,"nzDrawerContent"],["nz-menu","","nzMode","inline"],["nz-menu-item",""],["routerLink","/"],[4,"ngIf"],["routerLink","/signin"],["routerLink","/signup"],["routerLink","/profile"],["routerLink","/orders"],["routerLink","/routes"],["routerLink","/stations"],["routerLink","/carriages"],["nz-menu","","nzMode","horizontal"],["nz-button","","nzDanger","",3,"click","nzType"]],template:function(s,u){if(s&1&&K(0,jU,5,1,"div",1)(1,WU,13,2,"ng-template",null,0,tt),s&2){let d=He(2);B("ngIf",u.isMobile)("ngIfElse",d)}},dependencies:[Ar,eh,rh,ih,Q_,mh,J_,XS,Ld,a0,Rr,Ai,Lr,Nr,Sn,Fn],styles:['.burger[_ngcontent-%COMP%]{box-sizing:border-box;margin:0;font-variant:tabular-nums;line-height:48px;font-feature-settings:"tnum";padding:0;color:#000000d9;font-size:14px;text-align:left;list-style:none;background:#fff;outline:none;box-shadow:0 3px 6px -4px #0000001f,0 6px 16px #00000014,0 9px 28px 8px #0000000d;transition:background .3s,width .3s cubic-bezier(.2,0,0,1) 0s}button[nz-button][_ngcontent-%COMP%]{z-index:1000}ul[nz-menu][_ngcontent-%COMP%]{line-height:64px}@media (max-width: 600px){ul[nz-menu][_ngcontent-%COMP%]{display:flex;flex-direction:column;line-height:normal}nz-drawer[_ngcontent-%COMP%]{padding-top:64px}}']});let e=t;return e})();var t2=["*"],VU=["nz-sider-trigger",""];function GU(e,t){}function KU(e,t){if(e&1&&K(0,GU,0,0,"ng-template",2),e&2){let i=q(),o=He(5);B("ngTemplateOutlet",i.nzZeroTrigger||o)}}function YU(e,t){}function JU(e,t){if(e&1&&K(0,YU,0,0,"ng-template",2),e&2){let i=q(),o=He(3);B("ngTemplateOutlet",i.nzTrigger||o)}}function QU(e,t){if(e&1&&se(0,"span",3),e&2){let i=q(2);B("nzType",i.nzCollapsed?"left":"right")}}function XU(e,t){if(e&1&&se(0,"span",3),e&2){let i=q(2);B("nzType",i.nzCollapsed?"right":"left")}}function eH(e,t){if(e&1&&K(0,QU,1,1,"span",3)(1,XU,1,1,"span",3),e&2){let i=q();pe(i.nzReverseArrow?0:1)}}function tH(e,t){e&1&&se(0,"span",4)}function nH(e,t){if(e&1){let i=Ft();E(0,"div",2),it("click",function(){Xe(i);let s=q();return et(s.setCollapsed(!s.nzCollapsed))}),I()}if(e&2){let i=q();B("matchBreakPoint",i.matchBreakPoint)("nzCollapsedWidth",i.nzCollapsedWidth)("nzCollapsed",i.nzCollapsed)("nzBreakpoint",i.nzBreakpoint)("nzReverseArrow",i.nzReverseArrow)("nzTrigger",i.nzTrigger)("nzZeroTrigger",i.nzZeroTrigger)("siderWidth",i.widthSetting)}}var n2=(()=>{let t=class t{constructor(o,s){this.elementRef=o,this.renderer=s,this.renderer.addClass(this.elementRef.nativeElement,"ant-layout-footer")}};t.\u0275fac=function(s){return new(s||t)(Q(qo),Q(Pa))},t.\u0275cmp=Ee({type:t,selectors:[["nz-footer"]],exportAs:["nzFooter"],standalone:!0,features:[Oe],ngContentSelectors:t2,decls:1,vars:0,template:function(s,u){s&1&&(pi(),mi(0))},encapsulation:2,changeDetection:0});let e=t;return e})();var i2=(()=>{let t=class t{constructor(){this.nzCollapsed=!1,this.nzReverseArrow=!1,this.nzZeroTrigger=null,this.nzTrigger=void 0,this.matchBreakPoint=!1,this.nzCollapsedWidth=null,this.siderWidth=null,this.nzBreakpoint=null,this.isZeroTrigger=!1,this.isNormalTrigger=!1}updateTriggerType(){this.isZeroTrigger=this.nzCollapsedWidth===0&&(this.nzBreakpoint&&this.matchBreakPoint||!this.nzBreakpoint),this.isNormalTrigger=this.nzCollapsedWidth!==0}ngOnInit(){this.updateTriggerType()}ngOnChanges(){this.updateTriggerType()}};t.\u0275fac=function(s){return new(s||t)},t.\u0275cmp=Ee({type:t,selectors:[["","nz-sider-trigger",""]],hostVars:10,hostBindings:function(s,u){s&2&&(Jn("width",u.isNormalTrigger?u.siderWidth:null),Bt("ant-layout-sider-trigger",u.isNormalTrigger)("ant-layout-sider-zero-width-trigger",u.isZeroTrigger)("ant-layout-sider-zero-width-trigger-right",u.isZeroTrigger&&u.nzReverseArrow)("ant-layout-sider-zero-width-trigger-left",u.isZeroTrigger&&!u.nzReverseArrow))},inputs:{nzCollapsed:"nzCollapsed",nzReverseArrow:"nzReverseArrow",nzZeroTrigger:"nzZeroTrigger",nzTrigger:"nzTrigger",matchBreakPoint:"matchBreakPoint",nzCollapsedWidth:"nzCollapsedWidth",siderWidth:"siderWidth",nzBreakpoint:"nzBreakpoint"},exportAs:["nzSiderTrigger"],standalone:!0,features:[bn,Oe],attrs:VU,decls:6,vars:2,consts:[["defaultTrigger",""],["defaultZeroTrigger",""],[3,"ngTemplateOutlet"],["nz-icon","",3,"nzType"],["nz-icon","","nzType","bars"]],template:function(s,u){s&1&&K(0,KU,1,1,null,2)(1,JU,1,1,null,2)(2,eH,2,1,"ng-template",null,0,tt)(4,tH,1,0,"ng-template",null,1,tt),s&2&&(pe(u.isZeroTrigger?0:-1),S(),pe(u.isNormalTrigger?1:-1))},dependencies:[Tr,Sn,Fn],encapsulation:2,changeDetection:0});let e=t;return e})(),iH=(()=>{let t=class t{updateStyleMap(){this.widthSetting=this.nzCollapsed?`${this.nzCollapsedWidth}px`:Rs(this.nzWidth),this.flexSetting=`0 0 ${this.widthSetting}`,this.cdr.markForCheck()}updateMenuInlineCollapsed(){this.nzMenuDirective&&this.nzMenuDirective.nzMode==="inline"&&this.nzCollapsedWidth!==0&&this.nzMenuDirective.setInlineCollapsed(this.nzCollapsed)}setCollapsed(o){o!==this.nzCollapsed&&(this.nzCollapsed=o,this.nzCollapsedChange.emit(o),this.updateMenuInlineCollapsed(),this.updateStyleMap(),this.cdr.markForCheck())}constructor(o,s,u){this.platform=o,this.cdr=s,this.breakpointService=u,this.destroy$=new Rn,this.nzMenuDirective=null,this.nzCollapsedChange=new Bn,this.nzWidth=200,this.nzTheme="dark",this.nzCollapsedWidth=80,this.nzBreakpoint=null,this.nzZeroTrigger=null,this.nzTrigger=void 0,this.nzReverseArrow=!1,this.nzCollapsible=!1,this.nzCollapsed=!1,this.matchBreakPoint=!1,this.flexSetting=null,this.widthSetting=null}ngOnInit(){this.updateStyleMap(),this.platform.isBrowser&&this.breakpointService.subscribe(k_,!0).pipe(wt(this.destroy$)).subscribe(o=>{let s=this.nzBreakpoint;s&&T_().subscribe(()=>{this.matchBreakPoint=!o[s],this.setCollapsed(this.matchBreakPoint),this.cdr.markForCheck()})})}ngOnChanges(o){let{nzCollapsed:s,nzCollapsedWidth:u,nzWidth:d}=o;(s||u||d)&&this.updateStyleMap(),s&&this.updateMenuInlineCollapsed()}ngAfterContentInit(){this.updateMenuInlineCollapsed()}ngOnDestroy(){this.destroy$.next(!0),this.destroy$.complete()}};t.\u0275fac=function(s){return new(s||t)(Q(L_),Q(cn),Q(q_))},t.\u0275cmp=Ee({type:t,selectors:[["nz-sider"]],contentQueries:function(s,u,d){if(s&1&&Zo(d,mh,5),s&2){let m;Yt(m=Jt())&&(u.nzMenuDirective=m.first)}},hostAttrs:[1,"ant-layout-sider"],hostVars:18,hostBindings:function(s,u){s&2&&(Jn("flex",u.flexSetting)("max-width",u.widthSetting)("min-width",u.widthSetting)("width",u.widthSetting),Bt("ant-layout-sider-zero-width",u.nzCollapsed&&u.nzCollapsedWidth===0)("ant-layout-sider-light",u.nzTheme==="light")("ant-layout-sider-dark",u.nzTheme==="dark")("ant-layout-sider-collapsed",u.nzCollapsed)("ant-layout-sider-has-trigger",u.nzCollapsible&&u.nzTrigger!==null))},inputs:{nzWidth:"nzWidth",nzTheme:"nzTheme",nzCollapsedWidth:"nzCollapsedWidth",nzBreakpoint:"nzBreakpoint",nzZeroTrigger:"nzZeroTrigger",nzTrigger:"nzTrigger",nzReverseArrow:[2,"nzReverseArrow","nzReverseArrow",pt],nzCollapsible:[2,"nzCollapsible","nzCollapsible",pt],nzCollapsed:[2,"nzCollapsed","nzCollapsed",pt]},outputs:{nzCollapsedChange:"nzCollapsedChange"},exportAs:["nzSider"],standalone:!0,features:[kn,bn,Oe],ngContentSelectors:t2,decls:3,vars:1,consts:[[1,"ant-layout-sider-children"],["nz-sider-trigger","",3,"matchBreakPoint","nzCollapsedWidth","nzCollapsed","nzBreakpoint","nzReverseArrow","nzTrigger","nzZeroTrigger","siderWidth"],["nz-sider-trigger","",3,"click","matchBreakPoint","nzCollapsedWidth","nzCollapsed","nzBreakpoint","nzReverseArrow","nzTrigger","nzZeroTrigger","siderWidth"]],template:function(s,u){s&1&&(pi(),E(0,"div",0),mi(1),I(),K(2,nH,1,8,"div",1)),s&2&&(S(2),pe(u.nzCollapsible&&u.nzTrigger!==null?2:-1))},dependencies:[i2],encapsulation:2,changeDetection:0});let e=t;return e})();var r2=(()=>{let t=class t{};t.\u0275fac=function(s){return new(s||t)},t.\u0275mod=Wn({type:t}),t.\u0275inj=Hn({imports:[iH,i2]});let e=t;return e})();var o2=(()=>{let t=class t{};t.\u0275fac=function(s){return new(s||t)},t.\u0275cmp=Ee({type:t,selectors:[["app-footer"]],standalone:!0,features:[Oe],decls:2,vars:0,consts:[[2,"text-align","center"]],template:function(s,u){s&1&&(E(0,"nz-footer",0),U(1,` \xA9 2024 RSS Team DavaySoberemsya
`),I())},dependencies:[r2,n2]});let e=t;return e})();var s2=(()=>{let t=class t{constructor(){this.title="train-a"}};t.\u0275fac=function(s){return new(s||t)},t.\u0275cmp=Ee({type:t,selectors:[["app-root"]],standalone:!0,features:[Oe],decls:4,vars:0,consts:[[1,"container"]],template:function(s,u){s&1&&(se(0,"app-header"),E(1,"div",0),se(2,"router-outlet"),I(),se(3,"app-footer"))},dependencies:[w_,e2,o2]});let e=t;return e})();oS().then(()=>C_(s2,YS)).catch(e=>console.error(e));
